 -- Due to the sensitivity this file can only be copied



-- DO NOT EDIT - AUTOMATICALLY GENERATED --
-- vim:ft=lua ts=2 nu
-- exported by: S2Quest@S2QUEST-VPC
-- exported at: 10/21/09 14:56:36
-- exporter version: 1.0.0.132
-- exported to: server\questscripts.txt
--
-- CM-Patch 0155 Beta 5
--

function string:split( inSplitPattern, outResults )
if not outResults then
outResults = { }
end
local theStart = 1
local theSplitStart, theSplitEnd = string.find( self, inSplitPattern, theStart )
while theSplitStart do
table.insert( outResults, string.sub( self, theStart, theSplitStart-1 ) )
theStart = theSplitEnd + 1
theSplitStart, theSplitEnd = string.find( self, inSplitPattern, theStart )
end
table.insert( outResults, tonumber(string.sub( self, theStart )))
return outResults
end
CM_convertPosition_To_SimpleTable = function(args)
local pos_table = {}
local pos_args
local i
if type(args)=="string" then
pos_args = string.split(args,";")
else
pos_args=args
end
if type(pos_args)=="table" then
if pos_args.sx then
pos_table[1] = pos_args.sx
elseif pos_args.x then
pos_table[1] = floor(pos_args.x / 3200)
else
pos_table[1] = pos_args[1]
end
if pos_args.sy then
pos_table[2] = pos_args.sy
elseif pos_args.y then
pos_table[2] = floor(pos_args.y / 3200)
else
pos_table[2] = pos_args[2]
end
if pos_args.sz then
pos_table[3] = pos_args.sz
elseif pos_args.layer then
pos_table[3] = pos_args.layer
else
pos_table[3] = pos_args[3]
end
if pos_args.px then
pos_table[4] = pos_args.px
elseif pos_args.x then
pos_table[4] = pos_args.x - (pos_table[1] * 3200)
else
pos_table[4] = pos_args[4]
end
if pos_args.py then
pos_table[5] = pos_args.py
elseif pos_args.y then
pos_table[5] = pos_args.y - (pos_table[2] * 3200)
else
pos_table[5] = pos_args[5]
end
if pos_args.pz then
pos_table[6] = pos_args.pz
elseif pos_args.z then
pos_table[6] = pos_args.z
else
pos_table[6] = pos_args[6]
end
if pos_args.orientation then
pos_table[7] = pos_args.orientation
else
pos_table[7] = pos_args[7]
end
end
return pos_table
end
CM_convertPosition_To_NamedTable = function(args)
local pos_table = {}
local pos_named = {}
pos_table = CM_convertPosition_To_SimpleTable(args)
pos_named.sx = pos_table[1]
pos_named.sy = pos_table[2]
pos_named.sz = pos_table[3]
pos_named.px = pos_table[4]
pos_named.py = pos_table[5]
pos_named.pz = pos_table[6]
pos_named.orientation = pos_table[7]
return pos_named
end
CM_convertPosition_To_NamedLinearTable = function(args)
local pos_table = {}
local pos_linear_named = {}
pos_table = CM_convertPosition_To_SimpleTable(args)
pos_linear_named.x = pos_table[1] * 3200 + pos_table[4]
pos_linear_named.y = pos_table[2] * 3200 + pos_table[5]
pos_linear_named.layer = pos_table[3]
pos_linear_named.z = pos_table[6]
pos_linear_named.orientation = pos_table[7]
return pos_linear_named
end
CM_convertPosition_To_String = function(args)
local pos_table = {}
local pos_string
pos_table = CM_convertPosition_To_SimpleTable(args)
pos_string = string.format("%d;%d;%d;%.3f;%.3f;%.3f;%.3f",pos_table[1],pos_table[2],pos_table[3],pos_table[4],pos_table[5],pos_table[6],pos_table[7])
return pos_string
end
getn = function(table)
local max = 0
for i, n in ipairs(table) do
max = i
end
return max
end
onReset = function()
WeatherDefinitions = {}
WEATHERFLAG_NIGHT = 1
WEATHERFLAG_LIGHTNING = 2
WEATHERFLAG_RAIN = 4
WEATHERFLAG_WIND = 8
WEATHERFLAG_EARTHQUAKE = 16
WEATHERFLAG_FOG = 32
WEATHERFLAG_GROUNDFOG = 64
WEATHERFLAG_HIGHNOON = 128
MOVIE_INTRO = 1
MOVIE_OUTRO_LIGHT = 2
MOVIE_OUTRO_SHADOW = 3
MOVIE_CONCERT = 4
CM_SessionOnline = false
end
onInitWorldobjects = function(heroRef)
setWoobEffect { effect = "FXTYPE_SMOKEBIGWHITE", woid = 1021408807 }
setWoobEffect { effect = "FXTYPE_QFX_SERAGATE", woid = 1021159739 }
setWoobEffect { effect = "FXTYPE_QFX_SERAGATE", woid = 1022534681 }
setWoobEffect { effect = "FXTYPE_QFX_SERAGATE", woid = 1051481207 }
setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1051481207 }
setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023046854 }
setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023046905 }
setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023046923 }
setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023046947 }
setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023047062 }
setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023047090 }
setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023047109 }
setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023047127 }
setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1024204972 }
setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1022995142 }
setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1017520695 }
setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1017465035 }
setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1024277602 }
setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023948046 }
setWoobEffect { effect = "FXTYPE_INVALID", woid = 1021159739 }
setWoobEffect { effect = "FXTYPE_SIMPLELIGHT3", woid = 1023050165 }
setWoobEffect { effect = "FXTYPE_SIMPLELIGHT3", woid = 1023050183 }
setWoobEffect { effect = "FXTYPE_SIMPLELIGHT3", woid = 1023050188 }
setWoobEffect { effect = "FXTYPE_SIMPLELIGHT3", woid = 1023050229 }
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586748}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586682}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586759}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586825}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586872}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586885}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586900}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586933}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586908}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1017607326}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016587159}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1017608818}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1017608808}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016587115}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016587093}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016587237}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016587057}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016587049}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016587036}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586993}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586997}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586984}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016587006}
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1022534330}
setWoobEffect {effect="FXTYPE_PORTAL2", woid=1050110364}
setWoobEffect {effect="FXTYPE_PORTAL2", woid=1052616164}
setWoobEffect { effect = "FTYPE_MAGICLIGHT", woid = 1050703067 }
setWoobEffect { effect = "FTYPE_MAGICLIGHT", woid = 1050703089 }
setWoobEffect { effect = "FTYPE_MAGICLIGHT", woid = 1050703098 }
setWoobEffect { effect = "FTYPE_MAGICLIGHT", woid = 1050703107 }
math.randomseed()
end
msg_itemReceived = function(args)
CM_SessionOnline = true
questMessage {
line = 2,
lokaid = "QUEST_ITEM",
paramid = args.paramid,
color = "#ffff11",
delay = 0.5,
duration = 9.5,
fadeIn = 0.5,
fadeOut = 1.0,
}
CM_GarbageCollect()
end
msg_questAccepted = function(args)
local id = args.id
CM_SessionOnline = true
CM_TimerStartUp (args)
questMessage {
line = 1,
lokaid = "QUEST_ACCEPTED",
color = "#0088ff",
delay = 0.5,
duration = 9.5,
fadeIn = 0.5,
fadeOut = 1.0,
}
questMessage {
line = 0,
textid = "QUEST_TITLE",
questid = id,
color = "#ffff11",
duration = 10.0,
fadeIn = 0.5,
fadeOut = 1.0,
}
CM_GarbageCollect()
end
msg_questWon = function(args)
local id = getQuestBookEntryID{ id = args.id }
CM_SessionOnline = true
questMessage {
line = 1,
lokaid = "QUEST_COMPLETED",
color = "#00ff00",
delay = 0.5,
duration = 9.5,
fadeIn = 0.5,
fadeOut = 1.0,
}
questMessage {
line = 0,
textid = "QUEST_TITLE",
questid = id,
color = "#ffff11",
duration = 10.0,
fadeIn = 0.5,
fadeOut = 1.0,
}
CM_GarbageCollect()
end
msg_questLost = function(args)
local id = getQuestBookEntryID{ id = args.id }
CM_SessionOnline = true
questMessage {
line = 1,
lokaid = "QUEST_FAILED",
color = "#ff0000",
delay = 0.5,
duration = 9.5,
fadeIn = 0.5,
fadeOut = 1.0,
}
questMessage {
line = 0,
textid = "QUEST_TITLE",
questid = id,
color = "#ffff11",
duration = 10.0,
fadeIn = 0.5,
fadeOut = 1.0,
}
CM_GarbageCollect()
end
onHeroJoined = function(args)
unlockPortal {
heroRef = args.heroRef,
portal = 8,
type = "PORTALTYPE_SHIP_NORTH",
}
unlockPortal {
heroRef = args.heroRef,
portal = 7,
type = "PORTALTYPE_SHIP_SOUTH",
}
if not args.singleplayer and not args.campaign then
unlockPortal {
heroRef = args.heroRef,
portal = 3,
type = "PORTALTYPE_SHIP_SOUTH",
}
unlockPortal {
heroRef = args.heroRef,
portal = 2,
type = "PORTALTYPE_SHIP_NORTH",
}
unlockPortal {
heroRef = args.heroRef,
portal = 1,
type = "PORTALTYPE_SHIP_SOUTH",
}
end
end
_AREA_CENTER_DESERT_BACKUP_1 = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=1464,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1647,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1465,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1466,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1467,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1642,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1643,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1644,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1645,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1646,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1493,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1652,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1494,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1495,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1496,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1573,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1648,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1649,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1650,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1651,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=2,
CID=962,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1216,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1217,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1218,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1219,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=481,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1575,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1576,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1577,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=480,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1212,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1213,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1214,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1215,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1492,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1578,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1579,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1580,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=3,
CID=476,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1659,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1220,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1221,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1222,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1223,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1653,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1655,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1657,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1658,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=477,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1662,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1497,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1498,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1499,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1574,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1654,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1656,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1660,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1661,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=200 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_DESERT_BACKUP_2 = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=1464,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1647,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1465,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1466,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1467,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1642,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1643,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1644,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1645,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1646,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1493,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1652,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1494,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1495,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1496,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1573,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1648,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1649,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1650,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1651,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=2,
CID=962,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1216,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1217,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1218,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1219,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=481,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1575,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1576,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1577,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=480,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1212,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1213,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1214,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1215,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1492,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1578,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1579,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1580,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=3,
CID=476,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1659,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1220,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1221,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1222,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1223,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1653,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1655,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1657,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1658,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=477,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1662,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1497,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1498,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1499,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1574,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1654,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1656,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1660,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1661,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=150 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_DESERT_BACKUP_3 = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=1464,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1647,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1465,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1466,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1467,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1642,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1643,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1644,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1645,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1646,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1493,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1652,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1494,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1495,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1496,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1573,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1648,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1649,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1650,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1651,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=2,
CID=962,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1216,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1217,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1218,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1219,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=481,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1575,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1576,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1577,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=480,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1212,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1213,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1214,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1215,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1492,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1578,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1579,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1580,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=3,
CID=476,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1659,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1220,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1221,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1222,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1223,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1653,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1655,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1657,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1658,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=477,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1662,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1497,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1498,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1499,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1574,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1654,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1656,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1660,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1661,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=100 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_DESERT_CAPITAL = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=1464,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1647,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1465,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1466,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1467,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1642,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1643,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1644,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1645,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1646,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1493,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1652,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1494,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1495,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1496,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1573,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1648,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1649,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1650,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1651,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=2,
CID=962,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1216,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1217,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1218,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1219,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=481,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1575,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1576,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1577,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=480,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1212,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1213,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1214,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1215,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1492,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1578,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1579,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1580,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=3,
CID=476,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1659,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1220,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1221,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1222,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1223,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1653,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1655,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1657,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1658,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=477,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1662,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1497,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1498,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1499,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1574,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1654,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1656,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1660,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1661,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=500 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_DESERT_TOWN = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=1464,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1647,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1465,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1466,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1467,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1642,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1643,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1644,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1645,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1646,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1493,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1652,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1494,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1495,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1496,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1573,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1648,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1649,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1650,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1651,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=2,
CID=962,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1216,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1217,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1218,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1219,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=481,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1575,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1576,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1577,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=480,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1212,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1213,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1214,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1215,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1492,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1578,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1579,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1580,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=3,
CID=476,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1659,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1220,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1221,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1222,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1223,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1653,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1655,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1657,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1658,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=477,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1662,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1497,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1498,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1499,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1574,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1654,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1656,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1660,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1661,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=400 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_DESERT_VILLAGE = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=1464,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1647,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1465,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1466,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1467,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1642,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1643,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1644,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1645,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1646,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1493,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1652,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1494,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1495,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1496,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1573,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1648,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1649,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1650,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=1,
CID=1651,
Behaviour="JOB_RICH_STATIST",
Faction=31,
Equipment=34,
},
{
Tag=2,
CID=962,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1216,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1217,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1218,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1219,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=481,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1575,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1576,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1577,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=480,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1212,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1213,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1214,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1215,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1492,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1578,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1579,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=2,
CID=1580,
Behaviour="JOB_KID",
Faction=31,
Equipment=43,
},
{
Tag=3,
CID=476,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1659,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1220,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1221,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1222,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1223,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1653,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1655,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1657,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1658,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=477,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1662,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1497,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1498,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1499,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1574,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1654,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1656,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1660,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
{
Tag=3,
CID=1661,
Behaviour="JOB_POOR_STATIST",
Faction=31,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=300 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_DRAGON_BIG = function(wpos)
local AreaCreatures={
{
Tag=2,
CID=92,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=699,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=700,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=701,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=989,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=990,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=290,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=683,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=684,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=846,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=613,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=687,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=688,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=847,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=3,
CID=574,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=575,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=576,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=320,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=322,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=997,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=998,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=999,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1000,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1001,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=330,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=324,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=983,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=984,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=985,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=978,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=332,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=979,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=980,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=400 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_DRAGON_SMALL = function(wpos)
local AreaCreatures={
{
Tag=2,
CID=92,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=699,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=700,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=701,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=989,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=990,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=290,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=683,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=684,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=846,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=613,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=687,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=688,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=847,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=3,
CID=574,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=575,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=576,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=320,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=322,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=997,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=998,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=999,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1000,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1001,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=330,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=324,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=983,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=984,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=985,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=978,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=332,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=979,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=980,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=200 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_DRYADS_BACKUP_1 = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=218,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=219,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=220,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=221,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=222,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=223,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=224,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=225,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=2,
CID=294,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=533,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1600,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1688,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1689,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1690,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1691,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=295,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=534,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1601,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=3,
CID=1500,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1569,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1570,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1602,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1603,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1604,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1605,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1625,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1692,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1693,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1694,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1695,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1696,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1697,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1698,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1699,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1479,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1480,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1481,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1482,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1565,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1566,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1567,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1568,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1700,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1701,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1702,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1703,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1704,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1705,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1706,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1707,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1708,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=200 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_DRYADS_BACKUP_2 = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=218,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=219,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=220,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=221,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=222,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=223,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=224,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=225,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=2,
CID=294,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=533,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1600,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1688,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1689,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1690,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1691,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=295,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=534,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1601,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=3,
CID=1500,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1569,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1570,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1602,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1603,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1604,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1605,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1625,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1692,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1693,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1694,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1695,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1696,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1697,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1698,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1699,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1479,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1480,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1481,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1482,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1565,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1566,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1567,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1568,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1700,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1701,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1702,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1703,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1704,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1705,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1706,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1707,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1708,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=150 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_DRYADS_BACKUP_3 = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=218,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=219,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=220,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=221,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=222,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=223,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=224,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=225,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=2,
CID=294,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=533,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1600,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1688,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1689,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1690,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1691,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=295,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=534,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1601,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=3,
CID=1500,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1569,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1570,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1602,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1603,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1604,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1605,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1625,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1692,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1693,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1694,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1695,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1696,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1697,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1698,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1699,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1479,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1480,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1481,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1482,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1565,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1566,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1567,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1568,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1700,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1701,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1702,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1703,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1704,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1705,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1706,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1707,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1708,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=100 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_DRYADS_CAPITAL = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=218,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=219,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=220,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=221,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=222,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=223,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=224,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=225,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=2,
CID=294,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=533,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1600,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1688,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1689,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1690,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1691,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=295,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=534,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1601,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=3,
CID=1500,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1569,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1570,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1602,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1603,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1604,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1605,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1625,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1692,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1693,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1694,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1695,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1696,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1697,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1698,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1699,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1479,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1480,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1481,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1482,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1565,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1566,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1567,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1568,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1700,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1701,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1702,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1703,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1704,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1705,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1706,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1707,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1708,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=500 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_DRYADS_TOWN = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=218,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=219,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=220,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=221,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=222,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=223,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=224,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=225,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=2,
CID=294,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=533,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1600,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1688,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1689,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1690,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1691,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=295,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=534,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1601,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=3,
CID=1500,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1569,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1570,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1602,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1603,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1604,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1605,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1625,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1692,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1693,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1694,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1695,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1696,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1697,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1698,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1699,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1479,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1480,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1481,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1482,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1565,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1566,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1567,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1568,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1700,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1701,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1702,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1703,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1704,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1705,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1706,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1707,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1708,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=400 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_DRYADS_VILLAGE = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=218,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=219,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=220,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=221,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=222,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=223,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=224,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=1,
CID=225,
Behaviour="JOB_RICH_STATIST",
Faction=17,
Equipment=34,
},
{
Tag=2,
CID=294,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=533,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1600,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1688,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1689,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1690,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1691,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=295,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=534,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=2,
CID=1601,
Behaviour="JOB_KID",
Faction=17,
Equipment=43,
},
{
Tag=3,
CID=1500,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1569,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1570,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1602,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1603,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1604,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1605,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1625,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1692,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1693,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1694,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1695,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1696,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1697,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1698,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1699,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1479,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1480,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1481,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1482,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1565,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1566,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1567,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1568,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1700,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1701,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1702,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1703,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1704,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1705,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1706,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1707,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
{
Tag=3,
CID=1708,
Behaviour="JOB_POOR_STATIST",
Faction=17,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=300 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_GHOSTVILLAGE = function(wpos)
local AreaCreatures={
Creature={
Tag=2,
CID=1077,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
Creature={
Tag=2,
CID=1076,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
Creature={
Tag=3,
CID=1080,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
Creature={
Tag=3,
CID=1078,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
Creature={
Tag=3,
CID=1079,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
Creature={
Tag=3,
CID=1081,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=300 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_HE_BACKUP_3 = function(wpos)
local AreaCreatures={
{
Tag=2,
CID=92,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=699,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=700,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=701,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=989,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=990,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=290,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=683,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=684,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=846,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=613,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=687,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=688,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=847,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=3,
CID=574,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=575,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=576,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=320,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=322,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=997,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=998,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=999,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1000,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1001,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=330,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=324,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=983,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=984,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=985,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=978,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=332,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=979,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=980,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=50 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_HE_SLUMS = function(wpos)
local AreaCreatures={
{
Tag=2,
CID=92,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=699,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=700,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=701,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=989,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=990,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=290,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=683,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=684,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=846,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=613,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=687,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=688,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=847,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=3,
CID=574,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=575,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=576,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=320,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=322,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=997,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=998,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=999,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1000,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1001,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=330,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=324,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=983,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=984,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=985,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=978,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=332,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=979,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=980,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=500 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_HE_TOWN = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=84,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=828,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=829,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=830,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=519,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=85,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=831,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=833,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=834,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=835,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=836,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=837,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=838,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=5,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=815,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=816,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=817,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=8,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=821,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=822,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=823,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=9,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=824,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=825,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=826,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=10,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=11,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=138,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=658,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=83,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=133,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=134,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=135,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=136,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=844,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=845,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=118,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=2,
CID=92,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=699,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=700,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=701,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=989,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=990,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=290,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=683,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=684,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=846,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=613,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=687,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=688,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=847,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=3,
CID=574,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=575,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=576,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=320,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=322,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=997,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=998,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=999,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1000,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1001,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=330,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=324,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=983,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=984,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=985,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=978,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=332,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=979,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=980,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=400 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_HE_VILLAGE = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=84,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=828,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=829,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=830,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=519,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=85,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=831,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=833,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=834,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=835,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=836,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=837,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=838,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=5,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=815,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=816,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=817,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=8,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=821,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=822,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=823,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=9,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=824,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=825,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=826,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=10,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=11,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=138,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=658,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=83,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=133,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=134,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=135,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=136,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=844,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=845,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=1,
CID=118,
Behaviour="JOB_RICH_STATIST",
Faction=14,
Equipment=34,
},
{
Tag=2,
CID=92,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=699,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=700,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=701,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=989,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=990,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=290,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=683,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=684,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=846,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=613,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=687,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=688,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=2,
CID=847,
Behaviour="JOB_KID",
Faction=14,
Equipment=43,
},
{
Tag=3,
CID=574,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=575,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=576,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=320,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=322,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=997,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=998,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=999,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1000,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1001,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=330,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=324,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=983,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=984,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=985,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=978,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=332,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=979,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=980,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=300 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_HUMANS_BACKUP_1 = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=316,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=325,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=318,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=1072,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=327,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=994,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=995,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=1043,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=2,
CID=321,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=736,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=691,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=692,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=966,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=329,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=963,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=578,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=965,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=323,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=331,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=712,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=3,
CID=574,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=575,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=576,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=320,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=322,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=997,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=998,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=999,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1000,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1001,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=330,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=324,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=983,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=984,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=985,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=978,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=332,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=979,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=980,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=200 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_HUMANS_BACKUP_2 = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=316,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=325,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=318,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=1072,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=327,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=994,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=995,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=1043,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=2,
CID=321,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=736,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=691,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=692,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=966,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=329,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=963,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=578,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=965,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=323,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=331,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=712,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=3,
CID=574,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=575,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=576,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=320,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=322,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=997,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=998,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=999,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1000,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1001,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=330,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=324,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=983,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=984,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=985,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=978,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=332,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=979,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=980,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=150 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_HUMANS_BACKUP_3 = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=316,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=325,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=318,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=1072,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=327,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=994,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=995,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=1043,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=2,
CID=321,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=736,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=691,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=692,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=966,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=329,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=963,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=578,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=965,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=323,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=331,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=712,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=3,
CID=574,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=575,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=576,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=320,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=322,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=997,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=998,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=999,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1000,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1001,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=330,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=324,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=983,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=984,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=985,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=978,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=332,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=979,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=980,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=100 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_HUMANS_CAPITAL = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=316,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=325,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=318,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=1072,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=327,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=994,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=995,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=1043,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=2,
CID=321,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=736,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=691,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=692,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=966,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=329,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=963,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=578,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=965,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=323,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=331,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=712,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=3,
CID=574,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=575,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=576,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=320,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=322,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=997,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=998,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=999,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1000,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1001,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=330,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=324,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=983,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=984,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=985,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=978,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=332,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=979,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=980,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=500 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_HUMANS_TOWN = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=316,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=325,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=318,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=1072,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=327,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=994,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=995,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=1043,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=2,
CID=321,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=736,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=691,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=692,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=966,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=329,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=963,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=578,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=965,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=323,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=331,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=712,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=3,
CID=574,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=575,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=576,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=320,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=322,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=997,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=998,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=999,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1000,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1001,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=330,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=324,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=983,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=984,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=985,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=978,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=332,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=979,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=980,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=400 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_HUMANS_VILLAGE = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=316,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=325,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=318,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=1072,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=327,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=994,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=995,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=1,
CID=1043,
Behaviour="JOB_RICH_STATIST",
Faction=12,
Equipment=34,
},
{
Tag=2,
CID=321,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=736,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=691,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=692,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=966,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=329,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=963,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=578,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=965,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=323,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=331,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=2,
CID=712,
Behaviour="JOB_KID",
Faction=12,
Equipment=43,
},
{
Tag=3,
CID=574,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=575,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=576,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=320,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=322,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=997,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=998,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=999,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1000,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=1001,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=330,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=324,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=983,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=984,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=985,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=978,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=332,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=979,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
{
Tag=3,
CID=980,
Behaviour="JOB_POOR_STATIST",
Faction=12,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=400 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_LIZARD_1 = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=1047,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1473,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1474,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1475,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1476,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1477,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1827,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1828,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1829,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1830,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1831,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1832,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=3,
CID=1105,
Behaviour="JOB_POOR_STATIST",
Faction=32,
Equipment=33,
},
{
Tag=3,
CID=1161,
Behaviour="JOB_POOR_STATIST",
Faction=32,
Equipment=33,
},
{
Tag=3,
CID=1162,
Behaviour="JOB_POOR_STATIST",
Faction=32,
Equipment=33,
},
{
Tag=3,
CID=1106,
Behaviour="JOB_POOR_STATIST",
Faction=32,
Equipment=33,
},
{
Tag=3,
CID=1163,
Behaviour="JOB_POOR_STATIST",
Faction=32,
Equipment=33,
},
{
Tag=3,
CID=1164,
Behaviour="JOB_POOR_STATIST",
Faction=32,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=400 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_LIZARD_2 = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=1047,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1473,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1474,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1475,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1476,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1477,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1827,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1828,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1829,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1830,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1831,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=1,
CID=1832,
Behaviour="JOB_RICH_STATIST",
Faction=32,
Equipment=34,
},
{
Tag=3,
CID=1105,
Behaviour="JOB_POOR_STATIST",
Faction=32,
Equipment=33,
},
{
Tag=3,
CID=1161,
Behaviour="JOB_POOR_STATIST",
Faction=32,
Equipment=33,
},
{
Tag=3,
CID=1162,
Behaviour="JOB_POOR_STATIST",
Faction=32,
Equipment=33,
},
{
Tag=3,
CID=1106,
Behaviour="JOB_POOR_STATIST",
Faction=32,
Equipment=33,
},
{
Tag=3,
CID=1163,
Behaviour="JOB_POOR_STATIST",
Faction=32,
Equipment=33,
},
{
Tag=3,
CID=1164,
Behaviour="JOB_POOR_STATIST",
Faction=32,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=400 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_ORC_FACTION_BLUE = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=1439,
Behaviour="JOB_RICH_STATIST",
Faction=16,
Equipment=34,
},
{
Tag=1,
CID=1443,
Behaviour="JOB_RICH_STATIST",
Faction=16,
Equipment=34,
},
{
Tag=1,
CID=1448,
Behaviour="JOB_RICH_STATIST",
Faction=16,
Equipment=34,
},
{
Tag=1,
CID=1452,
Behaviour="JOB_RICH_STATIST",
Faction=16,
Equipment=34,
},
{
Tag=3,
CID=1155,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1156,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1157,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1158,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1159,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1160,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1583,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1584,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1585,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=297,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1442,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=298,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1446,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1617,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=299,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1619,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1447,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=300,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1451,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1620,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1622,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=500 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_ORC_FACTION_RED = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=1440,
Behaviour="JOB_RICH_STATIST",
Faction=16,
Equipment=34,
},
{
Tag=1,
CID=1444 ,
Behaviour="JOB_RICH_STATIST",
Faction=16,
Equipment=34,
},
{
Tag=1,
CID=1449,
Behaviour="JOB_RICH_STATIST",
Faction=16,
Equipment=34,
},
{
Tag=1,
CID=1453,
Behaviour="JOB_RICH_STATIST",
Faction=16,
Equipment=34,
},
{
Tag=1,
CID=945,
Behaviour="JOB_RICH_STATIST",
Faction=16,
Equipment=34,
},
{
Tag=3,
CID=1155,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1156,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1157,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1158,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1159,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1160,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1583,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1584,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1585,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=297,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1442,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=298,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1446,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1617,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=299,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1619,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1447,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=300,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1451,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1620,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1622,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=500 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
_AREA_CENTER_ORC_FACTION_YELLOW = function(wpos)
local AreaCreatures={
{
Tag=1,
CID=1441,
Behaviour="JOB_RICH_STATIST",
Faction=16,
Equipment=34,
},
{
Tag=1,
CID=1445,
Behaviour="JOB_RICH_STATIST",
Faction=16,
Equipment=34,
},
{
Tag=1,
CID=1450,
Behaviour="JOB_RICH_STATIST",
Faction=16,
Equipment=34,
},
{
Tag=1,
CID=1454,
Behaviour="JOB_RICH_STATIST",
Faction=16,
Equipment=34,
},
{
Tag=1,
CID=920,
Behaviour="JOB_RICH_STATIST",
Faction=16,
Equipment=34,
},
{
Tag=3,
CID=1155,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1156,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1157,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1158,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1159,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1160,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1583,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1584,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1585,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=297,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1442,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=298,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1446,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1617,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=299,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1619,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1447,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=300,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1451,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1620,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
{
Tag=3,
CID=1622,
Behaviour="JOB_POOR_STATIST",
Faction=16,
Equipment=33,
},
}
local points,numPoints = getSpawnPoints { position=wpos,radius=500 }
local creatures = getn(AreaCreatures)
if points then
for id,object in ipairs(points) do
local randomnumber = math.floor(math.random(1,creatures))
spawnCreature {
behaviour=AreaCreatures[randomnumber].Behaviour,
creature_id=AreaCreatures[randomnumber].CID,
faction_id=AreaCreatures[randomnumber].Faction,
equipset_id=AreaCreatures[randomnumber].Equipment,
mortality=0,
position=object }
end
end
end
creatureGotoPos = function(tcid, pos, angle, speed, followBhv, delay)
local p
local a,d,f,s
if tcid then
p = CM_convertPosition_To_NamedTable (pos)
if p.sx and p.sy and p.sz and p.px and p.py and p.pz then
a = nil
if p.orientation then a = p.orientation end
if angle then a = angle end
if delay then d = delay else d = 0 end
if speed then s = speed else s = 1 end
if followBhv then f = followBhv else f = nil end
changeCreature{
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
followUpBhv = f,
gotoPosition = p,
speed = s,
dont_turn = false,
followUpAngle = a,
orientation = a,
delay = d,
}
if not CM_SessionOnline then
teleport {
tcid = tcid,
position = p,
orientation = a,
delay = d + 17,
}
end
end
end
end
addGold = function(value)
local current = getGold()
local value2 = value*(-1)
if value < 0 and value2 > current then
return false;
else
new = current + value
setGold( new )
return true
end
end
doEmote = function(tcid, emotion, loopCount, delay)
if not loopCount then loopCount = -1 end
if not delay then delay = 0 end
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
emotion = emotion,
loopCount = loopCount,
delay = delay,
}
end
unlockShipPortal = function(questId,portal,direction,heroref)
local t = getQuestTeamId { questId = questId }
if getTeamIdByHeroRef { ref = heroref } == t then
for index,heroRef in getTeamRefs { teamId = t } do
unlockPortal {
heroRef = heroRef,
portal = portal,
type = "PORTALTYPE_SHIP_" .. string.upper(direction),
}
end
end
end
onWeather = function(currentHour)
return WeatherDefinitions
end
creatureTeleportPos = function(tcid, delay, position)
local positions = CM_convertPosition_To_NamedTable(position)
local orientation = positions.orientation
local effect_positions = positions
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_RAISE-HANDS",
loopCount = 1,
effect = "FXTYPE_GEN_TELEPORT",
delay = delay
}
createEffect {
position = effect_positions,
effect = "FXTYPE_GEN_SPAWN1",
delay = delay + 1
}
teleport {
tcid = tcid,
position = positions,
orientation = orientation,
delay = delay + 2
}
changeCreature {
tcid = tcid,
effect = "FXTYPE_INVALID",
delay = delay + 2
}
end
teleportTeam = function(questId,position)
if questId and position then
local t = getQuestTeamId(questId)
local pos = CM_convertPosition_To_NamedTable(position)
if pos then
for index,heroRef in getTeamRefs{teamId = t} do
teleportHero {
heroRef = heroRef,
position = pos,
orientation = pos.orientation,
}
end
end
end
end
leaveValley = function(heroRef)
teleportHero {
heroRef = heroRef,
position = {sx=9,sy=50,sz=0,px=2350,py=1050,pz=0},
orientation = 45,
noEffect = true,
}
end
leaveDamm = function(heroRef)
teleportHero {
heroRef = heroRef,
position = {sx=9,sy=51,sz=0,px=2278.700,py=24.600,pz=4060.212},
orientation = 95,
noEffect = true,
}
end
plattenTeleport = function(heroRef)
teleportHero {
heroRef = heroRef,
position = {sx=59,sy=9,sz=0,px=1352.703125,py=1942.449219,pz=570.496948,orientation=4.931641},
orientation = 4.931641,
noEffect = true,
noFade= true,
}
end
creatureTeleportsAway = function(tcid, delay)
if delay == nil then
delay = 0
end
creatureTeleportPos(tcid,delay,{sx=0,sy=0,sz=0,px=0,py=0,pz=0})
end
bueroQuestTalk = function()
local lokaids = {"QUEST_2255_TALK_01","QUEST_2255_TALK_02",
"QUEST_2255_TALK_03","QUEST_2255_TALK_04",
"QUEST_2255_TALK_05","QUEST_2255_TALK_06",
"QUEST_2255_TALK_07","QUEST_2255_TALK_08",
"QUEST_2255_TALK_09","QUEST_2255_TALK_10"}
local index = math.random(1,getn(lokaids))
return lokaids[index]
end
bueroQuestReach = function()
local lokaids = {"QUEST_2255_REACH_01","QUEST_2255_REACH_02",
"QUEST_2255_REACH_03","QUEST_2255_REACH_04",
"QUEST_2255_REACH_05","QUEST_2255_REACH_06",
"QUEST_2255_REACH_07","QUEST_2255_REACH_08",
"QUEST_2255_REACH_09","QUEST_2255_REACH_10"}
local index = math.random(1,getn(lokaids))
return lokaids[index]
end
scorpion = function(heroRef)
local position = {}
local orientation = 0
if getQuestState {id = 339} == "WON" or
getQuestState {id = 1622} == "WON" or
getQuestState {id = 3347} == "WON" then
position = {sx=34,sy=11,sz=0,px=2735.632813,py=2001.066406,pz=2799.949707}
orientation = 184.811813
else
return
end
teleportHero {
heroRef = heroRef,
position = position,
orientation = orientation,
}
end
Eisdungeon = function(heroRef)
local position = {}
local orientation = 0
if getQuestState {id = 3782} == "WON" then
position = {sx=4,sy=54,sz=0,px=822.150391,py=826.093750,pz=3164.935547}
orientation = 336.091614
else
return
end
teleportHero {
heroRef = heroRef,
position = position,
orientation = orientation,
}
end
enterDamm = function(heroRef)
local position = {}
local orientation = 0
if getQuestState { id = 667 } == "WON" then
position = {sx=9,sy=50,sz=-2,px=1792.354,py=2682.349,pz=3937.008}
orientation = 270
else
position = {sx=9,sy=50,sz=0,px=1840.887,py=2680.774,pz=3952.586}
orientation = 270
end
teleportHero {
heroRef = heroRef,
position = position,
orientation = orientation,
noEffect = true,
}
end
golemOben = function(heroRef)
local position = {}
local orientation = 0
if getQuestState {id = 3327} == "WON" then
position = {sx=26,sy=44,sz=0,px=1688.648438,py=2510.703125,pz=-1164.604004}
orientation = 25.034119
else
return
end
teleportHero {
heroRef = heroRef,
position = position,
orientation = orientation,
}
end
Lichinsel = function(heroRef)
local position = {}
local orientation = 0
if getQuestState {id = 3714} == "WON" or
getQuestState {id = 3714} == "PRECONDS_AWAITING" then
position = {sx=60,sy=11,sz=0,px=2495.015625,py=1729.246094,pz=734.589294}
orientation = 282.008179
else
return
end
teleportHero {
heroRef = heroRef,
position = position,
orientation = orientation,
}
end
blutsee = function(heroRef)
if getQuestState(3650) == "WON" then
teleportHero {
heroRef = heroRef,
position = {sx=60,sy=14,sz=0,px=957.843750,py=2005.250000,pz=1168.379395,orientation=296.320709},
orientation = 296.320709,
}
else
return
end
end
blutgrotte = function(heroRef)
if getQuestState(3649) == "WON" then
setWaterType
{
sx = 62,
sy = 14,
sz = -1,
waterType = 29,
}
return
else
return
end
end
enterValley = function(heroRef)
local position = {}
local orientation = 0
if getQuestState { id = 667 } == "WON" then
position = {sx=9,sy=50,sz=-2,px=1650,py=1550,pz=0}
orientation = 270
else
position = {sx=9,sy=50,sz=0,px=1600,py=1550,pz=0}
orientation = 270
end
teleportHero {
heroRef = heroRef,
position = position,
orientation = orientation,
noEffect = true,
}
end
golemUnten = function(heroRef)
local position = {}
local orientation = 0
if getQuestState {id = 3327} == "WON" then
position = {sx=26,sy=44,sz=0,px=464.632813,py=2857.359375,pz=-100.702850}
orientation = 23.043610
else
return
end
teleportHero {
heroRef = heroRef,
position = position,
orientation = orientation,
}
end
krypta_eod = function(heroRef)
if getQuestState(3771) == "TASK_FULFILLED" then
teleportHero {
heroRef = heroRef,
position = {sx=53,sy=6,sz=0,px=2500.000000,py=1600.000000,pz=859.083252,orientation=140.000000},
orientation = 140,
}
end
end
Drachenmagier = function(heroRef)
if getQuestState(3635) == "TASK_AWAITING" or
getQuestState(3635) == "TASK_FULFILLED" or
getQuestState(3634) == "TASK_AWAITING" or
getQuestState(3634) == "TASK_FULFILLED" then
teleportHero {
heroRef = heroRef,
position = {sx=22,sy=24,sz=0,px=150.148438,py=2240.500000,pz=13.666462,orientation=184.927094},
orientation = 184.927094,
noEffect = true,
}
else
return
end
end
enterDarkVillage = function(heroRef)
if getQuestState { id = 1570 } ~= "WON" then
teleportHero {
heroRef = heroRef,
position = {sx=46,sy=45,sz=-2,px=1618.900024,py=18.850000,pz=3301.454834,orientation=160.000000},
orientation = 160,
noEffect = true,
}
end
end
leaveDarkVillage = function(heroRef)
teleportHero {
heroRef = heroRef,
position = {sx=46,sy=44,sz=0,px=1384.750000,py=2942.750000,pz=3313.996094,orientation=317.726318},
orientation = 317.726318,
noEffect = true,
}
end
labyr_bossdungeon = function(heroRef)
if getQuestState(3804) == "WON" then
teleportHero {
heroRef = heroRef,
position = {sx=59, sy=9, sz=0, px=1352.703125, py=1942.449219, pz=570.496948, orientation=4.931641},
orientation = 4.931641,
}
end
end
labyr_schatzdungeon = function(heroRef)
teleportHero {
heroRef = heroRef,
position = {sx=59, sy=9, sz=0, px=1352.703125, py=1942.449219, pz=570.496948, orientation=4.931641},
orientation = 4.931641,
}
end
labyr_emptydungeon = function(heroRef)
teleportHero {
heroRef = heroRef,
position = {sx=59, sy=9, sz=0, px=1352.703125, py=1942.449219, pz=570.496948, orientation=4.931641},
orientation = 4.931641,
}
end
showWaterfall = function()
if getQuestState { id = 1287 } == "WON" or
getQuestState { id = 1559 } == "WON" then
setWoobEffect {
woid = 1017622491,
effect = "FXTYPE_WATERFALL2",
}
end
if getQuestState { id = 1540 } == "TASK_FULFILLED" then
setWoobEffect {
woid = 1017622491,
effect = "FXTYPE_QFX_WASSERFALL",
}
end
end
oldDragonBack = function(heroRef)
local position = {}
local orientation = 0
if getQuestState {id = 730} == "TASK_AWAITING" or
getQuestState {id = 730} == "WON" or
getQuestState {id = 712} == "TASK_AWAITING" or
getQuestState {id = 712} == "WON" or
getQuestState {id = 3347} == "WON" then
position = {sx=44, sy=54, sz=0, px=166.703125, py=960.046875, pz=200.095566, orientation=264.363556}
orientation = 264.363556
else
return
end
teleportHero {
heroRef = heroRef,
position = position,
orientation = orientation,
}
end
oldDragon = function(heroRef)
local position = {}
local orientation = 0
if getQuestState {id = 730} == "TASK_AWAITING" or
getQuestState {id = 730} == "WON" or
getQuestState {id = 712} == "TASK_AWAITING" or
getQuestState {id = 712} == "WON" or
getQuestState {id = 3347} == "WON" then
position = {sx=60,sy=40,sz=0,px=553.5,py=2632.953125,pz=-1599.907349}
orientation = 317.563782
else
return
end
teleportHero {
heroRef = heroRef,
position = position,
orientation = orientation,
}
end
Platte8D = function(heroRef)
setWoobEffect {
woid = 1049076194,
effect = "FXTYPE_CHEST2G"
}
end
Platte3E = function(heroRef)
setWoobEffect {
woid = 1049076010,
effect = "FXTYPE_CHEST2G"
}
end
Platte3F = function(heroRef)
setWoobEffect {
woid = 1049076014,
effect = "FXTYPE_CHEST2G"
}
end
Platte8B = function(heroRef)
teleportHero {
heroRef = heroRef,
position = {sx=57, sy=10, sz=-1, px=1363.046875, py=2380.750000, pz=-192.856201, orientation=41.436737},
orientation = 41.436737,
noEffect = true,
}
end
Platte8C = function(heroRef)
plattenTeleport(heroRef)
end
Platte8E = function(heroRef)
setWoobEffect {
woid = 1049076196,
effect = "FXTYPE_CHEST2G"
}
end
Platte4A = function(heroRef)
plattenTeleport(heroRef)
end
Platte4G = function(heroRef)
plattenTeleport(heroRef)
end
Platte4H = function(heroRef)
setWoobEffect {
woid = 1049076044,
effect = "FXTYPE_CHEST2G"
}
end
Platte2C = function(heroRef)
setWoobEffect {
woid = 1049075981,
effect = "FXTYPE_CHEST2G"
}
end
Platte2G = function(heroRef)
setWoobEffect {
woid = 1049075994,
effect = "FXTYPE_CHEST2G"
}
end
Platte2A = function(heroRef)
plattenTeleport(heroRef)
end
Platte5H = function(heroRef)
setWoobEffect {
woid = 1049076139,
effect = "FXTYPE_CHEST2G"
}
end
Platte2B = function(heroRef)
setWoobEffect {
woid = 1049075978,
effect = "FXTYPE_CHEST2G"
}
end
Platte2F = function(heroRef)
setWoobEffect {
woid = 1049075991,
effect = "FXTYPE_CHEST2G"
}
end
Platte2H = function(heroRef)
setWoobEffect {
woid = 1049075996,
effect = "FXTYPE_CHEST2G"
}
end
Platte3A = function(heroRef)
plattenTeleport(heroRef)
end
Platte3D = function(heroRef)
setWoobEffect {
woid = 1049076007,
effect = "FXTYPE_CHEST2G"
}
end
Platte3G = function(heroRef)
plattenTeleport(heroRef)
end
Platte2D = function(heroRef)
setWoobEffect {
woid = 1049075983,
effect = "FXTYPE_CHEST2G"
}
end
Platte5A = function(heroRef)
plattenTeleport(heroRef)
end
Platte5B = function(heroRef)
setWoobEffect {
woid = 1049076124,
effect = "FXTYPE_CHEST2G"
}
end
Platte5C = function(heroRef)
setWoobEffect {
woid = 1049076126,
effect = "FXTYPE_CHEST2G"
}
end
Platte5D = function(heroRef)
setWoobEffect {
woid = 1049076128,
effect = "FXTYPE_CHEST2G"
}
end
Platte5E = function(heroRef)
setWoobEffect {
woid = 1049076130,
effect = "FXTYPE_CHEST2G"
}
end
Platte5F = function(heroRef)
setWoobEffect {
woid = 1049076132,
effect = "FXTYPE_CHEST2G"
}
end
Platte5G = function(heroRef)
setWoobEffect {
woid = 1049076137,
effect = "FXTYPE_CHEST2G"
}
end
Platte7A = function(heroRef)
plattenTeleport(heroRef)
end
Platte7B = function(heroRef)
setWoobEffect {
woid = 1049076168,
effect = "FXTYPE_CHEST2G"
}
end
Platte7G = function(heroRef)
plattenTeleport(heroRef)
end
Platte8F = function(heroRef)
setWoobEffect {
woid = 1049076198,
effect = "FXTYPE_CHEST2G"
}
end
Platte8G = function(heroRef)
plattenTeleport(heroRef)
end
Platte8G = function(heroRef)
plattenTeleport(heroRef)
end
Platte8A = function(heroRef)
plattenTeleport(heroRef)
end
Platte1H = function(heroRef)
plattenTeleport(heroRef)
end
Platte3C = function(heroRef)
plattenTeleport(heroRef)
end
Platte3H = function(heroRef)
setWoobEffect {
woid = 1049076020,
effect = "FXTYPE_CHEST2G"
}
end
Platte4B = function(heroRef)
plattenTeleport(heroRef)
end
Platte4C = function(heroRef)
plattenTeleport(heroRef)
end
Platte4D = function(heroRef)
plattenTeleport(heroRef)
end
Platte4E = function(heroRef)
plattenTeleport(heroRef)
end
Platte4F = function(heroRef)
plattenTeleport(heroRef)
end
Platte6B = function(heroRef)
setWoobEffect {
woid = 1049076148,
effect = "FXTYPE_CHEST2G"
}
end
Platte6C = function(heroRef)
plattenTeleport(heroRef)
end
Platte6D = function(heroRef)
teleportHero {
heroRef = heroRef,
position = {sx=57, sy=8, sz=-1, px=1413.796875, py=1171.300781, pz=-200.017624, orientation=181.782944},
orientation = 181.782944,
noEffect = true,
}
end
Platte6A = function(heroRef)
plattenTeleport(heroRef)
end
Platte6E = function(heroRef)
plattenTeleport(heroRef)
end
Platte6F = function(heroRef)
plattenTeleport(heroRef)
end
Platte6G = function(heroRef)
plattenTeleport(heroRef)
end
Platte6H = function(heroRef)
plattenTeleport(heroRef)
end
Platte7C = function(heroRef)
setWoobEffect {
woid = 1049076171,
effect = "FXTYPE_CHEST2G"
}
end
Platte7D = function(heroRef)
setWoobEffect {
woid = 1049076173,
effect = "FXTYPE_CHEST2G"
}
end
Platte7E = function(heroRef)
plattenTeleport(heroRef)
end
Platte7F = function(heroRef)
plattenTeleport(heroRef)
end
Platte7H = function(heroRef)
plattenTeleport(heroRef)
end
Platte1F = function(heroRef)
plattenTeleport(heroRef)
end
Platte1G = function(heroRef)
plattenTeleport(heroRef)
end
Platte3B = function(heroRef)
plattenTeleport(heroRef)
end
Platte2E = function(heroRef)
teleportHero {
heroRef = heroRef,
position = {sx=59, sy=10, sz=-1, px=2355.546875, py=2322.449219, pz=-193.597321, orientation=349.804016},
orientation = 349.804016,
noEffect = true,
}
end
Platte1A = function(heroRef)
plattenTeleport(heroRef)
end
Platte1B = function(heroRef)
if getQuestState(3642) == "TASK_AWAITING" or
getQuestState(3642) == "TASK_FULFILLED" or
getQuestState(3642) == "WON" then
setWoobEffect {
woid = 1049075945,
effect = "FXTYPE_CHEST2G",
}
else
plattenTeleport(heroRef)
end
end
Platte1C = function(heroRef)
plattenTeleport(heroRef)
end
Platte1D = function(heroRef)
plattenTeleport(heroRef)
end
Platte1E = function(heroRef)
plattenTeleport(heroRef)
end
CM_AttackerAway = function (attackers, twait)
for i,tc in ipairs(attackers) do
changeCreature {
tcid = tc,
role = "ROLE_INVALID",
behaviour = "JOB_POOR_STATIST",
faction = "FACTION_ATMO",
}
CM_CreatureAway (tc, twait)
end
end
CM_CheerMessage = function (cm_tcount, cm_qtime, cm_dcount , cm_qkills)
local CheerID = {"MESSAGE_CHEER_00", "MESSAGE_CHEER_01", "MESSAGE_CHEER_02", "MESSAGE_CHEER_03", "MESSAGE_CHEER_04",
"MESSAGE_CHEER_05", "MESSAGE_CHEER_06", "MESSAGE_CHEER_07", "MESSAGE_CHEER_08", "MESSAGE_CHEER_09" }
local version = math.random(1,getn(CheerID))
local ColorID = { "#ffffff", "#ff0000", "#ffff00", "#00ff00" }
local color_select = 1
if cm_qtime and cm_tcount and cm_qkills and cm_dcount then
if (cm_qtime > 0) and (cm_qkills > 0) then
if (cm_tcount <= cm_qtime) and (cm_tcount >= 0) and (cm_dcount <= cm_qkills) and (cm_dcount >= 0) then
local time_progress = cm_tcount / cm_qtime
local kill_progress = cm_dcount / cm_qkills
local progress = time_progress + kill_progress
if progress > 1 then
color_select = 4
elseif progress < 0.5 then
color_select = 2
else
color_select = 3
end
end
end
end
questMessage {
delay = 0.0,
duration = 1.0,
fadeIn = 0.5,
fadeOut = 0.5,
line = 0,
lokaid = CheerID[version],
color = ColorID[color_select],
}
end
CM_DebugMessage = function(args)
questMessage {
lokaid = "QUEST_DEBUGGING",
color = "#ffffff",
line = 1,
delay = 0.0,
duration = 1.0,
fadeIn = 0.5,
fadeOut = 0.5,
}
end
CM_GarbageCollect = function ()
CM_MovingTrader()
CM_AllTimerResolve()
CM_ResolveQuestStates()
CM_FlushProtocol()
end
CM_ResolveQuestStates = function ()
end
CM_MovingTrader = function ()
local trader_id = 10510
local initial_delay = 1
local teleport_duration = 5
local trader_types = {
{merchant="MERCHANT_PRIEST", job="JOB_HORSETRADER"},
{merchant="MERCHANT_HORSETRADER", job="JOB_HORSETRADER"},
{merchant="MERCHANT_CAPTAIN", job="JOB_CAPTAIN"},
{merchant="MERCHANT_COMBOMASTER", job="JOB_TRADER"},
{merchant="MERCHANT_PRIEST", job="JOB_PRIEST"},
{merchant="MERCHANT_BLACKSMITH", job="JOB_BLACKSMITH"},
{merchant="MERCHANT_TRADER", job="JOB_TRADER"}
}
local trader_type=trader_types[math.random(getn(trader_types))]
local default_position = { 42,29,0 , 1035.000,2500.000,0.000 , 0 }
local trader_positions = {
{ 7,13,0 , 2030.000,2560.000, 138.000 , 330 },
{ 22,55,0 , 912.500,2904.750, 350.750 , 200 },
{ 55,54,0 , 3055.500,2039.000, 1082.250 , 5 },
{ 57,12,0 , 543.000, 5.000, 554.250 , 90 },
{ 2,61,0 , 1107.250,1468.250, 2257.500 , 0 },
{ 37,23,0 , 2260.000, 525.000,136.500 , 90 },
{ 21,41,0 , 2076.250, 776.750,4907.750 , 95 },
{ 16,49,0 , 629.750, 838.500,1157.250 , 0 },
{ 31,57,0 , 2859.250,2766.500,2138.000 , 0 },
{ 43,57,0 , 1069.750,2469.500, 135.500 , 160 },
{ 59,33,0 , 1071.000, 124.500,-1704.250 , 25 },
{ 36,12,0 , 2974.000, 339.500,1923.750 , 210 },
{ 31,7,0 , 1169.250, 243.750, 20.000 , 225 },
{ 13,8,0 , 2863.000,2094.500,1673.750 , 110 },
{ 6,25,0 , 1459.750,491.250,2559.750 , 95 }
}
local trader_position = trader_positions[math.random(getn(trader_positions))]
changeCreature {
tcid = trader_id,
merchantType = "MERCHANT_INVALID",
behaviour = "JOB_QUESTSTAGING",
delay = initial_delay
}
creatureTeleportPos (trader_id, initial_delay, trader_position)
changeCreature {
tcid = trader_id,
merchantType = trader_type.merchant,
behaviour = trader_type.job,
delay = initial_delay+teleport_duration
}
end
CM_OnTaskFulfilledKillTargets = function (attackers)
for i,tc in ipairs(attackers) do
changeCreature {
tcid = tc,
mortality = "MORTAL",
role = "ROLE_INVALID",
delay = 0.1,
}
killCreature {
tcid = tc,
deinitragdioll = false,
delay = 0.2,
}
destroyCreature {
tcid = tc,
splatter = false,
delay = 60,
}
end
end
cm_timequest= {
{id=3636, time=10, kills=31, tcount=false, ecount=false, heropos=false, memory=false,
teleta=false, teletf=false},
{id=3541, time=5, kills=10, tcount=false, ecount=false, heropos=false, memory=false,
teleta=false, teletf=false},
{id=3542, time=5, kills=12, tcount=false, ecount=false, heropos=false, memory=false,
teleta=false, teletf=false},
{id=1804, time=5, kills=10, tcount=false, ecount=false, heropos=false, memory=false,
teleta=false, teletf=false},
{id=1803, time=5, kills=10, tcount=false, ecount=false, heropos=false, memory=false,
teleta=false, teletf=false},
{id=1801, time=5, kills=10, tcount=false, ecount=false, heropos=false, memory=false,
teleta=false, teletf=false},
{id=1794, time=5, kills=10, tcount=false, ecount=false, heropos=false, memory=false,
teleta=false, teletf=false},
{id=1791, time=5, kills=10, tcount=false, ecount=false, heropos=false, memory=false,
teleta=false, teletf=false},
{id=1786, time=5, kills=10, tcount=false, ecount=false, heropos=false, memory=false,
teleta=false, teletf=false},
{id=3673, time=5, kills=40, tcount=false, ecount=false, heropos=false, memory=false,
teleta=false, teletf=false}
}
CM_get_index = function(quest_id)
local index = false
for i,element in ipairs(cm_timequest) do
if element.id == quest_id then
index = i
end
end
return index
end
CM_GetSessionStatus = function (args)
local HeroRefs = getHeroRefs()
local index = CM_get_index(args.id)
if getn ( HeroRefs ) > 0 and index then
local myHeroRef = HeroRefs[1]
local p = CM_convertPosition_To_SimpleTable(getPos{ heroRef = myHeroRef })
if not cm_timequest[index].heropos then
cm_timequest[index].heropos = p
else
local constant_position = true
local pp = cm_timequest[index].heropos
for i,c in ipairs(p) do
if p[i] ~= pp[i] then
constant_position = false
end
end
if not constant_position then
CM_SessionOnline = true
end
end
end
end
CM_TimedKillCheatEvent = function (quest_id)
local index = CM_get_index(quest_id)
if index then
local cm_qtime = 60 * cm_timequest[index].time
local cm_qkills = cm_timequest[index].kills
local cm_dcount = cm_timequest[index].ecount
local cm_tcount
if cm_qtime and cm_qkills and cm_dcount then
if (cm_qtime > 0) and (cm_qkills > 0) then
if (cm_dcount <= cm_qkills) and (cm_dcount >= 0) then
local remaining_factor = 1 - (cm_dcount / cm_qkills)
cm_tcount = math.floor(cm_qtime * remaining_factor * remaining_factor)
if cm_tcount < 5 then
cm_tcount = 0
end
cm_timequest[index].tcount = cm_tcount
if cm_tcount > 0 then
setTimer {
id = quest_id,
interval = 1,
count = cm_tcount,
}
showTimer {
id = quest_id,
cur = cm_tcount,
max = cm_qtime,
}
else
looseQuest(quest_id)
end
end
end
end
end
end
CM_TimerStartUp = function (args)
local index = CM_get_index(args.id)
if index then
setTimer {
id = args.id,
interval = 1,
count = 60 * cm_timequest[index].time,
}
showTimer {
id = args.id,
cur = 60 * cm_timequest[index].time,
max = 60 * cm_timequest[index].time,
}
cm_timequest[index].tcount = 60 * cm_timequest[index].time
end
end
CM_AllTimerResolve = function ()
if CM_SessionOnline then
for index,element in ipairs(cm_timequest) do
if getQuestState(element.id) == "TASK_AWAITING" and not element.tcount then
CM_TimedKillCheatEvent(element.id)
end
end
end
end
CM_TimerResolve = function (quest_id)
local index = CM_get_index(quest_id)
if CM_SessionOnline and index then
if getQuestState(quest_id) == "TASK_AWAITING" and not cm_timequest[index].tcount then
CM_TimedKillCheatEvent(quest_id)
end
end
end
CM_Timed_OnPrecondsFulfilled = function (args)
local index = CM_get_index(args.id)
if index then
end
end
CM_Timed_OnSetup = function (args)
local index = CM_get_index(args.id)
if index then
end
end
CM_Timed_OnTaskAwaiting = function (args)
local index = CM_get_index(args.id)
local retval = nil
if index then
cm_timequest[index].ecount = 0
retval = cm_timequest[index].teleta
end
return retval
end
CM_Timed_OnTimer = function (args)
local index = CM_get_index(args.id)
if index then
cm_timequest[index].tcount = args.count
showTimer {
id = args.id,
cur = args.count,
max = 60 * cm_timequest[index].time,
}
end
end
CM_Timed_OnCounter = function (args)
local index = CM_get_index(args.id)
if index then
local countdown = cm_timequest[index].tcount
if countdown and (countdown < 2) then
local cm_mem = cm_timequest[index].memory
if cm_mem then
solveQuest(cm_mem)
end
else
cm_timequest[index].ecount = cm_timequest[index].ecount + 1
CM_CheerMessage (cm_timequest[index].tcount, 60 * cm_timequest[index].time, cm_timequest[index].ecount, cm_timequest[index].kills)
end
CM_GetSessionStatus (args)
CM_TimerResolve (args.id)
end
end
CM_Timed_OnDeath = function (args)
local index = CM_get_index(args.id)
if index then
end
end
CM_Timed_OnTaskFulfilled = function (args)
local index = CM_get_index(args.id)
local retval = nil
if index then
cm_timequest[index].tcount = 0
retval = cm_timequest[index].teleta
end
return retval
end
CM_Timed_OnWon = function (args)
local index = CM_get_index(args.id)
if index then
end
end
CM_Timed_OnLost = function (args)
local index = CM_get_index(args.id)
if index then
end
end
CM_Respawn_QIDs = {}
CM_AddToRespawn = function (qid)
if not CM_QIDinList(qid) then
table.insert(CM_Respawn_QIDs,qid)
end
end
CM_RemoveFromRespawn = function (qid)
local pos = CM_QIDinList(qid)
if pos then
table.remove(CM_Respawn_QIDs,pos)
end
end
CM_QIDinList = function (p_qid)
local retval = false
for i,qid in ipairs(CM_Respawn_QIDs) do
if p_qid == qid then
retval = i
end
end
return (retval)
end
onRespawn = function ( args )
CM_SessionOnline = true
for i,qid in ipairs(CM_Respawn_QIDs) do
local t = getQuestTeamId { questId = qid }
if getQuestState { id = qid } == "TASK_AWAITING" then
if getTeamIdByHeroRef{ ref = args.heroRef } == t then
looseQuest { id = qid }
end
end
end
end
CM_PresetTaskcreatures = function(args)
local ptcs= {9801}
for i,tc in ipairs(ptcs) do
changeCreature {
tcid = tc,
mortality = "IMMORTAL",
}
end
end
CM_CreatureAway = function(tc, wait, emo)
if wait == nil then
wait = 0
end
if emo == nil then
emo = "ANIM_TYPE_RAISE-HANDS"
end
changeCreature {
tcid = tc,
behaviour = "JOB_QUESTSTAGING",
emotion = emo,
loopCount = 1,
effect = "FXTYPE_GEN_TELEPORT",
delay = wait
}
teleport {
tcid = tc,
position = {0,0,0,0,0,0},
orientation = 0,
delay = wait + 2
}
changeCreature {
tcid = tc,
effect = "FXTYPE_INVALID",
delay = wait + 3
}
destroyCreature {
tcid = tc,
splatter = false,
delay = wait + 4
}
end
CM_XmasCleanup = function ()
local tcids = {9642,9666,9622,9662,9668}
for index, tcid in ipairs(tcids) do
CM_CreatureAway(tcid,0)
end
local presents = {1036374230,1036374288,1036374324,1036374367,
1036374444,1036374479,1036374508,1036374553,1036300785}
for i,woid in ipairs(presents) do
setWoobState {
woid = woid,
state = "WOOB_INVISIBLE",
}
end
setWoobState {
woid = 1036205489,
state = "WOOB_INVALID",
}
end
CM_XMASTrader = function ()
changeCreature {
tcid = 10170,
merchantType = "MERCHANT_TRADER",
behaviour = "JOB_TRADER",
delay = 0
}
end
cutscene_DM = function(args)
cutscenePosition = {sx=5, sy=2, sz=0, px=2989.000000, py=1188.200195, pz=799.857361, orientation=272.304962}
feedback = function(args)
if args.event == "QEVT_ONWELCOME" then
for index,heroRef in getHeroRefs() do
teleportHero {
position = {sx=5, sy=2, sz=0, px=2989.000000, py=1188.200195, pz=799.857361, orientation=272.304962},
orientation = 289.652222,
heroRef = heroRef,
noEffect = true,
}
end
playMovie { movie=MOVIE_INTRO }
end
if args.event == "QEVT_CUTSCENE" then
local next_title
if args.param == 1000 then
playCutScene { camera=12823, music=28 }
changeCreature {
tcid = 10243,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=6, sy=2, sz=0, px=2190.843750, py=1092.361816, pz=153.596069, orientation=211.424118},
followUpBhv = "questCreatures",
extraMode = 0,
extra = {
{sx=6, sy=2, sz=0, px=1669.605469, py=1801.869141, pz=377.998779, orientation=235.382629},
}
}
changeCreature {
tcid = 10287,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=6, sy=2, sz=0, px=1981.699219, py=2057.700195, pz=-1.404968, orientation=216.334229},
speed = 2,
followUpBhv = "deer",
extraMode = 0,
extra = {
{sx=6, sy=2, sz=0, px=2102.375000, py=1797.160156, pz=8.589723, orientation=15.396576},
{sx=6, sy=2, sz=0, px=2415.949219, py=1418.899902, pz=-0.116711, orientation=69.913971},
},
delay = 2,
}
return
end
if args.param == 0 then
teleport {
tcid = 10243,
position = {sx=6, sy=2, sz=0, px=379.115234, py=567.850098, pz=428.620270, orientation=309.267426},
}
changeCreature {
tcid = 10243,
behaviour = "deer",
delay = 1,
}
changeCreature {
tcid = 10287,
behaviour = "deer",
delay = 1,
}
teleportHero {
position = {sx=5, sy=2, sz=0, px=2989.000000, py=1188.200195, pz=799.857361, orientation=272.304962},
orientation = 289.652222,
heroRef = heroRef,
noEffect = true,
}
feedback = nil
cutscenePosition = nil
return
end
nextCutScene {music=next_title}
end
end
end
cutscene_DR_bad = function(args)
cutscenePosition = {sx=20,sy=22,sz=0,px=1605.709961,py=1342.020020,pz=20.067301}
feedback = function(args)
if args.event == "QEVT_ONWELCOME" then
for index,heroRef in getHeroRefs() do
changeCreature {
not_in_quests_ref = heroRef,
visible = false,
}
end
playMovie { movie=MOVIE_INTRO }
end
if args.event == "QEVT_CUTSCENE" then
local next_title
if args.param == 1000 then
playCutScene { camera=11217, music = 28 }
changeCreature {
tcid = 7762,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1162.949219,py=1913.453125,pz=26.835602},
followUpAngle = 237.388458,
followUpBhv = "walkAround",
}
return
end
if args.param == 1 then
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
end
if args.param == 2 then
setFixedListener {
position = {sx=20, sy=22, sz=0, px=1571.250000, py=1314.296875, pz=19.962917, orientation=336.194061},
}
playQuestSpeech {
tcid = 2994,
lokaid = "START_DR_SCRIPT",
}
end
if args.param == 3 then
setFixedListener {
position = nil,
}
changeCreature {
tcid = 7760,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1671.500000,py=1223.351563,pz=19.446575},
speed = 2,
followUpAngle = 237.388458,
bubble = 4,
}
changeCreature {
tcid = 7761,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1532.851563,py=1303.148438,pz=323.314697},
speed = 2,
followUpAngle = 237.388458,
bubble = 4,
}
next_title = 1007
end
if args.param == 4 then
teleport {
tcid = 7760,
position = {sx=20,sy=22,sz=0,px=1672.296875,py=1933.000000,pz=96.149086},
orientation = 181.453552,
}
teleport {
tcid = 7761,
position = {sx=20,sy=22,sz=0,px=1603.703125,py=1984.546875,pz=118.478752},
orientation = 233.021759,
}
changeCreature {
tcid = 7760,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1671.500000,py=1223.351563,pz=19.446575},
speed = 2,
followUpAngle = 237.388458,
delay = 0.1,
bubble = 4,
}
changeCreature {
tcid = 7761,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1532.851563,py=1303.148438,pz=323.314697},
speed = 2,
followUpAngle = 237.388458,
delay = 0.1,
bubble = 4,
}
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1679.72400,py=1711.56700,pz=245.34900},
speed = 2,
followUpAngle = 177.130768,
}
end
if args.param == 5 then
teleport {
tcid = 7760,
position = {sx=20,sy=22,sz=0,px=1679.724875,py=1815.026000,pz=245.349086},
orientation = 181.453552,
}
teleport {
tcid = 7761,
position = {sx=20,sy=22,sz=0,px=1684.604125,py=1920.969875,pz=107.597752},
orientation = 233.021759,
}
teleport {
tcid = 2994,
position = {sx=20,sy=22,sz=0,px=1684.604125,py=1321.979875,pz=107.597752},
orientation = 233.021759,
}
changeCreature {
tcid = 7760,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1684.604125,py=1386.979875,pz=107.597752},
speed = 2,
followUpAngle = 237.388458,
delay = 0.1,
bubble = 4,
}
changeCreature {
tcid = 7761,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1684.604125,py=1386.979875,pz=107.597752},
speed = 2,
followUpAngle = 237.388458,
delay = 0.1,
bubble = 4,
}
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1679.724875,py=1740.026000,pz=245.349086},
speed = 2,
followUpAngle = 177.130768,
delay = 0.1,
}
teleport {
tcid = 7765,
position = {sx=20,sy=22,sz=0,px=1605.709961,py=1342.020020,pz=20.067301},
orientation = 181.966461,
}
end
if args.param == 6 then
changeCreature {
tcid = 7760,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=0,sy=0,sz=-1,px=0,py=0,pz=0},
bubble = 4,
}
teleport {
tcid = 7760,
position = {sx=20,sy=22,sz=0,px=1649.601563,py=1576.046875,pz=27.938837},
orientation = 29.823406,
delay = 0.1
}
changeCreature {
tcid = 7761,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=0,sy=0,sz=-1,px=0,py=0,pz=0},
bubble = 4,
}
teleport {
tcid = 7761,
position = {sx=20,sy=22,sz=0,px=1682.601563,py=1581.250000,pz=26.457800},
orientation = 356.367188,
delay = 0.1,
}
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=0,sy=0,sz=-1,px=0,py=0,pz=0},
}
teleport {
tcid = 2994,
position = {sx=20,sy=22,sz=0,px=1680.898438,py=1545.453125,pz=32.670547},
orientation = 206.456314,
delay = 0.1,
}
changeCreature {
tcid = 7760,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_ATTACKA",
loopCount = 1,
bubble = 4,
}
changeCreature {
tcid = 7761,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_ATTACKA",
loopCount = 1,
bubble = 4,
}
playQuestSpeech {
tcid = 2994,
lokaid = "QUEST_1074_SHAMAN_SCREAM",
}
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM19",
loopCount = 1,
}
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
delay = 5.04,
}
end
if args.param == 7 then
changeCreature {
tcid = 7765,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_DEFENSE",
loopCount = -1,
}
end
if args.param == 0 then
stopQuestSpeech {
tcid = 2994,
}
setFixedListener {
position = nil,
}
local enemies = {
{
tcid = 7760,
end_pos = {sx=20,sy=22,sz=0,px=1649.601563,py=1576.046875,pz=27.938837},
angle = 2.942513,
},
{
tcid = 7761,
end_pos = {sx=20,sy=22,sz=0,px=1682.601563,py=1581.250000,pz=26.457800},
angle = 336.305786,
}
}
local destroy = {7765,7762}
for index,tcid in ipairs(destroy) do
destroyCreature {
tcid = tcid,
splatter = false,
}
end
for id,object in ipairs(enemies) do
teleport {
tcid = object.tcid,
position = object.end_pos,
orientation = object.angle,
}
changeCreature {
tcid = object.tcid,
faction = "FACTION_ENEMY_HERO",
behaviour = "Enemy_warrior_brave",
delay = 2,
}
end
for index,heroRef in getHeroRefs() do
changeCreature {
not_in_quests_ref = heroRef,
visible = true,
}
teleportHero {
heroRef = heroRef,
noEffect = true,
position = {sx=20,sy=22,sz=0,px=1605.709961,py=1342.020020,pz=20.067301},
orientation = 181.966461,
}
end
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=0,sy=0,sz=-1,px=0,py=0,pz=0},
}
teleport {
tcid = 2994,
position = {sx=20,sy=22,sz=0,px=1680.898438,py=1545.453125,pz=32.670547},
orientation = 206.456314,
delay = 0.1,
}
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
dont_turn = true,
delay = 0.2,
}
feedback = nil
cutscenePosition = nil
return
end
nextCutScene {music=next_title}
end
end
end
cutscene_DR_good = function(args)
cutscenePosition = {sx=20,sy=22,sz=0,px=1605.709961,py=1342.020020,pz=20.067301}
feedback = function(args)
if args.event == "QEVT_ONWELCOME" then
for index,heroRef in getHeroRefs() do
changeCreature {
not_in_quests_ref = heroRef,
visible = false,
}
end
playMovie { movie=MOVIE_INTRO }
end
if args.event == "QEVT_CUTSCENE" then
local next_title
if args.param == 1000 then
playCutScene { camera=11217, music = 26 }
changeCreature {
tcid = 7762,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1162.949219,py=1913.453125,pz=26.835602},
followUpAngle = 237.388458,
}
return
end
if args.param == 1 then
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
end
if args.param == 2 then
setFixedListener {
position = {sx=20, sy=22, sz=0, px=1571.250000, py=1314.296875, pz=19.962917, orientation=336.194061},
}
playQuestSpeech {
tcid = 2994,
lokaid = "START_DR_SCRIPT",
}
end
if args.param == 3 then
setFixedListener {
position = nil,
}
changeCreature {
tcid = 7760,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1671.500000,py=1223.351563,pz=19.446575},
speed = 2,
followUpAngle = 237.388458,
bubble = 4,
}
changeCreature {
tcid = 7761,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1532.851563,py=1303.148438,pz=323.314697},
speed = 2,
followUpAngle = 237.388458,
bubble = 4,
}
next_title = 1007
end
if args.param == 4 then
teleport {
tcid = 7760,
position = {sx=20,sy=22,sz=0,px=1672.296875,py=1933.000000,pz=96.149086},
orientation = 181.453552,
}
teleport {
tcid = 7761,
position = {sx=20,sy=22,sz=0,px=1603.703125,py=1984.546875,pz=118.478752},
orientation = 233.021759,
}
changeCreature {
tcid = 7760,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1671.500000,py=1223.351563,pz=19.446575},
speed = 2,
followUpAngle = 237.388458,
delay = 0.1,
bubble = 4,
}
changeCreature {
tcid = 7761,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1532.851563,py=1303.148438,pz=323.314697},
speed = 2,
followUpAngle = 237.388458,
delay = 0.1,
bubble = 4,
}
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1679.72400,py=1711.56700,pz=245.34900},
speed = 2,
followUpAngle = 177.130768,
}
end
if args.param == 5 then
teleport {
tcid = 7760,
position = {sx=20,sy=22,sz=0,px=1679.724875,py=1815.026000,pz=245.349086},
orientation = 181.453552,
}
teleport {
tcid = 7761,
position = {sx=20,sy=22,sz=0,px=1684.604125,py=1920.969875,pz=107.597752},
orientation = 233.021759,
}
teleport {
tcid = 2994,
position = {sx=20,sy=22,sz=0,px=1684.604125,py=1321.979875,pz=107.597752},
orientation = 233.021759,
}
changeCreature {
tcid = 7760,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1684.604125,py=1386.979875,pz=107.597752},
speed = 2,
followUpAngle = 237.388458,
delay = 0.1,
bubble = 4,
}
changeCreature {
tcid = 7761,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1684.604125,py=1386.979875,pz=107.597752},
speed = 2,
followUpAngle = 237.388458,
delay = 0.1,
bubble = 4,
}
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=22,sz=0,px=1679.724875,py=1740.026000,pz=245.349086},
speed = 2,
followUpAngle = 177.130768,
delay = 0.1,
}
teleport {
tcid = 7765,
position = {sx=20,sy=22,sz=0,px=1605.709961,py=1342.020020,pz=20.067301},
orientation = 181.966461,
}
end
if args.param == 6 then
changeCreature {
tcid = 7760,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=0,sy=0,sz=-1,px=0,py=0,pz=0},
bubble = 4,
}
teleport {
tcid = 7760,
position = {sx=20,sy=22,sz=0,px=1649.601563,py=1576.046875,pz=27.938837},
orientation = 29.823406,
delay = 0.1
}
changeCreature {
tcid = 7761,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=0,sy=0,sz=-1,px=0,py=0,pz=0},
bubble = 4,
}
teleport {
tcid = 7761,
position = {sx=20,sy=22,sz=0,px=1682.601563,py=1581.250000,pz=26.457800},
orientation = 356.367188,
delay = 0.1,
}
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=0,sy=0,sz=-1,px=0,py=0,pz=0},
}
teleport {
tcid = 2994,
position = {sx=20,sy=22,sz=0,px=1680.898438,py=1545.453125,pz=32.670547},
orientation = 206.456314,
delay = 0.1,
}
changeCreature {
tcid = 7760,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_ATTACKA",
loopCount = 1,
bubble = 4,
}
changeCreature {
tcid = 7761,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_ATTACKA",
loopCount = 1,
bubble = 4,
}
playQuestSpeech {
tcid = 2994,
lokaid = "QUEST_1074_SHAMAN_SCREAM",
}
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM19",
loopCount = 1,
}
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
delay = 5.04,
}
end
if args.param == 7 then
changeCreature {
tcid = 7765,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_DEFENSE",
loopCount = -1,
}
end
if args.param == 0 then
stopQuestSpeech {
tcid = 2994,
}
setFixedListener {
position = nil,
}
local enemies = {
{
tcid = 7760,
end_pos = {sx=20,sy=22,sz=0,px=1649.601563,py=1576.046875,pz=27.938837},
angle = 2.942513,
},
{
tcid = 7761,
end_pos = {sx=20,sy=22,sz=0,px=1682.601563,py=1581.250000,pz=26.457800},
angle = 336.305786,
}
}
local destroy = {7765,7762}
for index,tcid in ipairs(destroy) do
destroyCreature {
tcid = tcid,
splatter = false,
}
end
for id,object in ipairs(enemies) do
changeCreature {
tcid = object.tcid,
faction = "FACTION_ENEMY_HERO",
behaviour = "Enemy_warrior_brave",
delay = 2,
}
teleport {
tcid = object.tcid,
position = object.end_pos,
orientation = object.angle,
}
end
for index,heroRef in getHeroRefs() do
changeCreature {
not_in_quests_ref = heroRef,
visible = true,
}
teleportHero {
heroRef = heroRef,
noEffect = true,
position = {sx=20,sy=22,sz=0,px=1605.709961,py=1342.020020,pz=20.067301},
orientation = 181.966461,
}
end
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=0,sy=0,sz=-1,px=0,py=0,pz=0},
}
teleport {
tcid = 2994,
position = {sx=20,sy=22,sz=0,px=1680.898438,py=1545.453125,pz=32.670547},
orientation = 206.456314,
delay = 0.1,
}
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
dont_turn = true,
delay = 0.2,
}
feedback = nil
cutscenePosition = nil
return
end
nextCutScene {music=next_title}
end
end
end
cutscene_HE_bad = function(args)
cutscenePosition = {sx=19, sy=24, sz=0, px=633.105469, py=1008.164063, pz=1093.987061, orientation=118.467346}
feedback = function(args)
if args.event == "QEVT_ONWELCOME" then
for index,heroRef in getHeroRefs() do
changeCreature {
not_in_quests_ref = heroRef,
visible = false,
}
end
playMovie { movie=MOVIE_INTRO }
end
if args.event == "QEVT_CUTSCENE" then
local next_title
if args.param == 1000 then
playCutScene { camera=11093, music = 5 }
changeCreature {
tcid = 7921,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=19,sy=24,sz=0,px=747.550781,py=1303.648438,pz=1095.624512},
speed = 2,
followUpAngle = 327.600861,
followUpBhv = "rabbit",
}
changeCreature {
tcid = 2986,
behaviour = "JOB_QUESTSTAGING",
faction = "FACTION_FRIEND_HERO_ALL",
role = "ROLE_INVALID",
}
return
end
if args.param == 2 then
changeCreature {
tcid = 2987,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
setFixedListener {
position = {sx=19, sy=24, sz=0, px=634.210938, py=1147.992188, pz=1095.355469, orientation=243.762177},
}
playQuestSpeech {
lokaid = "QUEST_1069_GIVER_START",
tcid = 2987,
}
playQuestSpeech {
lokaid = "QUEST_1069_GIVER_START_02",
tcid = 2987,
delay = 3.5,
}
playQuestSpeech {
lokaid = "QUEST_1069_GIVER_START_03",
tcid = 2987,
delay = 7.3,
}
playQuestSpeech {
lokaid = "QUEST_1069_GIVER_START_04",
tcid = 2987,
delay = 10.9,
}
end
if args.param == 3 then
setFixedListener {
position = nil,
}
changeCreature {
tcid = 2987,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM01",
loopCount = 1,
}
changeCreature {
tcid = 2986,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=19,sy=24,sz=0,px=843.449219,py=1081.953125,pz=1092.012695},
followUpAngle = 288,
followUpBhv = "questCreatures",
}
changeCreature {
tcid = 7113,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=19,sy=24,sz=0,px=633.105469,py=1008.164063,pz=1093.987061},
followUpAngle = 118.467346,
followUpBhv = "questCreatures",
}
next_title = 1009
end
if args.param == 4 then
teleport {
tcid = 2986,
position = {sx=19,sy=24,sz=0,px=843.449219,py=1081.953125,pz=1092.012695},
orientation = 288,
}
changeCreature {
tcid = 2986,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
end
if args.param == 0 then
stopQuestSpeech {
tcid = 2987,
}
setFixedListener {
position = nil,
}
for index,heroRef in getHeroRefs() do
teleportHero {
position = {sx=19, sy=24, sz=0, px=633.105469, py=1008.164063, pz=1093.987061, orientation=118.467346},
heroRef = heroRef,
noEffect = true,
orientation = 118.467346,
}
changeCreature {
not_in_quests_ref = heroRef,
visible = true,
delay = 0.5,
}
end
destroyCreature {
tcid = 7113,
splatter = false,
delay = 0.5
}
changeCreature {
tcid = 2986,
behaviour = "Enemy_trap_magic",
faction = "FACTION_ENEMY_HERO",
role = "ROLE_ATTACKER",
delay = 2,
}
changeCreature {
tcid = 7506,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLE",
loopCount = -1,
bubble = 1,
}
teleport {
tcid = 7506,
position = {sx=19,sy=24,sz=0,px=529.101990,py=909.953003,pz=1095.640015},
orientation = 94.000000,
}
teleport {
tcid = 2986,
position = {sx=19,sy=24,sz=0,px=843.449219,py=1081.953125,pz=1092.012695},
orientation = 288,
}
feedback = nil
cutscenePosition = nil
return
end
nextCutScene {music=next_title}
end
end
end
cutscene_HE_good = function(args)
cutscenePosition = {sx=19, sy=24, sz=0, px=633.105469, py=1008.164063, pz=1093.987061, orientation=118.467346}
changeCreature {
tcid = 2986,
livesRemaining = 1,
useUnconscious = true,
unconsciousTime = 3,
}
feedback = function(args)
if args.event == "QEVT_ONWELCOME" then
for index,heroRef in getHeroRefs() do
changeCreature {
not_in_quests_ref = heroRef,
visible = false,
}
end
playMovie { movie=MOVIE_INTRO }
end
if args.event == "QEVT_CUTSCENE" then
local next_title
if args.param == 1000 then
playCutScene { camera=11093, music = 5 }
changeCreature {
tcid = 7921,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=19,sy=24,sz=0,px=747.550781,py=1303.648438,pz=1095.624512},
speed = 2,
followUpAngle = 327.600861,
followUpBhv = "rabbit",
}
changeCreature {
tcid = 2986,
behaviour = "JOB_QUESTSTAGING",
faction = "FACTION_FRIEND_HERO_ALL",
role = "ROLE_INVALID",
}
return
end
if args.param == 2 then
changeCreature {
tcid = 2987,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
setFixedListener {
position = {sx=19, sy=24, sz=0, px=634.210938, py=1147.992188, pz=1095.355469, orientation=243.762177},
}
playQuestSpeech {
lokaid = "QUEST_1067_GIVER_START",
tcid = 2987,
}
end
if args.param == 3 then
setFixedListener {
position = nil,
}
changeCreature {
tcid = 2987,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM01",
loopCount = 1,
}
changeCreature {
tcid = 2986,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=19,sy=24,sz=0,px=843.449219,py=1081.953125,pz=1092.012695},
followUpAngle = 288,
followUpBhv = "questCreatures",
}
changeCreature {
tcid = 7113,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=19,sy=24,sz=0,px=633.105469,py=1008.164063,pz=1093.987061},
followUpAngle = 118.467346,
followUpBhv = "questCreatures",
}
next_title = 1009
end
if args.param == 4 then
teleport {
tcid = 2986,
position = {sx=19,sy=24,sz=0,px=843.449219,py=1081.953125,pz=1092.012695},
orientation = 288,
}
changeCreature {
tcid = 2986,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
end
if args.param == 0 then
stopQuestSpeech {
tcid = 2987,
}
setFixedListener {
position = nil,
}
for index,heroRef in getHeroRefs() do
teleportHero {
position = {sx=19, sy=24, sz=0, px=633.105469, py=1008.164063, pz=1093.987061, orientation=118.467346},
heroRef = heroRef,
noEffect = true,
orientation = 118.467346,
}
changeCreature {
not_in_quests_ref = heroRef,
visible = true,
delay = 0.5,
}
end
destroyCreature {
tcid = 7113,
splatter = false,
delay = 0.5
}
changeCreature {
tcid = 2986,
behaviour = "Enemy_trap_magic",
faction = "FACTION_ENEMY_HERO",
role = "ROLE_ATTACKER",
delay = 2,
}
changeCreature {
tcid = 7506,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLE",
loopCount = -1,
bubble = 1,
}
teleport {
tcid = 7506,
position = {sx=19,sy=24,sz=0,px=529.101990,py=909.953003,pz=1095.640015},
orientation = 94.000000,
}
teleport {
tcid = 2986,
position = {sx=19,sy=24,sz=0,px=843.449219,py=1081.953125,pz=1092.012695},
orientation = 288,
}
feedback = nil
cutscenePosition = nil
return
end
nextCutScene {music=next_title}
end
end
end
cutscene_IN_bad = function(args)
cutscenePosition = {sx=19, sy=26, sz=0, px=2860.050049, py=1044.349976, pz=128.899902, orientation=104.807434}
feedback = function(args)
if args.event == "QEVT_ONWELCOME" then
for index,heroRef in getHeroRefs() do
changeCreature {
not_in_quests_ref = heroRef,
visible = false,
}
teleportHero {
heroRef = heroRef,
noEffect = true,
position = {sx=19,sy=26,sz=0,px=2860.050781,py=1044.398438,pz=128.924515},
orientation = 105.297729,
}
end
playMovie {movie = MOVIE_INTRO}
end
if args.event == "QEVT_CUTSCENE" then
local next_title
if args.param == 1000 then
teleport {
tcid = 3000,
position = {sx=19, sy=26, sz=0, px=2850.695313, py=634.304688, pz=132.616348, orientation=170.651855},
orientation = 242,
}
createEffect {
position={sx=19, sy=26, sz=0, px=2450.949951, py=1483.849976, pz=180.253845, orientation=0.000000},
effect="FXTYPE_FLYINGBATS",
}
playCutScene { camera = 11462, music = 51 }
return
end
if args.param == 1 then
changeCreature {
tcid = 3000,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=19, sy=26, sz=0, px=2798.750000, py=1037.750000, pz=133.715698, orientation=291.896545},
followUpAngle = 291.896545,
bubble = 11,
action = "ACTION_CARRY_BARREL",
}
end
if args.param == 2 then
setWoobState {
woid = 1022726181,
state = "WOOB_DOOR_OPEN",
}
changeCreature {
tcid = 3000,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=19, sy=26, sz=0, px=2622.148438, py=884.500000, pz=133.715698, orientation=189.085739},
followUpBhv = "JOB_QUESTSTAGING",
followUpAngle = 242,
bubble = 11,
}
changeCreature {
tcid = 2995,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
end
if args.param == 3 then
teleport {
tcid = 3000,
position = {sx=19, sy=26, sz=0, px=2622.148438, py=884.500000, pz=133.715698, orientation=189.085739},
}
changeCreature {
tcid = 3000,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_CLEAN-BAR",
loopCount = -1,
bubble = 9,
}
playQuestSpeech {
lokaid = "QUEST_1076_GIVER_START",
tcid = 2995,
}
setWoobState {
woid = 1022726181,
state = "WOOB_DOOR_CLOSE",
}
changeCreature {
tcid = 3001,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
delay = 0.5,
}
end
if args.param == 4 then
changeCreature {
tcid = 2995,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM15",
bubble = 9,
}
next_title = 122
end
if args.param == 5 then
changeCreature {
tcid = 2995,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
bubble = 9,
delay = 0.1,
}
setFixedListener {
position = {sx=19, sy=26, sz=0, px=2617.050049, py=912.500000, pz=172.595688, orientation=0.000000},
}
playQuestSpeech {
lokaid = "QUEST_1076_GIVER_ACCOMPLISHED",
tcid = 2995,
}
end
if args.param == 6 then
setFixedListener {
position = nil,
}
changeCreature {
tcid = 2995,
mortality = "MORTAL",
}
changeCreature {
tcid = 7920,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=19, sy=26, sz=0, px=2860.050781, py=1044.398438, pz=128.924515, orientation=105.297729},
followUpAngle = 105.297729,
}
next_title = 43
end
if args.param == 7 then
playQuestSpeech {
tcid = 2995,
lokaid = "QUEST_1077_IN_SCREAM",
}
playQuestSpeech {
lokaid = "INQUISITOR_GUEST",
tcid = 3001,
}
killCreature {
tcid = 2995,
}
end
if args.param == 0 then
stopQuestSpeech {
tcid = 2995,
}
setFixedListener {
position = nil,
}
setWoobState {
woid = 1022726181,
state = "WOOB_DOOR_CLOSE",
}
for index,heroRef in getHeroRefs() do
teleportHero {
heroRef = heroRef,
noEffect = true,
position = {sx=19,sy=26,sz=0,px=2860.050781,py=1044.398438,pz=128.924515},
orientation = 105.297729,
}
changeCreature {
not_in_quests_ref = heroRef,
visible = true,
}
end
destroyCreature {
tcid = 7920,
splatter = false,
}
destroyCreature {
tcid = 2995,
splatter = false,
}
changeCreature {
tcid = 3001,
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
role = "ROLE_ATTACKER",
mortality = "MORTAL",
}
teleport {
tcid = 3000,
position = {sx=19, sy=26, sz=0, px=2622.148438, py=884.500000, pz=133.715698, orientation=189.085739},
}
changeCreature {
tcid = 3000,
gotoPosition = {sx=19, sy=26, sz=0, px=2617.550781, py=975.203125, pz=133.715714, orientation=106.942612},
faction = "FACTION_ENEMY_HERO",
role = "ROLE_ATTACKER",
mortality = "MORTAL",
speed = 2,
bubble = 1,
followUpBhv = "Enemy_warrior_brave",
delay = 0.2,
}
feedback = nil
cutscenePosition = nil
return
end
nextCutScene {music=next_title}
end
end
end
cutscene_SE_good = function(args)
cutscenePosition = {sx=17, sy=27, sz=0, px=2650.000000, py=2550.000000, pz=702.140381, orientation=0.000000}
feedback = function(args)
if args.event == "QEVT_ONWELCOME" then
for index,heroRef in getHeroRefs() do
changeCreature {
not_in_quests_ref = heroRef,
visible = false,
}
end
local nun = {8611,8612,8613,8614,8615,8616}
for index,tcid in ipairs(nun) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM24",
loopCount = -1,
}
end
playMovie { movie = MOVIE_INTRO }
end
if args.event == "QEVT_CUTSCENE" then
local next_title
if args.param == 1000 then
playCutScene { camera = 11411, music = 57 }
return
end
if args.param == 1 then
setFixedListener {
position = {sx=17, sy=27, sz=0, px=2532.265625, py=2766.164063, pz=719.243164, orientation=207.576096},
}
playQuestSpeech {
lokaid = "START_SE_SCRIPT",
tcid = 2978,
}
end
if args.param == 2 then
local run = {
{
tcid = 9125,
pos = {sx=17, sy=27, sz=0, px=2630.000000, py=2581.148438, pz=702.140381, orientation=208.762238},
angle = 208.762238,
},
{
tcid = 8617,
pos = {sx=17, sy=27, sz=0, px=2691.539063, py=2568.375000, pz=701.963684, orientation=339.037384},
angle = 339.037384,
},
{
tcid = 8618,
pos = {sx=17, sy=27, sz=0, px=2608.800781, py=2519.546875, pz=701.963684, orientation=11.777924},
angle = 11.777924,
}
}
for id,object in ipairs(run) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.pos,
followUpAngle = object.angle,
followUpBhv = "JOB_QUESTSTAGING",
speed = 2,
}
end
next_title = 102
end
if args.param == 3 then
setWoobState {
woid = 1010787153,
state = "WOOB_DOOR_OPEN",
}
teleport {
tcid = 8617,
position = {sx=17, sy=27, sz=0, px=2691.539063, py=2568.375000, pz=701.963684, orientation=339.037384},
orientation = 339.037384,
}
teleport {
tcid = 8618,
position = {sx=17, sy=27, sz=0, px=2608.800781, py=2519.546875, pz=701.963684, orientation=11.777924},
orientation = 11.777924,
}
changeCreature {
tcid = 9125,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=17, sy=27, sz=0, px=2563.140625, py=2710.585938, pz=705.028564, orientation=214.432648},
followUpAngle = 214.432648,
followUpBhv = "JOB_QUESTSTAGING",
}
end
if args.param == 4 then
next_title = 99
setWoobState {
woid = 1010787153,
state = "WOOB_DOOR_CLOSE",
}
setFixedListener {
position = {sx=17, sy=27, sz=0, px=2532.265625, py=2766.164063, pz=719.243164, orientation=207.576096},
}
playQuestSpeech {
lokaid = "QUEST_1061_GIVER_START",
tcid = 2978,
}
changeCreature {
tcid = 9125,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=0, sy=0, sz=-1, px=0, py=0, pz=0, orientation=0},
followUpBhv = "JOB_QUESTSTAGING",
}
teleport {
tcid = 9125,
position = {sx=17, sy=27, sz=0, px=2563.140625, py=2710.585938, pz=705.028564, orientation=214.432648},
orientation = 214.432648,
}
changeCreature {
tcid = 9125,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLE",
loopCount = -1,
}
destroyCreature {
tcid = 8617,
splatter = false,
}
destroyCreature {
tcid = 8618,
splatter = false,
}
end
if args.param == 5 then
changeCreature {
tcid = 2978,
mortality = "MORTAL",
}
killCreature {
tcid = 2978,
delay = 0.1,
}
next_title = 98
end
if args.param == 6 then
setWoobState {
woid = 1010787153,
state = "WOOB_DOOR_OPEN",
}
changeCreature {
tcid = 9125,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=17, sy=27, sz=0, px=2650.000000, py=2550.000000, pz=702.140381, orientation=0.000000},
followUpAngle = 0,
}
end
if args.param == 7 then
setWoobState {
woid = 1010787153,
state = "WOOB_DOOR_CLOSE",
}
end
if args.param == 0 then
stopQuestSpeech {
tcid = 2978,
}
setFixedListener {
position = nil,
}
destroyCreature {
tcid = 8617,
splatter = false,
}
destroyCreature {
tcid = 8618,
splatter = false,
}
setWoobState {
woid = 1010787153,
state = "WOOB_DOOR_CLOSE",
}
for index,heroRef in getHeroRefs() do
changeCreature {
not_in_quests_ref = heroRef,
visible = true,
}
teleportHero {
heroRef = heroRef,
noEffect = true,
position = {sx=17, sy=27, sz=0, px=2650.000000, py=2550.000000, pz=702.140381, orientation=0.000000},
orientation = 0,
}
end
destroyCreature {
tcid = 9125,
splatter = false,
}
changeCreature {
tcid = 2978,
mortality = "MORTAL",
}
killCreature {
tcid = 2978,
delay = 0.1,
}
feedback = nil
cutscenePosition = nil
return
end
nextCutScene {music = next_title}
end
end
end
cutscene_SW = function(args)
feedback = function(args)
if args.event == "QEVT_ONWELCOME" then
changeCreature {
tcid = 7982,
visible = false,
}
for index,heroRef in getHeroRefs() do
changeCreature {
not_in_quests_ref = heroRef,
visible = false,
}
end
playMovie { movie = MOVIE_INTRO }
end
if args.event == "QEVT_CUTSCENE" then
local next_title
if args.param == 1000 then
changeCreature {
tcid = 2985,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
playCutScene { camera=11221, music = 43 }
return
end
if args.param == 1 then
setFixedListener {
position = {sx=17, sy=25, sz=-1, px=1627.203125, py=1509.304688, pz=124.984398, orientation=338.498535},
}
playQuestSpeech {
lokaid = "START_SK_SCRIPT",
tcid = 2985,
}
end
if args.param == 2 then
setFixedListener {
position = {sx=17, sy=25, sz=-1, px=1597.750000, py=1656.750000, pz=168.298187, orientation=189.819290},
}
teleport {
tcid = 3028,
position = {sx=17, sy=25, sz=-1, px=1680.300781, py=1503.250000, pz=125.084351, orientation=206.269516},
orientation = 206.269516,
}
teleport {
tcid = 2985,
position = {sx=17, sy=25, sz=-1, px=1599.650024, py=1464.050049, pz=126.456001, orientation=180.000000},
orientation = 180,
}
changeCreature {
tcid = 2985,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICB",
effect = "FXTYPE_GEN_SPAWN1_I",
effectParam = {
paramtype="position",
position={sx=17,sy=25,sz=-1,px=1594.250000,py=1748.750000,pz=199.624954},
duration=1.8,
fxImpact = "FXTYPE_SK_KOHORTE_I",
},
loopCount = 1,
}
end
if args.param == 3 then
createEffect {
position = {sx=17, sy=25, sz=-1, px=1594.250000, py=1748.750000, pz=164.989578, orientation=0.000000},
effect = "FXTYPE_SK_KOHORTE_I",
duration = 6,
}
changeCreature {
tcid = 7982,
effect = "FXTYPE_SK_KOHORTE_I",
delay = 2,
}
end
if args.param == 4 then
createEffect {
position = {sx=17, sy=25, sz=-1, px=1594.250000, py=1748.750000, pz=199.625000, orientation=0.000000},
effect = "FXTYPE_SK_KOHORTE_I",
duration = 6,
}
createEffect {
position = {sx=17, sy=25, sz=-1, px=1594.250000, py=1748.750000, pz=164.989578, orientation=0.000000},
effect = "FXTYPE_SK_KOHORTE_I",
duration = 9,
}
createEffect {
position = {sx=17, sy=25, sz=-1, px=1594.250000, py=1748.750000, pz=164.989578, orientation=0.000000},
effect = "FXTYPE_SK_KOHORTE_I",
duration = 9,
}
createEffect {
position = {sx=17, sy=25, sz=-1, px=1594.250000, py=1748.750000, pz=199.625000, orientation=0.000000},
effect = "FXTYPE_GEN_SPAWN1",
duration = 7,
delay = 0,
}
changeCreature {
tcid = 7982,
effect = "FXTYPE_GEN_FRAG_DUST",
delay = 1,
}
changeCreature {
tcid = 7982,
effect = "FXTYPE_GEN_FRAG_DUST",
delay = 2.2,
}
setWoobState {
woid = 1002509550,
state = "WOOB_CHEST_OPEN",
}
changeCreature {
tcid = 7982,
delay = 1.5,
visible = true,
}
createEffect {
position = {sx=17, sy=25, sz=-1, px=1594.250000, py=1748.750000, pz=199.625000, orientation=0.000000},
effect = "FXTYPE_SK_KOHORTE_C",
duration = 4,
delay = 1,
}
next_title = 1001
changeCreature {
tcid = 7982,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM17",
loopCount = 1,
delay = 1,
}
end
if args.param == 0 then
stopQuestSpeech {
tcid = 2985,
}
setFixedListener {
position = nil,
}
for index,heroRef in getHeroRefs() do
changeCreature {
not_in_quests_ref = heroRef,
visible = true,
}
teleportHero{
heroRef = heroRef,
position = {sx=17, sy=25, sz=-1, px=1594.250000, py=1748.750000, pz=199.625000, orientation=0.000000},
orientation = 0,
noEffect = true,
}
end
destroyCreature {
tcid = 7982,
splatter = false,
}
if not (getWoobState{woid = 1002509550} == "WOOB_CHEST_OPEN") then
setWoobState {
woid = 1002509550,
state = "WOOB_CHEST_OPEN",
}
end
teleport {
tcid = 3028,
position = {sx=17, sy=25, sz=-1, px=1680.300781, py=1503.250000, pz=125.084351, orientation=206.269516},
orientation = 206.269516,
}
teleport {
tcid = 2985,
position = {sx=17, sy=25, sz=-1, px=1599.650024, py=1464.050049, pz=126.456001, orientation=180.000000},
orientation = 180,
}
changeCreature {
tcid = 2985,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM01",
loopCount = 1,
}
feedback = nil
return
end
nextCutScene {music=next_title}
end
end
end
cutscene_TG_bad = function(args)
cutscenePosition = {sx=24, sy=27, sz=0, px=1294.150024, py=2214.250000, pz=1204.939941, orientation=280.000000}
feedback = function(args)
if args.event == "QEVT_ONWELCOME" then
for index,heroRef in getHeroRefs() do
changeCreature {
not_in_quests_ref = heroRef,
visible = false,
}
end
changeCreature {
tcid = 3004,
faction = "FACTION_FRIEND_HERO_ALL",
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
teleport {
tcid = 3004,
position = {sx=24, sy=27, sz=0, px=1326.300049, py=2182.149902, pz=1199.979980, orientation=250.000000},
orientation = 250,
}
changeCreature {
tcid = 3005,
faction = "FACTION_FRIEND_HERO_ALL",
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
teleport {
tcid = 3005,
position = {sx=24, sy=27, sz=0, px=1282.150024, py=2164.000000, pz=1199.979980, orientation=200.000000},
orientation = 200,
}
playMovie { movie = MOVIE_INTRO }
end
if args.event == "QEVT_CUTSCENE" then
local next_title
if args.param == 1000 then
local tcids = {8686,8687,8688}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
}
end
changeCreature {
tcid = 3002,
visible = false,
}
changeCreature {
tcid = 8690,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=24, sy=27, sz=0, px=602.976563, py=1202.492188, pz=1027.750977, orientation=255.781784},
bubble = 11,
action = "ACTION_CARRY_BARREL",
}
changeCreature {
tcid = 8689,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_HACKING",
loopCount = -1,
bubble = 9,
}
changeCreature {
tcid = 8692,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_CONTEMPLATE",
loopCount = -1,
}
changeCreature {
tcid = 8685,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_LAYGROUND-IDLE",
visible = false,
loopCount = -1,
}
changeCreature {
tcid = 3005,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_HACKING",
loopCount = -1,
bubble = 9,
}
changeCreature {
tcid = 3004,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
bubble = 9,
}
playCutScene { camera = 11510, music = 5 }
changeCreature {
tcid = 8691,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=24, sy=27, sz=0, px=1032.062500, py=1113.640625, pz=1027.804199, orientation=342.699463},
delay = 8,
}
teleportHero {
position = {sx=24, sy=27, sz=0, px=1294.150024, py=2214.250000, pz=1204.939941, orientation=280.000000},
heroRef = heroRef,
noEffect = true,
orientation = 280.000000,
}
return
end
if args.param == 1 then
setFixedListener {
position = {sx=24, sy=27, sz=0, px=1282.648438, py=2211.796875, pz=1205.116821, orientation=32.380676},
}
playQuestSpeech {
tcid = 3004,
lokaid = "START_TW_SCRIPT",
}
end
if args.param == 2 then
local woobs = {1024116486,1024116531}
for index,woid in ipairs(woobs) do
setWoobState {
woid = woid,
state = "WOOB_THINGY_ON",
}
end
changeCreature {
tcid = 8685,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_LAYGROUND-UP",
visible = true,
loopCount = 1,
}
changeCreature {
tcid = 3004,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=24, sy=27, sz=0, px=1395.250000, py=2092.250000, pz=1203.576660, orientation=216.539764},
followUpAngle = 216,
followUpBhv = "questCreatures",
speed = 2,
bubble = 9,
delay = 0.7,
}
changeCreature {
tcid = 3005,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=24, sy=27, sz=0, px=1303.351563, py=2060.203125, pz=1206.347168, orientation=188.285797},
followUpAngle = 188,
followUpBhv = "questCreatures",
speed = 2,
bubble = 9,
delay = 1,
}
next_title = 129
end
if args.param == 3 then
changeCreature {
tcid = 3002,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
visible = true,
effect = "FXTYPE_HOLOGRAM",
}
setFixedListener {
position = {sx=24, sy=27, sz=0, px=1435.718750, py=2110.125000, pz=1199.889648, orientation=128.110764},
}
playQuestSpeech {
tcid = 3002,
lokaid = "QUEST_1079_GIVER_START",
}
changeCreature {
tcid = 3004,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=24, sy=27, sz=0, px=1352.203125, py=2025.796875, pz=1206.347046, orientation=137.162094},
followUpAngle = 137.0,
followUpBhv = "questCreatures",
speed = 2,
bubble = 9,
}
changeCreature {
tcid = 3005,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=24, sy=27, sz=0, px=1263.578125, py=2054.976563, pz=1206.347168, orientation=92.353394},
followUpAngle = 92.0,
followUpBhv = "questCreatures",
speed = 2,
bubble = 9,
}
setWoobState {
woid = 1024116521,
state = "WOOB_ANIM_OFF",
}
end
if args.param == 4 then
changeCreature {
tcid = 3002,
visible = false,
}
setWoobState {
woid = 1024116521,
state = "WOOB_ANIM_OFF",
}
setFixedListener {
position = {sx=24, sy=27, sz=0, px=1322.250000, py=2172.148438, pz=1205.076782, orientation=18.472443},
}
playQuestSpeech {
tcid = 3005,
lokaid = "TG_B_SKOOTH_1",
}
changeCreature {
tcid = 3005,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
bubble = 9,
loopCount = -1,
}
end
if args.param == 5 then
playQuestSpeech {
tcid = 3004,
lokaid = "TG_B_LEVIAN_1",
}
changeCreature {
tcid = 3005,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLE",
bubble = 9,
loopCount = -1,
}
changeCreature {
tcid = 3004,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
bubble = 9,
loopCount = -1,
}
end
if args.param == 6 then
playQuestSpeech {
tcid = 3005,
lokaid = "TG_B_SKOOTH_2",
}
playQuestSpeech {
tcid = 3005,
lokaid = "TG_B_SKOOTH_2_02",
delay = 5.6,
}
changeCreature {
tcid = 3004,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLE",
bubble = 9,
loopCount = -1,
}
changeCreature {
tcid = 3005,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
bubble = 9,
loopCount = -1,
}
end
if args.param == 0 then
stopQuestSpeech {
tcid = 3005,
}
stopQuestSpeech {
tcid = 3004,
}
stopQuestSpeech {
tcid = 3002,
}
setFixedListener {
position = nil,
}
for index,heroRef in getHeroRefs() do
changeCreature {
not_in_quests_ref = heroRef,
visible = true,
}
teleportHero {
position = {sx=24, sy=27, sz=0, px=1294.150024, py=2214.250000, pz=1204.939941, orientation=280.000000},
heroRef = heroRef,
noEffect = true,
orientation = 280.000000,
}
end
changeCreature {
tcid = 3002,
visible = false,
}
local destroy = {8690,8685,8691}
for index,tcid in ipairs(destroy) do
destroyCreature {
tcid = tcid,
splatter = false,
}
end
setWoobState {
woid = 1024116521,
state = "WOOB_INVALID",
}
changeCreature {
tcid = 3004,
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
role = "ROLE_ATTACKER",
}
changeCreature {
tcid = 3005,
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
role = "ROLE_ATTACKER",
}
feedback = nil
cutscenePosition = nil
return
end
nextCutScene {music = next_title}
end
end
end
cutscene_TG_good = function(args)
cutscenePosition = {sx=24, sy=27, sz=0, px=1294.150024, py=2214.250000, pz=1204.939941, orientation=280.000000}
feedback = function(args)
if args.event == "QEVT_ONWELCOME" then
for index,heroRef in getHeroRefs() do
changeCreature {
not_in_quests_ref = heroRef,
visible = false,
}
end
playMovie { movie = MOVIE_INTRO }
end
if args.event == "QEVT_CUTSCENE" then
local next_title
if args.param == 1000 then
local tcids = {8686,8687,8688}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
}
end
changeCreature {
tcid = 3002,
visible = false,
}
changeCreature {
tcid = 8690,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=24, sy=27, sz=0, px=602.976563, py=1202.492188, pz=1027.750977, orientation=255.781784},
bubble = 11,
action = "ACTION_CARRY_BARREL",
}
changeCreature {
tcid = 8689,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_HACKING",
loopCount = -1,
bubble = 9,
}
changeCreature {
tcid = 8692,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_CONTEMPLATE",
loopCount = -1,
}
changeCreature {
tcid = 8685,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_LAYGROUND-IDLE",
visible = false,
loopCount = -1,
}
changeCreature {
tcid = 3005,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_HACKING",
loopCount = -1,
bubble = 9,
}
changeCreature {
tcid = 3004,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
bubble = 9,
}
playCutScene { camera = 11510, music = 5 }
changeCreature {
tcid = 8691,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=24, sy=27, sz=0, px=1032.062500, py=1113.640625, pz=1027.804199, orientation=342.699463},
delay = 8,
}
teleportHero {
position = {sx=24, sy=27, sz=0, px=1294.150024, py=2214.250000, pz=1204.939941, orientation=280.000000},
heroRef = heroRef,
noEffect = true,
orientation = 280.000000,
}
return
end
if args.param == 1 then
setFixedListener {
position = {sx=24, sy=27, sz=0, px=1282.648438, py=2211.796875, pz=1205.116821, orientation=32.380676},
}
playQuestSpeech {
tcid = 3004,
lokaid = "START_TW_SCRIPT",
}
end
if args.param == 2 then
local woobs = {1024116486,1024116531}
for index,woid in ipairs(woobs) do
setWoobState {
woid = woid,
state = "WOOB_THINGY_ON",
}
end
changeCreature {
tcid = 8685,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_LAYGROUND-UP",
visible = true,
loopCount = 1,
}
changeCreature {
tcid = 3004,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=24, sy=27, sz=0, px=1395.250000, py=2092.250000, pz=1203.576660, orientation=216.539764},
followUpAngle = 216,
followUpBhv = "questCreatures",
speed = 2,
bubble = 9,
delay = 0.7,
}
changeCreature {
tcid = 3005,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=24, sy=27, sz=0, px=1303.351563, py=2060.203125, pz=1206.347168, orientation=188.285797},
followUpAngle = 188,
followUpBhv = "questCreatures",
speed = 2,
bubble = 9,
delay = 1,
}
next_title = 129
end
if args.param == 3 then
changeCreature {
tcid = 3002,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
visible = true,
effect = "FXTYPE_HOLOGRAM",
}
setFixedListener {
position = {sx=24, sy=27, sz=0, px=1435.718750, py=2110.125000, pz=1199.889648, orientation=128.110764},
}
playQuestSpeech {
tcid = 3002,
lokaid = "QUEST_1079_GIVER_START",
}
setWoobState {
woid = 1024116521,
state = "WOOB_ANIM_OFF",
}
changeCreature {
tcid = 3004,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=24, sy=27, sz=0, px=1352.203125, py=2025.796875, pz=1206.347046, orientation=137.162094},
followUpAngle = 137.0,
followUpBhv = "questCreatures",
speed = 2,
bubble = 9,
delay = 0.1
}
changeCreature {
tcid = 3005,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=24, sy=27, sz=0, px=1263.578125, py=2054.976563, pz=1206.347168, orientation=92.353394},
followUpAngle = 92.0,
followUpBhv = "questCreatures",
speed = 2,
bubble = 9,
delay = 0.1,
}
end
if args.param == 4 then
changeCreature {
tcid = 3002,
visible = false,
}
setWoobState {
woid = 1024116521,
state = "WOOB_ANIM_OFF",
}
setFixedListener {
position = {sx=24, sy=27, sz=0, px=1322.250000, py=2172.148438, pz=1205.076782, orientation=18.472443},
}
playQuestSpeech {
tcid = 3005,
lokaid = "TG_G_SKOOTH_1"
}
changeCreature {
tcid = 3005,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
bubble = 9,
loopCount = -1,
}
end
if args.param == 5 then
playQuestSpeech {
tcid = 3004,
lokaid = "TG_G_LEVIAN_1"
}
changeCreature {
tcid = 3005,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLE",
bubble = 9,
loopCount = -1,
}
changeCreature {
tcid = 3004,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
bubble = 9,
loopCount = -1,
}
end
if args.param == 6 then
playQuestSpeech {
tcid = 3005,
lokaid = "TG_G_SKOOTH_2"
}
changeCreature {
tcid = 3004,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLE",
bubble = 9,
loopCount = -1,
}
changeCreature {
tcid = 3005,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
bubble = 9,
loopCount = -1,
}
end
if args.param == 0 then
stopQuestSpeech {
tcid = 3005,
}
stopQuestSpeech {
tcid = 3004,
}
stopQuestSpeech {
tcid = 3002,
}
setFixedListener {
position = nil,
}
for index,heroRef in getHeroRefs() do
changeCreature {
not_in_quests_ref = heroRef,
visible = true,
}
teleportHero {
position = {sx=24, sy=27, sz=0, px=1294.150024, py=2214.250000, pz=1204.939941, orientation=280.000000},
heroRef = heroRef,
noEffect = true,
orientation = 280.000000,
}
end
changeCreature {
tcid = 3002,
visible = false,
}
local destroy = {8690,8685,8691}
for index,tcid in ipairs(destroy) do
destroyCreature {
tcid = tcid,
splatter = false,
}
end
setWoobState {
woid = 1024116521,
state = "WOOB_INVALID",
}
changeCreature {
tcid = 3004,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=24, sy=27, sz=0, px=659.484375, py=91.640625, pz=818.322998, orientation=345.715210},
speed=2,
}
changeCreature {
tcid = 3005,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=24, sy=27, sz=0, px=599.250000, py=111.148438, pz=820.215759, orientation=316.933929},
speed=2,
}
creatureTeleportsAway(3004,15)
creatureTeleportsAway(3005,15)
feedback = nil
cutscenePosition = nil
return
end
nextCutScene {music=next_title}
end
end
end
quest.setScript( 3538, "OnTaskAwaiting", function(args)
setTimer{
id = 3538,
interval = 1,
count = 300
}
teleportTeam(3538,{sx=5, sy=2, sz=0, px=2214, py=1246, pz=800, orientation=0})
end)
quest.setScript( 3538, "OnTaskFulfilled", function(args)
teleportTeam(3538,{sx=21, sy=26, sz=0, px=1555, py=816, pz=413, orientation=135})
end)
quest.setScript( 3538, "OnTimer", function(args)
local duration = 300
local jumppoints = {
{p={sx=5, sy=2, sz=0, px=2214, py=1246, pz=800, orientation=0},d=90},
{p={sx=19, sy=22, sz=0, px=1396, py=2201, pz=586, orientation=180},d=15},
{p={sx=39, sy=28, sz=0, px=1865, py=1639, pz=819, orientation=0},d=15},
{p={sx=6, sy=13, sz=0, px=1546, py=2437, pz=902, orientation=0},d=90},
{p={sx=21, sy=26, sz=0, px=1555, py=816, pz=413, orientation=135},d=0}
}
local point_in_time = duration - args.count
local trigger_time = 0
for i,element in ipairs(jumppoints) do
trigger_time = trigger_time + element.d
end
local time_factor = duration / trigger_time
trigger_time = 0
for i,element in ipairs(jumppoints) do
element.t = trigger_time
element.d = math.floor(element.d * time_factor)
trigger_time = trigger_time + element.d
end
local actual_element = 1
for i,element in ipairs(jumppoints) do
if point_in_time>0 and point_in_time<duration-2 then
if point_in_time == element.t then
teleportTeam(3538,element.p)
end
if point_in_time > element.t then
actual_element = i
end
end
end
local time_remains_at_position = jumppoints[actual_element].t + jumppoints[actual_element].d - point_in_time
if time_remains_at_position < duration then
showTimer {
id = args.id,
cur = time_remains_at_position,
max = duration,
}
end
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 1673, "OnLost", function(args)
local spiders = {1527,1528,1547,1548}
CM_AttackerAway(spiders)
end)
quest.setScript( 1673, "OnWon", function(args)
local spiders = {1527,1528,1547,1548}
CM_AttackerAway(spiders)
end)
quest.setScript( 1678, "OnLost", function(args)
local spiders = {4543,8797,8798,6263,6264,6265,6266,6267}
CM_AttackerAway(spiders)
end)
quest.setScript( 1678, "OnWon", function(args)
local spiders = {4543,8797,8798,6263,6264,6265,6266,6267}
CM_AttackerAway(spiders)
end)
quest.setScript( 1679, "OnLost", function(args)
local spiders = {406,431,432,435,437,438}
CM_AttackerAway(spiders)
end)
quest.setScript( 1679, "OnWon", function(args)
local spiders = {406,431,432,435,437,438}
CM_AttackerAway(spiders)
end)
quest.setScript( 1287, "OnWon", function(args)
local leichen={2112,2111,2110}
for index,tcid in ipairs(leichen) do
changeCreature {
tcid = tcid,
dont_turn = true,
}
end
showWaterfall()
local captains={8861,8864,8866}
for index,tcid in ipairs(captains) do
changeCreature {
tcid = tcid,
behaviour = "JOB_CAPTAIN",
merchantType = "MERCHANT_CAPTAIN",
}
end
changeCreature {
tcid = 1118,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_KNEE-IDLE",
loopCount = -1,
}
local mainq_doors = {1013397754,1013397761,1013397738,1013397746,1018380619,1019420597,
1023046854,1023046905,1023046923,1023046947,1023047062,1023047090,1023047109,1023047127}
for index,woid in ipairs(mainq_doors) do
setWoobState {
woid = woid,
state = "WOOB_DOOR_LOCKED",
}
end
unlockShipPortal(1287,8,"NORTH",args.heroRef)
unlockShipPortal(1287,7,"SOUTH",args.heroRef)
changeCreature {
tcid = 10447,
merchantType = "MERCHANT_COMBOMASTER",
delay = 1,
}
end)
quest.setScript( 1061, "OnSetup", function(args)
cutscene_SE_good(args)
end)
quest.setScript( 2906, "OnSetup", function(args)
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1023596520}
end)
quest.setScript( 2910, "OnSetup", function(args)
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1023593698}
end)
quest.setScript( 1074, "OnSetup", function(args)
cutscene_DR_good(args)
end)
quest.setScript( 1074, "OnTalk", function(args)
if args.state == "TASK_AWAITING" and args.tcid == 2994 then
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 1074, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM22",
loopCount = -1,
mortality = "MORTAL",
role = "ROLE_INVALID",
}
killCreature {
tcid = 2994,
delay = 2,
}
end)
quest.setScript( 1075, "OnSetup", function(args)
cutscene_DR_bad(args)
end)
quest.setScript( 1075, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 2994 then
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 1075, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 2994,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM22",
loopCount = -1,
mortality = "MORTAL",
role = "ROLE_INVALID",
}
killCreature {
tcid = 2994,
delay = 2,
}
end)
quest.setScript( 2905, "OnSetup", function(args)
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1023596411}
end)
quest.setScript( 1067, "OnSetup", function(args)
cutscene_HE_good(args)
end)
quest.setScript( 1067, "OnTaskFulfilled", function(args)
local tcids = {7503,7504,7505,7506}
changeCreature {
tcid = 2986,
role = "ROLE_INVALID",
faction="FACTION_FRIEND_HERO_ALL",
behaviour="QUESTJOB_KILL_RICH",
mortality = "IMMORTAL",
}
local delayedApplause = 0.0
for index,tcid in ipairs(tcids) do
local bubble = nil
if tcid == 7506 then
bubble = 1
end
if tcid == 7503 then
bubble = 1
end
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM04",
loopCount = 2,
delay = delayedApplause,
bubble = bubble,
}
delayedApplause = delayedApplause + 0.1
end
changeCreature {
tcid = 7506,
behaviour = "JOB_CASTER",
delay = 6,
}
feedback = nil
end)
quest.setScript( 1069, "OnSetup", function(args)
cutscene_HE_bad(args)
end)
quest.setScript( 1069, "OnTaskFulfilled", function(args)
local creatures = {
{
tcid = 7503,
pos = {sx=18,sy=24,sz=0,px=1408.648438,py=944.648438,pz=1138.015869},
},
{
tcid = 7504,
pos = {sx=18,sy=24,sz=0,px=1308.648438,py=942.101563,pz=1161.748047},
},
{
tcid = 7505,
pos = {sx=18,sy=24,sz=0,px=1188.632813,py=885.984375,pz=1185.833496},
},
{
tcid = 7506,
pos = {sx=18,sy=24,sz=0,px=1130.050781,py=939.546875,pz=1192.100342},
}
}
for id,object in ipairs(creatures) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM22",
loopCount = 1,
}
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.pos,
speed = 2,
followUpBhv = "questCreatures",
delay = 2,
}
CM_CreatureAway(object.tcid,15)
end
feedback = nil
end)
quest.setScript( 1070, "OnSetup", function(args)
changeCreature {
tcid=2987,
livesRemaining=1,
useUnconscious=true,
unconsciousTime=1,
clearAutoTeleporting = true,
}
end)
quest.setScript( 1070, "OnTaskFulfilled", function(args)
changeCreature {
tcid=2987,
livesRemaining=0,
clearUnconscious=true,
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
behaviour = "JOB_QUESTSTAGING",
mortality = "MORTAL",
dont_turn = true,
}
end)
quest.setScript( 1071, "OnStateChange", function(args)
if args.state == "TASK_AWAITING" then
changeCreature {
tcid = 2987,
emotion = "ANIM_TYPE_SM22",
loopCount = 1,
behaviour = "JOB_QUESTSTAGING",
mortality = "MORTAL",
}
killCreature {
tcid = 2987,
deinitragdoll = false,
delay = 2,
}
end
end)
quest.setScript( 1071, "OnTalk", function(args)
if args.tcid == 2987 and args.state == "PRECONDS_FULFILLED" then
changeCreature {
tcid = 2987,
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
behaviour = "JOB_QUESTSTAGING",
dont_turn = true,
}
end
end)
quest.setScript( 3151, "OnPrecondsFulfilled", function(args)
cutscene_SW(args)
end)
quest.setScript( 2904, "OnSetup", function(args)
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1023597580}
end)
quest.setScript( 1065, "OnSetup", function(args)
CM_CreatureAway( 2985, 2 )
end)
quest.setScript( 1066, "OnSetup", function(args)
CM_CreatureAway( 2985, 2 )
end)
quest.setScript( 3532, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9804,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=5, sy=1, sz=0, px=2569.814453, py=2938.104492, pz=550.289734, orientation=266.937683},
speed = 2,
}
CM_CreatureAway(9804,10)
end)
quest.setScript( 3532, "OnWon", function(args)
setWoobState {
woid = 1050361415,
state = "WOOB_CHEST_CLOSE",
}
end)
quest.setScript( 3829, "OnPrecondsFulfilled", function(args)
cutscene_DM(args)
end)
quest.setScript( 3792, "OnSetup", function(args)
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1050361415}
end)
quest.setScript( 3634, "OnTaskAwaiting", function(args)
setWoobEffect {
woid = 1051583664,
effect = "FXTYPE_PORTAL2",
}
end)
quest.setScript( 3635, "OnTaskAwaiting", function(args)
setWoobEffect {
woid = 1051583664,
effect = "FXTYPE_PORTAL2",
}
end)
quest.setScript( 2911, "OnSetup", function(args)
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1023594214}
end)
quest.setScript( 1079, "OnSetup", function(args)
cutscene_TG_good(args)
end)
quest.setScript( 1078, "OnSetup", function(args)
cutscene_TG_bad(args)
end)
quest.setScript( 1077, "OnSetup", function(args)
cutscene_IN_bad(args)
end)
quest.setScript( 1077, "OnTaskAwaiting", function(args)
if nil then
local tcids = {3000,3001}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
role = "ROLE_ATTACKER",
}
end
end
end)
quest.setScript( 1077, "OnTaskFulfilled", function(args)
stopQuestSpeech {
tcid = 3001,
}
end)
quest.setScript( 2908, "OnSetup", function(args)
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1023593803}
end)
quest.setScript( 1559, "OnWon", function(args)
tcids = {2112,2111,2110}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
dont_turn = true,
}
end
showWaterfall()
local captains = {8861,8864,8866}
for index,tcid in ipairs(captains) do
changeCreature {
tcid = tcid,
behaviour = "JOB_CAPTAIN",
merchantType = "MERCHANT_CAPTAIN",
}
end
changeCreature {
tcid = 1118,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_KNEE-DOWN",
loopCount = 1,
}
changeCreature {
tcid = 1118,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_KNEE-IDLE",
loopCount = -1,
delay = 1,
}
local mainq_doors = {1013397754,1013397761,1013397738,1013397746,1018380619,1019420597,
1023046854,1023046905,1023046923,1023046947,1023047062,1023047090,1023047109,1023047127}
for index,woid in ipairs(mainq_doors) do
setWoobState {
woid = woid,
state = "WOOB_DOOR_LOCKED",
}
end
unlockShipPortal(1287,8,"NORTH",args.heroRef)
unlockShipPortal(1287,7,"SOUTH",args.heroRef)
changeCreature {
tcid = 10447,
merchantType = "MERCHANT_COMBOMASTER",
delay = 1,
}
end)
quest.setScript( 1545, "OnTalk", function(args)
if getQuestState(3635) == "TASK_FULFILLED" or
getQuestState(3634) == "TASK_FULFILLED" then
teleportHero {
heroRef = heroRef,
position = {sx=22, sy=24, sz=0, px=985.203125, py=2766.796875, pz=16.952435, orientation=184.927094},
orientation = 184.927094,
noEffect = true,
}
else
return
end
end)
quest.setScript( 1545, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 1118,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = { px = 2055.046875, py = 2230.898438, pz = 272.572845,
sx = 21, sy = 26, sz = 0 },
followUpBhv = "JOB_RICH_STATIST",
delay = 4,
}
end)
quest.setScript( 298, "OnStateChange", function(args)
if args.state == "TASK_AWAITING" then
changeCreature {
tcid = 3179,
mortality = "MORTAL",
}
changeCreature {
tcid = 3180,
mortality = "MORTAL",
}
changeCreature {
tcid = 3181,
mortality = "MORTAL",
}
end
end)
quest.setScript( 298, "OnWon", function(args)
changeCreature {
tcid = 1119,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=27,sy=24,sz=0,px=1473,py=1569.5,pz=-72.630737},
followUpBhv = "questCreatures",
}
changeCreature {
tcid = 1119,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = 1,
delay = 25,
}
changeCreature {
tcid = 1119,
behaviour = "questCreatures",
delay = 27,
}
changeCreature {
tcid = 4751,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM01",
loopCount = 1,
delay = 27,
}
changeCreature {
tcid = 4751,
behaviour = "questCreatures",
delay = 29,
}
changeCreature {
tcid = 1119,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=27,sy=24,sz=0,px=777.296997,py=2471.75,pz=87.023102},
followUpBhv = "questCreatures",
delay = 30,
}
end)
quest.setScript( 301, "OnDialog", function(args)
if args.state == "TASK_FULFILLED" then
return "QUEST_301_DIALOG"
end
end)
quest.setScript( 301, "OnSetup", function(args)
changeCreature {
tcid=1147,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {px=189.101563,py=1757.398438,pz=91.088348,sx=26,sy=24,sz=0},
followUpBhv = "questCreatures",
delay=3,
}
end)
quest.setScript( 303, "OnWon", function(args)
changeCreature {
tcid = 1149,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=34,sy=33,sz=0,px=1106.351563,py=1106.148438,pz=1199.873047},
followUpBhv = "questCreatures",
}
end)
quest.setScript( 634, "OnStateChange", function(args)
if args.state == "TASK_FULFILLED" then
changeCreature {
tcid = 4204,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLEA",
loopCount = -1,
}
changeCreature {
tcid = 4205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
}
changeCreature {
tcid = 4206,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLEA",
loopCount = -1,
}
changeCreature {
tcid = 2083,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
}
end
end)
quest.setScript( 634, "OnTalk", function(args)
if args.tcid == 2075 and args.state == "PRECONDS_FULFILLED" then
changeCreature {
tcid = 2075,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
end
end)
quest.setScript( 634, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2075,
behaviour = "questCreatures",
}
end)
quest.setScript( 640, "OnWon", function(args)
changeCreature {
tcid = 4204,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-UP",
loopCount = 1,
}
changeCreature {
tcid = 4204,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {px=1279.351563,py=601.851563,pz=-47.707954,sx=33,sy=38,sz=-1},
followUpBhv = "JOB_QUESTSTAGING",
delay = 2,
}
creatureTeleportPos(4204,15,{sx=34,sy=38,sz=0,px=1248.046875,py=680.250000,pz=231.566406})
changeCreature {
tcid = 4204,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {px=1668.093750,py=2528.812500,pz=143.698517,sx=34,sy=37,sz=0},
followUpBhv = "JOB_POOR_STATIST",
delay = 18,
}
changeCreature {
tcid = 4205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-UP",
loopCount = 1,
}
changeCreature {
tcid = 4205,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {px=1279.351563,py=601.851563,pz=-47.707954,sx=33,sy=38,sz=-1},
followUpBhv = "JOB_QUESTSTAGING",
delay = 2,
}
creatureTeleportPos(4205,15,{sx=34,sy=38,sz=0,px=1248.046875,py=680.250000,pz=231.566406})
changeCreature {
tcid = 4205,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {px=1911.000000,py=2870.304688,pz=166.927673,sx=34,sy=37,sz=0},
followUpBhv = "JOB_POOR_STATIST",
delay = 18,
}
changeCreature {
tcid = 4206,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-UP",
loopCount = 1,
}
changeCreature {
tcid = 4206,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {px=1279.351563,py=601.851563,pz=-47.707954,sx=33,sy=38,sz=-1},
followUpBhv = "JOB_QUESTSTAGING",
delay = 2,
}
creatureTeleportPos(4206,15,{sx=34,sy=38,sz=0,px=1248.046875,py=680.250000,pz=231.566406})
changeCreature {
tcid = 4205,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {px=402.203125,py=2188.046875,pz=133.292114,sx=34,sy=37,sz=0},
followUpBhv = "JOB_POOR_STATIST",
delay = 18,
}
changeCreature {
tcid = 2083,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-UP",
loopCount = 1,
}
changeCreature {
tcid = 2083,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {px=1279.351563,py=601.851563,pz=-47.707954,sx=33,sy=38,sz=-1},
followUpBhv = "JOB_QUESTSTAGING",
delay = 2,
}
creatureTeleportPos(2083,15,{sx=34,sy=38,sz=0,px=1248.046875,py=680.250000,pz=231.566406})
changeCreature {
tcid = 2083,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {px=2594.500000,py=72.851563,pz=467.028534,sx=33,sy=38,sz=0},
followUpBhv = "QUESTJOB_KILL_RICH",
delay = 18,
}
end)
quest.setScript( 641, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 2085,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_CLEAN-BAR",
loopCount = -1,
action = "ACTION_CLEAN_BAR",
bubble = 9,
delay = 1,
}
changeCreature {
tcid = 2087,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM01",
loopCount = -1,
delay = 1,
}
end)
quest.setScript( 641, "OnTalk", function(args)
if args.tcid == 2087 and args.state == "TASK_FULFILLED" then
changeCreature {
tcid = 2087,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM02",
loopCount = 1,
}
changeCreature {
tcid = 2087,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM03",
loopCount = -1,
delay = 3,
}
end
if args.tcid == 2085 and args.state == "PRECONDS_FULFILLED" then
changeCreature {
tcid = 2085,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
end
end)
quest.setScript( 641, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 2087,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM01",
loopCount = -1,
}
changeCreature {
tcid = 2085,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_CLEAN-BAR",
loopCount = -1,
action = "ACTION_CLEAN_BAR",
bubble = 9,
}
end)
quest.setScript( 647, "OnSetup", function(args)
teleport {
tcid = 2087,
position = {sx=33, sy=37, sz=0, px=2450.703125, py=3155.046875, pz=294.051880, orientation=324.196655},
}
changeCreature {
tcid = 2087,
behaviour = "JOB_KID",
faction = "FACTION_FRIEND_HERO_ALL",
delay = 3,
}
end)
quest.setScript( 651, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2089,
behaviour = "questCreatures",
faction = "FACTION_FRIEND_HERO_ALL",
effect = "FXTYPE_GEN_TPRISON",
}
changeCreature {
tcid = 2090,
behaviour = "questCreatures",
faction = "FACTION_FRIEND_HERO_ALL",
effect = "FXTYPE_GEN_TPRISON",
}
changeCreature {
tcid = 2092,
behaviour = "questCreatures",
faction = "FACTION_FRIEND_HERO_ALL",
effect = "FXTYPE_GEN_TPRISON",
}
changeCreature {
tcid = 2093,
behaviour = "questCreatures",
faction = "FACTION_FRIEND_HERO_ALL",
effect = "FXTYPE_GEN_TPRISON",
}
changeCreature {
tcid = 2094,
behaviour = "questCreatures",
faction = "FACTION_FRIEND_HERO_ALL",
effect = "FXTYPE_GEN_TPRISON",
}
end)
quest.setScript( 1540, "OnTaskAwaiting", function(args)
setTimer {
id = 1540,
interval = 1,
count = 5,
}
end)
quest.setScript( 1540, "OnTaskFulfilled", function(args)
showWaterfall()
end)
quest.setScript( 1540, "OnTimer", function(args)
if args.count == 4 then
changeCreature {
tcid = 2115,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_ENCHANT",
effect = "FXTYPE_GEN_NOVA1",
loopCount = 1,
}
end
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 1540, "OnWon", function(args)
creatureTeleportPos(2115,3,{9,48,0,2413.649902,1816.020020,4069.870117})
end)
quest.setScript( 1905, "OnWon", function(args)
unlockShipPortal(1905,1,"NORTH",args.heroRef)
unlockShipPortal(1905,2,"NORTH",args.heroRef)
end)
quest.setScript( 652, "OnSetup", function(args)
changeCreature {
tcid = 2089,
effect = "FXTYPE_INVALID",
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
}
changeCreature {
tcid = 2090,
effect = "FXTYPE_INVALID",
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
}
changeCreature {
tcid = 2092,
effect = "FXTYPE_INVALID",
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
}
changeCreature {
tcid = 2093,
effect = "FXTYPE_INVALID",
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
}
changeCreature {
tcid = 2094,
effect = "FXTYPE_INVALID",
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
}
end)
quest.setScript( 654, "OnTalk", function(args)
if args.tcid == 2102 and args.state == "PRECONDS_FULFILLED" then
changeCreature {
tcid = 2102,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICA",
effect = "FXTYPE_GEN_NOVA3",
loopCount = 1,
delay = 3,
}
end
end)
quest.setScript( 660, "OnTaskAwaiting", function(args)
local attackers = {4873,4874,4878,4880,4881,4886}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 660, "OnTaskFulfilled", function(args)
local attackers = {4873,4874,4878,4880,4881,4886}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_INVALID",
}
end
end)
quest.setScript( 660, "OnWon", function(args)
changeCreature {
tcid = 2107,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_CREATE-JEWELERY",
loopCount = 1,
}
local droppers = {8597,8598,8599,8600,8601,8602,8603,8604,8605,8606}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 664, "OnTaskAwaiting", function(args)
local attackers = {5335,5336,5337,5338,5339,5340,5341,5342,5343,5344,5345,5346,5350,5351,5352,5353,5354,5355,5356,5357,5358,5359,5360}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 664, "OnWon", function(args)
local attackers = {5335,5336,5337,5338,5339,5340,5341,5342,5343,5344,5345,5346,5350,5351,5352,5353,5354,5355,5356,5357,5358,5359,5360}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_INVALID",
}
end
end)
quest.setScript( 668, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 2115,
mortality = "IMMORTAL",
}
end)
quest.setScript( 673, "OnWon", function(args)
setWoobState {
woid = 1018380619,
state = "WOOB_DOOR_OPEN",
}
setWoobState {
woid = 1018380619,
state = "WOOB_INVISIBLE",
delay = 0.1,
}
end)
quest.setScript( 674, "OnWon", function(args)
local elves = {2119,5265,5266,5267}
for index,tcid in ipairs(elves) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=9, sy=48, sz=0, px=1350.000000, py=1350.000000, pz=0.000000, orientation=0.000000},
}
CM_CreatureAway(tcid,25)
end
end)
quest.setScript( 1599, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8715,
visible = false,
}
setTimer {
id = 1599,
interval = 1,
count = 5,
}
end)
quest.setScript( 1599, "OnTimer", function(args)
if args.count == 5 then
changeCreature {
tcid = 2168,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_CREATE-JEWELERY",
loopCount = 1,
bubble = 11,
action = "ACTION_CREATE_JEWELLERY",
}
end
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 697, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2154,
clearAutoTeleporting = true,
}
end)
quest.setScript( 697, "OnWon", function(args)
teleport {
tcid = 2154,
position = {sx=32, sy=56, sz=-1, px=1379.349976, py=3095.300049, pz=-157.479004, orientation=15.000000},
orientation = 15,
delay = 30,
}
end)
quest.setScript( 702, "OnTaskAwaiting", function(args)
local slaves = {2157,5391,5392,5393,5394,5395,5396,5397,5398,5399}
for index,tcid in ipairs(slaves) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=35, sy=58, sz=-1, px=2550.000000, py=400.000000, pz=0.000000, orientation=0.000000},
speed = 2,
}
creatureTeleportsAway(tcid,30+0.1*index)
destroyCreature {
tcid = tcid,
splatter = false,
delay = 35,
}
end
end)
quest.setScript( 708, "OnTaskAwaiting", function(args)
local slaves = { 5403,5411,5412,5414,5410,5409,5408,5402,5413,5401,5400,5407,5404,5406,5405,2167 }
for index,tcid in ipairs(slaves) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=44, sy=61, sz=-1, px=246.578125, py=901.578125, pz=-155.627151, orientation=272.367371},
speed = 2,
}
creatureTeleportsAway(tcid,30+0.1*index)
destroyCreature {
tcid = tcid,
splatter = false,
delay = 35,
}
end
end)
quest.setScript( 712, "OnTaskAwaiting", function(args)
setWoobEffect {
woid = 1021408183,
effect = "FXTYPE_PORTAL2",
}
setWoobEffect {
woid = 1023338300,
effect = "FXTYPE_PORTAL2",
}
end)
quest.setScript( 1600, "OnTaskAwaiting", function(args)
setTimer {
id = 1600,
interval = 1,
count = 5,
}
end)
quest.setScript( 1600, "OnTimer", function(args)
if args.count == 5 then
changeCreature {
tcid = 7474,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
emotion = "ANIM_TYPE_MAGICB",
loopCount = 1,
}
changeCreature {
tcid = 7474,
effect = "FXTYPE_GEN_NOVA3",
delay = 1,
}
end
if args.count == 3 then
changeCreature {
tcid = 7474,
role = "ROLE_DIALOG",
}
solveQuest(args.id)
end
end)
quest.setScript( 1611, "OnTaskAwaiting", function(args)
setTimer {
id = 1611,
interval = 1,
count = 20,
}
local attackers = {2183,2184,2185,5186,2187}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 1611, "OnTimer", function(args)
local begleiter = 2180
if args.count == 20 then
changeCreature {
tcid = begleiter,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=48, sy=26, sz=0, px=2635.296875, py=1141.796875, pz=-1090.768555, orientation=9.462341},
followUpAngle = 9.462341,
followUpBhv = "dumbBehaviour",
}
end
if args.count == 10 then
changeCreature {
tcid = begleiter,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICB",
loopCount = 3,
}
end
if args.count == 4 then
setWoobState {
woid = 1021408807,
state = "WOOB_ANIM_ON",
}
setWoobEffect {
woid = 1021408807,
effect = "FXTYPE_INVALID",
}
end
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 2122, "OnDeath", function(args)
local lizards = {
{
tcid = 6411,
alive = true,
behaviour = "Enemy_warrior_simple_artillery",
},
{
tcid = 6413,
alive = true,
behaviour = "Enemy_warrior_kicknrush",
},
{
tcid = 6414,
alive = true,
behaviour = "Enemy_mage_phalanx",
},
{
tcid = 6415,
alive = true,
behaviour = "Enemy_mage_phalanx",
},
{
tcid = 6417,
alive = true,
behaviour = "Enemy_warrior_simple",
},
{
tcid = 6418,
alive = true,
behaviour = "Enemy_warrior_simple",
},
{
tcid = 6419,
alive = true,
behaviour = "Enemy_warrior_simple",
}
}
for i,lizard in ipair(lizards) do
if args.tcid == lizard.tcid then
lizard.alive = false,
changeCreature {
tcid = lizard.tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
mortality = "IMMORTAL",
loopCount = -1,
}
end
end
if args.tcid == 6360 then
for i,lizard in ipairs(lizards) do
if lizard.alive == false then
changeCreature {
tcid = lizard.tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLE",
loopCount = 1,
}
changeCreature {
tcid = lizard.tcid,
behaviour = lizard.behaviour,
delay = 3,
}
end
end
end
end)
quest.setScript( 2122, "OnStateChange", function(args)
local statist_lizards = {7372,7373,7374,7375,7376,7377,7378}
local food = {7379,7380,7381,7382,7383,7384,7385,7386}
if args.state == "PRECONDS_FULFILLED" then
for index,tcid in ipairs(statist_lizards) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
mortality = "IMMORTAL",
dont_turn = true,
emotion = "ANIM_TYPE_SM20",
role = "ROLE_INVALID",
loopCount = -1,
}
end
for index,tcid in ipairs(food) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
mortality = "IMMORTAL",
dont_turn = true,
emotion = "ANIM_TYPE_SM01",
role = "ROLE_INVALID",
loopCount = -1,
}
end
end
end)
quest.setScript( 2122, "OnTaskAwaiting", function(args)
local tcids = {6413,6417}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
useUnconscious = true,
livesRemaining = 255,
unconsciousTime =3,
}
end
changeCreature {
tcid = 6360,
mortality = "IMMORTAL",
}
end)
quest.setScript( 2122, "OnTaskFulfilled", function(args)
local statist_lizards = {
{
tcid = 7372,
behaviour = "JOB_RICH_STATIST",
},
{
tcid = 7373,
behaviour = "JOB_RICH_STATIST",
},
{
tcid = 7374,
behaviour = "JOB_RICH_STATIST",
},
{
tcid = 7375,
behaviour = "JOB_RICH_STATIST",
},
{
tcid = 7376,
behaviour = "JOB_RICH_STATIST",
},
{
tcid = 7377,
behaviour = "JOB_RICH_STATIST",
},
{
tcid = 7378,
behaviour = "JOB_RICH_STATIST",
}
}
local food = {
{
tcid = 7379,
behaviour = "DOG",
},
{
tcid = 7380,
behaviour = "DOG",
},
{
tcid = 7381,
behaviour = "DOG",
},
{
tcid = 7382,
behaviour = "cat",
},
{
tcid = 7383,
behaviour = "cat",
},
{
tcid = 7384,
behaviour = "sheep",
},
{
tcid = 7385,
behaviour = "sheep",
},
{
tcid = 7386,
behaviour = "sheep",
}
}
for id,object in ipairs(statist_lizards) do
changeCreature {
tcid = object.tcid,
behaviour = object.tcid,
mortality = "IMMORTAL",
dont_turn = true,
emotion = "ANIM_TYPE_IDLEA",
role = "ROLE_INVALID",
loopCount = 1,
}
end
for id,object in ipairs(food) do
changeCreature {
tcid = object.tcid,
behaviour = object.behaviour,
mortality = "IMMORTAL",
dont_turn = true,
emotion = "ANIM_TYPE_IDLEA",
role = "ROLE_INVALID",
loopCount = 1,
}
end
end)
quest.setScript( 2123, "OnDeath", function(args)
local lizards = {
{
behaviour = "Enemy_warrior_simple",
tcid = 6398,
alive = true,
}
}
for i, lizard in ipairs(lizards) do
if args.tcid == lizard.tcid then
lizard.alive = false,
changeCreature {
tcid = lizard.tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
mortality = "IMMORTAL",
loopCount = -1,
}
end
end
if args.tcid == 6364 then
for i,lizard in ipairs(lizards) do
if lizard.alive == false then
changeCreature {
tcid = lizard.tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLE",
loopCount = 1,
}
changeCreature {
tcid = lizard.tcid,
behaviour = lizard.behaviour,
delay = 3,
}
end
end
end
end)
quest.setScript( 2123, "OnStateChange", function(args)
local statist_lizards = {7332,7333,7334,7335,7336,7337,7338}
local food = {7339,7340,7341,7342,7343,7344,7345,7346}
if args.state == "PRECONDS_FULFILLED" then
for index,tcid in ipairs(statist_lizards) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
mortality = "IMMORTAL",
dont_turn = true,
emotion = "ANIM_TYPE_SM20",
role = "ROLE_INVALID",
loopCount = -1,
}
end
for index,tcid in ipairs(food) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
mortality = "IMMORTAL",
dont_turn = true,
emotion = "ANIM_TYPE_SM01",
role = "ROLE_INVALID",
loopCount = -1,
}
end
end
end)
quest.setScript( 2123, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 6398,
useUnconscious = true,
unconsciousTime = 3,
livesRemaining = 255,
}
changeCreature {
tcid = 6364,
mortality = "IMMORTAL",
}
end)
quest.setScript( 2123, "OnTaskFulfilled", function(args)
local objects = {
{
tcid = 6396,
behaviour = "Enemy_mage_phalanx",
},
{
tcid = 7332,
behaviour = "JOB_RICH_STATIST",
},
{
tcid = 7333,
behaviour = "JOB_RICH_STATIST",
},
{
tcid = 7334,
behaviour = "JOB_RICH_STATIST",
},
{
tcid = 7335,
behaviour = "JOB_RICH_STATIST",
},
{
tcid = 7336,
behaviour = "JOB_RICH_STATIST",
},
{
tcid = 7337,
behaviour = "JOB_RICH_STATIST",
},
{
tcid = 7338,
behaviour = "JOB_RICH_STATIST",
},
{
tcid = 7339,
behaviour = "DOG",
},
{
tcid = 7340,
behaviour = "DOG",
},
{
tcid = 7341,
behaviour = "DOG",
},
{
tcid = 7342,
behaviour = "cat",
},
{
tcid = 7343,
behaviour = "cat",
},
{
tcid = 7344,
behaviour = "sheep",
},
{
tcid = 7345,
behaviour = "sheep",
},
{
tcid = 7346,
behaviour = "sheep",
}
}
for id,object in ipairs(objects) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
mortality = "IMMORTAL",
dont_turn = true,
emotion = "ANIM_TYPE_IDLEA",
role = "ROLE_INVALID",
loopCount = 1,
}
changeCreature {
tcid = object.tcid,
behaviour = object.behaviour,
delay = 2,
}
end
end)
quest.setScript( 2356, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2175,
useUnconscious = true,
livesRemaining = 255,
unconsciousTime = 3,
}
end)
quest.setScript( 3194, "OnWon", function(args)
local attackers = {2183,2184,2185,5186,2187}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
end)
quest.setScript( 713, "OnTalk", function(args)
local tcids = {2172,2174}
if args.tcid == 2173 and args.state == "TASK_FULFILLED" then
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "questCreatures",
faction = "FACTION_FRIEND_HERO_ALL",
}
end
end
end)
quest.setScript( 713, "OnWon", function(args)
changeCreature {
tcid = 2174,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=54,sy=36,sz=0,px=415.593994,py=2405.800049,pz=-1213.25},
followUpAngle = 249.000000,
followUpBhv = "questCreatures",
}
changeCreature {
tcid = 2172,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=54,sy=36,sz=0,px=335.75,py=2316.453125,pz=-1211.353149},
followUpAngle = 209.248810,
followUpBhv = "questCreatures",
}
end)
quest.setScript( 714, "OnWon", function(args)
changeCreature {
tcid = 2172,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=54,sy=36,sz=0,px=3100,py=2450,pz=0},
speed = 2,
followUpBhv = "questCreatures",
followUpAngle = 338,
}
creatureTeleportPos(2172,30,{sx=55, sy=36, sz=0, px=2600.449951, py=1339.050049, pz=-1680.089966})
changeCreature {
tcid = 2174,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=54,sy=36,sz=0,px=3100,py=2400,pz=0},
speed = 2,
followUpBhv = "questCreatures",
followUpAngle = 83,
}
creatureTeleportPos(2174,30,{sx=55, sy=36, sz=0, px=2486.159912, py=1281.400024, pz=-1680.089966})
end)
quest.setScript( 716, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 2175,
behaviour = "questCreatures",
faction = "FACTION_FRIEND_HERO_ALL",
clearUnconscious = true,
livesRemaining = 0,
delay = 5,
}
end)
quest.setScript( 716, "OnWon", function(args)
changeCreature {
tcid = 2175,
behaviour = "JOB_QUESTSTAGING",
faction = "FACTION_FRIEND_HERO_ALL",
gotoPosition = {sx=56,sy=33,sz=0,px=2550,py=2650,pz=0},
speed = 2,
followUpBhv = "questCreatures",
followUpAngle = 242.094727,
}
creatureTeleportPos(2175,30,"59,33;0;1034.453125;1149.351563;-1694.492188")
end)
quest.setScript( 718, "OnTaskAwaiting", function(args)
local tcids = {
{
TCID = 6396,
pos = {sx=50,sy=32,sz=0,px=1800,py=700,pz=0},
Behaviour = "Enemy_mage_phalanx",
},
{
TCID = 6398,
pos = {sx=49,sy=32,sz=0,px=2750,py=250,pz=0},
Behaviour = "Enemy_warrior_simple",
}
}
for id,object in ipairs(tcids) do
changeCreature {
tcid = object.TCID,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.pos,
speed = 2,
followUpBhv = object.Behaviour,
clearUnconscious = true,
livesRemaining = 0,
}
end
changeCreature {
tcid = 2180,
clearAutoTeleporting = true,
useUnconscious = true,
unconsciousTime = 3,
livesRemaining = -1,
}
end)
quest.setScript( 718, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 2180,
clearAutoTeleporting = true,
}
end)
quest.setScript( 718, "OnWon", function(args)
changeCreature {
tcid = 2180,
setAutoTeleporting = true,
}
end)
quest.setScript( 719, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2182,
mortality = "IMMORTAL",
}
end)
quest.setScript( 1621, "OnTalk", function(args)
if args.tcid == 1198 and args.state == "PRECONDS_FULFILLED" then
removeFromGroup {
tcid = 1199,
}
changeCreature {
tcid = 1199,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=42,sy=17,sz=0,px=118,py=2053.800781,pz=2389.968994},
followUpBhv = "questCreatures",
followUpAngle = 356.820160,
}
teleport {
tcid = 1199,
position = {sx=42,sy=17,sz=0,px=118,py=2053.800781,pz=2389.968994},
orientation = 356.820160,
delay = 4,
}
end
end)
quest.setScript( 1621, "OnTaskAwaiting", function(args)
setTimer {
id = 1621,
interval = 1,
count = 19,
}
end)
quest.setScript( 1621, "OnTimer", function(args)
local tcids = {1198, 1199}
if args.count == 19 then
changeCreature {
tcid = 1198,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=42,sy=17,sz=0,px=136.453125,py=1992.949219,pz=2389.971191},
followUpBhv = "questCreatures",
followUpAngle = 182.816071,
}
end
if args.count == 16 then
teleport {
tcid = 1198,
position = {sx=42,sy=17,sz=0,px=136.453125,py=1992.949219,pz=2389.971191},
orientation = 182.816071,
}
end
if args.count == 15 then
changeCreature {
tcid = 1198,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = 1,
}
changeCreature {
tcid = 1199,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = 1,
delay = 0.8
}
end
if args.count == 10 then
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM01",
loopCount = 1,
}
end
end
if args.count == 9 then
changeCreature {
tcid = 1198,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=42,sy=17,sz=0,px=126.046875,py=1879.449219,pz=2389.973633},
followUpBhv = "questCreatures",
followUpAngle = 213.511017,
}
end
if args.count == 6 then
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "questCreatures",
}
end
solveQuest(args.id)
end
end)
quest.setScript( 1622, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 1201,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 0,
}
end)
quest.setScript( 1622, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 1201,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_DEATH",
loopCount = 1,
dont_turn = true,
clearAutoTeleporting = true,
role = "ROLE_INVALID",
faction = "FACTION_FRIEND_HERO_ALL",
}
changeCreature {
tcid = 1201,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM23",
clearUnconscious = true,
livesRemaining = 0,
loopCount = -1,
dont_turn = true,
clearAutoTeleporting = true,
role = "ROLE_DIALOG",
delay = 2,
}
end)
quest.setScript( 1622, "OnWon", function(args)
setWoobEffect {
woid = 1026776850,
effect = "FXTYPE_PORTAL2",
}
changeCreature {
tcid = 1201,
effect = "FXTYPE_SC_BURNINGDEAD",
}
changeCreature {
tcid = 1201,
mortality = "MORTAL",
role = "ROLE_INVALID",
delay = 4,
}
killCreature {
tcid = 1201,
deinitragdioll = false,
delay = 5,
}
end)
quest.setScript( 325, "OnTaskAwaiting", function(args)
local creatures = {
{
tcid = 2180,
pos = {sx=46,sy=22,sz=0,px=27.750000,py=248.398438,pz=549.414856},
angle = 308.251984,
},
{
tcid = 6719,
pos = {sx=46,sy=22,sz=0,px=154.796875,py=274.75,pz=549.415039},
angle = 64.983093,
}
}
for id,object in ipairs(creatures) do
changeCreature {
tcid = object.tcid,
gotoPosition = object.pos,
behaviour = "JOB_QUESTSTAGING",
followUpBhv = "questCreatures",
followUpAngle = object.angle,
}
end
end)
quest.setScript( 329, "OnDialog", function(args)
if args.state == "TASK_FULFILLED" then
return "QUEST_DIALOG_NO"
end
end)
quest.setScript( 329, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 1199 then
changeCreature {
tcid = 1199,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
end
end)
quest.setScript( 722, "OnWon", function(args)
changeCreature {
tcid = 2180,
clearUnconscious = true,
livesRemaining = 0,
}
end)
quest.setScript( 731, "OnTaskAwaiting", function(args)
local grp = {2203,8067,8068,8069,8070}
for index,tcid in ipairs(grp) do
changeCreature {
tcid = tcid,
addToGroup = 2203,
}
end
end)
quest.setScript( 731, "OnWon", function(args)
local tcids = {8067,8068,8069,8070}
for index,tcid in ipairs(tcids) do
killCreature {
tcid = tcid,
}
end
end)
quest.setScript( 736, "OnPrecondsFulfilled", function(args)
setWoobState {
woid = 1022017760,
state = "WOOB_THINGY_OFF",
}
end)
quest.setScript( 736, "OnStation", function(args)
if args.currentStation == 0 then
changeCreature {
tcid = 2210,
visible = true,
behaviour = "questCreatures",
effect = "FXTYPE_HOLOGRAM",
}
setWoobEffect {
woid = 1022017760,
effect = "FXTYPE_HOLOGRAM_RAY",
}
end
if args.currentStation == 1 then
setWoobState {
woid = 1022017751,
state = "WOOB_THINGY_OFF",
}
setWoobEffect {
woid = 1022017760,
effect = "FXTYPE_INVALID",
}
changeCreature {
tcid = 2210,
visible = false,
delay = 1,
}
end
if args.currentStation == 2 then
changeCreature {
tcid = 2211,
visible = true,
behaviour = "questCreatures",
effect = "FXTYPE_HOLOGRAM",
}
setWoobEffect {
woid = 1022017751,
effect = "FXTYPE_HOLOGRAM_RAY",
}
end
if args.currentStation == 3 then
setWoobState {
woid = 1022017740,
state = "WOOB_THINGY_OFF",
}
setWoobEffect {
woid = 1022017751,
effect = "FXTYPE_INVALID",
}
changeCreature {
tcid = 2211,
visible = false,
delay = 1,
}
end
if args.currentStation == 4 then
changeCreature {
tcid = 2212,
visible = true,
behaviour = "questCreatures",
effect = "FXTYPE_HOLOGRAM",
}
setWoobEffect {
woid = 1022017740,
effect = "FXTYPE_HOLOGRAM_RAY",
}
end
if args.currentStation == 5 then
setWoobState {
woid = 1022017703,
state = "WOOB_THINGY_OFF",
}
setWoobEffect {
woid = 1022017740,
effect = "FXTYPE_INVALID",
}
changeCreature {
tcid = 2212,
visible = false,
delay = 1,
}
end
if args.currentStation == 6 then
changeCreature {
tcid = 2213,
visible = true,
behaviour = "questCreatures",
effect = "FXTYPE_HOLOGRAM",
}
setWoobEffect {
woid = 1022017703,
effect = "FXTYPE_HOLOGRAM_RAY",
}
end
if args.currentStation == 7 then
setWoobState {
woid = 1022017661,
state = "WOOB_THINGY_OFF",
}
setWoobEffect {
woid = 1022017703,
effect = "FXTYPE_INVALID",
}
changeCreature {
tcid = 2213,
visible = false,
delay = 1,
}
end
if args.currentStation == 8 then
changeCreature {
tcid = 2214,
visible = true,
behaviour = "questCreatures",
effect = "FXTYPE_HOLOGRAM",
}
setWoobEffect {
woid = 1022017661,
effect = "FXTYPE_HOLOGRAM_RAY",
}
end
end)
quest.setScript( 736, "OnTaskAwaiting", function(args)
local tcids={2210,2211,2212,2213,2214}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
visible = false,
}
end
end)
quest.setScript( 736, "OnWon", function(args)
setWoobState {
woid = 1022458398,
state = "WOOB_THINGY_OFF",
}
setWoobEffect {
woid = 1022017661,
effect = "FXTYPE_INVALID",
}
changeCreature {
tcid = 2214,
visible = false,
delay = 1,
}
end)
quest.setScript( 737, "OnStation", function(args)
if args.currentStation == 0 then
teleport {
tcid = 1147,
position = {sx=0,sy=0,sz=0,px=0,py=0,pz=0},
orientation = 0,
}
changeCreature {
tcid = 9529,
visible = true,
delay = 1,
}
end
end)
quest.setScript( 737, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9529,
visible = false
}
end)
quest.setScript( 737, "OnTaskFulfilled", function(args)
creatureTeleportsAway(9529,1)
end)
quest.setScript( 737, "OnWon", function(args)
unlockShipPortal(737,4,"SOUTH",args.heroRef)
unlockShipPortal(737,3,"SOUTH",args.heroRef)
end)
quest.setScript( 739, "OnTaskAwaiting", function(args)
local rauch = { 1022983133,1022983142,1022983146,1022983150,
1022983157,1022983160,1022983165,1022983170}
local feuer = { 1022983361,1022983438,1022983451,1022983464,
1022983476,1022983503,1022983513,1022983537}
local orcs = {2228,2229,8169}
for index,woid in ipairs(rauch) do
setWoobEffect {
woid = woid,
effect = "FXTYPE_SMOKEBIGBLACK",
}
end
for index,woid in ipairs(feuer) do
setWoobEffect {
woid = woid,
effect = "FXTYPE_FIRE1",
}
end
for index,tcid in ipairs(orcs) do
changeCreature {
tcid = tcid,
behaviour = "JOB_MINEWORKER",
faction = "FACTION_FRIEND_HERO_ALL",
}
end
end)
quest.setScript( 739, "OnTaskFulfilled", function(args)
local rauch = { 1022983133,1022983142,1022983146,1022983150,
1022983157,1022983160,1022983165,1022983170}
local feuer = { 1022983361,1022983438,1022983451,1022983464,
1022983476,1022983503,1022983513,1022983537}
local orcs = {
{
tcid = 2228,
pos = {sx=17, sy=3, sz=0, px=1442.319946, py=1318.060059, pz=202.345001, orientation=113.000000},
angle = 7,
},
{
tcid = 2229,
pos = {sx=17, sy=3, sz=0, px=1512.500000, py=1485.349976, pz=179.617996, orientation=102.000000},
angle = 55,
},
{
tcid = 8169,
pos = {sx=17, sy=3, sz=0, px=1512.500000, py=1485.349976, pz=179.617996, orientation=102.000000},
angle = 0,
}
}
for index,woid in ipairs(rauch) do
setWoobEffect {
woid = woid,
effect = "FXTYPE_INVALID",
}
end
for index,woid in ipairs(feuer) do
setWoobEffect {
woid = woid,
effect = "FXTYPE_INVALID",
}
end
for id,object in ipairs(orcs) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.pos,
followUpBhv = "questCreatures",
speed = 2,
followUpAngle = object.angle,
}
creatureTeleportsAway(object.tcid,30)
end
end)
quest.setScript( 747, "OnLost", function(args)
local bandits = {2225,2226,2227}
CM_AttackerAway (bandits,1)
end)
quest.setScript( 747, "OnTaskAwaiting", function(args)
local orcs = {8170,8150}
local bandits = {2225,2226,2227}
local queen = 2224
for index,tcid in ipairs(orcs) do
changeCreature {
tcid = tcid,
mortality = "IMMORTAL",
}
end
for index,tcid in ipairs(bandits) do
changeCreature {
tcid = tcid,
faction = "FACTION_ENEMY_HERO",
}
end
changeCreature {
tcid = queen,
effect = "FXTYPE_GEN_TPRISON",
}
end)
quest.setScript( 747, "OnTaskFulfilled", function(args)
local orcs = {8170,8150}
local bandits = {2225,2226,2227}
local queen = 2224
for index,tcid in ipairs(orcs) do
changeCreature {
tcid = tcid,
clearUnconscious = true,
livesRemaining = 0,
mortality = "MORTAL",
}
end
changeCreature {
tcid = queen,
effect = "FXTYPE_INVALID",
}
end)
quest.setScript( 747, "OnWon", function(args)
local orcs = {8170,8150}
local bandits = {2225,2226,2227}
local queen = 2224
local stuntmen = 9439
teleport {
tcid = stuntmen,
position = {sx=16,sy=7,sz=0,px=2350,py=1200,pz=0},
}
creatureTeleportsAway(stuntmen)
for index,tcid in ipairs(orcs) do
removeFromGroup{
tcid = tcid,
}
CM_CreatureAway(tcid,0)
end
CM_AttackerAway (bandits,1)
end)
quest.setScript( 761, "OnWon", function(args)
unlockShipPortal(761,5,"SOUTH",args.heroRef)
unlockShipPortal(761,1,"SOUTH",args.heroRef)
end)
quest.setScript( 1637, "OnWon", function(args)
changeCreature {
tcid = 1147,
mortality = "IMMORTAL",
}
end)
quest.setScript( 1663, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8434,
visible = false,
}
setTimer {
id = 1663,
count = 10,
interval = 1,
}
end)
quest.setScript( 1663, "OnTimer", function(args)
local sera = 8433
local inq = 4410
if args.count == 10 then
teleport {
tcid = sera,
position = {sx=4, sy=30, sz=0, px=783.549988, py=3197.399902, pz=-68.092796, orientation=62.000000},
orientation = 62.000000,
}
changeCreature {
tcid = sera,
effect = "FXTYPE_GEN_SUMMON",
}
end
if args.count == 9 then
changeCreature {
tcid = sera,
effect = "FXTYPE_INVALID",
}
end
if args.count == 8 then
castSpell {
caster = inq,
target = sera,
slot = 0,
}
end
if args.count == 6 then
changeCreature {
tcid = sera,
mortality = "MORTAL",
}
killCreature {
tcid = sera,
delay = 0.1,
}
end
if args.count == 5 then
solveQuest(args.id)
end
end)
quest.setScript( 1663, "OnWon", function(args)
local inq = 4410
changeCreature {
tcid = inq,
mortality = "MORTAL",
faction = "FACTION_ENEMY_HERO",
behaviour = "Enemy_mage",
role = "ROLE_ATTACKER",
}
end)
quest.setScript( 1667, "OnWon", function(args)
changeCreature {
tcid = 1186,
clearAutoTeleporting = true,
}
end)
quest.setScript( 1668, "OnTaskAwaiting", function(args)
setTimer {
id = 1668,
count = 8,
interval = 1,
}
end)
quest.setScript( 1668, "OnTimer", function(args)
if args.count == 8 then
changeCreature {
tcid = 1186,
mortality = "IMMORTAL",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=4, sy=31, sz=-1, px=849.900391, py=663.898438, pz=4.897062, orientation=240.331726},
followUpAngle = 240.331726,
followUpBhv = "Enemy_warrior_brave_ex",
speed = 2,
faction = "FACTION_ENEMY_HERO",
role = "ROLE_ATTACKER",
}
end
if args.count == 5 then
castSpell {
caster = 1186,
target = 1147,
slot = 2,
}
end
if args.count == 3 then
changeCreature {
tcid = 1147,
mortality = "MORTAL",
}
end
if args.count == 2 then
removeFromGroup {
tcid = 1147,
}
killCreature {
tcid = 1147,
delay = 0.1,
}
solveQuest(args.id)
end
end)
quest.setScript( 1669, "OnTalk", function(args)
if args.state=="TASK_FULFILLED" and args.tcid==9506 then
changeCreature {
tcid = 9506,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 1669, "OnTaskAwaiting", function(args)
destroyCreature {
tcid = 1186
}
changeCreature {
tcid = 9506,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
clearAutoTeleporting = true,
behaviour = "Enemy_warrior_brave_ex",
faction = "FACTION_ENEMY_HERO",
mortality = "MORTAL",
role = "ROLE_ATTACKER",
}
end)
quest.setScript( 1669, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 9506,
clearUnconscious = true,
livesRemaining = 0,
behaviour = "JOB_QUESTSTAGING",
dont_turn = true,
emotion = "ANIM_TYPE_SM20",
faction = "FACTION_FRIEND_HERO_ALL",
mortality = "IMMORTAL",
role = "ROLE_DIALOG",
loopCount = -1,
}
changeCreature {
tcid = 8490,
mortality = "IMMORTAL",
}
end)
quest.setScript( 1669, "OnWon", function(args)
changeCreature {
tcid = 9506,
mortality = "MORTAL",
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM22",
}
killCreature {
tcid = 9506,
delay = 2,
}
end)
quest.setScript( 1670, "OnStation", function(args)
local gates1 = { 1023046854, 1023046905, 1023046923, 1023046947 }
local gates2 = { 1023047062, 1023047090, 1023047109, 1023047127 }
if args.currentStation == 0 then
for index,id in ipairs(gates1) do
setWoobState {
woid = id,
state = "WOOB_DOOR_CLOSE",
}
end
setWoobState {
woid = 1023047034,
state = "WOOB_THINGY_OFF",
}
end
if args.currentStation == 1 then
for index,id in ipairs(gates2) do
setWoobState {
woid = id,
state = "WOOB_DOOR_CLOSE",
}
end
end
end)
quest.setScript( 1671, "OnTaskAwaiting", function(args)
local grp = {8490,4413,8492,8491,8493}
for index,tcid in ipairs(grp) do
changeCreature {
tcid = tcid,
addToGroup = 8490,
}
end
changeCreature {
tcid = 8490,
mortality = "IMMORTAL",
}
end)
quest.setScript( 1671, "OnTaskFulfilled", function(args)
local boss = {4413,8491,8492,8493}
for index,tcid in ipairs(boss) do
destroyCreature {
tcid = tcid,
splatter = false,
}
end
changeCreature {
tcid = 8490,
faction = "FACTION_FRIEND_HERO_ALL",
}
setWoobEffect { effect = "FXTYPE_SIMPLELIGHT1", woid = 1023050165 }
setWoobEffect { effect = "FXTYPE_SIMPLELIGHT1", woid = 1023050183 }
setWoobEffect { effect = "FXTYPE_SIMPLELIGHT1", woid = 1023050188 }
setWoobEffect { effect = "FXTYPE_SIMPLELIGHT1", woid = 1023050229 }
end)
quest.setScript( 1672, "OnTaskFulfilled", function(args)
setWoobState {
woid = 1024713934,
state = "WOOB_DOOR_LOCKED",
}
gameCompleted()
end)
quest.setScript( 3794, "OnTaskAwaiting", function(args)
local inq = {8483,8484}
for index,tcid in ipairs(inq) do
changeCreature {
tcid = tcid,
role = "ROLE_ATTACKER",
behaviour = "Enemy_warrior_brave_ex",
faction = "FACTION_ENEMY_HERO",
}
end
end)
quest.setScript( 1511, "OnTaskAwaiting", function(args)
local tcids = { 4115, 4116, 4118, 4125, 4129, 4130, 4133, 4138, 4139, 4141, 4146, 4147, 4150, 4151 }
for index, tcid in ipairs(tcids) do
changeCreature {
tcid=tcid,
mortality="MORTAL",
}
end
end)
quest.setScript( 1511, "OnTaskFulfilled", function(args)
local inq = {4138,4139,4141,4146,4147,4150,4151,4130}
local he = {4125,4129,4133,4115,4116,4118,8710,8711,8712,8713,8714}
for index,tcid in ipairs(inq) do
creatureTeleportsAway(tcid,300)
end
for index,tcid in ipairs(he) do
creatureTeleportsAway(tcid,300)
end
end)
quest.setScript( 321, "OnWon", function(args)
if nil then
changeCreature {
tcid = 873,
effect = "FXTYPE_GEN_TELEPORT",
delay = 1,
}
teleport {
tcid = 873,
position = {px=2037.400024,py=1070.650024,pz=145.100006,sx=26,sy=25,sz=0},
orientation = 208,
delay = 3,
}
changeCreature {
tcid = 873,
effect = "FXTYPE_INVALID",
delay = 6,
}
end
changeCreature {
tcid=1186,
effect="FXTYPE_GEN_TELEPORT",
delay=4,
}
teleport {
tcid=1186,
position={px=2277.300049,py=2243.5,pz=451.100006,sx=29,sy=26,sz=0},
orientation = 314,
delay=6,
}
changeCreature {
tcid = 1186,
effect = "FXTYPE_INVALID",
delay = 10,
}
end)
quest.setScript( 322, "OnTaskFulfilled", function(args)
if nil then
changeCreature {
tcid = 873,
effect = "FXTYPE_GEN_TELEPORT",
delay = 1,
}
teleport {
tcid = 873,
position = {px=1295.800049,py=1909.349976,pz=116.918999,sx=26,sy=25,sz=-1},
orientation = 310,
delay = 3,
}
changeCreature {
tcid = 873,
effect = "FXTYPE_INVALID",
delay = 6,
}
end
end)
quest.setScript( 324, "OnStation", function(args)
if args.currentStation == 0 then
setTimer {
id = 324,
interval = 1,
count = 9,
}
end
end)
quest.setScript( 324, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 7943,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=34,sy=34,sz=0,px=1130.810059,py=1800.130005,pz=1930.630005},
followUpAngle = 343.000000,
followUpBhv = "dumbBehaviour",
delay = 2,
}
teleport {
tcid = 7943,
gotoPosition = {sx=34,sy=34,sz=0,px=1130.810059,py=1800.130005,pz=1930.630005},
orientation = 343.000000,
delay = 5,
}
end)
quest.setScript( 324, "OnTimer", function(args)
if args.count == 9 then
changeCreature {
tcid = 7943,
gotoPosition = {sx=34,sy=34,sz=0,px=1053.718750,py=1833.921875,pz=1930.767334},
followUpAngle = 146.830032,
behaviour = "JOB_QUESTSTAGING",
}
end
if args.count == 6 then
teleport {
tcid = 7943,
position = {sx=34,sy=34,sz=0,px=1053.718750,py=1833.921875,pz=1930.767334},
orientation = 146.830032,
}
end
if args.count == 5 then
changeCreature {
tcid = 7943,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = 1,
}
end
if args.count == 2 then
changeCreature {
tcid = 7943,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLEA",
loopCount = 1,
delay = 3,
}
end
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 1529, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2067,
role = "ROLE_ATTACKER",
mortality = "MORTAL",
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
}
end)
quest.setScript( 625, "OnDeath", function(args)
if args.tcid == 4162 or
args.tcid == 4163 or
args.tcid == 2371 then
changeCreature {
tcid = 2316,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end
end)
quest.setScript( 625, "OnSetup", function(args)
changeCreature {
tcid = 2316,
mortality = "IMMORTAL",
}
end)
quest.setScript( 625, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 2316 then
changeCreature {
tcid = 2316,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 625, "OnWon", function(args)
changeCreature {
tcid = 2316,
behaviour = "JOB_QUESTSTAGING",
mortality = "MORTAL",
role = "ROLE_INVALID",
emotion = "ANIM_TYPE_SM22",
loopCount = 1,
}
killCreature {
tcid = 2316,
deinitragdoll = false,
delay = 2,
}
end)
quest.setScript( 631, "OnStateChange", function(args)
if args.state == "PREFIGHT" then
changeCreature {
tcid = 5483,
role = "ROLE_ATTACKER",
}
changeCreature {
tcid = 5484,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 631, "OnTaskAwaiting", function(args)
changeCreature {
tcid=2067,
livesRemaining=1,
useUnconscious=true,
unconsciousTime=1,
}
end)
quest.setScript( 631, "OnUnconscious", function(args)
if args.tcid == 2067 then
changeCreature {
tcid = 2067,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_KNEE-IDLE",
loopCount = -1,
}
end
end)
quest.setScript( 631, "OnWon", function(args)
changeCreature {
tcid=2067,
livesRemaining=0,
clearUnconscious=true,
}
end)
quest.setScript( 632, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "QUEST_632_DIALOG_NO","QUEST_632_DIALOG_YES"
end
end)
quest.setScript( 1906, "OnWon", function(args)
unlockShipPortal(1906,1,"NORTH",args.heroRef)
unlockShipPortal(1906,2,"NORTH",args.heroRef)
end)
quest.setScript( 638, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 2089,
effect = "FXTYPE_GEN_TPRISON",
}
changeCreature {
tcid = 2090,
effect = "FXTYPE_GEN_TPRISON",
}
changeCreature {
tcid = 2092,
effect = "FXTYPE_GEN_TPRISON",
}
changeCreature {
tcid = 2093,
effect = "FXTYPE_GEN_TPRISON",
}
changeCreature {
tcid = 2094,
effect = "FXTYPE_GEN_TPRISON",
}
end)
quest.setScript( 638, "OnWon", function(args)
changeCreature {
tcid = 2089,
effect = "FXTYPE_INVALID",
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
}
changeCreature {
tcid = 2090,
effect = "FXTYPE_INVALID",
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
}
changeCreature {
tcid = 2092,
effect = "FXTYPE_INVALID",
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
}
changeCreature {
tcid = 2093,
effect = "FXTYPE_INVALID",
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
}
changeCreature {
tcid = 2094,
effect = "FXTYPE_INVALID",
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
}
end)
quest.setScript( 639, "OnTalk", function(args)
if args.tcid == 2102 and args.state == "TASK_FULFILLED" then
changeCreature {
tcid = 2102,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICA",
effect = "FXTYPE_GEN_NOVA3",
loopCount = 1,
delay = 3,
}
end
end)
quest.setScript( 648, "OnWon", function(args)
changeCreature {
tcid = 2095,
mortality = "IMMORTAL",
role = "ROLE_VICTIM",
}
end)
quest.setScript( 657, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 6667,
role = "ROLE_ATTACKER",
}
changeCreature {
tcid = 6668,
role = "ROLE_ATTACKER",
}
end)
quest.setScript( 659, "OnSetup", function(args)
changeCreature {
tcid = 2105,
mortality = "IMMORTAL",
}
end)
quest.setScript( 667, "OnStation", function(args)
if args.currentStation == 0 then
setWoobState {
woid = 1018382118,
state = "WOOB_THINGY_OFF",
}
setWoobState {
woid = 1018380619,
state = "WOOB_DOOR_LOCKED",
}
end
end)
quest.setScript( 667, "OnTaskFulfilled", function(args)
setWoobState {
woid = 1018380619,
state = "WOOB_DOOR_OPEN",
}
setWoobState {
woid = 1018380619,
state = "WOOB_INVISIBLE",
delay = 0.1,
}
end)
quest.setScript( 669, "OnTaskFulfilled", function(args)
setWoobState {
woid = 1018380619,
state = "WOOB_INVISIBLE",
delay = 0.1,
}
end)
quest.setScript( 671, "OnWon", function(args)
local elves = {2119,5265,5266,5267}
for index,tcid in ipairs(elves) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=9, sy=48, sz=0, px=1350.000000, py=1350.000000, pz=0.000000, orientation=0.000000},
}
CM_CreatureAway(tcid,25)
end
end)
quest.setScript( 1882, "OnStation", function(args)
if args.currentStation == 0 then
local objects0 = {
{
tcid = 2131,
position = {px=2313.953125,py=2860.593750,pz=0.098846,sx = 33,sy = 60,sz = -1},
},
{
tcid = 2134,
position = {px=2234.648438,py=3028.093750,pz=0.098850,sx = 33,sy = 60,sz = -1},
},
{
tcid = 2133,
position = {px=2313.812500,py=3101.375000,pz=0.098835,sx = 33,sy = 60,sz = -1},
}
}
for index,object in ipairs(objects0) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.position,
followUpBhv = "questCreatures",
effect = "FXTYPE_CHEST4W",
}
end
end
if args.currentStation == 1 then
local objects1 = {
{
tcid = 2135,
position = {px=2814.109375,py=3144.593750,pz=0.096973,sx = 33,sy = 60,sz = -1},
},
{
tcid = 2136,
position = {px=2454.906250,py=2499.046875,pz=0.097019,sx = 33,sy = 60,sz = -1},
}
}
for index,object in ipairs(objects1) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.position,
followUpBhv = "questCreatures",
effect = "FXTYPE_CHEST4W",
}
end
end
if args.currentStation == 2 then
local objects2 = {
{
tcid = 2137,
position = {px=2532.921875,py=2989.000000,pz=0.096962,sx = 33,sy = 60,sz = -1},
},
{
tcid = 2138,
position = {px=2617.000000,py=3046.250000,pz=0.089081,sx = 33,sy = 60,sz = -1},
}
}
for index,object in ipairs(objects2) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.position,
followUpBhv = "questCreatures",
effect = "FXTYPE_CHEST4W",
}
end
end
if args.currentStation == 3 then
local objects3 = {
{
tcid = 2132,
position = {px=2530.671875,py=2749.265625,pz=0.097019,sx = 33,sy = 60,sz = -1},
},
{
tcid = 2126,
position = {px=2529.250000,py=2842.000000,pz=0.097019,sx = 33,sy = 60,sz = -1},
},
{
tcid = 2140,
position = {px=2597.601563,py=2927.343750,pz=0.094891,sx = 33,sy = 60,sz = -1},
}
}
for index,object in ipairs(objects3) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.position,
followUpBhv = "questCreatures",
effect = "FXTYPE_CHEST4W",
}
end
end
if args.currentStation == 4 then
local objects4 = {
{
tcid = 2139,
position = {px=2418.039063,py=162.046875,pz=0.090408,sx = 33,sy = 61,sz = -1},
},
{
tcid = 2130,
position = {px=2450.601563,py=22.500000,pz=0.090424,sx = 33,sy = 61,sz = -1},
}
}
for index,object in ipairs(objects4) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.position,
followUpBhv = "questCreatures",
effect = "FXTYPE_CHEST4W",
}
end
end
if args.currentStation == 5 then
local objects5 = {
{
tcid = 2128,
position = {px=2224.796875,py=73.046875,pz=0.094704,sx = 33,sy = 61,sz = -1},
},
{
tcid = 2144,
position = {px=2066.148438,py=14.796875,pz=0.094700,sx = 33,sy = 61,sz = -1},
},
{
tcid = 2127,
position = {px=2644.796875,py=75.500000,pz=0.090424,sx = 33,sy = 61,sz = -1},
}
}
for index,object in ipairs(objects5) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.position,
followUpBhv = "questCreatures",
effect = "FXTYPE_CHEST4W",
}
end
end
if args.currentStation == 6 then
local objects6 = {
{
tcid = 2141,
position = {px=2222.796875,py=3085.656250,pz=0.098850,sx = 33,sy = 60,sz = -1},
},
{
tcid = 2142,
position = {px=2112.500000,py=3070.796875,pz= -0.528564,sx = 33,sy = 60,sz = -1},
},
{
tcid = 2125,
position = {px=2725.453125,py=3177.203125,pz=0.097019,sx = 33,sy = 60,sz = -1},
}
}
for index,object in ipairs(objects6) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.position,
followUpBhv = "questCreatures",
effect = "FXTYPE_CHEST4W",
}
end
end
if args.currentStation == 7 then
local objects7 = {
{
tcid = 2143,
position = {px=2258.703125,py=2806.250000,pz=0.098850,sx = 33,sy = 60,sz = -1},
},
{
tcid = 2129,
position = {px=2197.546875,py=2901.843750,pz=0.098854,sx = 33,sy = 60,sz = -1},
}
}
for index,object in ipairs(objects7) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.position,
followUpBhv = "questCreatures",
effect = "FXTYPE_CHEST4W",
}
end
end
end)
quest.setScript( 703, "OnWon", function(args)
changeCreature {
tcid = 2124,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=33,sy=55,sz=-1,px=162.953125,py=3012.843750,pz=-151.596436},
followUpBhv = "questCreatures",
delay = 5,
}
end)
quest.setScript( 727, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 2002 then
changeCreature {
tcid = 2202,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_CREATE-JEWELERY",
loopCount = 1,
bubble = 11,
action = "ACTION_CREATE_JEWELLERY",
delay = 30,
}
end
end)
quest.setScript( 727, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2201,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=39,sy=58,sz=-2,px=2715.125000,py=900.421875,pz=96.421860},
followUpBhv = "questCreatures",
delay = 1,
}
creatureTeleportsAway(2201,4)
end)
quest.setScript( 730, "OnTaskAwaiting", function(args)
setWoobEffect {
woid = 1021408183,
effect = "FXTYPE_PORTAL2",
}
setWoobEffect {
woid = 1023338300,
effect = "FXTYPE_PORTAL2",
}
end)
quest.setScript( 735, "OnTaskAwaiting", function(args)
local tcids = {7313,7314,7315,7316,7317,7318,7319,7320,7321}
for i,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 738, "OnWon", function(args)
changeCreature {
tcid = 2208,
behaviour = "JOB_QUESTSTAGING",
mortality = "IMMORTAL",
faction = "FACTION_FRIEND_HERO_ALL",
gotoPosition = {sx=56,sy=33,sz=0,px=2500,py=2650,pz=0.000000},
followUpAngle = 106,
speed = 2,
followUpBhv = "questCreatures",
}
creatureTeleportPos(2208,30,{sx=60, sy=37, sz=0, px=1297.520020, py=1155.859985, pz=-1724.810059})
end)
quest.setScript( 740, "OnTaskAwaiting", function(args)
local QuestCreatures = {
{
TCID=6245,
pos = {sx=49,sy=31,sz=0,px=750,py=2800,pz=-1671},
Behaviour= "Enemy_warrior_simple_artillery",
},
{
TCID=6247,
pos = {sx=49,sy=31,sz=0,px=1200,py=2550,pz=-1641},
Behaviour= "Enemy_warrior_kicknrush",
},
{
TCID=6248,
pos = {sx=49,sy=31,sz=0,px=1200,py=2200,pz=-1669},
Behaviour= "Enemy_warrior_kicknrush",
},
{
TCID=6250,
pos = {sx=49,sy=31,sz=0,px=1500,py=1800,pz=-1645},
Behaviour= "Enemy_warrior_simple_artillery",
},
{
TCID=6251,
pos = {sx=49,sy=31,sz=0,px=1950,py=1900,pz=-1679},
Behaviour= "Enemy_warrior_simple_artillery",
},
{
TCID=6252,
pos = {sx=49,sy=31,sz=0,px=2350,py=2300,pz=-1565},
Behaviour= "Enemy_mage_phalanx",
},
{
TCID=6254,
pos = {sx=50,sy=31,sz=0,px=300,py=1750,pz=0},
Behaviour= "Enemy_mage_phalanx",
},
{
TCID=6255,
pos = {sx=50,sy=31,sz=0,px=500,py=2300,pz=0},
Behaviour= "Enemy_warrior_simple",
},
{
TCID=6257,
pos = {sx=50,sy=31,sz=0,px=300,py=2700,pz=0},
Behaviour= "Enemy_warrior_simple",
},
{
TCID=6259,
pos = {sx=50,sy=31,sz=0,px=900,py=2950,pz=0},
Behaviour= "Enemy_warrior_simple",
},
{
TCID = 2220,
pos = {sx=50,sy=31,sz=0,px=1150,py=2400,pz=0},
Behaviour = "Enemy_warrior_simple",
}
}
for id,object in ipairs(QuestCreatures) do
changeCreature {
tcid = object.TCID,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.pos,
speed = 2,
followUpBhv = object.Behaviour,
}
end
changeCreature {
tcid = 2217,
clearAutoTeleporting = true,
}
changeCreature {
tcid = 2220,
clearAutoTeleporting = true,
}
end)
quest.setScript( 741, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "QUEST_DIALOG_NO"
end
end)
quest.setScript( 742, "OnWon", function(args)
changeCreature {
tcid = 2217,
behaviour = "Enemy_mage_phalanx",
faction = "FACTION_LIZARD_BAD",
}
creatureTeleportsAway(2217,60)
end)
quest.setScript( 746, "OnSetup", function(args)
changeCreature {
tcid = 2220,
useUnconscious = true,
livesRemaining = 255,
unconsciousTime = 2,
}
end)
quest.setScript( 746, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2220,
useUnconscious = true,
livesRemaining = 255,
unconsciousTime = 3,
clearAutoTeleporting = false,
}
changeCreature {
tcid = 2182,
mortality = "IMMORTAL",
}
end)
quest.setScript( 746, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 2220,
behaviour = "questCreatures",
faction = "FACTION_FRIEND_HERO_ALL",
}
end)
quest.setScript( 748, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2220,
behaviour = "CM_Begleiter_tapfer",
faction = "FACTION_HERO_BAD",
}
end)
quest.setScript( 2508, "OnWon", function(args)
local tcids = {6245,6247,6248,6250,6251,6252,6254,6255,6257,6259,2220}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
faction = "FACTION_LIZARD_BAD",
}
end
end)
quest.setScript( 1623, "OnTaskAwaiting", function(args)
local tc1 = { 7703, 7704, 7705 }
local tc2 = { 7707, 7712 }
local tc3 = { 7713, 7715 }
for index,tcid in ipairs(tc1) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
}
end
for index,tcid in ipairs(tc2) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-TALK",
loopCount = -1,
}
end
for index,tcid in ipairs(tc3) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-TALK",
loopCount = -1,
}
end
end)
quest.setScript( 2200, "OnWon", function(args)
local creatures = {
{
tcid = 1207,
pos = {sx=35,sy=19,sz=0,px=400,py=1100,pz=0},
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
},
{
tcid = 6732,
pos = {sx=35,sy=19,sz=0,px=500,py=1150,pz=0},
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
},
{
tcid = 6731,
pos = {sx=35,sy=19,sz=0,px=500,py=1050,pz=0},
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
}
}
for id,object in ipairs(creatures) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.pos,
followUpBhv = "questCreatures",
faction = object.faction,
}
end
end)
quest.setScript( 2201, "OnWon", function(args)
local creatures = {
{
tcid = 1207,
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
role = "ROLE_DROPPER",
},
{
tcid = 6732,
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
role = "ROLE_ATTACKER",
},
{
tcid = 6731,
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
role = "ROLE_ATTACKER",
}
}
for id,object in ipairs(creatures) do
changeCreature {
tcid = object.tcid,
behaviour = object.behaviour,
faction = object.faction,
role = object.role,
}
end
end)
quest.setScript( 2685, "OnStateChange", function(args)
local tc1 = { 7703, 7704, 7705 }
local tc2 = { 7707, 7712 }
local tc3 = {
{
tcid = 7713,
pos = {sx=39,sy=14,sz=0,px=2850,py=1550,pz=0},
},
{
tcid = 7715,
pos = {sx=39,sy=16,sz=0,px=450,py=2200,pz=0},
}
}
if args.state == "PRECONDS_FULFILLED" then
for index,tcid in ipairs(tc1) do
changeCreature {
tcid = tcid,
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
}
end
for index,tcid in ipairs(tc2) do
changeCreature {
tcid = tcid,
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
}
end
for id,object in ipairs(tc3) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.pos,
speed = 2,
followUpBhv = "dumbBehaviour",
}
creatureTeleportsAway(object.tcid,25)
end
end
end)
quest.setScript( 334, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 1205 then
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-UP",
loopCount = 1,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
delay = 2.96,
}
changeCreature {
tcid = 7829,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND_IDLEA",
loopCount = 1,
delay = 2,
}
changeCreature {
tcid = 7829,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND_IDLE",
loopCount = -1,
delay = 9.1,
}
end
if args.state == "WON" and args.tcid == 1205 then
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-TALK",
loopCount = 2,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 12.6,
}
end
end)
quest.setScript( 334, "OnTaskFulfilled", function(args)
local tcids = {7829,7830,1205}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
dont_turn = true,
delay = 1,
}
end
end)
quest.setScript( 334, "OnWon", function(args)
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-DOWN",
loopCount = 1,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 2.72,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLEA",
loopCount = 1,
delay = 25,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 31.4,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLEB",
loopCount = 1,
delay = 60,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 66.2,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLEB",
loopCount = 1,
delay = 240,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 246.2,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLEA",
loopCount = 1,
delay = 600,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 606.4,
}
changeCreature {
tcid = 7829,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-TALK",
loopCount = 1,
delay = 35,
}
changeCreature {
tcid = 7829,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 41,
}
changeCreature {
tcid = 7830,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLEA",
loopCount = 1,
delay = 50,
}
changeCreature {
tcid = 7830,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 56.2,
}
end)
quest.setScript( 337, "OnStateChange", function(args)
local tcids = {7671,7672,1205}
if args.state == "PRECONDS_FULFILLED" then
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
dont_turn = true,
}
end
end
end)
quest.setScript( 337, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 1205 then
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-UP",
loopCount = 1,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
delay = 2.96,
}
changeCreature {
tcid = 7671,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND_IDLEB",
loopCount = 1,
}
changeCreature {
tcid = 7671,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND_IDLE",
loopCount = -1,
delay = 7.1,
}
end
if args.state == "TASK_FULFILLED" and args.tcid == 1199 then
changeCreature {
tcid = 1199,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
end
end)
quest.setScript( 337, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-DOWN",
loopCount = 1,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 2.72,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLEA",
loopCount = 1,
delay = 25,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 31.4,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLEB",
loopCount = 1,
delay = 60,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 66.2,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLEB",
loopCount = 1,
delay = 240,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 246.2,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLEA",
loopCount = 1,
delay = 600,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 606.4,
}
changeCreature {
tcid = 7672,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-TALK",
loopCount = 1,
delay = 35,
}
changeCreature {
tcid = 7672,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 41,
}
changeCreature {
tcid = 7671,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLEA",
loopCount = 1,
delay = 50,
}
changeCreature {
tcid = 7671,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 56.2,
}
end)
quest.setScript( 338, "OnStateChange", function(args)
local tcids = {7801,7803,1205}
if args.state == "PRECONDS_FULFILLED" then
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
dont_turn = true,
}
end
end
end)
quest.setScript( 338, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 1205 then
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-UP",
loopCount = 1,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
delay = 2.96,
}
removeFromGroup {
tcid = 1199,
}
changeCreature {
tcid = 1199,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=31,sy=17,sz=0,px=370.5,py=317.539063,pz=650.299683},
followUpBhv = "questCreatures",
followUpAngle = 155.083527,
}
teleport {
tcid = 1199,
position = {sx=31,sy=17,sz=0,px=370.5,py=317.539063,pz=650.299683},
orientation = 155.083527,
delay = 4,
}
end
end)
quest.setScript( 338, "OnTaskAwaiting", function(args)
setTimer {
id = 338,
interval = 1,
count = 18,
}
end)
quest.setScript( 338, "OnTimer", function(args)
local tcids = {1199, 1205}
if args.count == 18 then
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=31,sy=17,sz=0,px=393.398438,py=376.699219,pz=651.217346},
followUpBhv = "questCreatures",
followUpAngle = 326.884460,
}
end
if args.count == 16 then
teleport {
tcid = 1205,
position = {sx=31,sy=17,sz=0,px=393.398438,py=376.699219,pz=651.217346},
orientation = 326.884460,
}
end
if args.count == 15 then
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = 1,
}
changeCreature {
tcid = 1199,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = 1,
delay = 0.9,
}
end
if args.count == 10 then
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM01",
loopCount = 1,
}
end
end
if args.count == 9 then
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "questCreatures",
}
end
solveQuest(args.id)
end
end)
quest.setScript( 339, "OnWon", function(args)
setWoobEffect {
woid = 1026776850,
effect = "FXTYPE_PORTAL2",
}
end)
quest.setScript( 340, "OnPrecondsFulfilled", function(args)
local tcids = {1205,7839,7840}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
}
end
end)
quest.setScript( 340, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 1205 then
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-UP",
loopCount = 1,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
delay = 2.96,
}
changeCreature {
tcid = 7839,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND_IDLEB",
loopCount = 1,
}
changeCreature {
tcid = 7839,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND_IDLE",
loopCount = -1,
delay = 7.1,
}
end
end)
quest.setScript( 340, "OnWon", function(args)
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICB",
}
changeCreature {
tcid = 9278,
effect = "FXTYPE_DG_FEUERBODEN",
mortality = "MORTAL",
delay = 1,
}
killCreature {
tcid = 9278,
delay = 3,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-DOWN",
loopCount = 1,
delay = 3,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 5.72,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLEA",
loopCount = 1,
delay = 25,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 31.4,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLEB",
loopCount = 1,
delay = 60,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 66.2,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLEB",
loopCount = 1,
delay = 240,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 246.2,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLEA",
loopCount = 1,
delay = 600,
}
changeCreature {
tcid = 1205,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 606.4,
}
changeCreature {
tcid = 7840,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-TALK",
loopCount = 1,
delay = 35,
}
changeCreature {
tcid = 7840,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 41,
}
changeCreature {
tcid = 7839,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLEA",
loopCount = 1,
delay = 50,
}
changeCreature {
tcid = 7839,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 56.2,
}
end)
quest.setScript( 750, "OnTalk", function(args)
if args.tcid == 7018 then
changeCreature {
tcid = 2220,
gotoPosition = {sx=45, sy=22, sz=0, px=1100.000000, py=950.000000, pz=565.000000, orientation=1.000000},
speed = 2,
followUpBhv = "questCreatures",
followUpAngle = 1,
}
removeFromGroup {
tcid = 2220,
}
end
end)
quest.setScript( 750, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2220,
clearUnconscious = true,
livesRemaining = 0,
}
teleport {
tcid = 9534,
position = {sx=45, sy=22, sz=0, px=1100.000000, py=950.000000, pz=565.000000, orientation=1.000000},
orientation = 1,
delay = 0,
}
destroyCreature {
tcid = 2220,
splatter = false,
}
changeCreature {
tcid = 9534,
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
delay = 0.1,
}
end)
quest.setScript( 753, "OnTaskAwaiting", function(args)
local grp = {2203,8067,8068,8069,8070}
for index,tcid in ipairs(grp) do
changeCreature {
tcid = tcid,
addToGroup = 2203,
}
end
end)
quest.setScript( 753, "OnTaskFulfilled", function(args)
local tcids = {8067,8068,8069,8070}
for index,tcid in ipairs(tcids) do
killCreature {
tcid = tcid,
}
end
end)
quest.setScript( 757, "OnPrecondsFulfilled", function(args)
setWoobState {
woid = 1022042119,
state = "WOOB_THINGY_OFF",
}
end)
quest.setScript( 757, "OnSetup", function(args)
local hologramme = {2230,2231,2232,2233,2234}
for index,tcid in ipairs(hologramme) do
changeCreature {
tcid = tcid,
visible = false,
delay = 0.1,
}
end
end)
quest.setScript( 757, "OnStation", function(args)
if args.currentStation == 0 then
changeCreature {
tcid = 2230,
visible = true,
behaviour = "questCreatures",
effect = "FXTYPE_HOLOGRAM",
}
setWoobEffect {
woid = 1022042119,
effect = "FXTYPE_HOLOGRAM_RAY",
}
end
if args.currentStation == 1 then
setWoobState {
woid = 1022042112,
state = "WOOB_THINGY_OFF",
}
setWoobEffect {
woid = 1022042119,
effect = "FXTYPE_INVALID",
}
changeCreature {
tcid = 2230,
visible = false,
delay = 1,
}
end
if args.currentStation == 2 then
changeCreature {
tcid = 2231,
visible = true,
behaviour = "questCreatures",
effect = "FXTYPE_HOLOGRAM",
}
setWoobEffect {
woid = 1022042112,
effect = "FXTYPE_HOLOGRAM_RAY",
}
end
if args.currentStation == 3 then
setWoobState {
woid = 1022042102,
state = "WOOB_THINGY_OFF",
}
setWoobEffect {
woid = 1022042112,
effect = "FXTYPE_INVALID",
}
changeCreature {
tcid = 2231,
visible = false,
delay = 1,
}
end
if args.currentStation == 4 then
changeCreature {
tcid = 2232,
visible = true,
behaviour = "questCreatures",
effect = "FXTYPE_HOLOGRAM",
}
setWoobEffect {
woid = 1022042102,
effect = "FXTYPE_HOLOGRAM_RAY",
}
end
if args.currentStation == 5 then
setWoobState {
woid = 1022042095,
state = "WOOB_THINGY_OFF",
}
setWoobEffect {
woid = 1022042102,
effect = "FXTYPE_INVALID",
}
changeCreature {
tcid = 2232,
visible = false,
delay = 1,
}
end
if args.currentStation == 6 then
changeCreature {
tcid = 2233,
visible = true,
behaviour = "questCreatures",
effect = "FXTYPE_HOLOGRAM",
}
setWoobEffect {
woid = 1022042095,
effect = "FXTYPE_HOLOGRAM_RAY",
}
end
if args.currentStation == 7 then
setWoobState {
woid = 1022041893,
state = "WOOB_THINGY_OFF",
}
setWoobEffect {
woid = 1022042095,
effect = "FXTYPE_INVALID",
}
changeCreature {
tcid = 2233,
visible = false,
delay = 1,
}
end
if args.currentStation == 8 then
changeCreature {
tcid = 2234,
visible = true,
behaviour = "questCreatures",
effect = "FXTYPE_HOLOGRAM",
}
setWoobEffect {
woid = 1022041893,
effect = "FXTYPE_HOLOGRAM_RAY",
}
end
end)
quest.setScript( 757, "OnWon", function(args)
setWoobState {
woid = 1022458416,
state = "WOOB_THINGY_OFF",
}
setWoobEffect {
woid = 1022041893,
effect = "FXTYPE_INVALID",
}
changeCreature {
tcid = 2234,
visible = false,
delay = 1,
}
end)
quest.setScript( 759, "OnStation", function(args)
if args.currentStation == 0 then
teleport {
tcid = 1186,
position = {sx=0,sy=0,sz=0,px=0,py=0,pz=0},
orientation = 0,
}
changeCreature {
tcid = 9522,
visible = true,
}
changeCreature {
tcid = 9522,
effect = "FXTYPE_HOLOGRAM",
delay = 0.1,
}
end
end)
quest.setScript( 759, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9522,
visible = false,
}
teleport {
tcid = 1186,
position = {sx=0,sy=0,sz=0,px=0,py=0,pz=0},
orientation = 0,
}
end)
quest.setScript( 759, "OnTaskFulfilled", function(args)
creatureTeleportsAway(9522,1)
end)
quest.setScript( 759, "OnWon", function(args)
unlockShipPortal(759,4,"SOUTH",args.heroRef)
unlockShipPortal(759,3,"SOUTH",args.heroRef)
end)
quest.setScript( 773, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" then
changeCreature {
tcid = 2240,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM15",
loopCount = 1,
bubble = 9,
dont_turn = true,
}
changeCreature {
tcid = 2240,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM19",
loopCount = 1,
delay = 2,
}
changeCreature {
tcid = 2240,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
delay = 7.1,
}
end
end)
quest.setScript( 773, "OnWon", function(args)
changeCreature {
tcid = 2240,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_LAYGROUND-UP",
loopCount = 1,
dont_turn = true,
delay = 2,
}
changeCreature {
tcid = 2240,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLE",
dont_turn = false,
loopCount = 1,
delay = 5,
}
changeCreature {
tcid = 2240,
behaviour = "questCreatures",
faction = "FACTION_FRIEND_HERO_ALL",
delay = 5.8,
}
end)
quest.setScript( 775, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 2224,
effect = "FXTYPE_GEN_TRANSFORM",
delay = 1,
}
end)
quest.setScript( 781, "OnTaskAwaiting", function(args)
creatureTeleportsAway(2224,2)
end)
quest.setScript( 782, "OnWon", function(args)
unlockShipPortal(782,5,"SOUTH",args.heroRef)
unlockShipPortal(782,1,"SOUTH",args.heroRef)
end)
quest.setScript( 1674, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8498,
visible = false,
}
setTimer {
id = 1674,
count = 10,
interval = 1,
}
end)
quest.setScript( 1674, "OnTimer", function(args)
local sera = 4414
local inq = 8499
if args.count == 10 then
teleport {
tcid = sera,
position = {sx=4, sy=30, sz=0, px=783.549988, py=3197.399902, pz=-68.092796, orientation=62.000000},
orientation = 62.000000,
}
changeCreature {
tcid = sera,
effect = "FXTYPE_GEN_SUMMON",
}
end
if args.count == 9 then
changeCreature {
tcid = sera,
effect = "FXTYPE_INVALID",
clearAutoTeleporting = true,
}
end
if args.count == 8 then
castSpell {
caster = sera,
target = inq,
slot = 1,
}
end
if args.count == 6 then
changeCreature {
tcid = inq,
mortality = "MORTAL",
}
killCreature {
tcid = inq,
delay = 0.1,
}
end
if args.count == 5 then
solveQuest(args.id)
end
end)
quest.setScript( 1674, "OnWon", function(args)
local sera = 4414
changeCreature {
tcid = sera,
mortality = "MORTAL",
faction = "FACTION_ENEMY_HERO",
behaviour = "Enemy_warrior_brave_ex",
role = "ROLE_ATTACKER",
}
end)
quest.setScript( 1675, "OnStation", function(args)
local gates1 = { 1023046854, 1023046905, 1023046923, 1023046947 }
local gates2 = { 1023047062, 1023047090, 1023047109, 1023047127 }
if args.currentStation == 0 then
for index,id in ipairs(gates1) do
setWoobState {
woid = id,
state = "WOOB_DOOR_CLOSE",
}
end
setWoobState {
woid = 1023047034,
state = "WOOB_THINGY_OFF",
}
end
if args.currentStation == 1 then
for index,id in ipairs(gates2) do
setWoobState {
woid = id,
state = "WOOB_DOOR_CLOSE",
}
end
end
end)
quest.setScript( 1676, "OnTaskAwaiting", function(args)
local grp = {8490,4413,8492,8491,8493}
for index,tcid in ipairs(grp) do
changeCreature {
tcid = tcid,
addToGroup = 8490,
}
end
changeCreature {
tcid = 8490,
mortality = "IMMORTAL",
}
end)
quest.setScript( 1676, "OnTaskFulfilled", function(args)
local boss = {4413,8491,8492,8493}
for index,tcid in ipairs(boss) do
destroyCreature {
tcid = tcid,
splatter = false,
}
end
changeCreature {
tcid = 8490,
faction = "FACTION_FRIEND_HERO_ALL",
}
setWoobEffect { effect = "FXTYPE_SIMPLELIGHT1", woid = 1023050165 }
setWoobEffect { effect = "FXTYPE_SIMPLELIGHT1", woid = 1023050183 }
setWoobEffect { effect = "FXTYPE_SIMPLELIGHT1", woid = 1023050188 }
setWoobEffect { effect = "FXTYPE_SIMPLELIGHT1", woid = 1023050229 }
end)
quest.setScript( 1677, "OnTaskFulfilled", function(args)
setWoobState {
woid = 1024713934,
state = "WOOB_DOOR_LOCKED",
}
gameCompleted()
end)
quest.setScript( 772, "OnTaskAwaiting", function(args)
teleport {
tcid = 4414,
position = {sx=4, sy=30, sz=0, px=783.549988, py=3197.399902, pz=-68.092796, orientation=62.000000},
orientation = 62.000000,
}
end)
quest.setScript( 776, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "QUEST_DIALOG_NO"
end
end)
quest.setScript( 776, "OnStateChange", function(args)
if args.state == "PREFIGHT" then
changeCreature {
tcid = 9506,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
clearAutoTeleporting = true,
behaviour = "Enemy_warrior_brave_ex",
faction = "FACTION_ENEMY_HERO",
}
local guards = {9229,9230}
for index,tcid in ipairs(guards) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=3, sy=31, sz=-1, px=2000.000000, py=1600.000000, pz=0.000000, orientation=0.000000},
speed = 2,
}
creatureTeleportsAway(tcid,25)
end
end
end)
quest.setScript( 776, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid ==9506 then
changeCreature {
tcid = 9506,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 776, "OnTaskAwaiting", function(args)
destroyCreature {
tcid = 1186
}
end)
quest.setScript( 776, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 9506,
clearUnconscious = true,
livesRemaining = 0,
behaviour = "JOB_QUESTSTAGING",
dont_turn = true,
emotion = "ANIM_TYPE_SM20",
faction = "FACTION_FRIEND_HERO_ALL",
mortality = "IMMORTAL",
role = "ROLE_DIALOG",
loopCount = -1,
}
changeCreature {
tcid = 8490,
mortality = "IMMORTAL",
}
end)
quest.setScript( 776, "OnWon", function(args)
changeCreature {
tcid = 9506,
mortality = "MORTAL",
role = "ROLE_ATTACKER",
behaviour = "Enemy_warrior_brave_ex",
emotion = "ANIM_TYPE_SM22",
faction = "FACTION_ENEMY_HERO",
}
end)
quest.setScript( 1326, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 5218,
behaviour = "JOB_QUESTSTAGING",
mortality = "IMMORTAL",
speed = 2,
gotoPosition = {sx = 22, sy = 27, sz = 0, px = 1889, py = 1956, pz = 0},
}
creatureTeleportsAway (5218, 5)
end)
quest.setScript( 1328, "OnTaskAwaiting", function(args)
local tcids = {3619,3620,3621,3622,3623}
for i, tcid in ipairs(tcids) do
changeCreature{
tcid = tcid,
behaviour = "QUESTJOB_KILL_RICH"
}
end
end)
quest.setScript( 1330, "OnTaskAwaiting", function(args)
local tcids = { 3619, 3620, 3621, 3622, 3623 }
for i, tcid in ipairs(tcids) do
changeCreature{
tcid = tcid,
role = "ROLE_VICTIM",
mortality = "IMMORTAL",
}
end
end)
quest.setScript( 1330, "OnTaskFulfilled", function(args)
local tcids = { 3619, 3620, 3621, 3622, 3623 }
for i, tcid in ipairs(tcids) do
changeCreature{
tcid = tcid,
role = "ROLE_VICTIM"
}
end
end)
quest.setScript( 1330, "OnWon", function(args)
local childs = {
{tcid=3619, pos={sx=21,sy=27,sz=0 , px=1113.852,py=1727.953,pz=123.368}},
{tcid=3620, pos={sx=21,sy=27,sz=0 , px=1270.000,py=1788.250,pz=123.368}},
{tcid=3621, pos={sx=21,sy=27,sz=0 , px=1140.000,py=1782.047,pz=123.368}},
{tcid=3622, pos={sx=21,sy=27,sz=0 , px=1173.648,py=1850.352,pz=123.368}},
{tcid=3623, pos={sx=21,sy=27,sz=0 , px=1265.352,py=1919.703,pz=123.368}}
}
for i, child in ipairs(childs) do
changeCreature {
tcid = child.tcid,
behaviour = "JOB_KID",
followUpBhv = "JOB_KID",
gotoPosition = child.pos,
delay = 5,
}
end
end)
quest.setScript( 1873, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 5219,
behaviour = "JOB_QUESTSTAGING",
mortality = "IMMORTAL",
speed = 2,
gotoPosition = {sx = 22, sy = 27, sz = 0, px =1590, py = 2022, pz = 0},
}
creatureTeleportsAway (5219, 5)
end)
quest.setScript( 1336, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 3630,
mortality = "IMMORTAL",
}
changeCreature {
tcid = 3625,
mortality = "IMMORTAL",
}
end)
quest.setScript( 1336, "OnWon", function(args)
creatureTeleportPos ( 7160, 20, { 21,27,0 , 1116.102,1952.750,123.369 } )
creatureTeleportPos ( 3625, 20, { 21,27,0 , 1269.750,2061.953,98.737 } )
creatureTeleportPos ( 3630, 20, { 21,27,0 , 1362.313,1953.219,104.105 } )
changeCreature{
tcid = 7160,
behaviour = "JOB_RICH_STATIST",
delay = 30,
}
changeCreature{
tcid = 3625,
behaviour = "JOB_KID",
delay = 30,
}
changeCreature{
tcid = 3630,
behaviour = "JOB_KID",
delay = 30,
}
end)
quest.setScript( 1342, "OnStateChange", function(args)
if args.state == "TASK_AWAITING" then
creatureTeleportsAway ( 3639, 1 )
local soldiers = { 3642, 3643, 3644 }
for i, tcid in ipairs(soldiers) do
changeCreature{
tcid = tcid,
creature = "Dead_zombie_citizen",
faction = "FACTION_ENEMY_HERO_GOOD",
delay = 1
}
end
end
end)
quest.setScript( 1357, "OnTaskFulfilled", function(args)
teleport {
tcid = 3639,
position = {sx=37,sy=27,sz=0,px=1000,py=1650,pz=0}
}
end)
quest.setScript( 1357, "OnWon", function(args)
creatureTeleportPos( 3639, 0, { 37,27,-1,716.601990,1501.900024,-103.547997, 161 } )
end)
quest.setScript( 1359, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 3639,
useUnconscious = 1,
livesRemaining = 1,
unconsciousTime = 5,
}
end)
quest.setScript( 1359, "OnUnconscious", function(args)
if args.tcid == 3639 then
changeCreature {
tcid = 3639,
faction = "FACTION_FRIEND_HERO_GOOD",
livesRemaining = 0,
}
creatureTeleportPos( 3639, 0,{0, 0, 0, 0, 0, 0 } )
solveQuest(1359)
end
end)
quest.setScript( 2407, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 3666,
mortality = "IMMORTAL",
}
changeCreature {
tcid = 3667,
mortality = "IMMORTAL",
}
changeCreature {
tcid = 3668,
mortality = "IMMORTAL",
}
changeCreature {
tcid = 3669,
mortality = "IMMORTAL",
}
end)
quest.setScript( 2407, "OnWon", function(args)
local creatures = {
{tcid=3666,pos={sx=38,sy=26,sz=0 , px=664.453,py=2471.250,pz=39.896}},
{tcid=3667,pos={sx=38,sy=26,sz=0 , px=756.203,py=2444.703,pz=39.950}},
{tcid=3668,pos={sx=38,sy=26,sz=0 , px=750.352,py=2265.000,pz=39.961}},
{tcid=3669,pos={sx=38,sy=26,sz=0 , px=643.898,py=2170.398,pz=39.992}}
}
for i,object in ipairs(creatures) do
changeCreature {
tcid = object.tcid,
gotoPosition = object.pos,
behaviour = "JOB_KID",
followUpBhv = "JOB_KID",
delay = 4,
}
end
end)
quest.setScript( 1630, "OnTaskAwaiting", function(args)
local demons = {
{tid=4322, creature="Human_stat_citizen_child_m01"},
{tid=4323, creature="Human_stat_citizen_child_m02"},
{tid=4324, creature="Human_stat_citizen_child_f01"},
{tid=4325, creature="Human_stat_citizen_child_f02"}
}
for i, demon in ipairs(demons) do
changeCreature {
tcid = demon.tcid,
creature = demon.creature,
}
end
end)
quest.setScript( 1631, "OnStateChange", function(args)
local demons = { 4322, 4323, 4324, 4325 }
if args.state == "PREFIGHT" then
for i, demon in ipairs(demons) do
changeCreature {
tcid = demon,
mortality = "MORTAL",
faction = "FACTION_ENEMY_HERO",
behaviour = "Enemy_warrior_brave_ex",
}
end
end
end)
quest.setScript( 1631, "OnTalk", function(args)
local demons = {
{tcid=4322, creature="Demon_guard_small"},
{tcid=4323, creature="Demon_guard_elite"},
{tcid=4324, creature="Demon_guard"},
{tcid=4325, creature="Demon_guard_elite"}
}
if args.tcid == 4322 and args.state == "TASK_AWAITING" then
for i, demon in ipairs(demons) do
changeCreature {
tcid = demon.tcid,
effect = "FXTYPE_GEN_TRANSFORM",
}
changeCreature {
tcid = demon.tcid,
creature = demon.creature,
delay = 2,
}
end
end
end)
quest.setScript( 2280, "OnStation", function(args)
if args.currentStation == 0 then
changeCreature{
tcid = 6928,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM22",
loopCount = 1,
mortality = "MORTAL",
role = "ROLE_INVALID"
}
killCreature{
tcid = 6928,
delay = 2,
}
end
end)
quest.setScript( 2280, "OnTalk", function(args)
if args.tcid == 6928 and args.state == "TASK_AWAITING" then
changeCreature{
tcid = 6928,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 2280, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 6928,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
changeCreature {
tcid = 6929,
mortality = "IMMORTAL",
}
end)
quest.setScript( 2280, "OnTaskFulfilled", function(args)
creatureTeleportPos( 3639, 0, {10,42,0,1437.630005,2882.389893,3649.189941} )
end)
quest.setScript( 2280, "OnWon", function(args)
creatureTeleportsAway( 3639, 1 )
end)
quest.setScript( 2291, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 6929,
mortality = "IMMORTAL",
}
end)
quest.setScript( 2331, "OnSetup", function(args)
teleport {
tcid = 3639,
position = {sx=37, sy=27, sz=-1, px=707.703125, py=1514.101563, pz=-104.660553, orientation=158.782028},
}
end)
quest.setScript( 2549, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 7471,
mortality = "IMMORTAL"
}
changeCreature {
tcid = 7472,
mortality = "IMMORTAL"
}
end)
quest.setScript( 2549, "OnStation", function(args)
if args.currentStation == 0 then
changeCreature {
tcid = 7471,
behaviour = "questCreatures"
}
end
end)
quest.setScript( 2599, "OnTalk", function(args)
if args.tcid == 7526 and args.state == "TASK_FULFILLED" then
changeCreature {
tcid = 7526,
behaviour = "questCreatures",
}
end
end)
quest.setScript( 2599, "OnWon", function(args)
local tcids = {7526, 9104, 9105}
for i, tcid in ipairs(tcids) do
changeCreature{
tcid = tcid,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20 ,sy=27 ,sz=0 ,px=2783 ,py=1401 ,pz=24 },
speed = 2
}
creatureTeleportsAway( tcid, 10 )
end
end)
quest.setScript( 2617, "OnTaskAwaiting", function(args)
local tcids = {7554, 7558, 7559}
for i, tcid in ipairs(tcids) do
changeCreature{
tcid = tcid,
useUnconscious = true,
unconsciousTime = 2,
livesRemaining = 1,
}
end
changeCreature{
tcid = 7560,
useUnconscious = false,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
faction = "FACTION_ATMO",
gotoPosition = { sx=20,sy=27,sz=0,px=2150,py=950,pz=0 },
speed = 2
}
end)
quest.setScript( 2617, "OnUnconscious", function(args)
if args.tcid == 7554 then
local pos = {sx=20, sy=27, sz=0, px=1050.000000, py=2600.000000, pz=0.000000, orientation=0.000000}
changeCreature{
tcid = 7554,
useUnconscious = false,
role = "ROLE_INVALID",
faction = "FACTION_ATMO",
}
creatureGotoPos (7554,pos,false,2)
creatureTeleportsAway( 7554, 10 )
elseif args.tcid == 7558 then
local pos = {sx=20, sy=27, sz=0, px=1650.000000, py=1400.000000, pz=0.000000, orientation=0.000000}
changeCreature{
tcid = 7558,
useUnconscious = false,
role = "ROLE_INVALID",
faction = "FACTION_ATMO",
}
creatureGotoPos (7558,pos,false,2)
creatureTeleportsAway( 7558, 10 )
elseif args.tcid == 7559 then
local pos = {sx=20, sy=27, sz=0, px=3000.000000, py=2850.000000, pz=0.000000, orientation=0.000000}
changeCreature{
tcid = 7559,
useUnconscious = false,
role = "ROLE_INVALID",
faction = "FACTION_ATMO",
}
creatureGotoPos (7559,pos,false,2)
creatureTeleportsAway( 7559, 10 )
end
end)
quest.setScript( 2618, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 7560,
mortality = "IMMORTAL"
}
end)
quest.setScript( 2706, "OnStation", function(args)
if args.currentStation == 0 then
changeCreature {
tcid = 7816,
behaviour = "questCreatures"
}
elseif args.currentStation == 2 then
changeCreature {
tcid = 7816,
behaviour = "questCreatures"
}
changeCreature {
tcid = 9118,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=36,sy=37,sz=0 , px=250,py=2350,pz=0},
speed = 2,
delay = 2
}
creatureTeleportsAway(9118,10)
end
end)
quest.setScript( 2706, "OnTalk", function(args)
if args.tcid == 7816 and args.state == "TASK_AWAITING" then
changeCreature {
tcid = 7816,
behaviour = "Hireling_distance"
}
end
end)
quest.setScript( 2706, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 7816,
clearAutoTeleporting = true
}
end)
quest.setScript( 2711, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8893,
faction = "FACTION_HIGHELVE_PRIEST",
mortality = "MORTAL",
delay = 4,
}
local pos = {sx=35, sy=37, sz=0, px=2527.000000, py=1146.250000, pz=255.329254, orientation=343.721313}
creatureGotoPos (7816,pos,false,2,"JOB_MERCENARY",2)
changeCreature{
tcid = 7816,
faction = "FACTION_HIGHELVE",
delay = 4
}
end)
quest.setScript( 2724, "OnPrecondsFulfilled", function(args)
local tcids = { 7841, 7842, 7843, 7844 }
for i, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
mortality = "IMMORTAL"
}
end
end)
quest.setScript( 2724, "OnSetup", function(args)
if nil then
local tcids = { 7841, 7842, 7843, 7844 }
for i, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
mortality = "IMMORTAL"
}
end
end
end)
quest.setScript( 2724, "OnTaskAwaiting", function(args)
local tcids = { 7841, 7842, 7843 }
for i, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
mortality = "MORTAL"
}
end
end)
quest.setScript( 2724, "OnWon", function(args)
changeCreature {
tcid = 7844,
mortality = "MORTAL"
}
end)
quest.setScript( 2727, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 7845,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = { sx=12,sy=45,sz=0,px=1172.921,py=1326.203,pz=3044 },
followUpBhv = "questCreatures"
}
end)
quest.setScript( 2734, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 7885,
mortality = "IMMORTAL",
clearAutoTeleporting = true,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=29,sy=55,sz=0 , px=3050,py=600,pz=0},
speed = 2,
followUpBhv = "JOB_MERCENARY"
}
local tcids = { 7881, 7882, 7883, 7884 }
for i, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=29,sy=55,sz=0 , px=3050,py=600,pz=0},
speed = 2,
followUpBhv = "Enemy_mage"
}
end
end)
quest.setScript( 2736, "OnTalk", function(args)
if args.tcid == 7891 and args.state == "TASK_FULFILLED" then
changeCreature {
tcid = 7891,
behaviour = "questCreatures",
faction = "FACTION_SERAPHIM"
}
end
end)
quest.setScript( 2736, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 7891,
behaviour = "JOB_QUESTSTAGING",
mortality = "IMMORTAL",
clearAutoTeleporting = true,
gotoPosition = {sx=31,sy=59,sz=0, px=2700,py=800,sz=0},
speed = 2,
followUpBhv = "JOB_MERCENARY",
}
end)
quest.setScript( 2737, "OnStation", function(args)
changeCreature {
tcid = 8072,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=32,sy=58,sz=0 , px=2227.156,py=2121.125,pz=1410},
speed = 2
}
creatureTeleportsAway ( 8072, 10 )
end)
quest.setScript( 2737, "OnWon", function(args)
changeCreature {
tcid = 7892,
mortality = "MORTAL",
role = "ROLE_INVALID"
}
killCreature {
tcid = 7892,
deinitragdoll = true,
delay = 2
}
end)
quest.setScript( 2739, "OnWon", function(args)
local ids = {7908,7909,7910,7911,7912}
for i,id in ipairs(ids) do
doEmote {
tcid = id,
emotion = "ANIM_TYPE_ATTACKA",
loopCount = -1,
delay = math.random(0,4),
}
end
end)
quest.setScript( 2551, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 7471,
mortality = "MORTAL",
useUnconscious = true,
unconsciousTime = 4,
livesRemaining = 1
}
changeCreature {
tcid = 7472,
mortality = "MORTAL",
useUnconscious = true,
unconsciousTime = 4,
livesRemaining = 1
}
isDraydGood = true
changeCreature {
tcid = 8426,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
gotoPosition = {sx=21, sy=26, sz=0, px=1900, py=1200, pz=0},
speed = 2
}
creatureTeleportsAway (8426, 5)
end)
quest.setScript( 2551, "OnUnconscious", function(args)
local tcids = { 7471, 7472 }
for i, tcid in ipairs(tcids) do
if args.tcid == tcid then
changeCreature {
tcid = tcid,
useUnconscious = false,
faction = "FACTION_HIGHELVE",
behaviour = "questCreatures",
role = "ROLE_DIALOG"
}
end
end
end)
quest.setScript( 2551, "OnWon", function(args)
local tcids = { 7471, 7472 }
for i, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = { sx=21, sy=26, sz=0, px=2700, py=50, pz=0 },
speed = 2
}
creatureTeleportsAway( tcid, 12 )
end
end)
quest.setScript( 2694, "OnTaskFulfilled", function(args)
local tcids = { 7769, 7772 }
for i, tcid in ipairs(tcids) do
creatureTeleportsAway ( tcid, 1 )
end
local cobolds = { 7773, 7774, 7775, 7776, 7777, 7778, 7779, 7780 }
for i, tcid in ipairs(cobolds) do
changeCreature {
tcid = tcid,
faction = "FACTION_ENEMY_HERO"
}
end
end)
quest.setScript( 2701, "OnTalk", function(args)
if args.state == "TASK_AWAITING" and args.tcid == 7720 then
creatureTeleportPos ( 7772, 0, {28,24,0 , 1150,2100,0} )
end
end)
quest.setScript( 2720, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 7831,
role = "ROLE_INVALID",
clearAutoTeleporting = true
}
teleport {
tcid = 2492,
position = { sx=39, sy=40, sz=0, px=1102.351563, py=21.648438, pz=1262 },
orientation = 198
}
end)
quest.setScript( 2765, "OnTalk", function(args)
if args.tcid == 7935 and args.state == "TASK_AWAITING" then
changeCreature {
tcid = 7935,
behaviour = "Enemy_warrior_brave",
mortality = "MORTAL"
}
end
end)
quest.setScript( 2765, "OnTaskAwaiting", function(args)
creatureTeleportPos( 7935, 0, {13,7,0, 2648.25, 418.650, 1900, 130} )
end)
quest.setScript( 2546, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 7471,
mortality = "MORTAL"
}
changeCreature {
tcid = 7472,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
gotoPosition = { sx=21,sy=26,sz=0, px=2700,py=50,pz=0 },
speed = 2,
}
creatureTeleportsAway( 7472, 10 )
end)
quest.setScript( 2689, "OnTaskAwaiting", function(args)
local tcids = { 7728, 7730, 7731, 7701 }
for i, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=28, sy=25, sz=0, px=550, py=100, pz=0 },
speed = 2,
followUpBhv = "Enemy_warrior_brave",
delay = 0.1
}
end
end)
quest.setScript( 2719, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2492,
mortality = "MORTAL"
}
end)
quest.setScript( 2731, "OnWon", function(args)
creatureTeleportsAway ( 7846, 10 )
end)
quest.setScript( 2762, "OnTalk", function(args)
if args.tcid == 7944 and args.state == "PRECONDS_FULFILLED" then
creatureTeleportPos( 7941, 0, {13,7,0, 2648.25, 418.650, 1900, 130} )
end
if args.tcid == 7941 and args.state == "TASK_AWAITING" then
changeCreature {
tcid = 7941,
mortality = "MORTAL"
}
end
end)
quest.setScript( 1821, "OnTaskAwaiting", function(args)
teleport {
tcid = 2500,
position = {px=0,py=0,pz=0,sx=0,sy=0,sz=0},
orientation = 0,
}
end)
quest.setScript( 1821, "OnWon", function(args)
teleport {
tcid = 9555,
position = {px=0,py=0,pz=0,sx=0,sy=0,sz=0},
orientation = 0,
}
destroyCreature {
tcid = 9555,
splatter = false,
delay = 1,
}
end)
quest.setScript( 838, "OnTaskAwaiting", function(args)
creatureTeleportsAway ( 2492, 2 )
end)
quest.setScript( 842, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2497,
mortality = "MORTAL",
behaviour = "JOB_QUESTSTAGING",
faction = "FACTION_HIGHELVE",
gotoPosition = { sx=29,sy=32,sz=0 , px=3000,py=750,pz=0 },
speed = 2,
}
killCreature {
tcid = 2497,
splatter = false,
delay = 20
}
tcids = { 4970,4971,4972 }
for index, tcid in ipairs(tcids) do
creatureTeleportsAway ( tcid, 22 )
end
end)
quest.setScript( 843, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2497,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = { sx=29,sy=32,sz=0 , px=2950,py=350,pz=0},
speed = 2,
followUpBhv = "questCreatures",
}
end)
quest.setScript( 844, "OnWon", function(args)
local hyderia = 2497
local wache = 5178
changeCreature {
tcid = hyderia,
gotoPosition = { sx=30,sy=32,sz=0,px=2050,py=1363,pz=102 },
delay = 0
}
changeCreature {
tcid = hyderia,
gotoPosition = { sx=30,sy=32,sz=0,px=1735,py=1701,pz=142 },
delay = 4
}
changeCreature {
tcid = wache,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
gotoPosition = { sx=30,sy=32,sz=0,px=2043,py=1298,pz=111 },
delay = 0
}
changeCreature {
tcid = wache,
gotoPosition = { sx=30,sy=32,sz=0,px=1761,py=1599,pz=141 },
delay = 4
}
changeCreature {
tcid = wache,
gotoPosition = { sx=30,sy=32,sz=0,px=1744,py=1672,pz=142 },
delay = 12
}
changeCreature {
tcid = wache,
gotoPosition = {sx=30,sy=32,sz=0,px=1769,py=1593,pz=140 },
delay = 14
}
end)
quest.setScript( 846, "OnWon", function(args)
creatureGotoPos (2500, {35,36,0 , 2115.500,75.000,1279.000 , 85.000}, 85.000, 1, "questCreatures", 1)
end)
quest.setScript( 848, "OnWon", function(args)
creatureGotoPos (2500, {41,37,0 , 1024,3,908 , 120}, 120, 1, "JOB_RICH_STATIST", 1)
end)
quest.setScript( 922, "OnTaskAwaiting", function(args)
creatureTeleportPos (2500, 0, { 39,40,0 , 1350.000,150.000,0.000, 253.000 })
end)
quest.setScript( 928, "OnTaskAwaiting", function(args)
local tcids = {2656,2657,5050,4920,4921}
for i, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
mortality = "IMMORTAL"
}
end
end)
quest.setScript( 929, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2654,
useUnconscious = true,
unconsciousTime = 3,
livesRemaining = -1,
}
changeCreature {
tcid = 2655,
useUnconscious = true,
unconsciousTime = 3,
livesRemaining = -1,
}
end)
quest.setScript( 929, "OnUnconscious", function(args)
if args.tcid == 2654 then
changeCreature {
tcid = 2654,
faction = "FACTION_HERO_GOOD",
behaviour = "questCreatures",
role = "ROLE_DIALOG"
}
elseif args.tcid == 2655 then
changeCreature {
tcid = 2655,
faction = "FACTION_HERO_GOOD",
behaviour = "questCreatures",
role = "ROLE_DIALOG"
}
end
end)
quest.setScript( 930, "OnTaskAwaiting", function(args)
local tcids = {2656,2657,5050,4920,4921}
for i, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
mortality = "MORTAL"
}
end
end)
quest.setScript( 936, "OnPrecondsFulfilled", function(args)
local robber = {2662,2663,2664,2665,2666}
for index,tcid in ipairs(robber) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_SPPL_RISE",
delay = 0.1,
}
end
end)
quest.setScript( 943, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2621,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
emotion = "ANIM_TYPE_LAYGROUND-DOWN",
loopCount = 1,
}
changeCreature {
tcid = 2621,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
emotion = "ANIM_TYPE_LAYGROUND-IDLE",
loopCount = -1,
delay = 2,
}
local getier = {2679,2683,2684,2686,2687}
local spinnen = {2680,2681,2682,2685,2688}
for i, tcid in ipairs(getier) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=38,sy=8,sz=0,px=2622.716797,py=1814.887573,pz=239},
followUpBhv = "Enemy_warrior_brave",
speed = 2,
delay = 4
}
changeCreature {
tcid = spinnen[i],
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=38,sy=8,sz=0,px=1800.203125,py=1850.449219,pz=265},
followUpBhv = "Enemy_warrior_brave",
speed = 2,
delay = 4
}
end
end)
quest.setScript( 943, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 2621,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
emotion = "ANIM_TYPE_LAYGROUND-UP",
loopCount = 1,
}
changeCreature {
tcid = 2621,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLE",
loopCount = 1,
delay = 2,
}
changeCreature {
tcid = 2621,
behaviour = "questCreatures",
role = "ROLE_DIALOG",
delay = 3,
}
end)
quest.setScript( 945, "OnTaskAwaiting", function(args)
creatureTeleportsAway(2619,0)
creatureTeleportPos( 2621, 0, {31,7,0,1761.203125,1829.050781,32.890640,254.545441} )
end)
quest.setScript( 934, "OnTaskAwaiting", function(args)
setTimer{
id = 934,
interval = 1,
count = 720,
}
showTimer{
id = 934,
cur = 720,
max = 720
}
end)
quest.setScript( 934, "OnTimer", function(args)
showTimer{
id = args.id,
cur = args.count,
max = 720
}
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 3288, "OnTalk", function(args)
if args.tcid==2540 and args.state=="PRECONDS_FULFILLED" then
changeCreature{
tcid = 2540,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
changeCreature{
tcid = 2540,
clearUnconscious = true,
livesRemaining = 0,
}
end
end)
quest.setScript( 3288, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2540,
mortality = "MORTAL",
emotion = "ANIM_TYPE_SM22",
loopCount = 1,
}
killCreature {
tcid = 2540,
delay = 2,
}
end)
quest.setScript( 849, "OnTaskAwaiting", function(args)
local tcids = {2504, 2505}
for i, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
mortality = "IMMORTAL"
}
end
end)
quest.setScript( 849, "OnWon", function(args)
local tcids = {2504, 2505}
for i, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
mortality = "MORTAL"
}
end
end)
quest.setScript( 851, "OnTaskFulfilled", function(args)
local ids = {2489,2490,2492}
for i,id in ipairs(ids) do
changeCreature{
tcid = id,
visible = false,
}
end
end)
quest.setScript( 852, "OnTaskFulfilled", function(args)
local ids = {2489,2490,2492}
for i,id in ipairs(ids) do
changeCreature{
tcid = id,
visible = true,
}
end
end)
quest.setScript( 853, "OnTaskAwaiting", function(args)
local ids = {2509,2510,2511,2512}
local pos = {sx=25, sy=25, sz=0, px=1841.796875, py=27.148438, pz=325.000092, orientation=123.446777}
for i,id in ipairs(ids) do
creatureGotoPos (id, pos, false, 2, "Enemy_warrior_brave")
end
end)
quest.setScript( 854, "OnTaskAwaiting", function(args)
creatureTeleportPos ( 2500, 0, { sx=27,sy=24,sz=-1,px=1750.796875,py=1646.5,pz=18 })
local robber = {2523,2524,2525,2526,2527,2528,2529,2530,2531}
for index,tcid in ipairs(robber) do
changeCreature {
tcid = tcid,
mortality = "IMMORTAL",
}
end
end)
quest.setScript( 855, "OnTaskAwaiting", function(args)
tcids = {2523, 2524, 2525, 2526, 2527, 2528, 2529, 2530, 2531}
for index, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "Enemy_warrior_brave",
}
end
end)
quest.setScript( 856, "OnTaskAwaiting", function(args)
tcids = {2530,2531,2513,2523,2529,2526,2528,2525,2524,2527}
for index, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
faction = "FACTION_ENEMY_HERO",
mortality = "MORTAL",
}
end
end)
quest.setScript( 863, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2541,
livesRemaining = 1,
useUnconscious = true,
unconsciousTime = 3
}
end)
quest.setScript( 863, "OnUnconscious", function(args)
changeCreature{
tcid = 5437,
clearUnconscious = true,
behaviour = "questCreatures",
faction = "FACTION_FRIEND_HERO_ALL",
}
end)
quest.setScript( 866, "OnWon", function(args)
changeCreature {
tcid = 2555,
effect = "FXTYPE_QFX_FLIEGENSCHWARM",
delay = 1,
mortality = "MORTAL",
}
killCreature {
tcid = 2555,
delay = 3
}
destroyCreature {
tcid = 2555,
delay = 10,
splatter = false,
}
end)
quest.setScript( 869, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 2540,
livesRemaining = 1,
useUnconscious = true,
unconsciousTime = 0,
}
end)
quest.setScript( 869, "OnUnconscious", function(args)
if args.tcid == 2540 then
changeCreature{
tcid = 2540,
clearUnconscious = true,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1
}
end
end)
quest.setScript( 912, "OnWon", function(args)
questMessage {
lokaid = "QUEST_912_REWARD",
color = "#FFFF00",
line = 2,
delay = 0,
duration = 3,
fadeIn = 0.2,
fadeOut = 0.2,
}
addGold(1000)
end)
quest.setScript( 917, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 2621 then
changeCreature {
tcid = 2621,
behaviour = "questCreatures",
}
end
end)
quest.setScript( 917, "OnWon", function(args)
creatureTeleportsAway( 2621, 2 )
end)
quest.setScript( 918, "OnTaskFulfilled", function(args)
teleport {
tcid = 2492,
position = {sx=41, sy=17, sz=0, px=3150.000000, py=2450.000000, pz=0.000000, orientation=0.000000},
orientation = 0,
}
end)
quest.setScript( 919, "OnTaskAwaiting", function(args)
teleport {
tcid = 2492,
position = {px=0,py=0,pz=0,sx=0,sy=0,sz=0},
orientation = 0,
}
end)
quest.setScript( 919, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 9505,
mortality = "MORTAL",
}
killCreature {
tcid = 9505,
delay = 0,
}
end)
quest.setScript( 1925, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 3028,
role = "ROLE_ATTACKER",
}
end)
quest.setScript( 1943, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 5492,
role = "ROLE_VICTIM",
}
end)
quest.setScript( 1943, "OnWon", function(args)
tcid = 5492
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=25,sy=32,sz=0 , px=2760,py=2686,pz=0},
followUpBhv = "Enemy_Simple"
}
end)
quest.setScript( 1946, "OnSetup", function(args)
changeCreature {
tcid = 5504,
useUnconscious = true,
unconsciousTime = 3,
livesRemaining = 1,
clearAutoTeleporting = true
}
end)
quest.setScript( 1946, "OnTalk", function(args)
if args.tcid == 5504 then
changeCreature {
tcid = 5504,
emotion = "ANIM_TYPE_SM21",
loopCount = -1
}
end
end)
quest.setScript( 1946, "OnUnconscious", function(args)
if args.tcid == 5504 then
changeCreature {
tcid = 5504,
useUnconscious = false,
livesRemaining = 0,
mortality = "IMMORTAL",
faction = "FACTION_HIGHELVE",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1
}
end
end)
quest.setScript( 1946, "OnWon", function(args)
changeCreature {
tcid = 5504,
emotion = "ANIM_TYPE_SM22",
loopCount = 1
}
destroyCreature {
tcid = 5504,
splatter = false,
delay = 6,
}
end)
quest.setScript( 1983, "OnTaskAwaiting", function(args)
creatureTeleportPos( 5680, 0, {30,32,0 , 2000,1400,0} )
creatureTeleportPos( 5682, 0, {30,32,0 , 2200,1400,0} )
end)
quest.setScript( 1983, "OnTaskFulfilled", function(args)
creatureTeleportPos(5680, 0, {30,30,-1 , 650,2250,0})
creatureTeleportPos(5682, 0, {30,30,-1 , 800,2150,0})
creatureTeleportPos(2495, 0, {30,30,-1 , 350,1850,0})
teleportTeam(1983,{sx=30, sy=30, sz=-1, px=600, py=2150, pz=0, orientation=0})
end)
quest.setScript( 2099, "OnWon", function(args)
local droppers = {6301,6302,6303}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 2119, "OnDeath", function(args)
SW_Quest2119Temp = SW_Quest2119Temp - 1
if SW_Quest2119Temp == 6 then
local TCspawn2 = {
{tcid=6352, pos={sx=20,sy=43,sz=0 , px=150,py=650,pz=0}},
{tcid=6353, pos={sx=20,sy=43,sz=0 , px=250,py=600,pz=0}},
{tcid=6354, pos={sx=20,sy=43,sz=0 , px=250,py=700,pz=0}}
}
for index,object in ipairs(TCspawn2) do
teleport {
tcid = object.tcid,
effect = "FXTYPE_GEN_TELEPORT",
position = object.pos,
delay = 1
}
changeCreature {
tcid = tcid,
effect = "FXTYPE_INVALID",
delay = 2
}
changeCreature{
tcid = tcid,
behaviour = "Enemy_warrior_brave",
role = "ROLE_ATTACKER",
delay = 2.1,
livesRemaining = 0
}
end
changeCreature{
tcid = 6334,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_RAIS-HANDS",
loopCount = 1,
delay = 1
}
changeCreature{
tcid = 6334,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = { sx=20, sy=43, sz=0, px=239, py=825, pz=2504 },
Speed = 2,
followUpAngle = 0,
followUpBhv = "questCreatures",
delay = 4
}
elseif SW_Quest2119Temp == 3 then
local TCspawn3 = {
{tcid=6355, pos={sx=20,sy=43,sz=0 , px=150,py=900,pz=0}},
{tcid=6356, pos={sx=20,sy=43,sz=0 , px=250,py=850,pz=0}},
{tcid=6357, pos={sx=20,sy=43,sz=0 , px=200,py=950,pz=0}}
}
for index,object in ipairs(TCspawn3) do
teleport {
tcid = object.tcid,
effect = "FXTYPE_GEN_TELEPORT",
position = object.pos,
delay = 1
}
changeCreature {
tcid = tcid,
effect = "FXTYPE_INVALID",
delay = 2
}
changeCreature{
tcid = tcid,
behaviour = "Enemy_warrior_brave",
role = "ROLE_ATTACKER",
delay = 2.1,
livesRemaining = 0
}
end
changeCreature{
tcid = 6334,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_RAIS-HANDS",
loopCount = 1,
delay = 1
}
changeCreature{
tcid = 6334,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = { sx=20, sy=43, sz=0, px=287, py=1096, pz=2500 },
Speed = 2,
followUpAngle = 0,
delay = 4,
followUpBhv = "questCreatures",
}
end
end)
quest.setScript( 2119, "OnTaskAwaiting", function(args)
SW_Quest2119Temp = 9
local TCspawn1 = {
{tcid=6349, pos={sx=20,sy=43,sz=0 , px=0,py=450,pz=0}},
{tcid=6350, pos={sx=20,sy=43,sz=0 , px=100,py=500,pz=0}},
{tcid=6351, pos={sx=20,sy=43,sz=0 , px=150,py=400,pz=0}}
}
for index,object in ipairs(TCspawn1) do
teleport {
tcid = object.tcid,
effect = "FXTYPE_GEN_TELEPORT",
position = object.pos,
delay = 1
}
changeCreature {
tcid = tcid,
effect = "FXTYPE_INVALID",
delay = 2
}
changeCreature{
tcid = tcid,
behaviour = "Enemy_warrior_brave",
role = "ROLE_ATTACKER",
delay = 2.1,
livesRemaining = 0
}
end
changeCreature{
tcid = 6334,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_RAIS-HANDS",
loopCount = 1,
delay = 1
}
changeCreature{
tcid = 6334,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = { sx=20, sy=43, sz=0, px=200, py=600, pz=2504 },
Speed = 2,
followUpAngle = 0,
delay = 4,
followUpBhv = "questCreatures"
}
end)
quest.setScript( 1846, "OnTaskAwaiting", function(args)
setTimer {
id = args.id,
count = 30,
interval = 1,
}
showTimer {
id = 2162,
cur = 30,
max = 30,
}
questMessage {
lokaid = "QUEST_2067_TCOUNT_MSG",
color = "#F0F8FF",
line = 0,
duration = 20.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end)
quest.setScript( 1846, "OnTaskFulfilled", function(args)
teleportTeam(args.id,{sx=31, sy=57, sz=0, px=2350, py=2000, pz=1000, orientation=0})
end)
quest.setScript( 1846, "OnTimer", function(args)
showTimer {
id = 2162,
cur = args.count,
max = 30,
}
if args.count == 10 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_01",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 9 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_02",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 8 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_03",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 7 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_04",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 6 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_05",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 5 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_06",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 4 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_07",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 3 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_08",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 2 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_09",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 1 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_10",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
solveQuest(args.id)
end
end)
quest.setScript( 2160, "OnTaskAwaiting", function(args)
teleportTeam(2160,{sx=32, sy=52, sz=0, px=1600, py=1600, pz=1000, orientation=0})
return {sx=32, sy=52, sz=0, px=1750.000000, py=1550.000000, pz=0.000000, orientation=0.000000}
end)
quest.setScript( 2170, "OnTaskAwaiting", function(args)
return {sx=32, sy=52, sz=0, px=1750.000000, py=1550.000000, pz=0.000000, orientation=0.000000}
end)
quest.setScript( 2171, "OnTaskAwaiting", function(args)
return {sx=32, sy=52, sz=0, px=1750.000000, py=1550.000000, pz=0.000000, orientation=0.000000}
end)
quest.setScript( 2171, "OnTaskFulfilled", function(args)
return {sx=31, sy=57, sz=0, px=2350, py=2000, pz=1000, orientation=0}
end)
quest.setScript( 2184, "OnWon", function(args)
changeCreature {
tcid = 6332,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = { sx=43, sy=59, sz=1, px=1600, py=2850, pz=0 },
}
creatureTeleportsAway( 6332, 30 )
end)
quest.setScript( 2203, "OnWon", function(args)
local droppers = {6742,6743,6744,6745,6746,6747,6748,6749,6750,6751,6752}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 2209, "OnTaskAwaiting", function(args)
local attackers = {9349,9350,9351,9352,9353,9354}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 2209, "OnWon", function(args)
local attackers = {9349,9350,9351,9352,9353,9354}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
end)
quest.setScript( 2211, "OnPrecondsFulfilled", function(args)
destroyCreature {
tcid = 6332,
}
end)
quest.setScript( 2211, "OnStation", function(args)
if args.woid == 1021680894 then
creatureTeleportPos(7510, 0, {36,12,0,2601.046,1920.75,1255.537,327} )
changeCreature {
tcid = 7510,
visible = true,
role="ROLE_DIALOG",
}
setWoobEffect {
woid = 1021680894,
effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
}
end
end)
quest.setScript( 2211, "OnTaskAwaiting", function(args)
changeCreature {
role = "ROLE_INVALID",
tcid = 7510,
visible = false
}
end)
quest.setScript( 2211, "OnTaskFulfilled", function(args)
destroyCreature {
tcid = 7510,
splatter = true,
delay = 2
}
end)
quest.setScript( 2221, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 6796,
livesRemaining = 1,
unconsciousTime = 6,
useUnconscious = true,
}
end)
quest.setScript( 2221, "OnUnconscious", function(args)
changeCreature{
tcid = 6796,
faction = "FACTION_FRIEND_HERO_ALL",
behaviour = "questCreatures",
livesRemaining = 0
}
changeCreature {
tcid=6796,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICA_BH",
loopCount = -1,
effect="FXTYPE_SMOKEBIGWHITE",
delay=1,
}
changeCreature {
tcid=6796,
creature="Dead_skeleton_lich_elite",
delay=3,
}
changeCreature {
tcid = 6796,
effect = "FXTYPE_INVALID",
emotion = "ANIM_TYPE_MAGICA_BH",
loopCount = 1,
delay = 5,
faction = "FACTION_ENEMY_HERO",
followUpBhv = "Enemy_warrior_brave"
}
changeCreature{
tcid = 6600,
mortality = "MORTAL",
effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
loopCount = 1,
delay = 6
}
killCreature{
tcid = 6600,
delay = 7
}
end)
quest.setScript( 2252, "OnTaskFulfilled", function(args)
solveQuest(2252)
end)
quest.setScript( 2012, "OnTaskAwaiting", function(args)
creatureTeleportPos( 5680, 0, {sx=30, sy=30, sz=-1, px=550.000000, py=2050.000000, pz=0.000000} )
creatureTeleportPos( 5682, 0, {sx=30, sy=30, sz=-1, px=700.000000, py=1900.000000, pz=0.000000} )
changeCreature {
tcid=5682,
livesRemaining=1,
useUnconscious=true,
unconsciousTime=1,
}
end)
quest.setScript( 2012, "OnTaskFulfilled", function(args)
local KillTC = {5680,6173,6174,6175,6176}
CM_OnTaskFulfilledKillTargets(KillTC)
changeCreature {
tcid=5682,
livesRemaining=0,
clearUnconscious=true,
}
CM_CreatureAway (5682, 10)
end)
quest.setScript( 2012, "OnUnconscious", function(args)
if args.tcid == 5682 then
changeCreature {
tcid = args.tcid,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
faction = "FACTION_ATMO",
effect = "FXTYPE_GEN_TRANSFORM",
}
changeCreature {
tcid = args.tcid,
creature="Helf_Inq_highpriest_elite",
behaviour = "JOB_QUESTSTAGING",
delay = 2,
}
changeCreature {
tcid=args.tcid,
emotion = "ANIM_TYPE_KNEE-IDLE",
loopCount = -1,
behaviour = "JOB_QUESTSTAGING",
delay = 3,
}
end
end)
quest.setScript( 2149, "OnWon", function(args)
creatureTeleportsAway( 2495, 3 )
end)
quest.setScript( 1941, "OnWon", function(args)
local droppers = {5487,5488,5489,5490,5491}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 2011, "OnTaskAwaiting", function(args)
creatureTeleportPos( 5680, 0, {sx=30, sy=30, sz=-1, px=550.000000, py=2050.000000, pz=0.000000} )
creatureTeleportPos( 5682, 0, {sx=30, sy=30, sz=-1, px=700.000000, py=1900.000000, pz=0.000000} )
end)
quest.setScript( 2011, "OnWon", function(args)
changeCreature {
tcid = 2495,
mortality = "MORTAL",
role = "ROLE_INVALID"
}
killCreature {
tcid = 2495,
deinitragdoll = true,
delay = 5
}
end)
quest.setScript( 2147, "OnDeath", function(args)
changeCreature{
tcid = 9530,
useUnconscious = false,
livesRemaining = 0,
behaviour = "questCreatures",
faction = "FACTION_HUMAN"
}
end)
quest.setScript( 2147, "OnSetup", function(args)
changeCreature{
tcid = 9530,
useUnconscious = true,
livesRemaining = 1
}
end)
quest.setScript( 2148, "OnTaskFulfilled", function(args)
changeCreature{
tcid = 6529,
gotoPosition = { sx=31,sy=57,sz=0 , px=1800,py=1350,pz=611 },
speed = 2
}
creatureTeleportsAway( 6529, 3 )
end)
quest.setScript( 3546, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9822,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM23",
loopCount = -1,
}
end)
quest.setScript( 3549, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "REJECTNQ_09_SHADOWWARRIOR_BAD"
end
end)
quest.setScript( 3550, "OnTaskAwaiting", function(args)
addGold(-6)
questMessage {
lokaid = "QUEST_3550_GOLD",
color = "#ffff11",
line = 2,
duration = 4.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end)
quest.setScript( 3551, "OnWon", function(args)
local droppers = {10147}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 3552, "OnTaskAwaiting", function(args)
setTimer {
id = 3552,
interval = 1,
count = 5,
}
end)
quest.setScript( 3552, "OnTimer", function(args)
if args.count == 5 then
changeCreature {
tcid = 9810,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_CREATE-JEWELERY",
loopCount = 1,
bubble = 11,
action = "ACTION_CREATE_JEWELLERY",
}
end
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 3553, "OnWon", function(args)
addGold(-6)
questMessage {
lokaid = "QUEST_3553_GOLD",
color = "#ffff11",
line = 2,
duration = 4.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end)
quest.setScript( 3554, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "QUEST_301_DIALOG"
end
end)
quest.setScript( 3555, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9813,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
}
local robber = {9814,9815,9816,9817,9818}
for index,tcid in ipairs(robber) do
changeCreature {
tcid = tcid,
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
mortality = "MORTAL",
}
end
end)
quest.setScript( 3555, "OnUnconscious", function(args)
if args.tcid == 9813 then
changeCreature {
tcid = 9813,
mortality = "IMMORTAL",
behaviour = "JOB_QUESTSTAGING",
clearUnconscious = true,
livesRemaining = 0,
emotion = "ANIM_TYPE_KNEE-IDLE",
loopCount = -1,
role = "ROLE_INVALID",
clearAutoTeleporting = true,
faction = "FACTION_FRIEND_HERO_ALL"
}
end
end)
quest.setScript( 3555, "OnWon", function(args)
changeCreature {
tcid = 9813,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_KNEE-UP",
loopCount = 1,
}
changeCreature {
tcid = 9813,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=40, sy=31, sz=0, px=366.023438, py=1808.789063, pz=318.912079, orientation=225.458496},
speed = 2,
followUpBhv = "questCreatures",
delay = 4,
}
creatureTeleportsAway(9813,10)
end)
quest.setScript( 3556, "OnDialog", function(args)
return "QUEST_3487_TF_DLG"
end)
quest.setScript( 3822, "OnTaskAwaiting", function(args)
local tcids = {10458,10459,10460,10461,10462}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_SPPL_RISE",
delay = 0.2,
}
end
end)
quest.setScript( 3824, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 10463,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM23",
loopCount = -1,
mortality = "MORTAL",
delay = 1,
}
end)
quest.setScript( 3824, "OnTaskFulfilled", function(args)
killCreature {
tcid = 10463,
}
end)
quest.setScript( 3826, "OnTaskAwaiting", function(args)
setTimer {
id = 3826,
count = 3,
interval = 1,
}
end)
quest.setScript( 3826, "OnTimer", function(args)
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 3827, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 10464,
effect = "FXTYPE_SPPL_RISE",
delay = 0.2,
}
end)
quest.setScript( 3818, "OnStation", function(args)
if args.currentStation == 0 then
quest_3818_tf = 1
end
end)
quest.setScript( 3818, "OnTaskAwaiting", function(args)
setTimer {
id = 3818,
count = 30,
interval = 1,
}
end)
quest.setScript( 3818, "OnTimer", function(args)
quest_3818_ta = 0
quest_3818_tf = 0
if args.count == 1 and args.state == "TASK_AWAITING" then
quest_3818_ta = 1
solveQuest(3818)
end
if args.count >= 1 and args.state == "TASK_FULFILLED" then
quest_3818_tf = 1
solveQuest(3818)
end
end)
quest.setScript( 3819, "OnTaskAwaiting", function(args)
if quest_3818_ta == 1 then
solveQuest(3819)
end
end)
quest.setScript( 3819, "OnTaskFulfilled", function(args)
quest_3818_tf = nil
quest_3818_ta = nil
end)
quest.setScript( 3820, "OnTaskAwaiting", function(args)
if quest_3818_tf == 1 then
solveQuest(3820)
end
end)
quest.setScript( 3820, "OnTaskFulfilled", function(args)
quest_3818_tf = nil
quest_3818_ta = nil
end)
quest.setScript( 1346, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 3002,
visible = true,
effect = "FXTYPE_HOLOGRAM",
}
end)
quest.setScript( 1346, "OnTaskFulfilled", function(args)
creatureTeleportsAway(3002, 1)
end)
quest.setScript( 2358, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 3002,
effect = "FXTYPE_HOLOGRAM",
}
end)
quest.setScript( 2358, "OnTaskAwaiting", function(args)
creatureTeleportsAway(3002, 1)
end)
quest.setScript( 2367, "OnTaskAwaiting", function(args)
local attackers = {7114,7115,7116,7117,7118,7119,7120,7121}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 2367, "OnWon", function(args)
local attackers = {7114,7115,7116,7117,7118,7119,7120,7121}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
end)
quest.setScript( 2381, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 3002,
effect = "FXTYPE_HOLOGRAM",
}
end)
quest.setScript( 2381, "OnTaskAwaiting", function(args)
creatureTeleportsAway( 3002, 1 )
end)
quest.setScript( 2386, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 3002,
effect = "FXTYPE_HOLOGRAM",
}
end)
quest.setScript( 2386, "OnTaskAwaiting", function(args)
creatureTeleportsAway(3002, 1)
end)
quest.setScript( 2389, "OnStation", function(args)
if args.currentStation == 1 then
setWoobState {
woid = 1025644018,
state = "WOOB_FLIPPED_OFF"
}
end
end)
quest.setScript( 2475, "OnSetup", function(args)
changeCreature {
tcid = 7263,
useUnconscious = true,
unconsciousTime = 2,
livesRemaining = 1
}
end)
quest.setScript( 2475, "OnUnconscious", function(args)
changeCreature {
tcid = 7263,
clearUnconscious = true,
livesRemaining = 0,
behaviour = "questCreatures",
faction = "FACTION_FRIEND_HERO_ALL",
}
end)
quest.setScript( 2483, "OnTaskAwaiting", function(args)
local tcids = {8369,8370,8371,8372,8373,8374,8375,8376,8377,8378,8379,
8380,8381,8382,8383,8384,8385,8386,8387,8388,8389,8390,8391,8392,8393,
8394,8395,8396,8397,8398,8399,8400,8401,8402,8403,8404,8405,8406,8407,8408}
for i, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
faction = "FACTION_ENEMY_HERO",
role = "ROLE_ATTACKER"
}
end
end)
quest.setScript( 2502, "OnSetup", function(args)
changeCreature{
tcid = 7324,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 5
}
end)
quest.setScript( 2502, "OnUnconscious", function(args)
if args.tcid == 7324 then
changeCreature{
tcid = 7324,
useUnconscious = false,
livesRemaining = 0,
behaviour = "questCreatures",
faction = "FACTION_FRIEND_HERO_ALL",
role = "ROLE_DIALOG",
}
end
end)
quest.setScript( 2512, "OnStation", function(args)
if args.currentStation == 1 then
changeCreature {
tcid = 7324,
behaviour = "questCreatures"
}
end
end)
quest.setScript( 2512, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 7324,
clearAutoTeleporting = true,
}
end)
quest.setScript( 2519, "OnTaskFulfilled", function(args)
changeCreature{
tcid = 7324,
role = "ROLE_INVALID",
behaviour = "questCreatures",
gotoPosition = {sx=0,sy=0,sz=0,px=0,py=0,pz=0}
}
changeCreature{
tcid = 7324,
effect = "FX_GEN_TRANSFORM",
delay = 5
}
end)
quest.setScript( 2520, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 3002,
effect = "FXTYPE_HOLOGRAM",
}
end)
quest.setScript( 2520, "OnWon", function(args)
creatureTeleportsAway ( 3002, 1 )
end)
quest.setScript( 2529, "OnTaskAwaiting", function(args)
setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023652932 }
return {sx=13, sy=2, sz=-1, px=935.898438, py=981.649902, pz=-0.023003, orientation=64.986206}
end)
quest.setScript( 2529, "OnTaskFulfilled", function(args)
setWoobState { state = "WOOB_DOOR_UNLOCKED", woid = 1023652932 }
changeCreature {
delay = 1,
tcid = 3002,
visible = true,
effect = "FXTYPE_HOLOGRAM",
}
return {}
end)
quest.setScript( 2529, "OnWon", function(args)
creatureTeleportsAway( 3002, 1 )
setWoobState { state = "WOOB_DOOR_UNLOCKED", woid = 1023652932 }
end)
quest.setScript( 2538, "OnPrecondsFulfilled", function(args)
changeCreature {
delay = 1,
tcid = 9465,
visible = true,
effect = "FXTYPE_HOLOGRAM",
}
end)
quest.setScript( 2538, "OnTaskAwaiting", function(args)
creatureTeleportsAway( 9465, 1 )
end)
quest.setScript( 2373, "OnTaskAwaiting", function(args)
creatureTeleportsAway (2492,1)
end)
quest.setScript( 2501, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 7286,
clearAutoTeleporting = true
}
end)
quest.setScript( 2501, "OnWon", function(args)
changeCreature{
tcid = 7286,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=0,sy=0,sz=0,px=0,py=0,pz=0}
}
creatureTeleportsAway( 7286, 4 )
end)
quest.setScript( 2372, "OnPrecondsFulfilled", function(args)
teleport {
tcid = 2492,
position = {px=0,py=0,pz=0,sx=0,sy=0,sz=0},
orientation = 0,
}
end)
quest.setScript( 2477, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 7263,
mortality = "MORTAL",
}
end)
quest.setScript( 3409, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 9512,
role = "ROLE_VICTIM",
}
end)
quest.setScript( 949, "OnWon", function(args)
local pos = {sx=22, sy=26, sz=0, px=797.648010, py=1788.449951, pz=43.262600, orientation=20.000000}
creatureGotoPos (2697,pos,false,2)
creatureTeleportsAway(2697, 10)
end)
quest.setScript( 950, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 2699 then
changeCreature {
tcid = 2699,
behaviour = "questCreatures",
}
end
end)
quest.setScript( 951, "OnTaskAwaiting", function(args)
teleport {
tcid = 2697,
position = {sx=24, sy=31, sz=0, px=400.000000, py=3050.000000, pz=0.000000, orientation=78.193665},
orientation = 78.193665,
}
end)
quest.setScript( 952, "OnTaskAwaiting", function(args)
changeCreature{
tcid=2697,
mortality = "IMMORTAL"
}
end)
quest.setScript( 958, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 2697,
creature = "Helf_Inqgarde_Soldier_female_01",
}
end)
quest.setScript( 972, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9519,
clearAutoTeleporting = true
}
end)
quest.setScript( 973, "OnWon", function(args)
creatureGotoPos (9519, {sx=22, sy=43, sz=-1, px=950.000000, py=250.000000, pz=0.000000, orientation=0.000000}, false, 2)
creatureTeleportsAway(9519,10)
end)
quest.setScript( 975, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 2831,
useUnconscious = true,
unconsciousTime = 3,
livesRemaining = 255,
}
end)
quest.setScript( 975, "OnWon", function(args)
creatureGotoPos(2831,{sx=19, sy=46, sz=0, px=2481.949219, py=519.093750, pz=804.285889, orientation=263.759155},false,2)
creatureTeleportsAway(2831,10)
end)
quest.setScript( 979, "OnWon", function(args)
local pos = {sx=44, sy=54, sz=0, px=325.078125, py=943.593750, pz=207.797623, orientation=108.758652}
creatureGotoPos (2697,pos)
creatureTeleportsAway(2697, 6)
end)
quest.setScript( 985, "OnWon", function(args)
teleport {
tcid = 2697,
position = {px=0,py=0,pz=0,sx=0,sy=0,sz=0},
orientation = 0,
}
end)
quest.setScript( 988, "OnTaskFulfilled", function(args)
creatureTeleportPos(2852, 0, {0,0,0, 0,0,0,0})
end)
quest.setScript( 988, "OnWon", function(args)
teleport {
tcid = 2697,
position = {px=0,py=0,pz=0,sx=0,sy=0,sz=0},
orientation = 0,
}
end)
quest.setScript( 989, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 9520,
useUnconscious = true,
unconsciousTime = 0,
livesRemaining = 1,
}
changeCreature{
tcid = 9521,
useUnconscious = true,
unconsciousTime = 2,
livesRemaining = 1,
clearAutoTeleporting = true,
}
end)
quest.setScript( 989, "OnUnconscious", function(args)
if args.tcid == 9520 then
changeCreature{
tcid = 9520,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
clearUnconscious = true,
livesRemaining = 0,
faction = "FACTION_ATMO",
role = "ROLE_INVALID"
}
end
if args.tcid == 9521 then
changeCreature{
tcid = 9521,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
clearUnconscious = true,
livesRemaining = 0,
faction = "FACTION_ATMO",
role = "ROLE_INVALID"
}
end
end)
quest.setScript( 990, "OnPrecondsFulfilled", function(args)
creatureTeleportsAway(2697,0)
creatureTeleportsAway(2852,0)
end)
quest.setScript( 990, "OnWon", function(args)
changeCreature {
tcid = 9512,
mortality = "MORTAL",
}
end)
quest.setScript( 876, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 295,
effect = "FXTYPE_GEN_TPRISON",
}
end)
quest.setScript( 877, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 295,
effect = "FXTYPE_INVALID",
}
end)
quest.setScript( 877, "OnWon", function(args)
changeCreature {
tcid = 295,
behaviour = "JOB_QUESTSTAGING",
effect = "FXTYPE_GEN_TELEPORT",
}
teleport {
tcid = 295,
position = {px=1235.898438,py=2394.398438,pz=912.735474,sx=16,sy=32,sz=0},
orientation = 167.522293,
delay = 2,
}
changeCreature {
tcid = 295,
behaviour = "questCreatures",
effect = "FXTYPE_INVALID",
delay = 5,
}
end)
quest.setScript( 3145, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8840,
useUnconscious = true,
unconsciousTime = 1,
livesRemaining = 1,
clearAutoTeleporting = true
}
end)
quest.setScript( 3145, "OnUnconscious", function(args)
changeCreature {
tcid = 8840,
clearUnconscious = true,
livesRemaining = 0,
behaviour = "JOB_QUESTSTAGING",
faction = "FACTION_DRYAD",
role = "ROLE_DIALOG",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end)
quest.setScript( 3145, "OnWon", function(args)
changeCreature {
tcid = 8840,
effect = "FXTYPE_GEN_TELEPORT",
delay = 2
}
destroyCreature {
tcid = 8840,
splatter = false,
delay = 4
}
end)
quest.setScript( 3148, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8840,
mortality = "IMMORTAL"
}
end)
quest.setScript( 3148, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 8839,
mortality = "IMMORTAL"
}
end)
quest.setScript( 3150, "OnWon", function(args)
creatureTeleportsAway (8839,30)
creatureTeleportsAway (8846,30)
creatureTeleportsAway (8847,2)
end)
quest.setScript( 3237, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8848,
visible = true,
effect = "FXTYPE_GEN_FRAG_DUST"
}
local objects = {
{
tcid = 8849,
position = {sx=17,sy=9,sz=0 , px=600,py=1850,pz=0},
},
{
tcid = 8850,
position = {sx=17,sy=9,sz=0 , px=650,py=1700,pz=0},
},
{
tcid = 8851,
position = {sx=17,sy=9,sz=0 , px=750,py=1650,pz=0},
},
{
tcid = 8852,
position = {sx=17,sy=9,sz=0 , px=850,py=1650,pz=0},
},
{
tcid = 8853,
position = {sx=17,sy=9,sz=0 , px=1050,py=1650,pz=0},
},
{
tcid = 8854,
position = {sx=17,sy=9,sz=0 , px=1150,py=1750,pz=0},
},
{
tcid = 8855,
position = {sx=17,sy=9,sz=0 , px=1200,py=1800,pz=0},
},
{
tcid = 8856,
position = {sx=17,sy=9,sz=0 , px=1200,py=1900,pz=0},
},
{
tcid = 8857,
position = {sx=17,sy=9,sz=0 , px=850,py=1800,pz=0},
},
{
tcid = 8858,
position = {sx=17,sy=9,sz=0 , px=1050,py=1800,pz=0},
}
}
for i,object in ipairs(objects) do
creatureTeleportPos ( object.tcid, 0, object.position )
end
end)
quest.setScript( 1859, "OnTaskAwaiting", function(args)
setTimer {
id = 1859,
interval = 3,
count = 6,
}
changeCreature {
tcid = 5152,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=30,sy=25,sz=0,px=2300.000000,py=1050.000000,pz=0.000000},
followUpAngle = 324,
followUpBhv = "questCreatures",
}
changeCreature {
tcid = 5158,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=30,sy=25,sz=0,px=2300.000000,py=650.000000,pz=0.000000},
followUpAngle = 225,
followUpBhv = "questCreatures",
}
changeCreature {
tcid = 5159,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=30,sy=25,sz=0,px=1800.000000,py=650.000000,pz=0.000000},
followUpAngle = 125,
followUpBhv = "questCreatures",
}
end)
quest.setScript( 1859, "OnTimer", function(args)
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 1860, "OnTaskAwaiting", function(args)
setTimer {
id = 1860,
interval = 1,
count = 7,
}
end)
quest.setScript( 1860, "OnTaskFulfilled", function(args)
tcids = {5161,5162,5163,5164,5165}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_CHEST1R",
delay = 0.1,
}
changeCreature {
tcid = tcid,
effect = "FXTYPE_INVALID",
delay = 2,
}
end
end)
quest.setScript( 1860, "OnTimer", function(args)
tcids = {5152,5158,5159}
if args.count == 4 then
solveQuest(args.id)
end
if args.count == 6 then
creatureTeleportPos(5160,0.8,{sx=30, sy=25, sz=0, px=2050, py=900, pz=133})
end
if args.count == 7 then
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICB",
effect = "FXTYPE_GEN_SPAWN1_I",
effectParam = {
paramtype="position",
position={sx=30,sy=25,sz=0,px=2050,py=900,pz=133},
duration=1.2,
fxImpact="FXTYPE_GEN_SPAWN1",
},
loopCount = 1,
}
end
end
end)
quest.setScript( 1860, "OnWon", function(args)
tcids = {5161,5162,5163,5164,5165}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
}
end
end)
quest.setScript( 1864, "OnWon", function(args)
changeCreature {
tcid = 5160,
behaviour = "JOB_QUESTSTAGING",
effect = "FXTYPE_SMOKEMEDIUMGREY",
}
destroyCreature {
tcid = 5160,
splatter = false,
delay = 2,
}
changeCreature {
tcid = 5152,
clearAutoTeleporting = true,
}
end)
quest.setScript( 1865, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 5151 then
changeCreature {
tcid = 5151,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM07",
loopCount = 1,
}
end
end)
quest.setScript( 1865, "OnTaskFulfilled", function(args)
local magier = {
{
tcid = 5152,
pos = {sx=30,sy=25,sz=0,px=1450,py=900,pz=0},
angle = 0,
},
{
tcid = 5159,
pos = {sx=30,sy=25,sz=0,px=1400,py=850,pz=153},
angle = 131,
},
{
tcid = 5158,
pos = {sx=30,sy=25,sz=0,px=1500,py=850,pz=0},
angle = 230,
}
}
for id, object in ipairs(magier) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.pos,
followUpAngle = object.angle,
followUpBhv = "JOB_RICH_STATIST",
delay = 2,
}
end
end)
quest.setScript( 192, "OnWon", function(args)
creatureGotoPos (330, {17,28,0,2682,2495,254.4,0}, 0, 2, "JOB_KID", 0.5)
end)
quest.setScript( 3518, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9786,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=56,sy=12,sz=0,px=2959.030,py=796.688,pz=425.806},
followUpBhv = "questCreatures",
followUpAngle = 160,
orientation = 160,
}
end)
quest.setScript( 3518, "OnWon", function(args)
local droppers = {9787,9788,9789}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 3522, "OnStation", function(args)
if args.currentStation == 0 then
setWoobState {
woid = 1050865354,
state = "WOOB_START",
}
end
if args.currentStation == 1 then
setWoobState {
woid = 1050865354,
state = "WOOB_START",
}
end
if args.currentStation == 2 then
setWoobEffect {
woid = 1050865354,
effect = "FXTYPE_FIRE1",
}
setWoobState {
woid = 1050865354,
state = "WOOB_STOP",
}
end
end)
quest.setScript( 3522, "OnTaskFulfilled", function(args)
local tcids = {10314,10315,10316,10317,10319}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_RICH_STATIST",
mortality = "MORTAL",
}
killCreature {
tcid = tcid,
delay = 150,
}
end
WeatherDefinitions.quest_3522_56_12 = {sx=56,sy=12,sz=0,density=100,flags=WEATHERFLAG_RAIN+WEATHERFLAG_WIND}
WeatherDefinitions.quest_3522_57_12 = {sx=57,sy=12,sz=0,density=100,flags=WEATHERFLAG_RAIN+WEATHERFLAG_WIND}
WeatherDefinitions.quest_3522_58_12 = {sx=58,sy=12,sz=0,density=100,flags=WEATHERFLAG_RAIN+WEATHERFLAG_WIND}
WeatherDefinitions.quest_3522_57_11 = {sx=57,sy=11,sz=0,density=100,flags=WEATHERFLAG_RAIN+WEATHERFLAG_WIND}
updateWeather()
end)
quest.setScript( 3781, "OnTaskAwaiting", function(args)
setTimer {
id = 3781,
interval = 120,
count = 2,
}
end)
quest.setScript( 3781, "OnTimer", function(args)
if args.count < 2 then
WeatherDefinitions.quest_3522_56_12 = {sx=56,sy=12,sz=0,density=0,flags=0}
WeatherDefinitions.quest_3522_57_12 = {sx=57,sy=12,sz=0,density=0,flags=0}
WeatherDefinitions.quest_3522_58_12 = {sx=58,sy=12,sz=0,density=0,flags=0}
WeatherDefinitions.quest_3522_57_11 = {sx=57,sy=11,sz=0,density=0,flags=0}
updateWeather()
solveQuest(args.id)
end
end)
quest.setScript( 878, "OnWon", function(args)
changeCreature {
tcid = 331,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
}
changeCreature {
tcid = 331,
behaviour = "JOB_TRADER",
delay = 4,
}
local droppers = {333,332,334,1523,1524}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 1394, "OnSetup", function(args)
changeCreature {
tcid=307,
creature="wild_wolf_black",
effect="FXTYPE_GEN_TRANSFORM",
faction = "FACTION_ENEMY_HERO",
mortality = "MORTAL",
}
changeCreature {
tcid=309,
creature="wild_wolf_black",
effect="FXTYPE_GEN_TRANSFORM",
faction = "FACTION_ENEMY_HERO",
mortality = "MORTAL",
}
changeCreature {
tcid=310,
creature="wild_wolf_black",
faction = "FACTION_ENEMY_HERO",
effect="FXTYPE_GEN_TRANSFORM",
mortality = "MORTAL",
}
end)
quest.setScript( 1394, "OnWon", function(args)
changeCreature {
tcid=304,
effect="FXTYPE_GEN_TRANSFORM",
}
changeCreature {
tcid=304,
creature="Atmo_toad_brown",
delay = 2,
}
end)
quest.setScript( 1471, "OnWon", function(args)
local droppers = {3967,3968,3969,3970,3971}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 1473, "OnStateChange", function(args)
if args.state == "TASK_AWAITING" then
tcids = { 3935, 3936, 3937, 3938, 3939, 3940, 3941, 3942, 3943, 3944, 3945 }
for index, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
mortality = "MORTAL",
}
end
end
end)
quest.setScript( 1475, "OnWon", function(args)
local droppers = {6976,6977,6978,6979,6980,6981,6982,6983,6984,6985}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 2666, "OnStation", function(args)
if args.currentStation == 0 and args.tcid == 1463 then
changeCreature {
tcid = 1463,
behaviour = "JOB_RICH_STATIST",
}
end
if args.currentStation == 1 and args.tcid == 1464 then
changeCreature {
tcid = 1464,
behaviour = "JOB_RICH_STATIST",
}
end
if args.currentStation == 2 and args.tcid == 1465 then
changeCreature {
tcid = 1465,
behaviour = "JOB_RICH_STATIST",
}
end
if args.currentStation == 3 and args.tcid == 1466 then
changeCreature {
tcid = 1466,
behaviour = "JOB_RICH_STATIST",
}
end
if args.currentStation == 4 and args.tcid == 7677 then
changeCreature {
tcid = 7677,
behaviour = "JOB_RICH_STATIST",
}
end
end)
quest.setScript( 2666, "OnWon", function(args)
changeCreature {
tcid = 1460,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM24",
loopCount = 1,
}
changeCreature {
tcid = 1460,
behaviour = "questCreatures",
delay = 9,
}
end)
quest.setScript( 2671, "OnStation", function(args)
if args.currentStation == 0 and args.tcid == 1471 then
changeCreature {
tcid = 1471,
behaviour = "JOB_RICH_STATIST",
}
end
if args.currentStation == 1 and args.tcid == 1472 then
changeCreature {
tcid = 1472,
behaviour = "JOB_POOR_STATIST",
}
end
if args.currentStation == 2 and args.tcid == 1473 then
changeCreature {
tcid = 1473,
behaviour = "JOB_RICH_STATIST",
}
end
if args.currentStation == 3 and args.tcid == 1474 then
changeCreature {
tcid = 1474,
behaviour = "JOB_POOR_STATIST",
}
end
if args.currentStation == 4 and args.tcid == 7692 then
changeCreature {
tcid = 7692,
behaviour = "JOB_RICH_STATIST",
}
end
end)
quest.setScript( 2671, "OnWon", function(args)
changeCreature {
tcid = 1470,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM24",
loopCount = 1,
}
changeCreature {
tcid = 1470,
behaviour = "questCreatures",
delay = 9,
}
end)
quest.setScript( 2673, "OnStation", function(args)
if args.currentStation == 0 and args.tcid == 1466 then
changeCreature {
tcid = 1466,
behaviour = "JOB_RICH_STATIST",
}
end
if args.currentStation == 1 and args.tcid == 1473 then
changeCreature {
tcid = 1473,
behaviour = "JOB_POOR_STATIST",
}
end
if args.currentStation == 2 and args.tcid == 1474 then
changeCreature {
tcid = 1474,
behaviour = "JOB_RICH_STATIST",
}
end
if args.currentStation == 3 and args.tcid == 1463 then
changeCreature {
tcid = 1463,
behaviour = "JOB_POOR_STATIST",
}
end
if args.currentStation == 4 and args.tcid == 1464 then
changeCreature {
tcid = 1464,
behaviour = "JOB_RICH_STATIST",
}
end
end)
quest.setScript( 2673, "OnWon", function(args)
changeCreature {
tcid = 7693,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM24",
loopCount = 1,
}
changeCreature {
tcid = 7693,
behaviour = "questCreatures",
delay = 9,
}
end)
quest.setScript( 2675, "OnStation", function(args)
if args.currentStation == 0 and args.tcid == 1464 then
changeCreature {
tcid = 1464,
behaviour = "JOB_RICH_STATIST",
}
end
if args.currentStation == 1 and args.tcid == 1465 then
changeCreature {
tcid = 1465,
behaviour = "JOB_POOR_STATIST",
}
end
if args.currentStation == 2 and args.tcid == 1466 then
changeCreature {
tcid = 1466,
behaviour = "JOB_RICH_STATIST",
}
end
if args.currentStation == 3 and args.tcid == 1473 then
changeCreature {
tcid = 1473,
behaviour = "JOB_POOR_STATIST",
}
end
if args.currentStation == 4 and args.tcid == 1463 then
changeCreature {
tcid = 1463,
behaviour = "JOB_RICH_STATIST",
}
end
end)
quest.setScript( 2675, "OnWon", function(args)
changeCreature {
tcid = 1490,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM24",
loopCount = 1,
}
changeCreature {
tcid = 1490,
behaviour = "questCreatures",
delay = 9,
}
end)
quest.setScript( 2676, "OnStation", function(args)
if args.currentStation == 0 and args.tcid == 1463 then
changeCreature {
tcid = 1463,
behaviour = "JOB_RICH_STATIST",
}
end
if args.currentStation == 1 and args.tcid == 1465 then
changeCreature {
tcid = 1465,
behaviour = "JOB_POOR_STATIST",
}
end
if args.currentStation == 2 and args.tcid == 1466 then
changeCreature {
tcid = 1466,
behaviour = "JOB_RICH_STATIST",
}
end
if args.currentStation == 3 and args.tcid == 1473 then
changeCreature {
tcid = 1473,
behaviour = "JOB_POOR_STATIST",
}
end
if args.currentStation == 4 and args.tcid == 7677 then
changeCreature {
tcid = 7677,
behaviour = "JOB_RICH_STATIST",
}
end
end)
quest.setScript( 2676, "OnWon", function(args)
changeCreature {
tcid = 1485,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM24",
loopCount = 1,
}
changeCreature {
tcid = 1485,
behaviour = "questCreatures",
delay = 9,
}
end)
quest.setScript( 2678, "OnStation", function(args)
if args.currentStation == 0 and args.tcid == 1466 then
changeCreature {
tcid = 1466,
behaviour = "JOB_RICH_STATIST",
}
end
if args.currentStation == 1 and args.tcid == 1463 then
changeCreature {
tcid = 1463,
behaviour = "JOB_POOR_STATIST",
}
end
if args.currentStation == 2 and args.tcid == 1473 then
changeCreature {
tcid = 1473,
behaviour = "JOB_RICH_STATIST",
}
end
if args.currentStation == 3 and args.tcid == 1465 then
changeCreature {
tcid = 1465,
behaviour = "JOB_POOR_STATIST",
}
end
if args.currentStation == 4 and args.tcid == 7677 then
changeCreature {
tcid = 7677,
behaviour = "JOB_RICH_STATIST",
}
end
end)
quest.setScript( 2678, "OnWon", function(args)
changeCreature {
tcid = 7698,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM24",
loopCount = 1,
}
changeCreature {
tcid = 7698,
behaviour = "questCreatures",
delay = 9,
}
end)
quest.setScript( 1477, "OnWon", function(args)
changeCreature {
tcid = 4456,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM24",
loopCount = 1,
}
changeCreature {
tcid = 4456,
behaviour = "questCreatures",
delay = 2
}
end)
quest.setScript( 2733, "OnWon", function(args)
if not tc_7783_dead then
CM_CreatureAway(7783,0)
end
if not tc_7784_dead then
CM_CreatureAway(7784,0)
end
tc_7783_dead = nil
tc_7784_dead = nil
CM_CreatureAway(7750,0)
changeCreature{
tcid = 7793,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM04",
loopCount = 5,
delay = 0.1,
}
changeCreature{
tcid = 7794,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 10,
delay = 0.3,
}
changeCreature{
tcid = 7795,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 6,
}
end)
quest.setScript( 3443, "OnDeath", function(args)
if args.tcid == 7783 then
tc_7783_dead = true
removeFromGroup {
tcid = 7783,
delay = 0,
}
destroyCreature {
tcid = 7783,
delay = 5,
}
end
if args.tcid == 7784 then
tc_7784_dead = true
removeFromGroup {
tcid = 7784,
delay = 0,
}
destroyCreature {
tcid = 7784,
delay = 5,
}
end
end)
quest.setScript( 3443, "OnTaskAwaiting", function(args)
local ids = {7783, 7784}
for i,id in ipairs(ids) do
changeCreature{
tcid = id,
role = "ROLE_VICTIM",
}
end
tc_7783_dead = false
tc_7784_dead = false
end)
quest.setScript( 2692, "OnTaskAwaiting", function(args)
local ids = {7750,7783,7784,7785,7786,7787}
for index,id in ipairs(ids) do
changeCreature{
tcid = id,
useUnconscious = true,
livesRemaining = 255,
unconsciousTime = 2,
clearAutoTeleporting = true,
}
end
end)
quest.setScript( 2692, "OnTaskFulfilled", function(args)
local objects = {
{tcid=7783,pos={45,19,0,1638,2052,2290},orientation=320},
{tcid=7784,pos={45,19,0,1548,2202,2280},orientation=320},
{tcid=7785,pos={45,19,0,1289,2095,2299},orientation=90},
{tcid=7786,pos={45,19,0,1488,1610,2295},orientation=194},
{tcid=7787,pos={45,19,0,1617,1717,2295},orientation=200},
{tcid=7750,pos={45,19,0,1559,1611,2300},orientation=210},
}
for i,object in ipairs(objects) do
creatureGotoPos (object.tcid,object.pos,object.orientation,false,false,false)
end
end)
quest.setScript( 2695, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 7750,
setAutoTeleporting = true,
}
end)
quest.setScript( 2704, "OnTaskAwaiting", function(args)
local ids = {7783,7784}
for index,id in ipairs(ids) do
changeCreature{
tcid = id,
behaviour = "CM_Begleiter_tapfer",
clearUnconscious = true,
livesRemaining = 0,
faction= "FACTION_DESERTHU_GUARDS",
clearAutoTeleporting = true,
}
addToGroup(id,0)
end
changeCreature{
tcid = 7750,
behaviour = "CM_Begleiter_tapfer",
faction= "FACTION_DESERTHU_GUARDS"
}
addToGroup(7750,0)
end)
quest.setScript( 2705, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 7750,
clearAutoTeleporting = true,
}
if not tc_7783_dead then
changeCreature{
tcid = 7783,
clearAutoTeleporting = true,
}
end
if not tc_7784_dead then
changeCreature{
tcid = 7784,
clearAutoTeleporting = true,
}
end
end)
quest.setScript( 2705, "OnTaskFulfilled", function(args)
changeCreature{
tcid = 7750,
behaviour = "questCreatures",
faction= "FACTION_INVALID",
}
end)
quest.setScript( 2705, "OnWon", function(args)
solveQuest(3443)
if not tc_7783_dead then
changeCreature{
tcid = 7783,
behaviour = "Enemy_warrior_brave_row_ex",
faction = "FACTION_DESERTHU_GUARDS",
role = "ROLE_INVALID",
}
removeFromGroup ( 7783, 0 )
end
if not tc_7784_dead then
changeCreature{
tcid = 7784,
behaviour = "Enemy_warrior_brave_row_ex",
faction = "FACTION_DESERTHU_GUARDS",
role = "ROLE_INVALID",
}
removeFromGroup ( 7784, 0 )
end
changeCreature{
tcid = 7750,
behaviour = "Enemy_warrior_brave_row_ex",
faction = "FACTION_DESERTHU_GUARDS",
}
removeFromGroup ( 7750, 0 )
end)
quest.setScript( 3814, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 158,
mortality = "IMMORTAL",
effect = "FXTYPE_GEN_TPRISON",
loopCount = 1,
}
setTimer {
id = 3814,
interval = 1,
count = 6,
}
end)
quest.setScript( 3814, "OnTimer", function(args)
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 3814, "OnWon", function(args)
changeCreature {
tcid = 158,
mortality = "MORTAL",
effect = "FXTYPE_INVALID",
loopCount = 1,
}
end)
quest.setScript( 57, "OnLost", function(args)
local attackers = {159,160,161}
CM_AttackerAway (attackers,60)
changeCreature {
tcid = 158,
mortality = "MORTAL",
effect = "FXTYPE_INVALID",
loopCount = 1,
}
end)
quest.setScript( 57, "OnSetup", function(args)
changeCreature {
tcid = 158,
mortality = "IMMORTAL",
}
end)
quest.setScript( 57, "OnTaskFulfilled", function(args)
solveQuest(3814)
changeCreature {
tcid = 158,
mortality = "MORTAL",
effect = "FXTYPE_INVALID",
loopCount = 1,
}
end)
quest.setScript( 57, "OnWon", function(args)
local attackers = {159,160,161}
CM_AttackerAway (attackers,60)
creatureGotoPos (158, "45;19;0;2425;129;2301;45", false, 1, "JOB_POOR_STATIST", 15)
changeCreature {
tcid = 158,
mortality = "MORTAL",
effect = "FXTYPE_INVALID",
loopCount = 1,
}
end)
quest.setScript( 549, "OnTaskAwaiting", function(args)
local attackers = {3723,3724,3725,3726,3727}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 549, "OnWon", function(args)
local attackers = {3723,3724,3725,3726,3727}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
end)
quest.setScript( 546, "OnWon", function(args)
changeCreature {
tcid = 1828,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = 1,
}
changeCreature {
tcid = 2844,
behaviour = "JOB_POOR_STATIST",
delay = 4,
}
end)
quest.setScript( 2406, "OnWon", function(args)
creatureTeleportPos(7163,5,{30,32,0,1908.898,1529.352,116.896})
end)
quest.setScript( 2362, "OnSetup", function(args)
Quest_2362_TA = true
end)
quest.setScript( 2362, "OnTaskFulfilled", function(args)
Quest_2362_TA = false
end)
quest.setScript( 2362, "OnWon", function(args)
Quest_2362_TA = nil
end)
quest.setScript( 1361, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 3677,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM23",
loopCount = -1,
dont_turn = true,
clearAutoTeleporting = true,
role = "ROLE_DIALOG",
}
end)
quest.setScript( 1363, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 5190 then
changeCreature {
tcid = 5190,
behaviour = "JOB_QUESTSTAGING",
effect = "FXTYPE_CHEST2B",
emotion = "ANIM_TYPE_MAGICB",
loopCount = 1,
}
changeCreature {
tcid = 5190,
behaviour = "JOB_QUESTSTAGING",
effect = "FXTYPE_INVALID",
delay = 6,
}
end
end)
quest.setScript( 1365, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 3683 then
changeCreature {
tcid = 3683,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = 1,
}
end
end)
quest.setScript( 2378, "OnStateChange", function(args)
local undeads = {
{
tcid = 7136,
behaviour = "Enemy_boss_undead_general",
},
{
tcid = 9514,
behaviour = "Enemy_mage_phalanx",
},
{
tcid = 9515,
behaviour = "Enemy_warrior_brave_triangle",
},
{
tcid = 7224,
behaviour = "Enemy_warrior_brave_triangle_ex",
},
{
tcid = 7225,
behaviour = "Enemy_warrior_brave_triangle_ex",
}
}
if args.state == "PREFIGHT" then
for id,object in ipairs(undeads) do
changeCreature {
tcid = object.tcid,
addToGroup = 7136,
behaviour = object.behaviour,
faction = "FACTION_ENEMY_HERO",
role = "ROLE_ATTACKER",
}
end
end
end)
quest.setScript( 2378, "OnTaskFulfilled", function(args)
questMessage {
line = 0,
lokaid = "QUEST_2378_END",
color = "#ffff11",
duration = 9.0,
fadeIn = 0.5,
fadeOut = 1.0,
delay = 1.0,
}
end)
quest.setScript( 2378, "OnWon", function(args)
local tcids = {9514,9515,7224,7225}
for index,tcid in ipairs(tcids) do
killCreature {
tcid = tcid,
}
end
end)
quest.setScript( 1313, "OnWon", function(args)
local creatures = {
{
tcid = 1812,
pos = {sx=30,sy=30,sz=0,px=2000.000000,py=1150.000000,pz=0},
},
{
tcid = 1813,
pos = {sx=30,sy=30,sz=0,px=2150.000000,py=1050.000000,pz=182},
},
{
tcid = 1815,
pos = {sx=30,sy=30,sz=0,px=1850.000000,py=1000.000000,pz=0},
}
}
for id,object in ipairs(creatures) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.pos,
followUpBhv = "questCreatures",
}
creatureTeleportsAway(object.tcid,30)
end
end)
quest.setScript( 1401, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 761,
role = "ROLE_ATTACKER",
faction = "FACTION_ENEMY_HERO",
mortality = "MORTAL",
delay = 1,
}
end)
quest.setScript( 1401, "OnTaskFulfilled", function(args)
CM_OnTaskFulfilledKillTargets({761,764,765})
end)
quest.setScript( 224, "OnSetup", function(args)
addGold(-500)
questMessage {
line = 1,
lokaid = "QUEST_224_PAYGOLD_MSG",
duration = 5.0,
fadeIn = 0.5,
fadeOut = 1.0,
delay = 0,
color = "#00ff00",
}
end)
quest.setScript( 431, "OnTaskAwaiting", function(args)
local tcids = {1564,1556,1557,1558,1560,1561,1562,1563,1555,3773}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 806, "OnTaskAwaiting", function(args)
local attackers = {2277,2278,2279 , 2280,2281 , 2282,2283,2284,2285 , 2286,2287,2288}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 806, "OnWon", function(args)
local creatures = {
{
tcid = 2289,
pos = {sx=26,sy=23,sz=0,px=2958.953125,py=2629.851563,pz=82.047821},
angle = 268.145752,
behaviour = "dumbBehaviour",
merchant = "MERCHANT_INVALID",
delay = 60,
},
{
tcid = 1553,
pos = {sx=26,sy=23,sz=0,px=2893.203125,py=2698.546875,pz=82.047821},
angle = 325.113953,
behaviour = "JOB_TRADER",
merchant = "MERCHANT_TRADER",
delay = 30,
}
}
for id,object in ipairs(creatures) do
creatureGotoPos (object.tcid, object.pos, object.angle, 2, object.behaviour, 0)
changeCreature {
tcid = object.tcid,
merchantType = object.merchant,
delay = object.delay,
}
end
local attackers = {2277,2278,2279 , 2280,2281 , 2282,2283,2284,2285 , 2286,2287,2288}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
end)
quest.setScript( 1563, "OnWon", function(args)
changeCreature {
tcid = 4360,
clearUnconscious = true,
livesRemaining = 0,
}
end)
quest.setScript( 1570, "OnWon", function(args)
changeCreature {
tcid = 4228,
effect = "FXTYPE_GEN_TELEPORT",
}
changeCreature {
tcid = 4228,
effect = "FXTYPE_GEN_SUMMON",
delay = 2,
}
creatureTeleportsAway(4228,2)
teleportTeam(1570,{sx=47, sy=45, sz=0, px=1450.953125, py=2582.671875, pz=3331.689941, orientation=95.236206})
changeCreature {
tcid = 9119,
behaviour = "JOB_RICH_STATIST",
delay = 10,
}
end)
quest.setScript( 1642, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 4360,
useUnconscious = true,
unconsciousTime = 4,
livesRemaining = 255,
}
end)
quest.setScript( 1700, "OnLost", function(args)
local attackers = {4467,4463,9314}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 1700, "OnSetup", function(args)
changeCreature {
tcid = 4488,
mortality = "IMMORTAL",
clearAutoTeleporting = true,
}
end)
quest.setScript( 1700, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
local victims = {4469,4472,4476,4477,4480,4481,4488,4474,4478}
local attackers = {4467,4463}
for index,tcid in ipairs(victims) do
changeCreature {
tcid = tcid,
role = "ROLE_VICTIM",
}
end
for index,tcid in ipairs(attackers) do
changeCreature {
tcid = tcid,
role = "ROLE_ATTACKER",
}
end
end
end)
quest.setScript( 1700, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 4488,
clearAutoTeleporting = false,
behaviour = "Enemy_warrior_brave",
}
end)
quest.setScript( 1700, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 4488,
behaviour = "questCreatures",
faction = "FACTION_FRIEND_HERO_ALL",
}
end)
quest.setScript( 1700, "OnWon", function(args)
local attackers = {4467,4463,9314}
changeCreature {
tcid = 4488,
clearAutoTeleporting = false,
behaviour = "questCreatures",
}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 1729, "OnWon", function(args)
solveQuest(1733)
end)
quest.setScript( 1733, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 4618,
role = "ROLE_VICTIM",
}
end)
quest.setScript( 1733, "OnWon", function(args)
local lydia_pos = {40,41,0 , 529.250,2964.550,290.384, 352.000}
creatureGotoPos(4618, lydia_pos, lydia_pos[7], 1, "questCreatures", 1)
end)
quest.setScript( 65, "OnSetup", function(args)
changeCreature {
tcid = 174,
useUnconscious = true,
unconsciousTime = 3,
livesRemaining = 1,
clearAutoTeleporting = true
}
end)
quest.setScript( 65, "OnUnconscious", function(args)
if args.tcid == 174 then
changeCreature {
tcid = 174,
useUnconscious = false,
livesRemaining = 0,
mortality = "IMMORTAL",
faction = "FACTION_HIGHELVE",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_KNEE-IDLE",
loopCount = -1
}
end
end)
quest.setScript( 792, "OnWon", function(args)
addGold(-100)
end)
quest.setScript( 794, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
addGold(-100)
end
end)
quest.setScript( 883, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 174,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=37, sy=25, sz=0, px=1376.312500, py=3109.750000, pz=44.512650, orientation=278.534607},
speed = 2,
followUpBhv = "questCreatures",
role = "ROLE_INVALID",
}
creatureTeleportsAway(174,25)
end)
quest.setScript( 187, "OnStateChange", function(args)
if args.state == "WON" then
teleport {
position = {0,0,0,0,0,0},
tcid = 566,
}
teleport {
position = {0,0,0,0,0,0},
tcid = 3700,
}
teleport {
position = {0,0,0,0,0,0},
tcid = 3701,
}
teleport {
position = {0,0,0,0,0,0},
tcid = 3702,
}
teleport {
position = {0,0,0,0,0,0},
tcid = 3703,
}
changeCreature {
creature = "energy_helf_male_ghost",
tcid = 546,
effect = "FXTYPE_GEN_TRANSFORM",
faction = "FACTION_ENEMY_HERO",
behaviour = "Enemy_warrior_brave"
}
end
end)
quest.setScript( 187, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 546,
mortality = "IMMORTAL",
}
end)
quest.setScript( 165, "OnDeath", function(args)
if args.attackers[1] == nil then
changeCreature {
tcid = 427,
behaviour = "questCreatures",
faction = "FACTION_HIGHELVE"
}
end
end)
quest.setScript( 165, "OnLost", function(args)
local attackers = {467,468,466,472,470,471,469}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 165, "OnWon", function(args)
local attackers = {467,468,466,472,470,471,469}
CM_AttackerAway (attackers,1)
end)
quest.setScript( 195, "OnSetup", function(args)
changeCreature {
tcid=427,
effect="FXTYPE_GEN_TRANSFORM"
}
changeCreature {
tcid=427,
creature="Monst_werewolf",
behaviour = "Enemy_warrior_brave",
delay = 2
}
end)
quest.setScript( 2728, "OnWon", function(args)
changeCreature {
tcid = 7847,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
changeCreature {
tcid = 7847,
behaviour = "questCreatures",
delay = 4
}
end)
quest.setScript( 441, "OnWon", function(args)
changeCreature {
tcid = 1601,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
changeCreature {
tcid = 1601,
behaviour = "questCreatures",
delay = 4
}
end)
quest.setScript( 219, "OnWon", function(args)
changeCreature {
tcid = 690,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
changeCreature {
tcid = 690,
behaviour = "JOB_RICH_STATIST",
delay = 3,
}
end)
quest.setScript( 2596, "OnWon", function(args)
local tcids = {7512,7513,7514}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_SPPL_RISE",
delay = 0.1,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 2600, "OnWon", function(args)
changeCreature {
tcid = 7527,
effect = "FXTYPE_SPPL_RISE",
delay = 0.1,
role = "ROLE_ATTACKER",
}
end)
quest.setScript( 2602, "OnWon", function(args)
local tcids = {7528,7529,7530}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_SPPL_RISE",
delay = 0.1,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 2604, "OnWon", function(args)
local tcids = {7531,7532}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_SPPL_RISE",
delay = 0.1,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 2606, "OnWon", function(args)
changeCreature {
tcid = 7533,
effect = "FXTYPE_SPPL_RISE",
delay = 0.1,
role = "ROLE_ATTACKER",
}
end)
quest.setScript( 2608, "OnWon", function(args)
local tcids = {7534,7535}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_SPPL_RISE",
delay = 0.1,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 2610, "OnWon", function(args)
local tcids = {7536,7537}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_SPPL_RISE",
delay = 0.1,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 2612, "OnWon", function(args)
local tcids = {7538,7539,7540}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_SPPL_RISE",
delay = 0.1,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 2614, "OnWon", function(args)
changeCreature {
tcid = 7541,
effect = "FXTYPE_SPPL_RISE",
delay = 0.1,
role = "ROLE_ATTACKER",
}
end)
quest.setScript( 188, "OnWon", function(args)
changeCreature {
tcid = 622,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM01",
loopCount = 1,
}
changeCreature {
tcid = 629,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM04",
loopCount = 1,
}
end)
quest.setScript( 189, "OnWon", function(args)
changeCreature {
tcid = 622,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM26",
loopCount = 1,
}
end)
quest.setScript( 190, "OnTaskFulfilled", function(args)
local attackers = {728,730,732,734,736,739,740,741,752,753}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 190, "OnWon", function(args)
local attackers = {728,730,732,734,736,739,740,741,752,753}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
creatureGotoPos(724, {21,27,0,3050,600,100,240}, 240, 1, "questCreatures", 0.5)
creatureGotoPos(757, {21,27,0,2985,735,100,270}, 270, 1, "questCreatures", 1)
end)
quest.setScript( 1306, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 1719,
livesRemaining = 1,
useUnconscious = true,
unconscioursTime = 4,
}
end)
quest.setScript( 1306, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 1719,
faction = "FACTION_FRIEND_HERO_ALL",
behaviour = "questCreatures",
livesRemaining = 0,
clearUnconscious = true,
}
end)
quest.setScript( 1306, "OnUnconscious", function(args)
if args.tcid == 1719 then
changeCreature {
tcid = 2863,
clearUnconscious = true,
clearAutoTeleporting = true,
mortality = "IMMORTAL",
role = "ROLE_DIALOG",
}
end
end)
quest.setScript( 480, "OnWon", function(args)
changeCreature {
tcid = 1740,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=21,sy=27,sz=0,px=40.602,py=1266.000,pz=45.770},
followUpBhv = "JOB_FIELDWORKER",
delay = 5,
}
changeCreature {
tcid = 1741,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=20,sy=27,sz=0,px=3006.648,py=1355.648,pz=47.958},
followUpBhv = "JOB_FIELDWORKER",
delay = 5,
}
changeCreature {
tcid = 1742,
gotoPosition = {sx=21,sy=27,sz=0,px=1024.250,py=783.203,pz=199.888},
behaviour = "JOB_KID",
followUpBhv = "JOB_KID",
delay = 3,
}
changeCreature {
tcid = 1753,
gotoPosition = {sx=21,sy=27,sz=0,px=1036.148,py=738.953,pz=199.888},
behaviour = "JOB_KID",
followUpBhv = "JOB_KID",
delay = 3,
}
changeCreature {
tcid = 1754,
gotoPosition = {sx=21,sy=27,sz=0,px=1055.445,py=674.016,pz=199.888},
behaviour = "JOB_KID",
followUpBhv = "JOB_KID",
delay = 3,
}
end)
quest.setScript( 307, "OnWon", function(args)
changeCreature {
tcid = 1153,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM34",
loopCount = 1,
}
changeCreature {
tcid = 1153,
behaviour = "JOB_RICH_STATIST",
delay = 15,
}
local droppers = {1174,9284,9285,9286,9287,9288}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 357, "OnLost", function(args)
tcids = { 1338, 1345, 1346, 1344, 1343, 1342 }
CM_AttackerAway(tcids,60)
changeCreature {
tcid = 1336,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = 10,
}
changeCreature {
tcid = 1336,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=27,sy=22,sz=0,px=2500,py=1950,pz=0},
followUpBhv = "questCreatures",
speed = 2,
delay = 20,
}
CM_CreatureAway(1336,60)
end)
quest.setScript( 357, "OnTaskFulfilled", function(args)
tcids = { 1338, 1345, 1346, 1344, 1343, 1342 }
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 357, "OnWon", function(args)
tcids = { 1338, 1345, 1346, 1344, 1343, 1342 }
CM_AttackerAway(tcids,60)
end)
quest.setScript( 1418, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
teleport {
tcid = 1336,
position = {sx=27,sy=23,sz=0,px=1650.000000,py=2050.000000,pz=0.000000},
orientation = 297,
}
end
end)
quest.setScript( 1418, "OnWon", function(args)
creatureGotoPos(1337, {sx=27,sy=22,sz=0,px=2500,py=1950,pz=0}, 0, 2, "questCreatures", 0.2)
CM_CreatureAway(1337,30)
creatureGotoPos(1336, {sx=27,sy=22,sz=0,px=2500,py=1900,pz=0}, 0, 2, "questCreatures", 0.8)
CM_CreatureAway(1336,30)
end)
quest.setScript( 358, "OnLost", function(args)
tcids = { 1348, 1349, 1350, 1351, 1352, 1353, 1354, 1355, 1356, 1357, 1358, 1359,
6530, 6531, 6532, 6533, 6534, 6535, 6536, 6537, 6538}
CM_AttackerAway(tcids,60)
end)
quest.setScript( 358, "OnTaskFulfilled", function(args)
tcids = { 1348, 1349, 1350, 1351, 1352, 1353, 1354, 1355, 1356, 1357, 1358, 1359,
6530, 6531, 6532, 6533, 6534, 6535, 6536, 6537, 6538}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 358, "OnWon", function(args)
tcids = { 1348, 1349, 1350, 1351, 1352, 1353, 1354, 1355, 1356, 1357, 1358, 1359,
6530, 6531, 6532, 6533, 6534, 6535, 6536, 6537, 6538}
CM_AttackerAway(tcids,60)
end)
quest.setScript( 185, "OnTaskAwaiting", function(args)
if nil then
local tcids = {573,575,576,577,578,579,580,581,582,583,584,585,587,588,589}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
role = "ROLE_ATTACKER",
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
}
end
end
end)
quest.setScript( 222, "OnLost", function(args)
changeCreature {
tcid = 723,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = 10,
}
changeCreature {
tcid = 723,
behaviour = "JOB_RICH_STATIST",
delay = 20,
}
local attackers = {720,721,722}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 222, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 719,
mortality = "MORTAL"
}
end)
quest.setScript( 222, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 719,
mortality = "IMMORTAL"
}
end)
quest.setScript( 222, "OnWon", function(args)
changeCreature {
tcid = 719,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=27,sy=26,sz=0,px=723.750,py=1437.850,pz=90.000},
followUpBhv= "JOB_RICH_STATIST",
}
changeCreature {
tcid = 723,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=27,sy=26,sz=0,px=724.500,py=1372.100,pz=90.000},
followUpBhv= "JOB_RICH_STATIST",
}
local attackers = {720,721,722}
CM_AttackerAway (attackers,1)
end)
quest.setScript( 3795, "OnTaskAwaiting", function(args)
local tcs = { 720,721,722 }
local pos_x = 800
local pos_y = 400
local radius = 50
local winkel = 160
for i,tc in ipairs(tcs) do
winkel = winkel + math.random(30,120)
x = pos_x + radius * math.sin(math.rad(winkel))
y = pos_y - radius * math.cos(math.rad(winkel))
creatureGotoPos (tc, { 26,28,0 , x,y,0.000 , 180-winkel }, 180-winkel, 2, "questCreatures", 0.2 * i)
end
setTimer{
id = 3795,
interval = 5,
count = 1
}
end)
quest.setScript( 3795, "OnTimer", function(args)
solveQuest (args.id)
end)
CM_Orpheus_Zombies_Away_Group_1 = function (args)
local attackers = {1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
faction = "FACTION_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
end
CM_Orpheus_Zombies_Away_Group_2 = function (args)
local attackers = {1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,
1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
faction = "FACTION_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
end
quest.setScript( 1374, "OnLost", function(args)
CM_Orpheus_Zombies_Away_Group_1()
end)
quest.setScript( 1374, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 1649,
useUnconscious = true,
livesRemaining = 255,
unconsciousTime = 5,
}
end)
quest.setScript( 1375, "OnLost", function(args)
CM_Orpheus_Zombies_Away_Group_1()
CM_Orpheus_Zombies_Away_Group_2()
end)
quest.setScript( 1375, "OnTaskWaiting", function(args)
local attackers = {1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,
1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 1375, "OnWon", function(args)
local lodamir = 1649
local maryann = 1645
local pos_lodamir = { 26,28,0 , 800.000,1750.000,0.000 , -250.000 }
local pos_maryann = { 26,28,0 , 850.000,1750.000,0.000 , -250.000 }
changeCreature {
tcid = lodamir,
creature = "Helf_statist_citizen_m02_c4",
}
creatureTeleportPos (lodamir,0,pos_lodamir)
creatureTeleportPos (maryann,0,pos_maryann)
end)
quest.setScript( 1419, "OnWon", function(args)
changeCreature {
tcid = 1645,
clearUnconscious = true,
livesRemaining = 0,
role = "ROLE_INVALID",
behaviour = "JOB_RICH_STATIST",
faction = "FACTION_HIGHELVE",
}
creatureGotoPos (1645, {25,28,0 , 696,2508,14 , 0}, 0, 2, "JOB_RICH_STATIST", 1)
changeCreature {
tcid = 1649,
clearUnconscious = true,
livesRemaining = 0,
role = "ROLE_INVALID",
behaviour = "JOB_RICH_STATIST",
faction = "FACTION_HIGHELVE",
}
creatureGotoPos (1649, {25,28,0 , 707,2412,14 , 180}, 180, 2, "JOB_RICH_STATIST", 1.5)
CM_Orpheus_Zombies_Away_Group_1()
CM_Orpheus_Zombies_Away_Group_2()
end)
quest.setScript( 3438, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "QUEST_801_DECLINE_DLG" , "QUEST_801_ACCEPT_DLG"
end
end)
quest.setScript( 453, "OnLost", function(args)
CM_Orpheus_Zombies_Away_Group_1()
end)
quest.setScript( 453, "OnTaskWaiting", function(args)
local attackers = {1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 453, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 1645,
useUnconscious = true,
livesRemaining = 255,
unconsciousTime = 5,
}
end)
quest.setScript( 801, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 1645,
clearUnconscious = true,
livesRemaining = 0,
role="ROLE_ATTACKER",
behaviour = "Enemy_warrior_coward",
faction = "FACTION_ENEMY_HERO",
}
changeCreature {
tcid = 1649,
clearUnconscious = true,
livesRemaining = 0,
role="ROLE_ATTACKER",
behaviour = "Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
}
CM_Orpheus_Zombies_Away_Group_1()
end)
quest.setScript( 802, "OnTaskAwaiting", function(args)
end)
quest.setScript( 1811, "OnWon", function(args)
changeCreature {
tcid = 4974,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
end)
quest.setScript( 1812, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 4977,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
end)
quest.setScript( 1812, "OnWon", function(args)
changeCreature {
tcid = 4966,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
end)
quest.setScript( 1814, "OnWon", function(args)
changeCreature {
tcid = 4966,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
}
end)
quest.setScript( 2302, "OnWon", function(args)
changeCreature {
tcid = 102,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=19,sy=28,sz=0,px=122,py=1889,pz=4},
followUpBhv = "questCreatures",
}
changeCreature {
tcid = 103,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=19,sy=28,sz=0,px=150,py=1800,pz=0},
followUpBhv = "questCreatures",
}
end)
quest.setScript( 2303, "OnWon", function(args)
changeCreature {
tcid = 103,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=19,sy=28,sz=0,px=150,py=1800,pz=0},
followUpBhv = "questCreatures",
}
changeCreature {
tcid = 102,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=19,sy=28,sz=0,px=122,py=1889,pz=4},
followUpBhv = "questCreatures",
}
end)
quest.setScript( 46, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 102,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=19,sy=28,sz=0,px=3069.128906,py=2879.882813,pz=114.287964},
speed = 2,
followUpBhv = "questCreatures",
followUpAngle = 331,
}
changeCreature {
tcid = 103,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=19,sy=28,sz=0,px=3099.898438,py=3000.296875,pz=112.294357},
speed = 2,
followUpBhv = "questCreatures",
followUpAngle = 175,
}
creatureTeleportPos(102,30,{sx=21, sy=29, sz=0, px=0.000000, py=900.000000, pz=109.000000})
creatureTeleportPos(103,30,{sx=21, sy=29, sz=0, px=19.101563, py=856.351563, pz=59.994839})
end)
quest.setScript( 475, "OnWon", function(args)
local droppers = {1713,1714,1715,1716,1717}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 179, "OnWon", function(args)
local mineworker = {1517, 1518, 1519, 1520}
for index,id in ipairs(mineworker) do
creatureGotoPos(id,{sx=34, sy=31, sz=0, px=935.273438, py=2781.687500, pz=-96.850258, orientation=143.127060})
creatureTeleportsAway (id,6)
end
end)
quest.setScript( 1762, "OnDeath", function(args)
changeCreature {
tcid = 4723,
behaviour = "questCreatures",
faction = "FACTION_HUMAN",
livesRemaining = 0,
clearUnconscious = 1
}
end)
quest.setScript( 1762, "OnTaskAwaiting", function(args)
changeCreature{
tcid=4723,
useUnconscious = true,
unconsciousTime = 3,
livesRemaining = 1,
}
end)
quest.setScript( 1900, "OnWon", function(args)
creatureGotoPos (4717,{sx=23, sy=36, sz=0, px=196.500000, py=79.546875, pz=1099.907349, orientation=301.378601},false,false,false,2)
creatureGotoPos (4723,{sx=23, sy=36, sz=0, px=133.546875, py=182.953125, pz=1099.907349, orientation=115.319611},false,false,false,3)
creatureTeleportsAway(4717,40)
creatureTeleportsAway(4723,40)
end)
quest.setScript( 589, "OnWon", function(args)
changeCreature {
tcid =1888,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM27",
loopCount = 1,
}
changeCreature {
tcid =1888,
behaviour = "JOB_RICH_STATIST",
delay = 3,
}
end)
quest.setScript( 421, "OnWon", function(args)
changeCreature {
tcid =1522,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM24",
loopCount = 1,
}
changeCreature {
tcid =1522,
behaviour = "JOB_RICH_STATIST",
delay = 3,
}
end)
quest.setScript( 3433, "OnTaskAwaiting", function(args)
local p = {sx=18,sy=32,sz=0,px=2600,py=2250,pz=0}
setFixedListener{
position = p,
}
playQuestSpeech {
tcid = 3290,
lokaid = "QUEST_1180_KING",
questid = 3433
}
setTimer{
id = 3433,
interval = 3,
count = 1
}
end)
quest.setScript( 3433, "OnTimer", function(args)
setFixedListener{
position = nil,
}
solveQuest (args.id)
end)
quest.setScript( 1360, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
local tcids = {5182,5183,5184,5185,5186}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end
end
end)
quest.setScript( 1866, "OnStation", function(args)
local tcids = {5182,5183,5184,5185,5186}
for index,tcid in ipairs(tcids) do
if args.state == "TASK_AWAITING" and args.tcid == tcid then
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_LAYGROUND-UP",
loopCount = 1,
}
changeCreature {
tcid = tcid,
behaviour = "JOB_POOR_STATIST",
delay = 4,
}
end
end
end)
quest.setScript( 1866, "OnWon", function(args)
if getQuestState(2164) ~= "WON" then
solveQuest(2164)
end
if getQuestState(2165) ~= "WON" then
solveQuest(2165)
end
if getQuestState(2166) ~= "WON" then
solveQuest(2166)
end
local creatures = {
{
TCID = 6611,
pos = {sx=37, sy=26, sz=0, px=2369.046875, py=951.851563, pz=24.842409, orientation=351.002838},
},
{
TCID = 6612,
pos = {sx=37, sy=26, sz=0, px=2389.390625, py=917.007813, pz=28.408424, orientation=11.738541},
},
{
TCID = 6613,
pos = {sx=37, sy=26, sz=0, px=2352.101563, py=1077.000000, pz=33.924084, orientation=4.927093},
}
}
for id,object in ipairs(creatures) do
changeCreature {
tcid = object.TCID,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.pos,
followUpBhv = "questCreatures",
}
creatureTeleportsAway(object.TCID,45)
end
end)
quest.setScript( 2347, "OnWon", function(args)
changeCreature {
tcid = 6729,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=38,sy=31,sz=0,px=2506.297,py=687.602,pz=120.000},
followUpBhv = "JOB_RICH_STATIST",
delay = 2,
}
end)
quest.setScript( 1364, "OnTaskAwaiting", function(args)
local tcids = { 2562, 2563, 2564, 2565, 2566, 2567, 2568, 3848, 3849, 3850, 3851, 3852 }
for index, tcid in ipairs(tcids) do
changeCreature {
tcid=tcid,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 309, "OnWon", function(args)
changeCreature {
tcid = 1154,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM01",
loopCount = 1,
}
changeCreature {
tcid = 1154,
behaviour = "JOB_RICH_STATIST",
delay = 3,
}
end)
quest.setScript( 2193, "OnStateChange", function(args)
local tcids = {6724,6725}
if args.state == "PREFIGHT" then
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "Enemy_warrior_brave_ex",
faction = "FACTION_ENEMY_HERO",
mortality = "MORTAL",
role = "ROLE_ATTACKER",
}
end
end
end)
quest.setScript( 2193, "OnWon", function(args)
destroyCreature {
tcid = 6718,
}
end)
quest.setScript( 3539, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9799,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
}
end)
quest.setScript( 3539, "OnUnconscious", function(args)
if args.tcid == 9799 then
changeCreature {
tcid = 9799,
clearUnconscious = true,
clearAutoTeleporting = true,
mortality = "IMMORTAL",
role = "ROLE_INVALID",
faction = "FACTION_ATMO",
behaviour = "JOB_QUESTSTAGING",
effect = "FXTYPE_GEN_TRANSFORM",
}
changeCreature {
tcid = 9799,
delay=2,
creature = "wild_questhorse_1",
}
changeCreature {
tcid = 9799,
delay=5,
behaviour="JOB_POOR_STATIST",
}
end
end)
quest.setScript( 131, "OnWon", function(args)
changeCreature {
tcid = 356,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM09",
loopCount = 1,
}
end)
quest.setScript( 133, "OnWon", function(args)
changeCreature {
tcid = 354,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
end)
quest.setScript( 1308, "OnTaskAwaiting", function(args)
createEffect {
effect = "FXTYPE_CHEST1W",
position = { sx=23,sy=34,sz=-10 , px=1800,py=2200,pz=122},
delay = 1,
duration = 5
}
end)
quest.setScript( 55, "OnWon", function(args)
changeCreature {
tcid = 154,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
}
changeCreature {
tcid = 145,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
}
creatureGotoPos (145, {sx=19,sy=29,sz=0,px=2278.800,py=1964.000,pz=677.026}, 0, 2, "JOB_KID", 5)
end)
quest.setScript( 56, "OnWon", function(args)
changeCreature {
tcid = 155,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
delay = 5,
}
creatureTeleportPos(145,1,{23,29,0,2894.453,11.898,7.881})
changeCreature {
tcid = 145,
behaviour = "JOB_KID",
delay = 5,
}
creatureTeleportPos(154,1,{23,29,0,2510.461,93.063,-27.020})
changeCreature {
tcid = 154,
behaviour = "questCreatures",
delay = 5,
}
end)
quest.setScript( 205, "OnTaskAwaiting", function(args)
local attackers = {611,612}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 205, "OnWon", function(args)
local attackers = {611,612}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
end)
quest.setScript( 1536, "OnStateChange", function(args)
local tcids = { 4080,4081,4082,4083 }
if args.state == "WON" then
for index, tcid in ipairs(tcids) do
changeCreature {
tcid=tcid,
effect="FXTYPE_GEN_TRANSFORM",
delay=2,
}
teleport {
tcid=tcid,
position={px=0,py=0,pz=0,sx=0,sy=0,sz=0},
delay=4
}
end
end
end)
quest.setScript( 1377, "OnSetup", function(args)
changeCreature {
tcid = 1316,
mortality = "MORTAL",
}
end)
quest.setScript( 354, "OnPrecondsFulfilled", function(args)
local tcids = {6511,6510,6513}
for i, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM23",
loopCount = -1,
dont_turn = true,
}
end
end)
quest.setScript( 536, "OnStateChange", function(args)
tcids = {1820, 1821, 1822, 1823}
if args.state == "PRECONDS_FULFILLED" then
for i,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
role = "ROLE_ATTACKER",
}
end
end
end)
quest.setScript( 536, "OnTaskAwaiting", function(args)
addBookEntry(536, "QUEST_START")
end)
quest.setScript( 536, "OnTaskFulfilled", function(args)
addBookEntry(536, "QUEST_READY")
end)
quest.setScript( 1430, "OnDeath", function(args)
if args.tcid == 3870 then
changeCreature {
tcid = 3869,
behaviour = "questCreatures",
faction = "FACTION_FRIEND_HERO_ALL",
}
end
end)
quest.setScript( 1430, "OnLost", function(args)
local attackers = {3870}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 1430, "OnWon", function(args)
local attackers = {3870}
CM_AttackerAway (attackers,1)
end)
quest.setScript( 1442, "OnSetup", function(args)
changeCreature {
tcid= 3874,
effect= "FXTYPE_GEN_TRANSFORM",
mortality = "IMMORTAL"
}
changeCreature {
tcid = 3874,
creature = "Human_stat_citizen_m02",
behaviour = "JOB_QUESTSTAGING",
delay = 2
}
end)
quest.setScript( 1435, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 3880,
clearAutoTeleporting = true,
}
end)
quest.setScript( 1457, "OnWon", function(args)
changeCreature {
tcid = 3934,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=38, sy=38, sz=0, px=150.000000, py=1550.000000, pz=0.000000, orientation=0.000000},
speed = 2,
}
CM_CreatureAway(3934,25)
end)
quest.setScript( 1458, "OnTaskAwaiting", function(args)
CM_CreatureAway(3934,0)
end)
quest.setScript( 1541, "OnLost", function(args)
local attackers = {4197,4198,4199,4200,4201,4202,4203}
CM_AttackerAway (attackers,1)
end)
quest.setScript( 1541, "OnWon", function(args)
solveQuest(1560)
end)
quest.setScript( 1560, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 3948,
mortality = "MORTAL",
role = "ROLE_VICTIM",
}
end)
quest.setScript( 1560, "OnWon", function(args)
changeCreature {
tcid = 3948,
mortality = "IMMORTAL",
clearAutoTeleporting = true,
}
end)
quest.setScript( 1568, "OnTaskFulfilled", function(args)
solveQuest(1881)
creatureTeleportPos(4245,1,{33,35,-2,350,1550,61})
end)
quest.setScript( 1881, "OnTaskAwaiting", function(args)
changeCreature {
tcid=4245,
role = "ROLE_VICTIM",
}
changeCreature {
tcid=4245,
behaviour = "JOB_QUESTSTAGING",
gotoPosition={sx=34,sy=37,sz=0,px=233,py=1253,pz=50},
followUpBhv = "questCreatures",
delay=1,
}
end)
quest.setScript( 1628, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 4245,
mortality = "MORTAL",
livesRemaining=1,
useUnconscious=true,
unconsciousTime=3,
clearAutoTeleporting = true,
}
changeCreature {
tcid = 3948,
setAutoTeleporting = true,
}
end)
quest.setScript( 1628, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 4245,
mortality="IMMORTAL"
}
end)
quest.setScript( 1577, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 4245,
mortality = "MORTAL",
}
end)
quest.setScript( 1577, "OnTaskNotFulfilled", function(args)
removeFromGroup {
tcid = 4245,
}
destroyCreature {
tcid = 4245,
splatter = false,
delay = 5,
}
end)
quest.setScript( 1577, "OnWon", function(args)
removeFromGroup {
tcid = 4245,
}
changeCreature {
tcid = 4245,
mortality = "IMMORTAL",
faction = "FACTION_FRIEND_HERO_ALL",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=31,sy=39,sz=0,px=146.953,py=308.543,pz=176.633},
followUpBhv = "questCreatures",
delay = 5,
}
end)
quest.setScript( 1624, "OnWon", function(args)
changeCreature {
tcid=4309,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM12",
mortality = "MORTAL",
role = "ROLE_INVALID"
}
killCreature {
tcid = 4309,
splatter=false,
delay = 1.5,
}
creatureTeleportPos(4245,5,{33,35,-2,24.250,1000.000,-117.026})
end)
quest.setScript( 1479, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 3998,
role = "ROLE_INVALID",
}
end)
quest.setScript( 1479, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 3998,
role = "ROLE_DIALOG",
}
end)
quest.setScript( 1481, "OnLost", function(args)
local attackers = {4000,4005,4001,4002,4003,4004,4009,4008,4007}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 1481, "OnTalk", function(args)
if args.tcid == 3999 then
changeCreature {
tcid = 3999,
behaviour = "questCreatures"
}
end
end)
quest.setScript( 1481, "OnWon", function(args)
local attackers = {4000,4005,4001,4002,4003,4004,4009,4008,4007}
CM_AttackerAway (attackers,60)
creatureTeleportsAway ( 3999, 5 )
end)
quest.setScript( 1483, "OnDeath", function(args)
local tcids = {4011,4012,4014,4015,4017,4018,4019,4020,4021}
for index, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "Enemy_warrior_simple",
emotion = "ANIM_TYPE_EM15",
loopCount = -1,
}
end
changeCreature {
tcid = 4022,
behaviour = "Enemy_warrior_simple",
emotion = "ANIM_TYPE_EM15",
loopCount = -1,
}
end)
quest.setScript( 1483, "OnTaskAwaiting", function(args)
local tcids_knee = {4012,4014,4018,4020}
local tcids_lay = {4011,4015,4017,4019,4021}
for index, tcid in ipairs(tcids_knee) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_KNEE-IDLE",
loopCount = -1,
}
end
for index, tcid in ipairs(tcids_lay) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_LAYIDLE",
loopCount = -1,
}
end
end)
quest.setScript( 1523, "OnWon", function(args)
changeCreature {
tcid = 4155,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=41,sy=37,sz=0,px=1134,py=413,pz=797},
followUpBhv = "questCreatures"
}
end)
quest.setScript( 1524, "OnTalk", function(args)
if args.tcid == 4156 then
tcids = {4156,4157,4158,4159,4160}
for index, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "Enemy_warrior_brave",
}
end
end
end)
quest.setScript( 1524, "OnTaskAwaiting", function(args)
tcids = {4156,4157,4158,4159,4160}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=40,sy=37,sz=0,px=1020,py=482,pz=341}
}
end
end)
quest.setScript( 1527, "OnTalk", function(args)
if args.tcid == 4161 then
changeCreature {
tcid = 4161,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = -1,
}
end
end)
quest.setScript( 1592, "OnTaskAwaiting", function(args)
local attackers = {4259,4260,4261,4262,4263}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 1595, "OnTalk", function(args)
if args.tcid==4257 and args.state=="WON" then
local lokaids = {"QUEST_1595_IDLE_01","QUEST_1595_IDLE_02","QUEST_1595_IDLE_03","QUEST_1595_IDLE_04"}
local index = math.random(1,getn(lokaids))
return lokaids[index]
end
end)
quest.setScript( 1595, "OnWon", function(args)
local attackers = {4259,4260,4261,4262,4263}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
end)
quest.setScript( 1439, "OnTaskAwaiting", function(args)
setWoobState {
woid = 1011067793,
state = "WOOB_INVALID",
}
end)
quest.setScript( 1625, "OnWon", function(args)
creatureGotoPos (4308, { 41,37,0 , 2655,1535,925 , 120 }, false, 1, "JOB_COMMUNICATOR",1)
creatureGotoPos (3885, { 41,37,0 , 2195,1195,906 , 220 }, false, 1, "JOB_COMMUNICATOR",1)
end)
quest.setScript( 1627, "OnTaskAwaiting", function(args)
setWoobState {
woid = 1011067793,
state = "WOOB_THINGY_OFF",
}
end)
quest.setScript( 1632, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 4328,
livesRemaining = 1,
useUnconscious = true,
unconsciousTime = 2,
}
changeCreature {
tcid = 4329,
livesRemaining = 1,
useUnconscious = true,
unconsciousTime = 2,
}
end)
quest.setScript( 1632, "OnUnconscious", function(args)
local tcids = {4328,4329}
for i,tcid in ipairs(tcids) do
if tcid==args.tcid then
changeCreature {
tcid = tcid,
clearUnconscious = true,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
faction = "FACTION_FRIEND_HERO_ALL",
role = "ROLE_INVALID",
delay = 1,
}
end
end
end)
quest.setScript( 1745, "OnTaskAwaiting", function(args)
doEmote(4648, "ANIM_TYPE_EM04",1,0)
end)
quest.setScript( 1748, "OnTaskAwaiting", function(args)
local tcids = {4650,4651,4652}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
mortality = "MORTAL",
}
end
changeCreature {
tcid = 4650,
mortality = "MORTAL",
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
}
end)
quest.setScript( 1748, "OnUnconscious", function(args)
if args.tcid == 4650 then
changeCreature {
tcid = 4650,
clearUnconscious = true,
livesRemaining = 0,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_DEFENSE",
loopCount = -1,
faction = "FACTION_HUMAN",
role = "ROLE_VICTIM",
mortality = "IMMORTAL",
}
end
end)
quest.setScript( 2674, "OnTaskFulfilled", function(args)
destroyCreature {
tcid = 7678,
splatter = false,
}
destroyCreature {
tcid = 7679,
splatter = false,
}
end)
quest.setScript( 3003, "OnTaskFulfilled", function(args)
destroyCreature {
tcid = 8337,
splatter = false,
}
end)
quest.setScript( 1721, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 4549,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_DEFENSE",
effect="FXTYPE_GEN_TPRISON",
loopCount = -1,
}
end)
quest.setScript( 1721, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 4549,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_INVALID",
effect="FXTYPE_INVALID",
}
end)
quest.setScript( 1722, "OnTaskAwaiting", function(args)
changeCreature {
tcid=4549,
mortality = "IMMORTAL"
}
end)
quest.setScript( 2150, "OnTaskAwaiting", function(args)
local tcids = {6549,6551,6552,6553,6554}
for index,id in ipairs(tcids) do
changeCreature {
tcid = id,
effect = "FXTYPE_GEN_TPRISON",
}
end
end)
quest.setScript( 2150, "OnTaskFulfilled", function(args)
local tcids = {6549,6551,6552,6553,6554}
for index,id in ipairs(tcids) do
changeCreature {
tcid = id,
effect = "FXTYPE_INVALID",
}
end
end)
quest.setScript( 2150, "OnWon", function(args)
local tcids = {6549,6551,6552,6553,6554}
for index,id in ipairs(tcids) do
creatureTeleportsAway(id, 2)
end
end)
quest.setScript( 2071, "OnStation", function(args)
if args.currentStation == 0 then
questMessage {
line = 1,
lokaid = "QUEST_2071_COLLECT_MSG_1",
duration = 5.0,
fadeIn = 0.5,
fadeOut = 1.0,
delay = 0,
color = "#00ff00",
}
end
if args.currentStation == 1 then
questMessage {
line = 1,
lokaid = "QUEST_2071_COLLECT_MSG_2",
duration = 5.0,
fadeIn = 0.5,
fadeOut = 1.0,
delay = 0,
color = "#00ff00",
}
end
if args.currentStation == 2 then
questMessage {
line = 1,
lokaid = "QUEST_2071_COLLECT_MSG_3",
duration = 5.0,
fadeIn = 0.5,
fadeOut = 1.0,
delay = 0,
color = "#00ff00",
}
end
end)
quest.setScript( 1711, "OnStateChange", function(args)
if args.state == "TASK_AWAITING" then
rabbits = {4505,4506,4507,4508,4511,4512,4513,4514,4515}
for index,rabbit in ipairs(rabbits) do
changeCreature {
tcid = rabbit,
livesRemaining = 0,
clearUnconscious=true,
}
end
end
end)
quest.setScript( 1711, "OnWon", function(args)
changeCreature {
tcid = 4504,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
changeCreature {
tcid = 4504,
behaviour = "questCreatures",
delay = 4
}
end)
quest.setScript( 1813, "OnWon", function(args)
changeCreature{
tcid=4967,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_KNEE-IDLE",
loopCount = 3,
}
end)
quest.setScript( 1787, "OnStateChange", function(args)
if args.state=="PRECONDS_FULFILLED" then
WeatherDefinitions.quest_1787_16_53 = {sx=16,sy=53,sz=0,density=100,flags=WEATHERFLAG_RAIN+WEATHERFLAG_WIND}
WeatherDefinitions.quest_1787_17_53 = {sx=17,sy=53,sz=0,density=100,flags=WEATHERFLAG_RAIN+WEATHERFLAG_WIND}
WeatherDefinitions.quest_1787_16_52 = {sx=16,sy=52,sz=0,density=100,flags=WEATHERFLAG_RAIN+WEATHERFLAG_WIND}
WeatherDefinitions.quest_1787_17_52 = {sx=17,sy=52,sz=0,density=100,flags=WEATHERFLAG_RAIN+WEATHERFLAG_WIND}
end
end)
quest.setScript( 1790, "OnWon", function(args)
changeCreature {
tcid=4807,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_DEFENSE",
loopCount = -1,
effect="FXTYPE_GEN_TRANSFORM",
delay=4,
}
changeCreature {
tcid=4807,
behaviour = "JOB_QUESTSTAGING",
creature="Atmo_chicken_white",
delay=6,
}
local droppers = {4810,4902,4903,4904,4905}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 1792, "OnWon", function(args)
changeCreature {
tcid=4804,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_DEFENSE",
loopCount = -1,
effect="FXTYPE_GEN_TRANSFORM",
delay=4,
}
changeCreature {
tcid=4804,
behaviour = "JOB_QUESTSTAGING",
creature="Atmo_sheep_brown",
delay=6,
}
local droppers = {4841,4906,4907,4908,4909}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 1798, "OnWon", function(args)
changeCreature {
tcid=4806,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_DEFENSE",
loopCount = -1,
effect="FXTYPE_GEN_TRANSFORM",
delay=4,
}
changeCreature {
tcid=4806,
behaviour = "JOB_QUESTSTAGING",
creature="Atmo_crow_black",
delay=6,
}
local droppers = {4913,4916,4915,4914}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 1800, "OnWon", function(args)
changeCreature {
tcid=4805,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_DEFENSE",
loopCount = -1,
effect="FXTYPE_GEN_TRANSFORM",
delay=4,
}
destroyCreature {
tcid = 4805,
splatter = true,
delay = 6
}
end)
quest.setScript( 1832, "OnTaskFulfilled", function(args)
WeatherDefinitions.quest_1787_16_53 = {sx=16,sy=53,sz=0,density=0,flags=0}
WeatherDefinitions.quest_1787_17_53 = {sx=17,sy=53,sz=0,density=0,flags=0}
WeatherDefinitions.quest_1787_16_52 = {sx=16,sy=52,sz=0,density=0,flags=0}
WeatherDefinitions.quest_1787_17_52 = {sx=17,sy=52,sz=0,density=0,flags=0}
updateWeather()
WeatherDefinitions.quest_1787_16_53 = nil
WeatherDefinitions.quest_1787_17_53 = nil
WeatherDefinitions.quest_1787_16_52 = nil
WeatherDefinitions.quest_1787_17_52 = nil
end)
quest.setScript( 1975, "OnTaskFulfilled", function(args)
tcids={5601,5602,5603}
for i,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 1976, "OnTaskFulfilled", function(args)
tcids={5605,5606,5607}
for i,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 1977, "OnTaskFulfilled", function(args)
tcids={5609,5610,5611}
for i,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 1981, "OnTaskFulfilled", function(args)
changeCreature{
tcid = 5677,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=17,sy=49,sz=-1, px=2133,py=2675,pz=10},
followUpAngle = 180,
followUpBhv = "questCreatures",
}
end)
quest.setScript( 2062, "OnSetup", function(args)
if args.state == "PRECONDS_FULFILLED" then
solveQuest (args.id)
end
end)
quest.setScript( 1819, "OnTaskAwaiting", function(args)
local attackers = {5034,5035,5036,5037,5039}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 1819, "OnWon", function(args)
local droppers = {5011,5012,5013,5014,5015,5016,5017,5018,5019,5020,5021}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 1825, "OnLost", function(args)
local attackers = {5034,5035,5036,5037,5039}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
end)
quest.setScript( 1825, "OnWon", function(args)
local attackers = {5034,5035,5036,5037,5039 , 5027}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
end)
quest.setScript( 2046, "OnTalk", function(args)
changeCreature {
tcid = 6735,
dont_turn = true,
}
end)
quest.setScript( 2046, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 6735,
dont_turn = true,
}
end)
quest.setScript( 2120, "OnWon", function(args)
changeCreature {
dont_turn = true,
tcid=6735,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_DEFENSE",
loopCount = -1,
effect="FXTYPE_SMOKEBIGWHITE",
delay=0.25,
}
changeCreature {
tcid=6735,
creature="Story_Gronkor",
delay=3,
}
changeCreature {
tcid = 6735,
effect = "FXTYPE_INVALID",
delay = 5,
}
end)
quest.setScript( 2121, "OnTaskAwaiting", function(args)
creatureTeleportPos(6361, 2, {16,51,-2 , 2600,500,0})
end)
quest.setScript( 2068, "OnSetup", function(args)
CM_AddToRespawn (args.id)
end)
quest.setScript( 2068, "OnTaskAwaiting", function(args)
teleportTeam(2068,{sx=32, sy=52, sz=0, px=1750, py=1550, pz=0, orientation=0})
creatureTeleportPos(6114,0,{32,52,0,1450,1450,0})
return {sx=32, sy=52, sz=0, px=1750, py=1550, pz=0, orientation=0}
end)
quest.setScript( 2068, "OnTaskFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
return {sx=32, sy=52, sz=0, px=1750, py=1550, pz=0, orientation=0}
end)
quest.setScript( 2068, "OnTaskNotFulfilled", function(args)
teleportTeam(2068,{sx=30, sy=59, sz=0, px=2000.000000, py=2600.000000, pz=600.000000, orientation=0.000000})
creatureTeleportPos(6114,0,{30,59,0,1950,2500,593})
CM_RemoveFromRespawn (args.id)
return {}
end)
quest.setScript( 2068, "OnWon", function(args)
return {sx=32, sy=52, sz=0, px=1750, py=1550, pz=0, orientation=0}
end)
quest.setScript( 2069, "OnPrecondsFulfilled", function(args)
return {sx=32, sy=52, sz=0, px=1750, py=1550, pz=0, orientation=0}
end)
quest.setScript( 2069, "OnSetup", function(args)
CM_AddToRespawn (args.id)
end)
quest.setScript( 2069, "OnTaskAwaiting", function(args)
return {sx=32, sy=52, sz=0, px=1750, py=1550, pz=0, orientation=0}
end)
quest.setScript( 2069, "OnTaskFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
return {sx=32, sy=52, sz=0, px=1750, py=1550, pz=0, orientation=0}
end)
quest.setScript( 2069, "OnTaskNotFulfilled", function(args)
teleportTeam(2069,{sx=30, sy=59, sz=0, px=2000.000000, py=2600.000000, pz=600.000000, orientation=0.000000})
creatureTeleportPos(6114,0,{30,59,0,1950,2500,593})
CM_RemoveFromRespawn (args.id)
return {}
end)
quest.setScript( 2069, "OnWon", function(args)
return {sx=32, sy=52, sz=0, px=1750, py=1550, pz=0, orientation=0}
end)
quest.setScript( 2070, "OnPrecondsFulfilled", function(args)
return {sx=32, sy=52, sz=0, px=1750, py=1550, pz=0, orientation=0}
end)
quest.setScript( 2070, "OnSetup", function(args)
CM_AddToRespawn (args.id)
return {sx=32, sy=52, sz=0, px=1750.000000, py=1550.000000, pz=0.000000, orientation=0.000000}
end)
quest.setScript( 2070, "OnTaskAwaiting", function(args)
return {sx=32, sy=52, sz=0, px=1750.000000, py=1550.000000, pz=0.000000, orientation=0.000000}
end)
quest.setScript( 2070, "OnTaskFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
return {sx=32, sy=52, sz=0, px=1750, py=1550, pz=0, orientation=0}
end)
quest.setScript( 2070, "OnTaskNotFulfilled", function(args)
teleportTeam(2070,{sx=30, sy=59, sz=0, px=2000.000000, py=2600.000000, pz=600.000000, orientation=0.000000})
creatureTeleportPos(6114,0,{30,59,0,1950,2500,593})
CM_RemoveFromRespawn (args.id)
return {}
end)
quest.setScript( 2070, "OnWon", function(args)
creatureTeleportPos(6114,0,{30,59,0,1950,2500,593})
end)
quest.setScript( 3412, "OnSetup", function(args)
changeCreature {
tcid = 8001,
visible = false,
delay = 0.1,
}
end)
quest.setScript( 3412, "OnTaskAwaiting", function(args)
setTimer {
id = 3412,
count = 30,
interval = 1,
}
showTimer {
id = 3412,
cur = 30,
max = 30,
}
questMessage {
lokaid = "QUEST_2067_TCOUNT_MSG",
color = "#F0F8FF",
line = 0,
duration = 20.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end)
quest.setScript( 3412, "OnTaskFulfilled", function(args)
teleportTeam(3412,{sx=30, sy=59, sz=0, px=2000.000000, py=2600.000000, pz=600.000000, orientation=0.000000})
end)
quest.setScript( 3412, "OnTimer", function(args)
showTimer {
id = args.id,
cur = args.count,
max = 30,
}
if args.count == 10 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_01",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 9 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_02",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 8 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_03",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 7 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_04",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 6 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_05",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 5 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_06",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 4 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_07",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 3 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_08",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 2 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_09",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 1 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_10",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
solveQuest(args.id)
end
end)
quest.setScript( 2067, "OnSetup", function(args)
CM_AddToRespawn (args.id)
end)
quest.setScript( 2067, "OnTaskAwaiting", function(args)
teleportTeam(2067,{sx=26, sy=59, sz=-1, px=220.546875, py=2271.703125, pz=-152.802032, orientation=121.476837})
return {sx=26, sy=59, sz=-1, px=220.546875, py=2271.703125, pz=-152.802032, orientation=121.476837}
end)
quest.setScript( 2067, "OnTaskFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
return {}
end)
quest.setScript( 2067, "OnTaskNotFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
return {}
end)
quest.setScript( 2790, "OnSetup", function(args)
changeCreature {
tcid = 8001,
visible = false,
delay = 0.1,
}
end)
quest.setScript( 2790, "OnTaskAwaiting", function(args)
setTimer {
id = 2790,
count = 30,
interval = 1,
}
showTimer {
id = 2790,
cur = 30,
max = 30,
}
questMessage {
lokaid = "QUEST_2067_TCOUNT_MSG",
color = "#F0F8FF",
line = 0,
duration = 20.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end)
quest.setScript( 2790, "OnTaskFulfilled", function(args)
teleportTeam(2790,{sx=33, sy=58, sz=0, px=300, py=2950, pz=0, orientation=0})
end)
quest.setScript( 2790, "OnTimer", function(args)
showTimer {
id = args.id,
cur = args.count,
max = 30,
}
if args.count == 10 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_01",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 9 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_02",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 8 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_03",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 7 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_04",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 6 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_05",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 5 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_06",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 4 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_07",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 3 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_08",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 2 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_09",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end
if args.count == 1 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_10",
color = "#F0F8FF",
line = 0,
duration = 0.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
solveQuest(args.id)
end
end)
quest.setScript( 2082, "OnWon", function(args)
changeCreature {
tcid = 6183,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICB",
effect = "FXTYPE_GEN_SPAWN1_I",
effectParam = {
paramtype="position",
position={sx=43,sy=56,sz=0,px=500,py=2000,pz=0},
duration=1.2,
fxImpact="FXTYPE_GEN_SPAWN1",
},
loopCount = 1,
}
creatureTeleportsAway (6183, 4)
end)
quest.setScript( 2887, "OnTaskAwaiting", function(args)
teleportTeam(2887,{sx=15, sy=3, sz=0, px=2484.500000, py=1472.349609, pz=1857.726196, orientation=157.856232})
end)
quest.setScript( 2887, "OnWon", function(args)
CM_CreatureAway(8005, 1)
CM_CreatureAway(8230, 5)
CM_CreatureAway(8231, 10)
CM_CreatureAway(7999, 60)
end)
quest.setScript( 3106, "OnWon", function(args)
local droppers = {8719,8720,8721,8722,8723,8724}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 3129, "OnTaskAwaiting", function(args)
local attackers = {8800,8801,8802,8803,8804,8805,8806,8807,8808,8809,8810,8811,8812,8813,8814}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 3129, "OnWon", function(args)
local attackers = {8800,8801,8802,8803,8804,8805,8806,8807,8808,8809,8810,8811,8812,8813,8814}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
end)
quest.setScript( 3134, "OnTalk", function(args)
if args.state == "TASK_AWAITING" and args.tcid == 8799 then
teleportTeam (3134,{sx=13,sy=2,sz=-1 , px=2150,py=1050,pz=0 , orientation=270})
end
end)
quest.setScript( 3134, "OnTaskAwaiting", function(args)
teleportTeam (3134,{sx=13,sy=2,sz=-1 , px=2150,py=1050,pz=0 , orientation=270})
end)
quest.setScript( 3134, "OnTaskFulfilled", function(args)
teleportTeam (3134,{sx=18,sy=3,sz=0 , px=2700,py=1950,pz=0 , orientation=180})
end)
quest.setScript( 3182, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "QUEST_3182_BUTTON_CANCEL", "QUEST_3182_BUTTON_OK"
end
end)
quest.setScript( 3191, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "QUEST_3182_BUTTON_CANCEL", "QUEST_3182_BUTTON_OK"
end
end)
quest.setScript( 3197, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "QUEST_3182_BUTTON_CANCEL", "QUEST_3182_BUTTON_OK"
end
end)
quest.setScript( 3199, "OnTaskFulfilled", function(args)
local objects = {
{
tcid=8920,
pos={15,10,0 , 330.544, 19.944 ,204.960 , 105.000},
},
{
tcid=8922,
pos={15, 9,0 , 369.779,3163.911 ,204.960 , 145.000},
},
{
tcid=8943,
pos={15, 9,0 , 435.853,3146.207 ,204.960 , 185.000},
},
{
tcid=8969,
pos={15, 9,0 , 497.848,3175.115 ,204.960 , 225.000},
}
}
for i,object in ipairs(objects) do
creatureTeleportPos (object.tcid, 0, object.pos)
changeCreature {
tcid = object.tcid,
delay = 5,
behaviour = "JOB_QUESTSTAGING",
followUpBhv = "questCreatures",
emotion = "ANIM_TYPE_EM28",
loopCount = 1,
extraMode = 2,
extra = { "ANIM_TYPE_EM01","ANIM_TYPE_EM04","ANIM_TYPE_EM05","ANIM_TYPE_EM06",
"ANIM_TYPE_EM15","ANIM_TYPE_EM18","ANIM_TYPE_EM25","ANIM_TYPE_EM26",
"ANIM_TYPE_EM28","ANIM_TYPE_EM30","ANIM_TYPE_EM33"}
}
end
end)
quest.setScript( 3199, "OnWon", function(args)
local brothers = {8920, 8922, 8943, 8969, 8994}
for i,tc in ipairs(brothers) do
doEmote {
tcid = tc,
emotion = "ANIM_TYPE_EM17",
loopCount = -1,
delay = 0.05*math.random(1,20),
}
destroyCreature {
tcid = tc,
splatter = true,
delay = math.random(6,15),
}
end
end)
quest.setScript( 3209, "OnTaskAwaiting", function(args)
local ids = {9059,9060,9061}
for i,id in ipairs(ids) do
changeCreature {
tcid = id,
effect = "FXTYPE_GEN_TPRISON",
}
end
end)
quest.setScript( 3209, "OnTaskFulfilled", function(args)
local ids = {9059,9060,9061}
for i,id in ipairs(ids) do
changeCreature {
tcid = id,
effect="FXTYPE_INVALID",
}
end
end)
quest.setScript( 3210, "OnWon", function(args)
local objects = {
{
tcid=9059,
behavoiur="JOB_POOR_STATIST"
},
{
tcid=9060,
behavoiur="JOB_POOR_STATIST"
},
{
tcid=9061,
behavoiur="JOB_KID"
}
}
solveQuest(3441)
for i,object in ipairs(objects) do
creatureGotoPos (object.tcid, {15,10,0,855,494,558,0}, false, 1, false, 1)
creatureTeleportPos(object.tcid,30,{14,9,0,2571,862,1053,0})
creatureGotoPos (object.tcid, {14,8,0,2010.5,1709,1094,0}, false, 2, object.behaviour, 40)
end
end)
quest.setScript( 3441, "OnTaskAwaiting", function(args)
local ids = {9054, 9055}
for i,id in ipairs(ids) do
changeCreature{
tcid = id,
role = "ROLE_VICTIM",
}
end
end)
quest.setScript( 3441, "OnWon", function(args)
local ids = {9054, 9055}
for i,id in ipairs(ids) do
removeFromGroup {
tcid = id,
delay = 0,
}
changeCreature{
tcid = id,
role = "ROLE_INVALID",
}
end
end)
quest.setScript( 3250, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9179,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 3,
}
end)
quest.setScript( 3253, "OnSetup", function(args)
changeCreature {
tcid = 9179,
useUnconscious = true,
livesRemaining = 255,
unconsciousTime = 3,
}
end)
quest.setScript( 3253, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9179,
clearAutoTeleporting = true,
}
end)
quest.setScript( 3262, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9175,
clearAutoTeleporting = true,
role = "ROLE_DIALOG",
}
end)
quest.setScript( 3262, "OnTaskFulfilled", function(args)
creatureGotoPos (9179, { 17,5,-1 ,200.000,1600.000,0.000,0.000}, false, 2, "questCreatures", 0.5)
end)
quest.setScript( 3265, "OnStateChange", function(args)
if args.state == "PREFIGHT" then
local tcids = {9179,9224,9225}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
mortality = "MORTAL",
behaviour = "Enemy_warrior_brave_ex",
faction = "FACTION_ENEMY_HERO",
role = "ROLE_ATTACKER",
}
end
end
end)
quest.setScript( 3265, "OnUnconscious", function(args)
if args.tcid == 9179 then
changeCreature {
tcid = 9179,
clearUnconscious = true,
livesRemaining = 0,
faction = "FACTION_FRIEND_HERO_ALL",
behaviour = "questCreatures",
role = "ROLE_DIALOG",
}
end
end)
quest.setScript( 3265, "OnWon", function(args)
local tcids = {9224,9225}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
mortality = "MORTAL",
role = "ROLE_INVALID",
}
killCreature {
tcid = tcid,
}
end
creatureTeleportPos (9179, 1, { 13,6,0,1250.000,2300.000,0.000,0.000})
end)
quest.setScript( 3272, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9232,
role = "ROLE_VICTIM",
mortality = "IMMORTAL",
}
end)
quest.setScript( 3272, "OnWon", function(args)
creatureGotoPos (9232, {17,14,0,1900,1800,0,0}, false, 1, "questCreatures", 1)
end)
quest.setScript( 3277, "OnWon", function(args)
solveQuest(3273)
local droppers = {9256,9255,9254,9253,9252}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 3278, "OnWon", function(args)
solveQuest(3273)
end)
quest.setScript( 3279, "OnWon", function(args)
local sippe = {
{tcid=9232, behaviour="JOB_POOR_STATIST"},
{tcid=9234, behaviour="JOB_KID"},
{tcid=9235, behaviour="JOB_POOR_STATIST"},
{tcid=9236, behaviour="walkAround"},
{tcid=9237, behaviour="walkAround"},
{tcid=9238, behaviour="JOB_KID"},
{tcid=9239, behaviour="JOB_KID"},
{tcid=9240, behaviour="walkAround"}
}
creatureGotoPos (9247, {17,14,0 , 1950.000,1800.000,0.000 , -20.000}, false, 1, "questCreatures", 1)
for i,mitglied in ipairs(sippe) do
creatureGotoPos (mitglied.tcid, {17,14,0 , 1094.2,1709.5,159.5 , 0}, false, 1, mitglied.behaviour, 0.5*i)
end
end)
quest.setScript( 3273, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 9247,
role = "ROLE_VICTIM",
}
end)
quest.setScript( 3258, "OnWon", function(args)
local droppers = {9206,9207,9208,9209,9215,9216,9217,9219}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 2237, "OnWon", function(args)
local droppers = {6814,6815,6817,6818,6819,6820,6821,6822,6823,6824,6825,6826,6827,6828,6829,6830,6831,6832,6833,6834}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 2242, "OnTaskFulfilled", function(args)
teleportTeam(2242,{sx=50, sy=33, sz=-2, px=900, py=700, pz=-1350, orientation=0})
end)
quest.setScript( 2244, "OnTaskAwaiting", function(args)
return {sx=50, sy=33, sz=-2, px=1317, py=232, pz=-1733, orientation=338}
end)
quest.setScript( 2244, "OnTaskFulfilled", function(args)
return {sx=50, sy=33, sz=-2, px=1317, py=232, pz=-1733, orientation=338}
end)
quest.setScript( 2244, "OnWon", function(args)
teleportTeam(2244,{sx=50, sy=33, sz=0, px=900, py=700, pz=-1380, orientation=0})
return {}
end)
quest.setScript( 2293, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 6948,
mortality = "MORTAL",
}
end)
quest.setScript( 2424, "OnPrecondsFulfilled", function(args)
local wolves = {
{tcid=7187,creature="Human_stat_citizen_m01"},
{tcid=7188,creature="Human_stat_citizen_m01_c2"},
{tcid=7189,creature="Human_stat_citizen_m01_c3"}
}
for i,wolve in ipairs(wolves) do
changeCreature {
tcid=wolve.tcid,
creature = wolve.creature,
faction = "FACTION_FRIEND_HERO_ALL",
behaviour = "questCreatures"
}
end
end)
quest.setScript( 2424, "OnTaskAwaiting", function(args)
local wolves = {7187,7188,7189}
for i,wolve in ipairs(wolves) do
changeCreature{
tcid = wolve,
creature = "Monst_werewolf",
faction = "FACTION_MONSTER",
behaviour = "CM_Begleiter_tapfer"
}
end
end)
quest.setScript( 2460, "OnWon", function(args)
local wolves = {
{tcid=7187,creature="Human_stat_citizen_m01"},
{tcid=7188,creature="Human_stat_citizen_m01_c2"},
{tcid=7189,creature="Human_stat_citizen_m01_c3"}
}
for i,wolve in ipairs(wolves) do
changeCreature {
tcid=wolve.tcid,
creature = wolve.creature,
faction = "FACTION_FRIEND_HERO_ALL",
behaviour = "questCreatures"
}
end
end)
quest.setScript( 2513, "OnStation", function(args)
if args.state == "TASK_AWAITING" then
local pos = {
{sx=54,sy=29,sz=0,px=650,py=1300,pz=0},
{sx=53,sy=29,sz=0,px=3050,py=1150,pz=0},
{sx=53,sy=29,sz=0,px=2200,py=700,pz=0}
}
changeCreature{
tcid = 7387,
gotoPosition = pos[args.currentStation+1],
followUpBhv = "JOB_QUESTSTAGING",
}
changeCreature{
tcid = 7387,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM20",
delay = 3,
}
changeCreature{
tcid = 7387,
behaviour = "CM_Begleiter_feige",
delay = 5,
}
end
end)
quest.setScript( 2513, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 7387,
mortality = "IMMORTAL"
}
end)
quest.setScript( 2513, "OnWon", function(args)
solveQuest(2514)
end)
quest.setScript( 2514, "OnLost", function(args)
looseQuest { id = 2513 }
end)
quest.setScript( 2514, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 7387,
role = "ROLE_VICTIM"
}
end)
quest.setScript( 2515, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 7387,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=55,sy=29,sz=0,px=750,py=1500,pz=0},
followUpBhv = "questCreatures",
}
end)
quest.setScript( 2523, "OnWon", function(args)
changeCreature{
tcid = 7407,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM02",
loopCount = 4,
}
changeCreature{
tcid = 7408,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 4,
delay = 1
}
changeCreature{
tcid = 7409,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM21",
loopCount = 3
}
changeCreature{
tcid = 7410,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 5
}
end)
quest.setScript( 2637, "OnTaskAwaiting", function(args)
local attackers = {7603,7604,7605,7606,7607,7608,7609,7610,7611,7612,7613,7614,7615,7617,7618,7619,7620}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 2637, "OnWon", function(args)
changeCreature {
tcid = 7577,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM04",
loopCount = 2,
}
changeCreature {
tcid = 7577,
behaviour = "questCreatures",
delay = 3,
}
local attackers = {7603,7604,7605,7606,7607,7608,7609,7610,7611,7612,7613,7614,7615,7617,7618,7619,7620}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
end)
quest.setScript( 276, "OnLost", function(args)
local attackers = {1014,1015,1016}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 276, "OnWon", function(args)
local attackers = {1014,1015,1016}
CM_AttackerAway (attackers,1)
creatureGotoPos (1013, {sx=33, sy=16, sz=0, px=650, py=1125, pz=2575, orientation=0})
end)
quest.setScript( 281, "OnWon", function(args)
changeCreature {
tcid = 1013,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=33,sy=16,sz=0 , px=650,py=100,pz=0}
}
CM_CreatureAway (1013,25)
changeCreature {
tcid = 1020,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=33,sy=16,sz=0 , px=650,py=100,pz=0}
}
CM_CreatureAway (1020,25)
end)
quest.setScript( 2787, "OnWon", function(args)
changeCreature {
tcid = 7995,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICA",
loopCount = 2,
}
end)
quest.setScript( 2803, "OnTaskFulfilled", function(args)
changeCreature {
tcid=7997,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM15",
loopCount = 1,
effect = "FXTYPE_GEN_TRANSFORM",
creature = "tenerg_desert_warrior_mutate",
delay=1,
}
end)
quest.setScript( 2808, "OnTaskAwaiting", function(args)
changeCreature{
tcid=8030,
clearAutoTeleporting = true,
}
end)
quest.setScript( 2809, "OnWon", function(args)
creatureGotoPos (8030, "29;13;0;685.000;778.500;3.500;330.000", false, 1, "questCreatures", 2)
CM_CreatureAway (8030, 30)
end)
quest.setScript( 2860, "OnTaskAwaiting", function(args)
local ids = {1776, 1777}
for i,id in ipairs(ids) do
changeCreature{
tcid = id,
role = "ROLE_VICTIM",
}
end
end)
quest.setScript( 2860, "OnWon", function(args)
local ids = {1776, 1777}
for i,id in ipairs(ids) do
changeCreature{
tcid = id,
role = "ROLE_INVALID",
}
end
end)
quest.setScript( 2866, "OnWon", function(args)
local ids = {1776,1777,1778,1774,1775}
for i,id in ipairs(ids) do
CM_CreatureAway(id, 0)
end
end)
quest.setScript( 2867, "OnLost", function(args)
addBookEntry(2860,"QUEST_LOST")
local ids = {1776,1777,1778,1774,1775}
for i,id in ipairs(ids) do
removeFromGroup(id , 0)
changeCreature{
tcid=id,
behaviour = "questCreatures",
faction = "FACTION_INVALID"
}
CM_CreatureAway(id, 30)
end
end)
quest.setScript( 2867, "OnTaskAwaiting", function(args)
local hirelings = {1776,1777,1778}
local guards = {1774,1775}
for i,id in ipairs(hirelings) do
addToGroup(id,0)
changeCreature{
tcid=id,
behaviour = "CM_Begleiter_feige",
faction = "FACTION_DESERTHU_GUARDS",
clearAutoTeleporting = true,
mortality = "MORTAL",
}
end
for i,id in ipairs(guards) do
addToGroup(id,0)
changeCreature{
tcid=id,
behaviour = "CM_Begleiter_tapfer",
faction = "FACTION_DESERTHU_GUARDS",
useUnconscious = true,
livesRemaining = 255,
unconsciousTime = 2,
clearAutoTeleporting = true,
}
end
end)
quest.setScript( 2869, "OnLost", function(args)
addBookEntry(2860,"QUEST_LOST")
local ids = {1776,1777,1778,1774,1775}
for i,id in ipairs(ids) do
removeFromGroup(id , 0)
changeCreature{
tcid=id,
behaviour = "questCreatures",
faction = "FACTION_INVALID"
}
CM_CreatureAway(id, 30)
end
end)
quest.setScript( 2869, "OnTaskAwaiting", function(args)
setTimer {
id = 2869,
count = 5,
interval = 1,
}
local karawane = {
{tcid=1774,pos={sx=37, sy=19, sz=0, px=1793.703125, py=2762.851563, pz=1563.079590, orientation=21.128540}},
{tcid=1775,pos={sx=37, sy=19, sz=0, px=2271.453125, py=2341.449219, pz=1555.889526, orientation=308.367462}},
{tcid=1776,pos={sx=37, sy=19, sz=0, px=1930.390625, py=2727.214844, pz=1555.979492, orientation=26.397491}},
{tcid=1777,pos={sx=37, sy=19, sz=0, px=2140.898438, py=2429.898438, pz=1563.332886, orientation=252.897247}},
{tcid=1778,pos={sx=37, sy=19, sz=0, px=1876.000000, py=2826.949219, pz=1555.417603, orientation=357.409698}}
}
for i,member in ipairs(karawane) do
changeCreature {
tcid = member.tcid,
faction = "FACTION_INVALID",
}
creatureGotoPos (id, member.pos, false, 2, "questCreatures", 0)
end
end)
quest.setScript( 2869, "OnTimer", function(args)
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 2869, "OnWon", function(args)
local hirelings = {1776,1777,1778}
local guards = {1774,1775}
for i,id in ipairs(hirelings) do
changeCreature{
tcid=id,
behaviour = "CM_Begleiter_feige",
faction = "FACTION_DESERTHU_GUARDS"
}
end
for i,id in ipairs(guards) do
changeCreature{
tcid=id,
behaviour = "CM_Begleiter_tapfer",
faction = "FACTION_DESERTHU_GUARDS",
}
end
end)
quest.setScript( 2875, "OnStation", function(args)
addGold(-100)
questMessage {
line = 1,
lokaid = "QUEST_2875_GOLDMESSAGE",
duration = 5.0,
fadeIn = 0.5,
fadeOut = 1.0,
delay = 0,
color = "#00ff00",
}
end)
quest.setScript( 2875, "OnWon", function(args)
changeCreature{
tcid=8177,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM15",
loopCount = 2,
delay = 0,
}
end)
quest.setScript( 2883, "OnTaskAwaiting", function(args)
changeCreature{
tcid=8177,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM15",
loopCount = 5,
delay = 2,
}
end)
quest.setScript( 2883, "OnWon", function(args)
changeCreature{
tcid=1770,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM04",
loopCount = 2,
delay = 0,
}
end)
quest.setScript( 2899, "OnWon", function(args)
local karawane = {
{tcid=1776,pos ={ 40,17,0 , 1550.000,2250.000,0.000 , -70.000 }},
{tcid=1777,pos ={ 40,17,0 , 1500.000,2300.000,0.000 , -39.000 }},
{tcid=1778,pos ={ 40,17,0 , 1500.000,2250.000,0.000 , -70.000 }},
{tcid=1774,pos ={ 40,17,0 , 1350.000,2300.000,0.000 , 50.000 }},
{tcid=1775,pos ={ 40,17,0 , 1400.000,2150.000,0.000 , -200.000 }}
}
solveQuest(2860)
for i,member in ipairs(karawane) do
removeFromGroup(member.tcid , 0)
changeCreature{
tcid=member.tcid,
behaviour = "questCreatures",
faction = "FACTION_INVALID",
role = "ROLE_INVALID",
}
creatureGotoPos (member.tcid, member.pos, false, 1, "questCreatures", i+1)
end
end)
quest.setScript( 2661, "OnTaskAwaiting", function(args)
local tcids = {7662,7663,7664,7666,7653}
for index, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_TRANSFORM",
creature = "Monst_werewolf_fem_elite",
delay = 1,
}
end
local tcidsa = {7654,7656,7658,7657}
for index, tcid in ipairs(tcidsa) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_TRANSFORM",
creature = "Monst_werewolf_elite",
delay = 1,
}
end
end)
quest.setScript( 2661, "OnWon", function(args)
changeCreature {
tcid = 7652,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM22",
loopCount = 1,
}
changeCreature {
tcid = 7652,
behaviour = "questCreatures",
delay = 5,
}
end)
quest.setScript( 2991, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
doEmote(8327,"ANIM_TYPE_SM20",-1)
changeCreature{ tcid = 8327, clearAutoTeleporting=true}
end
if args.state == "TASK_AWAITING" then
doEmote(8327,"ANIM_TYPE_LAYGROUND-UP",1)
doEmote(8327,"ANIM_TYPE_EM15",3,4)
end
end)
quest.setScript( 2991, "OnTalk", function(args)
if args.tcid == 8327 and args.state == "PRECONDS_FULFILLED" then
doEmote(8327,"ANIM_TYPE_SM21",-1)
end
end)
quest.setScript( 2993, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8327,
clearAutoTeleporting = true,
}
end)
quest.setScript( 2995, "OnWon", function(args)
changeCreature {
tcid = 8327,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
changeCreature {
tcid = 8327,
behaviour = "questCreatures",
delay = 4,
}
end)
quest.setScript( 3014, "OnLost", function(args)
local attackers = {9296}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 3014, "OnWon", function(args)
local attackers = {9296}
CM_AttackerAway (attackers,1)
end)
quest.setScript( 3015, "OnLost", function(args)
changeCreature {
tcid = 8438,
mortality = "MORTAL",
role = "ROLE_INVALID",
}
killCreature {
tcid = 8438,
delay = 1,
}
end)
quest.setScript( 3015, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 8438,
mortality = "IMMORTAL"
}
changeCreature{
tcid = 8437,
mortality = "MORTAL",
}
end)
quest.setScript( 3015, "OnTaskFulfilled", function(args)
solveQuest(3014)
end)
quest.setScript( 3019, "OnLost", function(args)
changeCreature {
tcid = 8438,
mortality = "MORTAL",
role = "ROLE_INVALID",
}
killCreature {
tcid = 8438,
delay = 1,
}
end)
quest.setScript( 3019, "OnTaskFulfilled", function(args)
solveQuest(3286)
end)
quest.setScript( 3022, "OnWon", function(args)
solveQuest(3014)
changeCreature {
tcid = 8437,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
changeCreature {
tcid = 8437,
behaviour = "questCreatures",
delay = 4,
}
local dogpos = { 33,16,0 , 1950.000,2100.000,0.000 , 90.000 }
creatureGotoPos (8438, dogpos, dogpos[7], 2, "DOG", 1)
end)
quest.setScript( 3286, "OnLost", function(args)
local attackers = {9297}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 3286, "OnWon", function(args)
local attackers = {9297}
CM_AttackerAway (attackers,1)
end)
quest.setScript( 3028, "OnLost", function(args)
local attackers = {8475,8474,8473,8472,8471,8470,8469,8468}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 3028, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 8477,
clearAutoTeleporting = true
}
end)
quest.setScript( 3028, "OnWon", function(args)
local attackers = {8475,8474,8473,8472,8471,8470,8469,8468}
CM_AttackerAway (attackers,1)
end)
quest.setScript( 341, "OnLost", function(args)
changeCreature {
tcid = 1211,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM28"
}
changeCreature {
tcid = 1211,
behaviour = "questCreatures",
delay = 4,
}
end)
quest.setScript( 341, "OnWon", function(args)
changeCreature {
tcid = 1211,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08"
}
changeCreature {
tcid = 1211,
behaviour = "questCreatures",
delay = 4,
}
creatureGotoPos (8477, {33,16,0,2250,2330,2555,0}, false, 2, "questCreatures", 1)
creatureGotoPos (8478, {33,16,0,2200,2330,2555,0}, false, 2, "questCreatures", 1)
creatureGotoPos (8479, {33,16,0,2300,2330,2555,0}, false, 2, "questCreatures", 1)
end)
quest.setScript( 3054, "OnTaskFulfilled", function(args)
addGold(-100)
questMessage {
line = 1,
lokaid = "QUEST_3054_GOLDMESSAGE",
duration = 5.0,
fadeIn = 0.5,
fadeOut = 1.0,
delay = 0,
color = "#00ff00",
}
end)
quest.setScript( 3054, "OnWon", function(args)
doEmote(8525,"ANIM_TYPE_EM15",1,0)
end)
quest.setScript( 3057, "OnWon", function(args)
changeCreature {
tcid = 8520,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32"
}
changeCreature {
tcid = 8520,
behaviour = "JOB_RICH_STATIST",
delay = 5,
}
end)
quest.setScript( 3087, "OnWon", function(args)
local droppers = {8625,8626,8627,8628,8629 , 8630}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 3089, "OnSetup", function(args)
changeCreature {
tcid = 8635,
useUnconscious = true,
livesRemaining = 255,
unconsciousTime = 3,
}
end)
quest.setScript( 3090, "OnWon", function(args)
local tcids = {8635}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_TELEPORT",
}
end
end)
quest.setScript( 3105, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 7985,
mortality = "IMMORTAL",
}
end)
quest.setScript( 3116, "OnWon", function(args)
destroyCreature {
tcid = 7985,
splatter = true,
delay = 1;
}
end)
quest.setScript( 3119, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 8535,
setAutoTeleporting = true,
}
creatureTeleportPos(8535,0,{46,16,0,1550,1100,0})
end)
quest.setScript( 3119, "OnSetup", function(args)
changeCreature {
tcid = 8535,
useUnconscious = true,
livesRemaining = 255,
unconsciousTime = 3,
}
end)
quest.setScript( 3119, "OnTaskAwaiting", function(args)
local tcids = {8535,8757,8758,8759}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_SPPL_RISE",
}
end
end)
quest.setScript( 3119, "OnWon", function(args)
changeCreature {
tcid = 8535,
clearUnconscious = true,
livesRemaining = 0,
}
end)
quest.setScript( 3120, "OnSetup", function(args)
local tcids = {8535,8757,8758,8759}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_SPPL_RISE",
}
end
end)
quest.setScript( 3120, "OnTaskAwaiting", function(args)
destroyCreature {
tcid = 8535,
splatter = true,
delay = 1;
}
destroyCreature {
tcid = 8757,
splatter = true,
delay = 1;
}
destroyCreature {
tcid = 8758,
splatter = true,
delay = 1;
}
destroyCreature {
tcid = 8759,
splatter = true,
delay = 1;
}
end)
quest.setScript( 3190, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8964,
mortality = "IMMORTAL",
clearAutoTeleporting = true,
}
end)
quest.setScript( 3190, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 8964,
role = "ROLE_DIALOG",
}
end)
quest.setScript( 3202, "OnTaskNotFulfilled", function(args)
changeCreature {
tcid = 8964,
clearAutoTeleporting = true,
role = "ROLE_DIALOG",
}
end)
quest.setScript( 3207, "OnStateChange", function(args)
local tcids = {9027,9028}
if args.state == "PREFIGHT" then
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "Enemy_warrior_brave_ex",
faction = "FACTION_ENEMY_HERO",
mortality = "MORTAL",
role = "ROLE_ATTACKER",
}
end
end
end)
quest.setScript( 3242, "OnLost", function(args)
local attackers = {9164,9165,9166,9167,9168,9169,9170,9171,9172}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 3242, "OnTaskAwaiting", function(args)
changeCreature{
tcid=9162,
clearAutoTeleporting = true,
}
end)
quest.setScript( 3242, "OnWon", function(args)
local attackers = {9164,9165,9166,9167,9168,9169,9170,9171,9172}
CM_AttackerAway (attackers,1)
end)
quest.setScript( 3244, "OnWon", function(args)
changeCreature {
tcid = 9162,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
changeCreature {
tcid = 9162,
behaviour = "questCreatures",
delay = 4,
}
CM_CreatureAway (9162,60)
end)
quest.setScript( 2723, "OnWon", function(args)
changeCreature {
tcid = 1046,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 2,
}
changeCreature {
tcid = 1046,
behaviour = "questCreatures",
delay = 5,
}
creatureGotoPos (1046, "29;13;0;1260.344;2279.69;363.253", false, 2, "JOB_KID", 6)
end)
quest.setScript( 283, "OnLost", function(args)
local attackers = {1087,1088,1089}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 283, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 1046,
clearAutoTeleporting = true,
}
end)
quest.setScript( 283, "OnWon", function(args)
local attackers = {1087,1088,1089}
CM_AttackerAway (attackers,1)
end)
quest.setScript( 2668, "OnTaskAwaiting", function(args)
local crids= {7684,7695,7696}
for i,crid in ipairs(crids) do
changeCreature{
tcid=crid,
mortality = "IMMORTAL"
}
end
end)
quest.setScript( 3287, "OnPrecondsFulfilled", function(args)
creatureGotoPos (7695, "37;24;0;3095.500;1431.500;130.000;340.000", false, 2, "JOB_RICH_STATIST", false)
creatureGotoPos (7696, "37;24;0;2996.500;1308.500;130.000;160.000", false, 2, "JOB_KID", false)
end)
quest.setScript( 3287, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 7684,
clearAutoTeleporting = false,
}
end)
quest.setScript( 3287, "OnWon", function(args)
changeCreature {
tcid = 7684,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
creatureGotoPos (7684, "37;24;0;2811.000;1366.000;130.000;290.000", false, 2, "questCreatures", 4)
end)
quest.setScript( 2079, "OnWon", function(args)
changeCreature {
tcid = 1339,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = 1,
}
changeCreature {
tcid = 1339,
behaviour = "JOB_RICH_STATIST",
delay = 5,
}
end)
quest.setScript( 217, "OnWon", function(args)
changeCreature {
tcid = 143,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
}
changeCreature {
tcid = 143,
behaviour = "JOB_RICH_STATIST",
delay = 3,
}
end)
quest.setScript( 1044, "OnWon", function(args)
changeCreature {
tcid = 2844,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
}
changeCreature {
tcid = 2845,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
delay = 0.7,
}
changeCreature {
tcid = 2844,
behaviour = "JOB_KID",
delay = 4,
}
changeCreature {
tcid = 2845,
behaviour = "JOB_KID",
delay = 4.75,
}
end)
quest.setScript( 976, "OnStation", function(args)
if args.currentStation == 0 then
changeCreature {
tcid = 2847,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM11",
loopCount = 1,
}
end
if args.currentStation == 1 then
changeCreature {
tcid = 2848,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM12",
loopCount = 1,
}
end
if args.currentStation == 2 then
changeCreature {
tcid = 2849,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM01",
loopCount = 1,
}
end
end)
quest.setScript( 976, "OnWon", function(args)
changeCreature {
tcid = 2847,
behaviour = "JOB_KID",
delay = 4,
}
changeCreature {
tcid = 2848,
behaviour = "JOB_KID",
delay = 4,
}
changeCreature {
tcid = 2849,
behaviour = "JOB_KID",
delay = 4,
}
end)
quest.setScript( 2217, "OnTaskFulfilled", function(args)
destroyCreature {
tcid = 6774,
splatter = false,
}
end)
quest.setScript( 2217, "OnWon", function(args)
changeCreature {
tcid = 6781,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = 2,
}
creatureTeleportPos(6781,60,{38,31,0,2505.297,627.547,120.000})
changeCreature {
tcid = 6781,
behaviour = "JOB_KID",
delay = 90,
}
end)
quest.setScript( 1643, "OnTaskAwaiting", function(args)
local rats = {
4343,4344,4346,4347,4348,
4349,4350,4351,4352,4353,
4354,4355,4356,4357,4358,
4361,4362,4364,4365,4366
}
local guards = {4371,4372,4373,4374,4375}
for index, rat in ipairs(rats) do
changeCreature {
tcid = rat,
livesRemaining = 0,
useUnconscious = true,
unconsciousTime = 10,
role = "ROLE_ATTACKER",
faction = "FACTION_QUEST_ENEMY"
}
end
for index, guard in ipairs(guards) do
changeCreature {
tcid = guard,
livesRemaining = 0,
useUnconscious = true,
unconsciousTime = 5,
role = "ROLE_VICTIM",
faction = "FACTION_QUEST_VICTIM"
}
end
end)
quest.setScript( 1643, "OnWon", function(args)
local guards = {
{tcid=4371,pos={ sx=43,sy=38,sz=0, px=655.797,py=1490.102,pz=1844.981 },orientation=30},
{tcid=4372,pos={ sx=43,sy=38,sz=0, px=494.844,py=1392.547,pz=1844.981 },orientation=30},
{tcid=4373,pos={ sx=43,sy=38,sz=0, px=619.344,py=1287.148,pz=1844.981 },orientation=210},
{tcid=4374,pos={ sx=43,sy=38,sz=0, px=753.297,py=1353.547,pz=1844.981 },orientation=210},
{tcid=4375,pos={ sx=43,sy=38,sz=0, px=267.844,py=1146.547,pz=1844.981 },orientation=120}
}
for index,guard in ipairs(guards) do
changeCreature {
tcid = guard.tcid,
role = "ROLE_INVALID",
faction = "FACTION_INVALID",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = guard.pos,
followUpBhv = "JOB_MERCENARY",
orientation = guard.orientation,
speed = 2,
}
end
end)
quest.setScript( 54, "OnSetup", function(args)
changeCreature {
tcid = 164,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
}
end)
quest.setScript( 54, "OnWon", function(args)
changeCreature {
tcid = 144,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
changeCreature {
tcid = 144,
behaviour = "JOB_TRADER",
delay = 4,
}
end)
quest.setScript( 59, "OnStateChange", function(args)
if args.state == "TASK_AWAITING" then
changeCreature {
tcid = 4032,
mortality = "MORTAL",
}
changeCreature {
tcid = 4033,
mortality = "MORTAL",
}
changeCreature {
tcid = 4034,
mortality = "MORTAL",
}
end
end)
quest.setScript( 59, "OnWon", function(args)
local droppers = {4768}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 60, "OnWon", function(args)
changeCreature {
tcid = 165,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
}
changeCreature {
tcid = 165,
behaviour = "JOB_RICH_STATIST",
delay = 3,
}
end)
quest.setScript( 234, "OnWon", function(args)
local spawnkobolde = { 9771,9772,9773,9774 }
changeCreature {
tcid = 782,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM27",
loopCount = 1,
}
changeCreature {
tcid = 782,
behaviour = "JOB_MERCENARY",
delay = 4,
}
for i,tc in ipairs(spawnkobolde) do
destroyCreature {
tcid = tc,
splatter = true,
delay = i,
}
end
end)
quest.setScript( 312, "OnWon", function(args)
changeCreature {
tcid = 1157,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
changeCreature {
tcid = 1157,
behaviour = "questCreatures",
delay = 4
}
local droppers = {1168,1170,1173,1176,1177,1989,1990,1992,1993,9333}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 363, "OnWon", function(args)
changeCreature {
tcid = 1362,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = 1,
}
changeCreature {
tcid = 1362,
behaviour = "questCreatures",
delay = 4
}
end)
quest.setScript( 389, "OnWon", function(args)
changeCreature {
tcid = 1435,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
changeCreature {
tcid = 1435,
behaviour = "questCreatures",
delay = 4,
}
end)
quest.setScript( 413, "OnLost", function(args)
local attackers = {1489,1488,1491,1492,1493,1494,1495,1496,1497,1498}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 413, "OnWon", function(args)
local attackers = {1489,1488,1491,1492,1493,1494,1495,1496,1497,1498}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 448, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 1610,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
dont_turn = true,
}
end)
quest.setScript( 448, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 1610 then
changeCreature {
tcid = 1610,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
if args.state == "TASK_FULFILLED" and args.tcid == 1610 then
changeCreature {
tcid = 1610,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 448, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 1610,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end)
quest.setScript( 448, "OnWon", function(args)
changeCreature {
tcid = 1610,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
changeCreature {
tcid = 1615,
behaviour = "JOB_QUESTSTAGING",
}
changeCreature {
tcid = 1615,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=0,sy=0,sz=-1,px=0,py=0,pz=0},
delay = 3,
}
teleport {
tcid = 1615,
position = {sx=34, sy=8, sz=0, px=831.187500, py=15.177734, pz=-149.631226, orientation=263.502197},
orientation = 263.502197,
delay = 3.1,
}
changeCreature {
tcid = 1615,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_KNEE-IDLE",
loopCount = -1,
delay = 3.4,
}
changeCreature {
tcid = 1615,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_KNEE-UP",
loopCount = 1,
delay = 6.4,
}
changeCreature {
tcid = 1615,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLE",
loopCount = 1,
delay = 8,
}
changeCreature {
tcid = 1610,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_LAYDOWN-UP",
delay = 8,
}
changeCreature {
tcid = 1610,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLE",
delay = 10,
}
changeCreature {
tcid = 1610,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=33, sy=7, sz=0, px=159.046875, py=1438.650391, pz=173.538040, orientation=259.882172},
delay = 11,
followUpBhv = "questCreatures",
}
changeCreature {
tcid = 1615,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=33, sy=7, sz=0, px=158.250000, py=1372.300781, pz=174.749908, orientation=268.793488},
delay = 11,
followUpBhv = "questCreatures",
}
local pos1 = {sx=31, sy=7, sz=0, px=1677.429688, py=2035.744141, pz=46.073093, orientation=319.398712}
local pos2 = {sx=31, sy=7, sz=0, px=1629.351563, py=1959.400391, pz=46.548973, orientation=142.717834}
creatureTeleportPos(1610,40,pos1)
creatureTeleportPos(1615,40,pos2)
changeCreature {
tcid = 1610,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 45,
}
changeCreature {
tcid = 1615,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
delay = 45,
}
end)
quest.setScript( 514, "OnWon", function(args)
changeCreature {
tcid = 1810,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
}
changeCreature {
tcid = 1810,
behaviour = "JOB_KID",
delay = 3,
}
changeCreature {
tcid = 1811,
behaviour = "JOB_TRADER",
delay = 4,
}
end)
quest.setScript( 613, "OnWon", function(args)
changeCreature {
tcid = 1925,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM27",
loopCount = 1,
}
changeCreature {
tcid = 1925,
behaviour = "JOB_RICH_STATIST",
delay = 3,
}
end)
quest.setScript( 879, "OnDeath", function(args)
local guards = {6990,6991,6992,6993}
if args.tcid == 213 or args.tcid == 299 or args.tcid == 300
or args.tcid == 301 or args.tcid == 302 then
for index,tcid in ipairs(guards) do
changeCreature {
tcid = tcid,
behaviour = "Enemy_warrior_brave",
faction = "FACTION_HIGHELVE_GUARD",
}
end
end
end)
quest.setScript( 879, "OnLost", function(args)
local attackers = {213,299,300,301,302}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 879, "OnTaskAwaiting", function(args)
local tcids = {2569,2570,2571,2572,2573}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_TPRISON",
}
end
end)
quest.setScript( 879, "OnTaskFulfilled", function(args)
local hostages = {2569,2570,2571,2572,2573}
for index,tcid in ipairs(hostages) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_INVALID",
}
end
end)
quest.setScript( 879, "OnWon", function(args)
local attackers = {213,299,300,301,302}
local hostages = {
{tcid=2569,pos={26,23,0 , 1520.000,1720.000,82.000 , 170.000}},
{tcid=2570,pos={26,23,0 , 1560.000,1710.000,82.000 , 173.000}},
{tcid=2571,pos={26,23,0 , 1540.000,1760.000,82.000 , 173.000}},
{tcid=2572,pos={26,23,0 , 1600.000,1700.000,82.000 , 176.000}},
{tcid=2573,pos={26,23,0 , 1580.000,1750.000,82.000 , 173.000}}
}
CM_AttackerAway (attackers,10)
for index,hostage in ipairs(hostages) do
creatureGotoPos (hostage.tcid, hostage.pos, false, 1, "questCreatures", index)
end
end)
quest.setScript( 963, "OnWon", function(args)
changeCreature {
tcid = 2752,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM16",
loopCount = 2,
}
changeCreature {
tcid = 2752,
behaviour = "questCreatures",
delay = 6
}
local droppers = {2771,2772,2774,2773,2775}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 1051, "OnSetup", function(args)
Quest_1051_TA = true
end)
quest.setScript( 1051, "OnTaskFulfilled", function(args)
Quest_1051_TA = false
end)
quest.setScript( 1051, "OnWon", function(args)
Quest_1051_TA = nil
end)
quest.setScript( 1646, "OnWon", function(args)
changeCreature {
tcid = 4379,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
changeCreature {
tcid = 4379,
behaviour = "questCreatures",
delay = 2
}
end)
quest.setScript( 1838, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 5077,
behaviour = "JOB_RICH_STATIST",
}
end)
quest.setScript( 1838, "OnWon", function(args)
changeCreature {
tcid = 5078,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
changeCreature {
tcid = 5078,
behaviour = "questCreatures",
delay = 4,
}
end)
quest.setScript( 1847, "OnWon", function(args)
changeCreature {
tcid = 5110,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM09",
loopCount = 1,
}
local droppers = {5112,5115,5117,5116}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 1930, "OnStation", function(args)
if args.currentStation == 1 then
setWoobState {
woid = 1018476655,
state = "WOOB_CHEST_CLOSE",
}
end
end)
quest.setScript( 1930, "OnTaskAwaiting", function(args)
setWoobState {
woid = 1018476655,
state = "WOOB_CHEST_LOCKED",
}
end)
quest.setScript( 2028, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 5879 then
changeCreature {
tcid = 5879,
behaviour = "questCreatures",
}
end
if args.state == "TASK_FULFILLED" and args.tcid == 5879 then
changeCreature {
tcid = 5879,
behaviour = "questCreatures",
}
end
end)
quest.setScript( 2028, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 5879,
behaviour = "JOB_HUNTER",
}
end)
quest.setScript( 2028, "OnWon", function(args)
changeCreature {
tcid = 5879,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
changeCreature {
tcid = 5879,
behaviour = "JOB_HUNTER",
delay = 4,
}
end)
quest.setScript( 2032, "OnWon", function(args)
changeCreature {
tcid = 5891,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM01",
loopCount = 1,
}
changeCreature {
tcid = 5891,
behaviour = "walkAround",
delay = 3,
}
end)
quest.setScript( 2047, "OnWon", function(args)
changeCreature {
tcid = 5967,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
}
teleport {
tcid = 5967,
position = {sx=21, sy=25, sz=0, px=1542.900024, py=2699.199951, pz=167.824005, orientation=217.000000},
orientation = 217,
delay = 3,
}
end)
quest.setScript( 2055, "OnStation", function(args)
tcids = {6046,6048,6049,6206}
if args.currentStation == 0 and args.woid == 1018922029 then
setWoobEffect {
effect = "FXTYPE_QFX_GRUENERDUNST",
woid = 1018922029,
}
for index, tcid in ipairs(tcids) do
changeCreature{
tcid=tcid,
role= "INVALID",
mortality="MORTAL",
}
destroyCreature{
tcid=tcid,
splatter=true,
delay=3,
}
changeCreature{
tcid=6044,
behaviour= "QUESTJOB_KILL_RICH",
}
end
end
if args.currentStation == 1 then
changeCreature{
tcid=6044,
role= "INVALID",
mortality="MORTAL",
}
destroyCreature{
tcid=6044,
splatter=true,
}
end
end)
quest.setScript( 2055, "OnTaskAwaiting", function(args)
setWoobState {
woid = 1018922029,
state = "WOOB_THINGY_OFF",
}
teleportTeam(2055,{sx=40, sy=42, sz=0, px=2631.070313, py=2999.625000, pz=-1.952244, orientation=306.939514})
end)
quest.setScript( 2055, "OnTaskFulfilled", function(args)
teleportTeam(2055,{sx=32, sy=56, sz=0, px=562.000000, py=2446.046875, pz=1613.688110, orientation=231.903549})
end)
quest.setScript( 2064, "OnWon", function(args)
changeCreature {
tcid = 6059,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM27",
loopCount = 1,
}
changeCreature {
tcid = 6059,
behaviour = "JOB_MERCENARY",
faction = "FACTION_HIGHELVE_GUARD",
delay = 3,
}
end)
quest.setScript( 2066, "OnTaskAwaiting", function(args)
teleportTeam(2066,{sx=19, sy=29, sz=0, px=2250.000000, py=1750.000000, pz=0.000000, orientation=0.000000})
end)
quest.setScript( 2066, "OnTaskFulfilled", function(args)
teleportTeam(2066,{sx=34, sy=57, sz=0, px=3100.000000, py=3050.000000, pz=0.000000, orientation=0.000000})
end)
quest.setScript( 2352, "OnWon", function(args)
local droppers = {7509}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 2357, "OnWon", function(args)
changeCreature {
tcid = 5078,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = 2,
}
changeCreature {
tcid = 5078,
behaviour = "questCreatures",
delay = 8,
}
end)
quest.setScript( 2506, "OnWon", function(args)
changeCreature {
tcid = 7351,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
changeCreature {
tcid = 7351,
behaviour = "questCreatures",
delay = 2
}
end)
quest.setScript( 2511, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
changeCreature {
tcid = 7365,
effect = "FXTYPE_QFX_FLIEGENSCHWARM",
}
end
end)
quest.setScript( 2511, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 7365,
effect = "FXTYPE_INVALID",
}
end)
quest.setScript( 2511, "OnWon", function(args)
changeCreature {
tcid = 7365,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM33",
loopCount = 1,
}
changeCreature {
tcid = 7365,
behaviour = "questCreatures",
delay = 5
}
end)
quest.setScript( 2638, "OnWon", function(args)
changeCreature {
tcid = 7602,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM33",
loopCount = 1,
}
changeCreature {
tcid = 7602,
behaviour = "questCreatures",
delay = 4
}
end)
quest.setScript( 2655, "OnWon", function(args)
changeCreature {
tcid = 7639,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM33",
loopCount = 1,
}
changeCreature {
tcid = 7639,
behaviour = "questCreatures",
delay = 5,
}
end)
quest.setScript( 2656, "OnWon", function(args)
changeCreature {
tcid = 7640,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
changeCreature {
tcid = 7640,
behaviour = "questCreatures",
delay = 4
}
end)
quest.setScript( 2663, "OnWon", function(args)
changeCreature {
tcid = 7667,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM24",
loopCount = 1,
}
changeCreature {
tcid = 7667,
behaviour = "questCreatures",
delay = 8
}
end)
quest.setScript( 2710, "OnLost", function(args)
changeCreature {
tcid = 7804,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM31"
}
changeCreature {
tcid = 7804,
behaviour = "questCreatures",
delay = 6,
}
end)
quest.setScript( 2710, "OnWon", function(args)
local ids = {7807,7806,7802,7798,7799,7800}
for i,id in ipairs(ids) do
changeCreature{
tcid = id,
faction = "FACTION_INVALID",
}
creatureGotoPos (id,{sx=46, sy=17, sz=0, px=2603.843750, py=1947.898438, pz=2284.980469})
end
changeCreature {
tcid = 7804,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32"
}
changeCreature {
tcid = 7804,
behaviour = "questCreatures",
delay = 5,
}
end)
quest.setScript( 2712, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
changeCreature{
tcid = 7815,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = -1,
}
end
if args.state == "WON" then
changeCreature{
tcid = 7815,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 5,
}
end
end)
quest.setScript( 2712, "OnWon", function(args)
changeCreature {
tcid = 7815,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM07",
loopCount = 2,
}
changeCreature {
tcid = 7815,
behaviour = "JOB_POOR_STATIST",
delay = 5,
}
end)
quest.setScript( 2713, "OnWon", function(args)
changeCreature {
tcid = 7817,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
changeCreature {
tcid = 7817,
behaviour = "questCreatures",
delay = 4,
}
end)
quest.setScript( 2715, "OnWon", function(args)
changeCreature {
tcid = 7820,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM01",
loopCount = 1,
}
changeCreature {
tcid = 7820,
behaviour = "questCreatures",
delay = 2,
}
end)
quest.setScript( 2717, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
changeCreature{
tcid = 7827,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = -1,
}
end
if args.state == "WON" then
changeCreature{
tcid = 7827,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM09",
loopCount = 2,
}
end
end)
quest.setScript( 2717, "OnStation", function(args)
questMessage {
lokaid= "QUEST_2717_GIVER_UNRESOLVED",
color = "#FF9999",
line = 0,
delay = 0,
duration = 1.2,
fadeIn= 0.2,
fadeOut= 0.3,
}
if args.currentStation == 0 then
questMessage {
lokaid= "QUEST_2717_COUNT_01",
color = "#AA9999",
line = 1,
delay = 0,
duration = 1,
fadeIn= 0.2,
fadeOut= 0.3,
}
end
if args.currentStation == 1 then
questMessage {
lokaid= "QUEST_2717_COUNT_02",
color = "#AA9999",
line = 1,
delay = 0,
duration = 1,
fadeIn= 0.2,
fadeOut= 0.3,
}
end
if args.currentStation == 2 then
questMessage {
lokaid= "QUEST_2717_COUNT_03",
color = "#AA9999",
line = 1,
delay = 0,
duration = 1,
fadeIn= 0.2,
fadeOut= 0.3,
}
end
end)
quest.setScript( 2717, "OnWon", function(args)
changeCreature {
tcid = 7827,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM17",
loopCount = 1,
}
changeCreature {
tcid = 7827,
behaviour = "questCreatures",
delay = 4,
}
end)
quest.setScript( 2738, "OnWon", function(args)
changeCreature {
tcid = 7894,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM04",
loopCount = 1,
}
changeCreature {
tcid = 7894,
behaviour = "questCreatures",
delay = 2
}
end)
quest.setScript( 2826, "OnWon", function(args)
changeCreature {
tcid = 8073,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
changeCreature {
tcid = 8073,
behaviour = "JOB_POOR_STATIST",
delay = 4,
}
end)
quest.setScript( 2989, "OnWon", function(args)
changeCreature {
tcid = 8322,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM04",
loopCount = 1,
}
changeCreature {
tcid = 8322,
behaviour = "questCreatures",
delay = 2
}
end)
quest.setScript( 3002, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 8359,
mortality = "IMMORTAL",
clearAutoTeleporting = true,
}
end)
quest.setScript( 3002, "OnWon", function(args)
creatureTeleportsAway(8359,2)
end)
quest.setScript( 3048, "OnWon", function(args)
local droppers = {8522,8523,8524,8519,8521}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 3206, "OnStation", function(args)
if args.currentStation == 0 then
changeCreature {
tcid = 9018,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLEA",
effect = "FXTYPE_GEN_TPRISON",
loopCount = 1,
}
end
if args.currentStation == 1 then
changeCreature {
tcid = 9018,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLEB",
effect = "FXTYPE_INVALID",
loopCount = 1,
}
end
if args.currentStation == 2 then
changeCreature {
tcid = 9018,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM01",
effect = "FXTYPE_GEN_TRANSFORM",
loopCount = 1,
}
end
if args.currentStation == 3 then
changeCreature {
tcid = 9018,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM02",
effect = "FXTYPE_SMOKEBIGWHITE",
loopCount = 1,
}
end
if args.currentStation == 4 then
changeCreature {
tcid = 9018,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM03",
effect = "FXTYPE_GEN_SPAWN1_I",
loopCount = 1,
}
end
if args.currentStation == 5 then
changeCreature {
tcid = 9018,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM19",
effect = "FXTYPE_HOLOGRAM",
loopCount = 1,
}
end
if args.currentStation == 6 then
changeCreature {
tcid = 9018,
behaviour = "JOB_QUESTSTAGING",
effect = "FXTYPE_INVALID",
loopCount = 1,
}
end
if args.currentStation == 7 then
creatureTeleportPos(9018,0,{41,32,0,942.296,1492.601,279.832,71.3})
end
end)
quest.setScript( 3206, "OnTalk", function(args)
if args.tcid==9018 and args.state=="WON" then
local lokaids = { "QUEST_3206_IDLE_01","QUEST_3206_IDLE_02","QUEST_3206_IDLE_03","QUEST_3206_IDLE_04" }
local index = math.random(1,getn(lokaids))
return lokaids[index]
end
end)
quest.setScript( 3208, "OnWon", function(args)
doEmote(9030, "ANIM_TYPE_EM10",1)
end)
quest.setScript( 3212, "OnWon", function(args)
local droppers = {9076,9077,9078,9079,9080,9081,9082}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 3280, "OnWon", function(args)
changeCreature {
tcid = 9276,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM04",
loopCount = 1,
}
changeCreature {
tcid = 9276,
behaviour = "questCreatures",
delay = 2
}
end)
quest.setScript( 3282, "OnWon", function(args)
changeCreature {
tcid = 9270,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
changeCreature {
tcid = 9270,
behaviour = "questCreatures",
delay = 4
}
end)
quest.setScript( 3283, "OnWon", function(args)
creatureGotoPos (9272, { 24,39,0 , 2410.000,1890.000,3050.000, 40.000 }, 40.000, 1, "questCreatures", 1)
end)
quest.setScript( 995, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2863,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
}
end)
quest.setScript( 995, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 2863,
behaviour = "JOB_QUESTSTAGING",
}
creatureTeleportsAway(2863, 0)
end)
quest.setScript( 995, "OnUnconscious", function(args)
if args.tcid == 2863 then
changeCreature {
tcid = 2863,
clearUnconscious = true,
clearAutoTeleporting = true,
mortality = "IMMORTAL",
role = "ROLE_DIALOG",
}
end
end)
quest.setScript( 1002, "OnTaskFulfilled", function(args)
local eremites = {
{tcid=2865,pos={ sx=26,sy=16,sz=0,px=2398.56,py=912.479,pz=42.423 },orientation=288},
{tcid=2867,pos={ sx=26,sy=16,sz=0,px=2463.949,py=1113.725,pz=42.423 },orientation=216},
{tcid=2874,pos={ sx=26,sy=16,sz=0,px=2675.551,py=1113.725,pz=42.423 },orientation=144},
{tcid=2875,pos={ sx=26,sy=16,sz=0,px=2740.94,py=912.479,pz=42.423 },orientation=72},
{tcid=2876,pos={ sx=26,sy=16,sz=0,px=2569.75,py=788.102,pz=42.423 },orientation=0}
}
for i,eremit in ipairs(eremites) do
changeCreature {
tcid = eremit.tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_RAISE-HANDS",
loopCount = 1,
effect = "FXTYPE_GEN_TELEPORT",
}
teleport {
tcid = eremit.tcid,
position = eremit.pos,
orientation = eremit.orientation,
delay = 2
}
changeCreature {
tcid = eremit.tcid,
effect = "FXTYPE_INVALID",
behaviour = "questCreatures",
delay = 3
}
end
end)
quest.setScript( 1003, "OnTaskAwaiting", function(args)
local daemon = 2863
local brotherhood = {
{tcid=2865,identity="Helf_Inq_highpriest",orientation=108},
{tcid=2867,identity="Helf_Inq_highpriest",orientation=36},
{tcid=2874,identity="Helf_Inq_highpriest",orientation=324},
{tcid=2875,identity="Helf_Inq_highpriest",orientation=252},
{tcid=2876,identity="Helf_Inq_highpriest_elite",orientation=180}
}
local centerpos = { sx=26,sy=16,sz=0,px=2569.75,py=968.102,pz=42.423 }
changeCreature {
tcid = daemon,
mortality = "IMMORTAL",
role = "ROLE_DIALOG",
behaviour = "JOB_QUESTSTAGING",
visible = false,
}
teleport {
tcid = daemon,
position = centerpos,
orientation = 0.000,
delay = 1,
}
for j,member in ipairs(brotherhood) do
createEffect {
position = getPos { tcid = member.tcid},
effect = "FXTYPE_GEN_SPAWN1",
delay = j + 1,
}
changeCreature {
tcid = member.tcid,
creature = member.identity,
behaviour = "JOB_QUESTSTAGING",
followUpBhv = "JOB_QUESTSTAGING",
mortality = "IMMORTAL",
delay = j + 2,
}
teleport {
tcid = member.tcid,
delay = j + 2,
position = getPos { tcid = member.tcid},
orientation = member.orientation,
}
changeCreature {
tcid = member.tcid,
emotion = "ANIM_TYPE_EM20",
delay = 10,
}
end
setTimer{
id = 1003,
interval = 10,
count = 12
}
end)
quest.setScript( 1003, "OnTaskFulfilled", function(args)
local daemon = 2863
local brotherhood = {2865,2867,2874,2875,2876}
local eremites = {2865,2867,2874,2875}
for i,creature in ipairs(brotherhood) do
changeCreature {
tcid = brotherhood[i],
effect = "FXTYPE_INVALID",
}
end
for i,creature in ipairs(eremites) do
changeCreature {
tcid = creature,
emotion = "ANIM_TYPE_EM20",
behaviour = "JOB_QUESTSTAGING",
loopCount = 1,
followUpBhv = "questCreatures",
}
end
end)
quest.setScript( 1003, "OnTimer", function(args)
local daemon = 2863
local daemoncreature = {"Demon_guard_armor_elite","energy_sakkara_cr1","godspell_sakkara" }
local brotherhood = {2865,2867,2874,2875,2876}
local startpositions = { 2,4,6,8,10 }
local centerpos = { sx=26,sy=16,sz=0,px=2569.75,py=968.102,pz=42.423 }
local positions = { { sx=26,sy=16,sz=0,px=2463.949,py=822.479,pz=42.423 },
{ sx=26,sy=16,sz=0,px=2398.56,py=912.479,pz=42.423 },
{ sx=26,sy=16,sz=0,px=2398.56,py=1023.725,pz=42.423 },
{ sx=26,sy=16,sz=0,px=2463.949,py=1113.725,pz=42.423 },
{ sx=26,sy=16,sz=0,px=2569.75,py=1148.102,pz=42.423 },
{ sx=26,sy=16,sz=0,px=2675.551,py=1113.725,pz=42.423 },
{ sx=26,sy=16,sz=0,px=2740.94,py=1023.725,pz=42.423 },
{ sx=26,sy=16,sz=0,px=2740.94,py=912.479,pz=42.423 },
{ sx=26,sy=16,sz=0,px=2675.551,py=822.479,pz=42.423 },
{ sx=26,sy=16,sz=0,px=2569.75,py=788.102,pz=42.423 } }
local orientations ={ 144,108,72,36,0,324,288,252,216,180 }
local fipa, fipb, fipc, fipd
local targeta, targetb
local i
local eventtimes = { 0 , 1 , 3 , 6 , 6.5}
local emotion_init = "ANIM_TYPE_EM24"
local effect_fog = {"FXTYPE_BLUEFIRE_LARGE","FXTYPE_SMOKESMALLWHITE","FXTYPE_SMOKEMEDIUMGREY","FXTYPE_SMOKEBIGBLACK"}
local effect_teleport = "FXTYPE_SPPL_RISE"
local emotion_penta = "ANIM_TYPE_MAGICB"
local effect_penta = "FXTYPE_HE_ENERGIEBLITZ"
local emotion_attack = "ANIM_TYPE_MAGICB"
local effect_attack = "FXTYPE_HE_ENERGIEBLITZ"
local effect_transform = "FXTYPE_GEN_TRANSFORM"
local effect_hit = "FXTYPE_GEN_TPRISON"
local effect_ground = "FXTYPE_GEN_FRAG_DUST"
local time_to_disappear = 5
if args.count == 12 then
createEffect {
delay = eventtimes[2],
position = centerpos,
effect = effect_fog[1],
duration = (args.count - 1) * 10 + time_to_disappear - eventtimes[2],
}
for j,member in ipairs(brotherhood) do
doEmote (member,emotion_init,1,eventtimes[3])
targeta = j + 2
if targeta > 5 then
targetb = targeta - 5
else
targetb = targeta
end
fipc = startpositions[targetb]
if fipc > 10 then
fipd = fipc - 10
else
fipd = fipc
end
changeCreature {
tcid = member,
delay = eventtimes[4],
behaviour = "JOB_QUESTSTAGING",
emotion = emotion_penta,
effect = effect_penta,
effectParam = {
paramtype = "position",
position = positions[fipd],
duration = 1,
},
loopCount = 1,
}
end
end
if args.count < 12 and args.count > 1 then
i = 12 - args.count
for k,portpos in ipairs(positions) do
createEffect {
position = portpos,
effect = effect_teleport,
delay = eventtimes[1],
}
end
for j,member in ipairs(brotherhood) do
fipa = i + startpositions[j]
if fipa > 10 then
fipb = fipa - 10
else
fipb = fipa
end
teleport {
tcid = member,
delay = eventtimes[2],
position = positions[fipb],
orientation = orientations[fipb],
}
if args.count == 10 or args.count == 8 or args.count == 6 or args.count == 4 or args.count == 2 then
targeta = j + 2
if targeta > 5 then
targetb = targeta - 5
else
targetb = targeta
end
fipc = i + startpositions[targetb]
if fipc > 10 then
fipd = fipc - 10
else
fipd = fipc
end
changeCreature {
tcid = member,
delay = eventtimes[3],
behaviour = "JOB_QUESTSTAGING",
emotion = emotion_penta,
effect = effect_penta,
effectParam = {
paramtype = "position",
position = positions[fipd],
duration = 1,
},
loopCount = 1,
}
end
if args.count == 11 or args.count == 9 or args.count == 7 or args.count == 5 or args.count == 3 then
changeCreature {
tcid = member,
delay = eventtimes[3],
behaviour = "JOB_QUESTSTAGING",
emotion = emotion_attack,
effect = effect_attack,
effectParam = {
paramtype = "position",
position = centerpos,
duration = 1,
},
loopCount = 1,
}
end
end
if args.count == 10 or args.count == 8 or args.count == 6 or args.count == 4 or args.count == 2 then
changeCreature {
tcid = daemon,
delay = eventtimes[4],
effect = effect_hit,
loopCount = 1,
visible = true,
}
end
if args.count == 11 or args.count == 9 or args.count == 7 or args.count == 5 or args.count == 3 then
createEffect {
delay = eventtimes[4],
position = centerpos,
effect = effect_ground,
duration = 10,
}
end
if args.count == 9 or args.count == 5 then
changeCreature {
tcid = daemon,
delay = eventtimes[4],
effect = effect_transform,
loopCount = 1,
visible = true,
}
end
if args.count == 11 then
changeCreature {
tcid = daemon,
delay = eventtimes[4],
effect = effect_transform,
visible = true,
}
changeCreature {
tcid = daemon,
delay = eventtimes[5],
effect = effect_transform,
creature = daemoncreature[1],
behaviour = "JOB_QUESTSTAGING",
followUpBhv = "JOB_QUESTSTAGING",
mortality = "IMMORTAL",
role = "ROLE_DIALOG",
faction = "FACTION_INVALID",
visible = true,
}
end
if args.count == 7 then
createEffect {
delay = eventtimes[4],
position = centerpos,
effect = effect_fog[3],
duration = (args.count - 1) * 10 + time_to_disappear - eventtimes[4],
}
changeCreature {
tcid = daemon,
delay = eventtimes[4],
effect = effect_transform,
visible = true,
}
changeCreature {
tcid = daemon,
delay = eventtimes[5],
effect = effect_transform,
creature = daemoncreature[2],
behaviour = "JOB_QUESTSTAGING",
followUpBhv = "JOB_QUESTSTAGING",
mortality = "IMMORTAL",
role = "ROLE_DIALOG",
faction = "FACTION_INVALID",
visible = true,
}
end
if args.count == 3 then
createEffect {
delay = eventtimes[4],
position = centerpos,
effect = effect_fog[4],
duration = (args.count - 1) * 10 + 5 - eventtimes[4],
}
changeCreature {
tcid = daemon,
delay = eventtimes[4],
effect = effect_transform,
visible = true,
}
changeCreature {
tcid = daemon,
delay = eventtimes[5],
effect = effect_transform,
creature = daemoncreature[3],
behaviour = "JOB_QUESTSTAGING",
followUpBhv = "JOB_QUESTSTAGING",
mortality = "IMMORTAL",
role = "ROLE_DIALOG",
faction = "FACTION_INVALID",
visible = true,
}
end
end
if args.count < 2 then
solveQuest(args.id)
CM_CreatureAway(daemon,time_to_disappear)
end
end)
quest.setScript( 1003, "OnWon", function(args)
local brotherhood = {2863,2865,2867,2874,2875,2876}
for i,creature in ipairs(brotherhood) do
CM_CreatureAway(creature, i)
end
end)
quest.setScript( 1732, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
changeCreature {
tcid = 4636,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
faction = "FACTION_FRIEND_HERO_ALL",
role = "ROLE_DIALOG",
clearAutoTeleporting = true,
mortal = "IMMORTAL",
delay = 3,
}
end
end)
quest.setScript( 1732, "OnTalk", function(args)
if args.tcid == 4636 and args.state == "TASK_FULFILLED" then
changeCreature {
tcid = 4636,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 1732, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 4627,
mortality = "MORTAL",
}
killCreature {
tcid = 4627,
delay = 7,
}
end)
quest.setScript( 1732, "OnWon", function(args)
changeCreature {
tcid = 4636,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM22",
loopCount = 1,
mortality = "MORTAL",
role = "ROLE_INVALID",
}
killCreature {
tcid = 4636,
delay = 2,
}
end)
quest.setScript( 1737, "OnTaskAwaiting", function(args)
tcids = {4665,4666,4667,4668,4669,
4670,4671,4672,4673,4674,4675,4676,
4677,4678,4679,4680,4681,4682,4683,
4684,4685,4686,4687,4688}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
mortality = "MORTAL"
}
end
end)
quest.setScript( 1742, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 4639,
useUnconscious = true,
livesRemaining = 255,
unconsciousTime = 2,
mortality = "MORTAL",
behaviour="CM_Begleiter_tapfer",
clearAutoTeleporting = true,
}
changeCreature {
tcid = 4689,
mortality = "MORTAL",
}
changeCreature {
tcid = 4690,
mortality = "MORTAL",
}
end)
quest.setScript( 1763, "OnTaskAwaiting", function(args)
local wachen = {4727,5905,5903,5904}
changeCreature {
tcid=4720,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
mortality = "MORTAL",
role = "ROLE_INVALID",
mortality = "MORTAL",
}
killCreature {
tcid = 4720,
delay = 3,
}
for index,tcid in ipairs(wachen) do
changeCreature {
tcid = tcid,
mortality = "IMMORTAL",
}
end
end)
quest.setScript( 2037, "OnDeath", function(args)
if args.tcid == 5907 or args.tcid == 5908 or args.tcid == 5908 then
changeCreature{
tcid = args.tcid,
effect = "FXTYPE_SMOKESMALLWHITE",
delay = 1
}
end
end)
quest.setScript( 71, "OnWon", function(args)
creatureGotoPos (200, { 38,31,0, 1900,100,0, 90 }, false, 1, "JOB_QUESTSTAGING", 1)
creatureGotoPos (201, { 38,31,0, 1950,100,0, 45 }, false, 2, "JOB_QUESTSTAGING", 1)
creatureGotoPos (200, { 38,31,0, 2030,750,100, 270 }, false, 1, "JOB_KID", 15)
creatureGotoPos (201, { 38,31,0, 2120,1120,100, 270 }, false, 2, "DOG", 15)
end)
quest.setScript( 1645, "OnStation", function(args)
changeCreature {
tcid = 7516,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM09",
loopCount = 1,
}
end)
quest.setScript( 2106, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "QUEST_2106_DIALOG_NO","QUEST_2106_DIALOG_YES"
end
if args.state == "TASK_FULFILLED" then
return "QUEST_2106_DIALOG_TF"
end
end)
quest.setScript( 2106, "OnTaskAwaiting", function(args)
local elves = { 7516 }
for index,tcid in ipairs(elves) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=30, sy=58, sz=0, px=2265, py=1865, pz=1600, orientation=0},
}
creatureTeleportPos (tcid, 25, {38,31,0,1650,800,100,5})
end
end)
quest.setScript( 1438, "OnTaskAwaiting", function(args)
local elves = { 1543, 1544, 1545, 1546 }
for i,guard in ipairs(elves) do
changeCreature {
tcid = guard,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 1438, "OnWon", function(args)
local droppers = {1543,1544,1545,1546}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 3850, "OnWon", function(args)
changeCreature {
tcid = 7516,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM02",
loopCount = 1,
}
end)
quest.setScript( 1692, "OnWon", function(args)
solveQuest(1693)
end)
quest.setScript( 1694, "OnPrecondsFulfilled", function(args)
solveQuest(1693)
end)
quest.setScript( 1693, "OnTaskAwaiting", function(args)
changeCreature {
tcid=4454,
role="ROLE_VICTIM",
mortality = "MORTAL",
}
end)
quest.setScript( 203, "OnLost", function(args)
changeCreature {
tcid = 616,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = 10,
}
changeCreature {
tcid = 616,
behaviour = "JOB_RICH_STATIST",
delay = 20,
}
end)
quest.setScript( 203, "OnWon", function(args)
changeCreature {
tcid = 616,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
}
changeCreature {
tcid = 616,
behaviour = "JOB_RICH_STATIST",
delay = 3,
}
changeCreature {
tcid = 621,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
delay = 0.75,
}
changeCreature {
tcid = 621,
behaviour = "JOB_KID",
gotoPosition = {sx=37,sy=26,sz=0,px=2783.250,py=2844.602,pz=8.627},
delay = 3.75,
}
end)
quest.setScript( 2008, "OnTaskAwaiting", function(args)
creatureGotoPos (5765,{17,45,0,250,600,1294,200},false,2,"questCreatures",0)
end)
quest.setScript( 2008, "OnWon", function(args)
changeCreature {
tcid = 5765,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=17, sy=45, sz=0, px=591.015991, py=703.187988, pz=1253.810059, orientation=354.000000},
followUpBhv = "questCreatures",
}
end)
quest.setScript( 2009, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 5766,
useUnconscious = true,
unconsciousTime = 2,
livesRemaining = 255,
behaviour = "CM_Begleiter_feige",
clearAutoTeleporting = true,
mortality = "MORTAL"
}
end)
quest.setScript( 2039, "OnTalk", function(args)
if args.tcid == 5766 and args.state == "TASK_FULFILLED" then
changeCreature{
tcid = 5766,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 2039, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 5766,
useUnconscious = true,
unconsciousTime = 2,
livesRemaining = 255,
behaviour = "CM_Begleiter_feige",
clearAutoTeleporting = true,
mortality = "MORTAL"
}
end)
quest.setScript( 2039, "OnTaskFulfilled", function(args)
changeCreature{
tcid = 5766,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end)
quest.setScript( 2039, "OnWon", function(args)
changeCreature{
tcid = 5766,
behaviour = "questCreatures",
}
end)
quest.setScript( 2056, "OnTalk", function(args)
if args.tcid == 5766 and args.state == "TASK_FULFILLED" then
changeCreature{
tcid = 5766,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 2056, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 5766,
useUnconscious = true,
unconsciousTime = 2,
livesRemaining = 255,
behaviour = "CM_Begleiter_feige",
clearAutoTeleporting = true,
mortality = "MORTAL"
}
end)
quest.setScript( 2056, "OnTaskFulfilled", function(args)
changeCreature{
tcid = 5766,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end)
quest.setScript( 2056, "OnWon", function(args)
changeCreature{
tcid = 5766,
behaviour = "questCreatures",
}
end)
quest.setScript( 2057, "OnTalk", function(args)
if args.tcid == 5766 and args.state == "TASK_FULFILLED" then
changeCreature{
tcid = 5766,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 2057, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 5766,
useUnconscious = true,
unconsciousTime = 2,
livesRemaining = 255,
behaviour = "CM_Begleiter_feige",
clearAutoTeleporting = true,
mortality = "MORTAL"
}
end)
quest.setScript( 2057, "OnTaskFulfilled", function(args)
changeCreature{
tcid = 5766,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end)
quest.setScript( 2057, "OnWon", function(args)
changeCreature{
tcid = 5766,
behaviour = "questCreatures",
}
end)
quest.setScript( 2059, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 5766,
useUnconscious = true,
unconsciousTime = 2,
livesRemaining = 255,
behaviour = "CM_Begleiter_tapfer",
clearAutoTeleporting = true,
mortality = "MORTAL"
}
end)
quest.setScript( 2059, "OnWon", function(args)
changeCreature{
tcid = 5766,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=17, sy=45, sz=0, px=507.352, py=692.844, pz=1253.820, orientation=233.000},
followUpBhv = "questCreatures",
followUpAngle = 233.000,
orientation = 233.000,
delay = 2,
}
end)
quest.setScript( 2060, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 5766,
useUnconscious = true,
unconsciousTime = 2,
livesRemaining = 255,
behaviour = "CM_Begleiter_tapfer",
clearAutoTeleporting = true,
mortality = "MORTAL"
}
end)
quest.setScript( 2488, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 7274,
role = "ROLE_VICTIM",
mortality = "IMMORTAL",
}
end)
quest.setScript( 2494, "OnTaskAwaiting", function(args)
local tcids = {7275,7277}
for index,id in ipairs(tcids) do
changeCreature{
tcid = id,
mortality = "MORTAL",
clearAutoTeleporting = true,
}
end
changeCreature{
tcid = 7274,
mortality = "IMMORTAL",
clearAutoTeleporting = true,
}
end)
quest.setScript( 2494, "OnTaskFulfilled", function(args)
changeCreature{
tcid = 7274,
mortality = "MORTAL",
}
end)
quest.setScript( 3154, "OnTaskFulfilled", function(args)
creatureGotoPos(7274,{sx=60, sy=30, sz=0, px=550.000000, py=200.000000, pz=0.000000},298,2)
creatureGotoPos(7275,{sx=60, sy=29, sz=0, px=357.062500, py=3195.453125, pz=-1066.962646},131,2)
creatureGotoPos(7277,{sx=60, sy=29, sz=0, px=568.406250, py=3189.601563, pz=-1061.852539},209,2)
end)
quest.setScript( 3154, "OnWon", function(args)
solveQuest(2491)
solveQuest(2488)
end)
quest.setScript( 3029, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 8439,
role = "ROLE_VICTIM",
}
end)
quest.setScript( 3016, "OnLost", function(args)
if tcid8454state==1 then
tcid8454state = 3
changeCreature {
tcid = 8454,
useUnconscious = false,
livesRemaining = 0,
mortality = "MORTAL",
}
end
if tcid8454state==2 then
tcid8454state = 4
changeCreature {
tcid = 8454,
useUnconscious = false,
livesRemaining = 0,
mortality = "MORTAL",
}
killCreature {
tcid = 8454,
deinitragdoll = true,
}
end
end)
quest.setScript( 3016, "OnSetup", function(args)
tcid8454state = 1
changeCreature {
tcid = 8454,
clearAutoTeleporting = true,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
mortality = "MORTAL",
}
end)
quest.setScript( 3016, "OnUnconscious", function(args)
if args.tcid == 8454 then
if getQuestState(3029)=="TASK_AWAITING" then
tcid8454state = 2
changeCreature {
tcid = 8454,
clearUnconscious= true,
clearAutoTeleporting = true,
useUnconscious = true,
livesRemaining = 1,
mortality = "IMMORTAL",
faction = "FACTION_FRIEND_HERO",
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_DIALOG",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
else
tcid8454state = 4
changeCreature {
tcid = 8454,
useUnconscious = false,
livesRemaining = 0,
mortality = "MORTAL",
}
killCreature {
tcid = 8454,
deinitragdoll = true,
}
end
end
end)
quest.setScript( 3030, "OnTalk", function(args)
if args.tcid == 8454 then
changeCreature {
tcid = 8454,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 3030, "OnWon", function(args)
changeCreature {
tcid = 8454,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = 1,
useUnconscious = false,
livesRemaining = 0,
mortality = "MORTAL",
}
killCreature {
tcid = 8454,
deinitragdoll = true,
delay = 2,
}
tcid8454state = nil
end)
quest.setScript( 3033, "OnWon", function(args)
if getQuestState(3029)=="TASK_AWAITING" then
solveQuest (3029)
end
end)
quest.setScript( 3038, "OnWon", function(args)
creatureTeleportPos(8439,5,{18,3,0 , 2896.650,1778.050,199.964})
end)
quest.setScript( 1971, "OnWon", function(args)
changeCreature {
tcid =5544,
behaviour= "JOB_QUESTSTAGING",
emotion= "ANIM_TYPE_MAGICA",
loopCount= 3,
}
local droppers = {6322,6328,6329,6330,6331}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 1995, "OnWon", function(args)
local creatures = {5746,5747,5748}
for index, element in ipairs(creatures) do
changeCreature {
tcid = element,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=16,sy=46,sz=0,px=2071.852,py=3080.500,pz=489.083},
followUpBhv = "JOB_POOR_STATIST",
faction = "FACTION_ORC",
role = "ROLE_INVALID",
delay = index + 1,
}
end
end)
quest.setScript( 1395, "OnTalk", function(args)
if args.tcid == 2048 and args.state == "TASK_FULFILLED" then
changeCreature {
tcid = 2048,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM27",
loopCount = 1,
}
end
end)
quest.setScript( 1395, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 2048,
clearUnconscious = true,
livesRemaining = 0,
}
end)
quest.setScript( 1395, "OnWon", function(args)
changeCreature {
tcid = 2048,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=28,sy=26,sz=0,px=555,py=649,pz=311},
speed = 2,
followUpBhv = "questCreatures"
}
creatureTeleportPos(2048,13,{sx=27, sy=25, sz=0, px=2630, py=3011, pz=91})
changeCreature {
tcid = 1179,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=27,sy=26,sz=0,px=100,py=1800,pz=0},
followUpBhv = "questCreatures",
delay = 19,
speed = 2,
}
creatureTeleportsAway(1179,49)
changeCreature {
tcid = 2048,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=27,sy=26,sz=0,px=50,py=1750,pz=0},
followUpBhv = "questCreatures",
delay = 19,
speed = 2,
}
creatureTeleportsAway(2048,49)
end)
quest.setScript( 1399, "OnWon", function(args)
changeCreature {
tcid = 3715,
mortality = "MORTAL",
role = "ROLE_ATTACKER",
}
end)
quest.setScript( 622, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 2048,
mortality = "IMMORTAL"
}
end)
quest.setScript( 509, "OnWon", function(args)
changeCreature {
tcid = 2866,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM27",
loopCount = 1,
}
changeCreature {
tcid = 2866,
behaviour = "JOB_MERCENARY",
delay = 4,
}
end)
quest.setScript( 2769, "OnTaskAwaiting", function(args)
changeCreature {
tcid= 7962,
clearAutoTeleporting = true,
}
creatureGotoPos(7962, {27,23,0,2230,1240,100.071999,150}, 180, 2, "questCreatures", 0.5)
end)
quest.setScript( 2773, "OnStation", function(args)
if args.currentStation == 0 then
changeCreature {
tcid = 7971,
behaviour = "CM_Begleiter_feige",
mortality = "MORTAL",
}
addToGroup(7971,0)
changeCreature {
tcid = 7970,
behaviour = "CM_Begleiter_feige",
mortality = "MORTAL",
}
addToGroup(7970,0)
changeCreature {
tcid = 7969,
behaviour = "CM_Begleiter_feige",
mortality = "IMMORTAL",
}
addToGroup(7969,0)
end
end)
quest.setScript( 2773, "OnTalk", function(args)
changeCreature {
tcid = 7972,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM19",
loopCount = 1,
}
end)
quest.setScript( 2773, "OnWon", function(args)
tc_group = {7969, 7970, 7971, 7972}
for i,tc in ipairs(tc_group) do
creatureGotoPos(tc, {sx=27,sy=22,sz=0,px=2500,py=1950,pz=0}, 0, 2, "questCreatures", 0.2*i)
CM_CreatureAway(tc,30)
end
end)
quest.setScript( 2774, "OnTaskAwaiting", function(args)
teleportTeam(2774,{sx=26, sy=25, sz=0, px=1800.000000, py=1350.000000, pz=55.000000, orientation=0.000000})
teleport {
tcid = 7737,
position = { sx=26, sy=25, sz=0, px=1900, py=1400, pz=55 },
delay = 2,
}
end)
quest.setScript( 2774, "OnTaskFulfilled", function(args)
teleportTeam(2774,{sx=26, sy=24, sz=0, px=1800, py=2500, pz=80, orientation=0})
teleport {
tcid = 7737,
position = { sx=26, sy=24, sz=0, px=1834, py=2502, pz=103},
delay = 0,
}
end)
quest.setScript( 1046, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2948,
role = "ROLE_VICTIM",
mortality = "IMMORTAL",
}
end)
quest.setScript( 1047, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 2948,
role = "ROLE_VICTIM",
mortality = "IMMORTAL",
}
changeCreature {
tcid = 2958,
role = "ROLE_VICTIM",
mortality = "IMMORTAL",
}
end)
quest.setScript( 1047, "OnWon", function(args)
changeCreature {
tcid = 2948,
role = "ROLE_INVALID",
mortality = "MORTAL",
}
creatureGotoPos (2948, { 42,37,0 , 1300,880,1140 , 80 }, false, 2, "JOB_KID",5)
changeCreature {
tcid = 2958,
role = "ROLE_INVALID",
mortality = "MORTAL",
}
creatureGotoPos (2958, { 42,37,0 , 1005,1005,1140 , 250 }, false, 2, "cat",5)
end)
quest.setScript( 1414, "OnWon", function(args)
changeCreature {
tcid = 3844,
role = "ROLE_INVALID",
mortality = "MORTAL",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-DOWN",
loopCount = 1,
delay = 2
}
killCreature {
tcid = 3844,
delay = 3
}
end)
quest.setScript( 1604, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
tcids = {4074,4075,4076,4077,4078,4079,4080,4082}
for index,tcid in ipairs(tcids) do
changeCreature{
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM23",
loopCount = -1,
dont_turn = true,
}
end
end
end)
quest.setScript( 1604, "OnTalk", function(args)
if args.tcid == 4074 then
changeCreature{
tcid = 4074,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1
}
end
end)
quest.setScript( 1604, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 4074,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM22",
loopCount = -1,
mortality = "MORTAL",
role = "ROLE_INVALID",
}
killCreature {
tcid = 4074,
delay = 2,
}
end)
quest.setScript( 2033, "OnTaskAwaiting", function(args)
changeCreature{
tcid= 5883,
useUnconscious = true,
livesRemaining = 1,
}
end)
quest.setScript( 2033, "OnUnconscious", function(args)
if args.tcid == 5883 and args.state =="TASK_AWAITING" then
solveQuest(2033)
changeCreature{
tcid= 5883,
livesRemaining = 0,
clearUnconscious= true,
behaviour="questCreatures",
faction="FACTION_INVALID",
role= "ROLE_DIALOG",
delay = 1,
}
end
end)
quest.setScript( 2174, "OnLost", function(args)
local attackers = {6650,6651,6652,6653,6654,6655,6656,6657,6658,6659,6660,6661,6662,6663,6664}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 2174, "OnWon", function(args)
local attackers = {6650,6651,6652,6653,6654,6655,6656,6657,6658,6659,6660,6661,6662,6663,6664}
CM_AttackerAway (attackers,1)
creatureGotoPos (6647, {55,29,0, 255.750,728.000,-1674.540, 80}, false, 1, "questCreatures", 1)
end)
quest.setScript( 2353, "OnPrecondsFulfilled", function(args)
local lizards = {7105,7106,7102}
for index,tcid in ipairs(lizards) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
dont_turn = true,
}
end
end)
quest.setScript( 2353, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 7105 then
changeCreature {
tcid = 7105,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
dont_turn = true,
}
end
if args.state == "PRECONDS_FULFILLED" and args.tcid == 7106 then
changeCreature {
tcid = 7106,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
dont_turn = true,
}
end
if args.state == "PRECONDS_FULFILLED" and args.tcid == 7102 then
changeCreature {
tcid = 7102,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
dont_turn = true,
}
end
end)
quest.setScript( 2353, "OnWon", function(args)
local lizards = {7105,7106,7102}
for index,tcid in ipairs(lizards) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
dont_turn = true,
}
end
end)
quest.setScript( 2504, "OnStation", function(args)
if args.currentStation == 0 then
changeCreature {
tcid = 7105,
behaviour = "INVALID",
mortality = "MORTAL",
}
killCreature {
tcid = 7105,
delay = 1,
}
end
end)
quest.setScript( 2504, "OnWon", function(args)
changeCreature {
tcid = 7102,
behaviour = "INVALID",
mortality = "MORTAL",
role = "ROLE_INVALID",
}
killCreature {
tcid = 7102,
delay = 1,
}
end)
quest.setScript( 2505, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 7106 then
changeCreature {
tcid = 7106,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_LAYGROUND-UP",
loopCount = 1,
}
changeCreature {
tcid = 7106,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLE",
loopCount = 1,
delay = 5.8,
}
changeCreature {
tcid = 7106,
behaviour = "questCreatures",
delay = 6.5,
}
end
end)
quest.setScript( 2505, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 7106,
behaviour = "CM_Begleiter_feige",
role = "ROLE_INVALID",
mortality = "IMMORTAL",
}
changeCreature {
tcid = 7349,
livesRemaining = 1,
useUnconscious = true,
unconsciousTime = 4,
clearAutoTeleporting = true,
}
changeCreature {
tcid = 7349,
behaviour = "Enemy_warrior_brave",
}
end)
quest.setScript( 2505, "OnTaskFulfilled", function(args)
changeCreature{
tcid = 7349,
behaviour = "questCreatures",
faction = "FACTION_FRIEND_HERO_ALL",
}
end)
quest.setScript( 2505, "OnUnconscious", function(args)
if args.tcid == 7349 then
changeCreature {
tcid = 7349,
role = "ROLE_DIALOG",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM20",
loopCount = 1,
livesRemaining = 0,
clearUnconscious = true,
}
end
end)
quest.setScript( 2505, "OnWon", function(args)
changeCreature {
tcid = 7349,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLE",
loopCount = -1,
}
changeCreature {
tcid = 7349,
behaviour = "JOB_RICH_STATIST",
faction = "FACTION_FRIEND_HERO_ALL",
delay = 1,
}
end)
quest.setScript( 2507, "OnWon", function(args)
local lizards = {
{
tcid = 7359,
pos = {sx=55, sy=28, sz=0, px=2717.593750, py=2954.453125, pz=-1410.768921, orientation=4.695465},
angle = 4.695465,
},
{
tcid = 7360,
pos = {sx=55, sy=28, sz=0, px=2738.250000, py=3027.351563, pz=-1410.769043, orientation=86.655334},
angle = 86.655334,
},
{
tcid = 7349,
pos = {sx=55, sy=28, sz=0, px=2705.656250, py=2867.250000, pz=-1410.769043, orientation=181.174179},
angle = 181.174179,
}
}
for id, object in ipairs(lizards) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.pos,
followUpBhv = "dumbBehaviour",
followUpAngle = object.angle,
}
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=0,sx=0,sz=-1,px=0,py=0,pz=0},
followUpBhv = "dumbBehaviour",
delay = 19,
}
teleport {
tcid = object.tcid,
position = object.pos,
orientation = object.angle,
delay = 20,
}
changeCreature {
tcid = object.tcid,
effect = "FXTYPE_GEN_TELEPORT",
delay = 20.1,
}
changeCreature {
tcid = object.tcid,
effect = "FXTYPE_INVALID",
delay = 22,
}
end
end)
quest.setScript( 2665, "OnWon", function(args)
changeCreature {
tcid = 7674,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = 1,
}
changeCreature {
tcid = 7674,
behaviour = "questCreatures",
delay = 4,
}
end)
quest.setScript( 2888, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8233,
mortality = "IMMORTAL",
role = "ROLE_VICTIM",
clearAutoTeleporting = true,
}
changeCreature {
tcid = 8234,
mortality = "IMMORTAL",
role = "ROLE_VICTIM",
clearAutoTeleporting = true,
}
end)
quest.setScript( 2889, "OnTaskAwaiting", function(args)
teleportTeam(2889,{sx=41, sy=17, sz=0, px=900, py=600, pz=0, orientation=0})
changeCreature {
tcid = 8233,
effect = "FXTYPE_GEN_TELEPORT",
delay = 0,
}
changeCreature {
tcid = 8234,
effect = "FXTYPE_GEN_TELEPORT",
delay = 0,
}
changeCreature {
tcid = 8233,
effect = "FXTYPE_INVALID",
delay = 2,
}
changeCreature {
tcid = 8234,
effect = "FXTYPE_INVALID",
delay = 2,
}
end)
quest.setScript( 2889, "OnWon", function(args)
changeCreature {
tcid = 8235,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM17",
loopCount = 1,
}
changeCreature {
tcid = 8235,
behaviour = "questCreatures",
delay = 4,
}
end)
quest.setScript( 2884, "OnWon", function(args)
changeCreature {
tcid = 8187,
role = "ROLE_VICTIM",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
}
creatureTeleportsAway(8187,3)
end)
quest.setScript( 3046, "OnWon", function(args)
changeCreature {
tcid = 8500,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08"
}
changeCreature {
tcid = 8500,
behaviour = "JOB_RICH_STATIST",
delay = 4,
}
end)
quest.setScript( 434, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 1575,
mortality = "MORTAL",
useUnconscious = true,
livesRemaining = 255,
unconsciousTime = 3,
clearAutoTeleporting = true,
}
end)
quest.setScript( 434, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 1575,
mortality = "IMMORTAL",
clearUnconscious = true,
livesRemaining = 0,
}
end)
quest.setScript( 435, "OnWon", function(args)
local droppers = {1577,1684,1685}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 3268, "OnLost", function(args)
local attackers = {9131,9132,9135,9136,9140}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 3268, "OnWon", function(args)
local attackers = {9131,9132,9135,9136,9140}
CM_AttackerAway (attackers,1)
end)
quest.setScript( 3270, "OnTaskAwaiting", function(args)
creatureGotoPos (9129,{17,5,0,850.000,2000.000,0.000,0.000}, false, 1, "questCreatures", 1)
teleport {
tcid = 8792,
position = getPos(8792),
}
creatureGotoPos (8792,{17,5,0,800.000,2050.000,0.000,0.000}, false, 1, "questCreatures", 1)
end)
quest.setScript( 3270, "OnWon", function(args)
CM_CreatureAway(9129,4)
CM_CreatureAway(8794,4)
end)
quest.setScript( 2315, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
setTimer {
id = 2315,
interval = 1,
count = 3,
}
end
end)
quest.setScript( 2315, "OnTimer", function(args)
local tcids = {773, 775, 774, 770, 769, 768, 771, 772}
local tcids2 = {773, 775, 774, 770, 769, 768, 771, 772, 776}
if args.count == 1 then
for index,tcid in ipairs(tcids2) do
changeCreature {
tcid = tcid,
faction = "FACTION_ENEMY_HERO",
behaviour = "Enemy_warrior_brave_ex",
role = "ROLE_ATTACKER",
}
end
solveQuest(args.id)
end
if args.count == 3 then
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICB",
effect = "FXTYPE_GEN_SPAWN1_I",
effectParam = {
paramtype="position",
position={sx=27,sy=31,sz=0,px=2250,py=1450,pz=1045},
duration=1.2,
fxImpact="FXTYPE_GEN_SPAWN1",
},
loopCount = 1,
}
end
creatureTeleportPos(776,0,{sx=27, sy=31, sz=0, px=2250, py=1450, pz=1045})
end
end)
quest.setScript( 1956, "OnWon", function(args)
changeCreature{
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=15,sy=49,sz=0,px=2470.601563,py=1146.906250,pz=1172.415161},
tcid=5515,
followUpBhv = "questCreatures",
delay = 0,
}
changeCreature{
behaviour = "JOB_QUESTSTAGING",
tcid=5515,
emotion = "ANIM_TYPE_MAGICA",
loopCount = 3,
delay = 4,
}
end)
quest.setScript( 1984, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
setWoobEffect {
effect = "FXTYPE_QFX_VERGIFTETER_BRUNNEN",
woid = 1014511916
}
end
end)
quest.setScript( 2179, "OnTaskAwaiting", function(args)
local tcids={6691,6692,6693}
for i, tcid in ipairs(tcids) do
changeCreature{
tcid = tcid,
mortality = "IMMORTAL",
clearAutoTeleporting = true,
}
end
end)
quest.setScript( 2179, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 6691,
behaviour = "questCreatures",
role = "ROLE_DIALOG",
}
end)
quest.setScript( 885, "OnWon", function(args)
tcids = {3794,3795}
for i,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 886, "OnWon", function(args)
changeCreature {
tcid = 1542,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=16,sy=33,sz=0,px=1476.400024,py=1830.599976,pz=1056.489990},
followUpBhv = "JOB_PRIEST",
followUpAngle = 0,
}
end)
quest.setScript( 53, "OnWon", function(args)
changeCreature {
tcid = 143,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM27",
loopCount = 1,
}
changeCreature {
tcid = 143,
behaviour = "JOB_RICH_STATIST",
delay = 3,
}
end)
quest.setScript( 428, "OnWon", function(args)
changeCreature {
tcid = 1542,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM24",
loopCount = 1,
}
end)
quest.setScript( 606, "OnWon", function(args)
changeCreature {
tcid = 1910,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM24",
loopCount = 1,
}
changeCreature {
tcid = 1910,
behaviour = "JOB_POOR_STATIST",
delay = 3,
}
end)
quest.setScript( 1680, "OnSetup", function(args)
if getQuestState(3771) == "TASK_FULFILLED" then
teleportHero {
heroRef = heroRef,
position = {sx=53, sy=6, sz=0, px=2500.000000, py=1600.000000, pz=859.083252, orientation=140.000000},
orientation = 140,
}
end
end)
quest.setScript( 1680, "OnWon", function(args)
changeCreature {
tcid = 4424,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM07",
loopCount = 1,
}
changeCreature {
tcid = 4424,
behaviour = "questCreatures",
delay = 3
}
end)
quest.setScript( 1736, "OnWon", function(args)
changeCreature {
tcid = 4663,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
creatureTeleportsAway (4663, 45)
end)
quest.setScript( 1931, "OnTaskFulfilled", function(args)
creatureTeleportPos(5457,2,{18,48,0 , 900,1200,0})
end)
quest.setScript( 1931, "OnWon", function(args)
local droppers = {5460,5465,5468,5469,5471,5474}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 2133, "OnWon", function(args)
local droppers = {9033,9034,9036,9037,9038,9039,9040,9041,9042,9043,9044,9045,9046,9047,9048,9049,9050,9051,9052,9093}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 2175, "OnWon", function(args)
changeCreature {
tcid = 6666,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICA",
loopCount = 1,
}
changeCreature {
tcid = 6666,
behaviour = "walkAround",
delay = 3,
}
end)
quest.setScript( 2300, "OnDeath", function(args)
changeCreature {
tcid = 6948,
useUnconscious = true,
livesRemaining = 1,
}
changeCreature {
tcid = 6948,
clearUnconscious = true,
behaviour = "JOB_QUESTSTAGING",
mortality = "IMMORTAL",
}
end)
quest.setScript( 2300, "OnLost", function(args)
local attackers = {6957,6958,6959,6961,6962}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 2300, "OnWon", function(args)
local attackers = {6957,6958,6959,6961,6962}
CM_AttackerAway (attackers,1)
end)
quest.setScript( 2647, "OnWon", function(args)
changeCreature {
tcid = 1529,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
changeCreature {
tcid = 1529,
behaviour = "questCreatures",
delay = 4,
}
end)
quest.setScript( 3113, "OnStation", function(args)
if args.currentStation == 0 then
creatureTeleportPos(8728,1,{2,2,0,2628.398438,1059.699219,1050.455811})
elseif args.currentStation == 1 then
creatureTeleportPos(8729,1,{2,2,0,2628.398438,1059.699219,1050.455811})
elseif args.currentStation == 2 then
creatureTeleportPos(8730,1,{2,2,0,2628.398438,1059.699219,1050.455811})
end
end)
quest.setScript( 3113, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 8726 then
creatureTeleportPos(8728,1,{14,9,0,2628.398438,1059.699219,1050.455811})
creatureTeleportPos(8729,1,{14,9,0,2566.675781,1046.570313,1050.455811})
creatureTeleportPos(8730,1,{14,9,0,2475.949219,1000.449219,1050.455811})
local tcids = { 8728, 8729, 8730 }
for i, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "cat",
delay = 4
}
end
end
end)
quest.setScript( 3213, "OnWon", function(args)
changeCreature {
tcid = 9085,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 2,
}
changeCreature {
tcid = 9085,
behaviour = "questCreatures",
delay = 5,
}
end)
quest.setScript( 2115, "OnTaskFulfilled", function(args)
local checkpoints = {
{pos={sx=30, sy=26, sz=-1, px=1198, py=1242, pz=-117, orientation=0},delay=1,orientation=0},
{pos={sx=30, sy=26, sz=-1, px=1938, py=315, pz=-117, orientation=0},delay=8,orientation=0},
{pos={sx=30, sy=25, sz=-1, px=2134, py=2243, pz=-15, orientation=270},delay=15,orientation=270}
}
for i,element in ipairs(checkpoints) do
creatureGotoPos(5007, element.pos, element.orientation, 2, "questCreatures", element.delay)
end
end)
quest.setScript( 2115, "OnWon", function(args)
local checkpoints = {
{pos={sx=30, sy=26, sz=-1, px=1938, py=315, pz=-117, orientation=180},delay=5,orientation=180},
{pos={sx=30, sy=26, sz=-1, px=1198, py=1242, pz=-117, orientation=180},delay=12,orientation=180},
{pos={sx=30, sy=26, sz=-1, px=2603, py=1900, pz=-116, orientation=88},delay=19,orientation=88}
}
for i,element in ipairs(checkpoints) do
creatureGotoPos(5007, element.pos, element.orientation, 2, "questCreatures", element.delay)
end
end)
quest.setScript( 1443, "OnTalk", function(args)
if args.tcid == 4459 then
changeCreature {
tcid = 4459,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SURRENDER-IDLE",
loopCount = -1,
}
end
end)
quest.setScript( 1444, "OnSetup", function(args)
changeCreature {
tcid = 3853,
faction = "FACTION_ENEMY_HERO",
behaviour = "Enemy_warrior_simple"
}
end)
quest.setScript( 1505, "OnStateChange", function(args)
if args.state == "WON" then
changeCreature{
tcid = 4110,
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
behaviour = "JOB_QUESTSTAGING"
}
end
end)
quest.setScript( 1508, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
changeCreature{
tcid = 4110,
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
behaviour = "JOB_QUESTSTAGING"
}
end
if args.state == "TASK_AWAITING" then
changeCreature{
tcid = 4110,
emotion = "ANIM_TYPE_SM22",
loopCount = 0,
behaviour = "JOB_QUESTSTAGING",
mortality = "MORTAL",
role = "ROLE_INVALID"
}
killCreature {
tcid = 4110,
deinitragdoll = false,
delay = 2,
}
end
end)
quest.setScript( 1508, "OnTalk", function(args)
changeCreature{
tcid = 4110,
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
behaviour = "JOB_QUESTSTAGING"
}
end)
quest.setScript( 1822, "OnLost", function(args)
local tcs = {5028,5029,5031}
for i,tc in ipairs(tcs) do
CM_CreatureAway(tc,0.2*i)
end
changeCreature {
tcid = 5007,
clearUnconscious = true,
livesRemaining = 0,
}
end)
quest.setScript( 1822, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 5007,
useUnconscious = true,
livesRemaining = 255,
unconsciousTime = 3,
clearAutoTeleporting = true,
}
end)
quest.setScript( 1823, "OnLost", function(args)
local attackers = {5028,5029,5031}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
end)
quest.setScript( 1823, "OnTaskAwaiting", function(args)
local attackers = {5028,5029,5031}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 1823, "OnTaskFulfilled", function(args)
solveQuest(1914)
end)
quest.setScript( 1914, "OnLost", function(args)
changeCreature {
tcid = 5007,
clearUnconscious = true,
livesRemaining = 0,
}
end)
quest.setScript( 1914, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 5007,
role = "ROLE_VICTIM",
}
end)
quest.setScript( 1914, "OnWon", function(args)
changeCreature {
tcid = 5007,
clearUnconscious = true,
livesRemaining = 0,
}
end)
quest.setScript( 2342, "OnTaskAwaiting", function(args)
local telepos = { 30,26,-1 , 2602.750,1899.750,-116.947, 88.000 }
creatureTeleportPos(5007,0,telepos)
setTimer {
id = 2342,
interval = 1,
count = 4
}
end)
quest.setScript( 2342, "OnTimer", function(args)
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 1887, "OnTaskAwaiting", function(args)
local telepos = { 30,26,-1 , 2602.750,1899.750,-116.947, 88.000 }
creatureTeleportPos(5007,0,telepos)
setTimer {
id = 1887,
interval = 1,
count = 4
}
end)
quest.setScript( 1887, "OnTimer", function(args)
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 1841, "OnWon", function(args)
local droppers = {5099,5101,5102,5103,5104 , 5100,5105,5106,5107,5108}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 1901, "OnWon", function(args)
local attackers = {5331,5332,5333,5334}
CM_AttackerAway (attackers,1)
end)
quest.setScript( 821, "OnTaskFulfilled", function(args)
changeCreature{
tcid = 912,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_DEFENSE",
loopCount = -1,
delay = 2,
}
end)
quest.setScript( 821, "OnWon", function(args)
changeCreature{
tcid = 912,
emotion = "ANIM_TYPE_INVALID"
}
local droppers = {888,890,892,893,897,898,901,907,909}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 822, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 912,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=30,sy=34,sz=0,px=2943,py=605,pz=112},
followUpBhv = "questCreatures",
}
end)
quest.setScript( 3247, "OnTaskFulfilled", function(args)
local ids = {8458,8464,8465,8467,8461,8460,9176}
for i,id in ipairs(ids) do
changeCreature{
tcid = id,
useUnconscious = true,
unconsciousTime = 3,
livesRemaining = 255,
}
end
end)
quest.setScript( 3248, "OnTaskAwaiting", function(args)
addToGroup(9178,0)
changeCreature{
tcid = 9178,
behaviour = "CM_Begleiter_feige",
}
removeFromGroup(9178,1)
end)
quest.setScript( 3254, "OnStation", function(args)
if args.currentStation == 0 then
local tcids = {8458,8464,8465,8467,8461,8460,9176}
for i,id in ipairs(tcids) do
removeFromGroup(id, 0)
changeCreature {
tcid = id,
behaviour = "questCreatures",
}
end
setTimer {
id = 3254,
interval = 1,
count = 10,
}
creatureGotoPos (9176, "13;3;-1;2442.800781;2735.599609;-198.704575;91.849884", false, 2, "questCreatures", 0)
doEmote(9176, "ANIM_TYPE_EM10", 3, 3)
changeCreature{
tcid = 9176,
effect = "FXTYPE_GEN_TPRISON",
delay = 8,
}
doEmote(9176, "ANIM_TYPE_HIT", -1, 8.5)
end
end)
quest.setScript( 3254, "OnTimer", function(args)
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 3254, "OnWon", function(args)
local ids = {8458,8464,8465,8467,8461,8460,9176}
for i,id in ipairs(ids) do
changeCreature{
tcid = id,
effect = "FXTYPE_GEN_TPRISON",
delay = 0,
}
doEmote {
tcid = id,
emotion = "ANIM_TYPE_HIT",
loopcount = -1,
delay = math.random(0,1),
}
changeCreature{
tcid = id,
effect = "FXTYPE_GEN_TRANSFORM",
creature = "Dead_skeleton_warrior_No_Rise",
clearUnconscious = true,
livesRemaining = 0,
mortality = "MORTAL",
behaviour = " Enemy_warrior_brave",
faction = "FACTION_ENEMY_HERO",
delay = 5,
}
end
end)
quest.setScript( 2824, "OnWon", function(args)
changeCreature {
tcid = 8024,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08"
}
changeCreature {
tcid = 8024,
behaviour = "JOB_RICH_STATIST",
delay = 4,
}
end)
quest.setScript( 2829, "OnWon", function(args)
local wachmann = {8084,8085,8086}
for index,id in ipairs(wachmann) do
creatureGotoPos (id,{sx=39, sy=24, sz=0, px=2300, py=2800, pz=0.000000})
creatureTeleportsAway (id,25)
end
end)
quest.setScript( 2833, "OnLost", function(args)
changeCreature {
tcid = 8077,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM02"
}
changeCreature {
tcid = 8077,
behaviour = "JOB_RICH_STATIST",
delay = 4,
}
end)
quest.setScript( 2833, "OnWon", function(args)
changeCreature {
tcid = 8077,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08"
}
changeCreature {
tcid = 8077,
behaviour = "JOB_RICH_STATIST",
delay = 4,
}
end)
quest.setScript( 2691, "OnStation", function(args)
if args.currentStation == 0 then
local gladiatoren = {7875,7876,7877,7878,7879}
local waechter = {7869,7870,7872,7873,7874}
for index,id in ipairs(gladiatoren) do
changeCreature {
tcid = id,
behaviour = "CM_Begleiter_feige",
mortality = "MORTAL",
}
addToGroup(id,0)
end
for index,id in ipairs(waechter) do
creatureGotoPos (id,{sx=29, sy=22, sz=0, px=1900.000000, py=3050.000000, pz=0.000000})
creatureTeleportsAway (id,45)
end
end
end)
quest.setScript( 2691, "OnTaskFulfilled", function(args)
local ids = {7875,7876,7877,7878,7879}
for index,id in ipairs(ids) do
removeFromGroup {
tcid = id,
}
end
changeCreature {
tcid = 7875,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=26,sy=25,sz=-1,px=1850,py=2250,pz=57},
followUpBhv = "questCreatures",
followUpAngle = 320,
}
changeCreature {
tcid = 7878,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=26,sy=25,sz=-1,px=1900,py=2250,pz=59},
followUpBhv = "questCreatures",
followUpAngle = 320,
}
changeCreature {
tcid = 7876,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=26,sy=25,sz=-1,px=2100,py=2150,pz=63},
followUpBhv = "questCreatures",
followUpAngle = 320,
}
changeCreature {
tcid = 7877,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=26,sy=25,sz=-1,px=2050,py=2250,pz=59},
followUpBhv = "questCreatures",
followUpAngle = 320,
}
changeCreature {
tcid = 7879,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=26,sy=25,sz=-1,px=2200,py=2000,pz=59},
followUpBhv = "questCreatures",
followUpAngle = 320,
}
end)
quest.setScript( 242, "OnWon", function(args)
changeCreature {
tcid = 826,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM26",
loopCount = 1,
}
changeCreature {
tcid = 826,
behaviour = "JOB_RICH_STATIST",
delay = 4,
}
end)
quest.setScript( 244, "OnWon", function(args)
changeCreature {
tcid = 826,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
end)
quest.setScript( 3793, "OnTaskAwaiting", function(args)
local group = {1416,3538,3539,3540,3541,3542,3543,3544}
for i,tc in ipairs(group) do
changeCreature {
tcid = tc,
faction = "FACTION_ENEMY_HERO",
role = "ROLE_ATTACKER",
behaviour = "Enemy_warrior_brave_ex",
delay = 0.1
}
end
end)
quest.setScript( 2341, "OnWon", function(args)
local droppers = {7072,7073,7074,7075,7071}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 2185, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
local tcids = {6701,6702,6703}
for index,id in ipairs(tcids) do
changeCreature{
tcid = id,
dont_turn = true,
}
end
changeCreature{
tcid = 6701,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM11",
loopCount = -1
}
end
end)
quest.setScript( 2185, "OnWon", function(args)
changeCreature {
tcid = 6696,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM15",
}
end)
quest.setScript( 2202, "OnStation", function(args)
if args.currentStation == 1 then
changeCreature {
tcid = 6696,
behaviour = "WALKAROUND"
}
end
end)
quest.setScript( 1682, "OnStateChange", function(args)
if args.state == "WON" then
changeCreature {
tcid= 4437,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=40,sy=47,sz=0,px=553,py=629,pz=209},
}
changeCreature {
tcid= 4437,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICA",
loopCount = -1,
delay = 21,
}
end
end)
quest.setScript( 1683, "OnWon", function(args)
changeCreature {
tcid = 4437,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=40, sy=47, sz=0, px=2405.648438, py=285.750000, pz=51},
delay = 0,
followUpBhv = "questCreatures",
}
changeCreature {
tcid = 4436,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_RAISE-HANDS",
effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
loopCount = 1,
delay = 1,
}
changeCreature {
tcid = 4436,
behaviour = "JOB_QUESTSTAGING",
effect = "FXTYPE_SMOKESMALLWHITE",
delay = 2,
}
killCreature {
tcid = 4436,
deinitragdoll = false,
delay = 2
}
changeCreature {
tcid = 4436,
effect = "FXTYPE_INVALID",
delay = 20,
}
end)
quest.setScript( 2156, "OnStateChange", function(args)
if args.state == "PREFIGHT" then
local hunter = {6565,6566,6567,6568,6569,6579}
local warrior = {6571,6572,6573,6574,6575,6576,6577,6578}
local officer = 6580
for index,tcid in ipairs(hunter) do
changeCreature {
tcid = tcid,
behaviour = "Enemy_warrior_simple_artillery",
faction = "FACTION_ENEMY_HERO",
}
end
for index,tcid in ipairs(warrior) do
changeCreature {
tcid = tcid,
behaviour = "Enemy_warrior_simple",
faction = "FACTION_ENEMY_HERO",
}
end
changeCreature {
tcid = officer,
behaviour = "Enemy_warrior_kicknrush",
faction = "FACTION_ENEMY_HERO",
}
end
end)
quest.setScript( 2156, "OnWon", function(args)
changeCreature{
tcid= 6581,
behaviour= "JOB_QUESTSTAGING",
emotion= "ANIM_TYPE_MAGICA",
loopCount= 3,
}
end)
quest.setScript( 2157, "OnWon", function(args)
changeCreature {
tcid= 6581,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICB",
loopCount = 1,
effect = "FXTYPE_GEN_SPAWN1_I",
effectParam = {
paramtype="position",
position={sx=43,sy=56,sz=0,px=500,py=2000,pz=0},
duration=1.2,
fxImpact="FXTYPE_GEN_SPAWN1"
}
}
destroyCreature {
tcid = 6582,
mortality = "MORTAL",
splatter = true,
delay = 4,
}
end)
quest.setScript( 150, "OnStation", function(args)
if args.currentStation == 0 and args.woid == 1004411849 then
setWoobEffect {
effect = "FXTYPE_QFX_VERGIFTETER_BRUNNEN",
woid = 1004411849 }
end
end)
quest.setScript( 159, "OnWon", function(args)
changeCreature {
tcid = 415,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
changeCreature {
tcid = 415,
behaviour = "JOB_RICH_STATIST",
delay = 3,
}
end)
quest.setScript( 3227, "OnLost", function(args)
local attackers = {9131,9132,9135,9136,9140}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 3227, "OnWon", function(args)
local attackers = {9131,9132,9135,9136,9140}
CM_AttackerAway (attackers,1)
end)
quest.setScript( 3229, "OnSetup", function(args)
changeCreature{
tcid = 9129,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM15",
loopCount = 1,
effect = "FXTYPE_GEN_TRANSFORM",
creature = "Monst_werewolf",
}
creatureTeleportPos (9146,0,{17,5,0,600.000000,2000.000000,0.000000,0.000000})
creatureTeleportPos (9147,0,{17,5,0,700.000000,2100.000000,0.000000,0.000000})
creatureTeleportPos (9148,0,{17,5,0,850.000000,2100.000000,0.000000,0.000000})
creatureTeleportPos (9149,0,{17,5,0,950.000000,2050.000000,0.000000,0.000000})
creatureTeleportPos (9150,0,{17,5,0,750.000000,2000.000000,0.000000,0.000000})
creatureTeleportPos (9151,0,{17,5,0,1000.000000,2150.000000,0.000000,0.000000})
end)
quest.setScript( 3229, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9146,
role = "ROLE_ATTACKER",
delay = 0.1,
}
changeCreature {
tcid = 9147,
role = "ROLE_ATTACKER",
delay = 0.1,
}
changeCreature {
tcid = 9148,
role = "ROLE_ATTACKER",
delay = 0.1,
}
changeCreature {
tcid = 9149,
role = "ROLE_ATTACKER",
delay = 0.1,
}
changeCreature {
tcid = 9150,
role = "ROLE_ATTACKER",
delay = 0.1,
}
changeCreature {
tcid = 9151,
role = "ROLE_ATTACKER",
delay = 0.1,
}
end)
quest.setScript( 3349, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" then
changeCreature{
tcid = 9129,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1
}
end
end)
quest.setScript( 3349, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 9129,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 3,
clearAutoTeleporting = true,
}
end)
quest.setScript( 3349, "OnUnconscious", function(args)
if args.tcid == 9129 then
changeCreature{
tcid = 9129,
clearUnconscious = true,
livesRemaining = 0,
behaviour = "JOB_QUESTSTAGING",
faction = "FACTION_INVALID",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
delay = 2,
}
end
end)
quest.setScript( 2840, "OnWon", function(args)
changeCreature {
tcid = 8100,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
changeCreature {
tcid = 7817,
behaviour = "questCreatures",
delay = 5,
}
end)
quest.setScript( 202, "OnWon", function(args)
changeCreature {
tcid = 599,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM04",
loopCount = 1,
}
end)
quest.setScript( 218, "OnWon", function(args)
changeCreature {
tcid = 599,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
changeCreature {
tcid = 2844,
behaviour = "JOB_TRADER",
delay = 4,
}
end)
quest.setScript( 160, "OnWon", function(args)
changeCreature {
tcid = 440,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM02",
loopCount = 1,
}
changeCreature {
tcid = 440,
behaviour = "JOB_RICH_STATIST",
delay = 4,
}
end)
quest.setScript( 175, "OnWon", function(args)
changeCreature {
tcid = 486,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
changeCreature {
tcid = 486,
behaviour = "questCreatures",
delay = 2
}
end)
quest.setScript( 238, "OnTaskAwaiting", function(args)
local attackers = {3678,3679,3680,3681,3682}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 238, "OnWon", function(args)
local attackers = {3678,3679,3680,3681,3682}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
end)
quest.setScript( 1717, "OnSetup", function(args)
changeCreature {
tcid = 4519,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end)
quest.setScript( 1717, "OnWon", function(args)
changeCreature {
tcid = 4526,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
changeCreature {
tcid = 4526,
behaviour = "questCreatures",
delay = 4
}
end)
quest.setScript( 1782, "OnTaskAwaiting", function(args)
local ids = {4982,4983,4984,4985,4986}
for i,id in ipairs(ids) do
changeCreature{
tcid = id,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 0,
}
end
end)
quest.setScript( 1782, "OnUnconscious", function(args)
if args.tcid == 4982 or
args.tcid == 4983 or
args.tcid == 4984 or
args.tcid == 4985 or
args.tcid == 4986 then
changeCreature{
tcid = args.tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM23",
loopCount = -1,
clearUnconscious = true,
livesRemaining = 0,
faction = "FACTION_ATMO",
role = "ROLE_INVALID"
}
end
end)
quest.setScript( 1782, "OnWon", function(args)
changeCreature {
tcid = 4641,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM34",
loopCount = 1,
}
changeCreature {
tcid = 4641,
behaviour = "questCreatures",
delay = 2
}
end)
quest.setScript( 1958, "OnWon", function(args)
creatureTeleportsAway(5529,10)
end)
quest.setScript( 1978, "OnTaskFulfilled", function(args)
setWoobEffect {
effect = "FXTYPE_QFX_VERGIFTETER_BRUNNEN",
woid = 1014511916 }
end)
quest.setScript( 1996, "OnSetup", function(args)
changeCreature {
tcid = 5757,
behaviour = "JOB_QUESSTSTAGING",
emotion = "ANIM_TYPE_SM22",
loopCount = -1,
mortality = "MORTAL",
}
killCreature {
tcid=5757,
deinitragdoll = false,
delay = 2,
}
end)
quest.setScript( 1996, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
changeCreature {
tcid = 5757,
behaviour = "JOB_QUESSTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end
end)
quest.setScript( 1996, "OnTalk", function(args)
if args.tcid == 5757 and args.state == "PRECONDS_FULFILLED" then
changeCreature {
tcid = 5757,
behaviour = "JOB_QUESSTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 2040, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
changeCreature{
behaviour = "JOB_QUESTSTAGING",
tcid=5922,
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end
end)
quest.setScript( 2163, "OnWon", function(args)
local droppers = {6615,6616,6617,6618,6619,6620,6621,6622,6623,6624,6625,6626,6627,6628,6629}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 2664, "OnWon", function(args)
changeCreature {
tcid = 7669,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
changeCreature {
tcid = 7669,
behaviour = "questCreatures",
delay = 4,
}
end)
quest.setScript( 3041, "OnWon", function(args)
creatureGotoPos (8502,{sx=28, sy=13, sz=0, px=2850.000000, py=2100.000000, pz=0.000000, orientation=0.000000},false,2,false,0)
creatureTeleportsAway(8502,30)
end)
quest.setScript( 3117, "OnStation", function(args)
local cats = {8733,8734,8735,8736,8737,8738,8739,8740,8741}
creatureTeleportsAway(cats[args.currentStation + 1])
end)
quest.setScript( 2317, "OnLost", function(args)
local attackers = {7005,7006,7007,7008,7009,7012,7013,7014,7015,7016}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 2317, "OnTaskAwaiting", function(args)
changeCreature {
tcid=7026,
clearAutoTeleporting = true,
}
end)
quest.setScript( 2317, "OnWon", function(args)
local attackers = {7005,7006,7007,7008,7009,7012,7013,7014,7015,7016}
CM_AttackerAway (attackers,1)
end)
quest.setScript( 2323, "OnLost", function(args)
local attackers = {7040,7041,7042,7043,7028,7029,7031,7032,7033,7034,7035,7036,7037,7038,7039}
CM_AttackerAway (attackers,300)
end)
quest.setScript( 2323, "OnWon", function(args)
local attackers = {7040,7041,7042,7043,7028,7029,7031,7032,7033,7034,7035,7036,7037,7038,7039}
CM_AttackerAway (attackers,10)
end)
quest.setScript( 1053, "OnWon", function(args)
changeCreature {
tcid = 2971,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
end)
quest.setScript( 1715, "OnStation", function(args)
if args.currentStation == 0 then
setWoobState {
woid = 1014498874,
state = "WOOB_THINGY_OFF",
}
end
end)
quest.setScript( 1716, "OnSetup", function(args)
local tcids = {4520,4521,4522,4523}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid=tcid,
livesRemaining=1,
useUnconscious=true,
unconsciousTime=5,
}
end
end)
quest.setScript( 1716, "OnTaskFulfilled", function(args)
changeCreature {
tcid=4520,
behaviour = "QUESTJOB_KILL_POOR",
faction = "FACTION_HUMAN",
mortality = "IMMORTAL",
clearUnconscious = true,
role = "ROLE_DIALOG",
}
local tcids = {4521,4522,4523}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid=tcid,
behaviour = "QUESTJOB_KILL_POOR",
faction = "FACTION_HUMAN",
mortality = "IMMORTAL",
clearUnconscious = true,
role = "ROLE_INVALID",
}
end
end)
quest.setScript( 1716, "OnUnconscious", function(args)
if args.tcid == 4520 then
changeCreature {
tcid=4520,
behaviour = "QUESTJOB_KILL_POOR",
faction = "FACTION_HUMAN",
mortality = "IMMORTAL",
clearUnconscious = true,
role = "ROLE_INVALID",
}
end
if args.tcid == 4521 then
changeCreature {
tcid=4521,
behaviour = "QUESTJOB_KILL_POOR",
faction = "FACTION_HUMAN",
mortality = "IMMORTAL",
clearUnconscious = true,
role = "ROLE_INVALID",
}
end
if args.tcid == 4522 then
changeCreature {
tcid=4522,
behaviour = "QUESTJOB_KILL_POOR",
faction = "FACTION_HUMAN",
mortality = "IMMORTAL",
clearUnconscious = true,
role = "ROLE_INVALID",
}
end
if args.tcid == 4523 then
changeCreature {
tcid=4523,
behaviour = "QUESTJOB_KILL_POOR",
faction = "FACTION_HUMAN",
mortality = "IMMORTAL",
clearUnconscious = true,
role = "ROLE_INVALID",
}
end
end)
quest.setScript( 1716, "OnWon", function(args)
local tcids = {4520,4521,4522,4523}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid=tcid,
behaviour = "JOB_POOR_STATIST",
delay = 3,
}
end
end)
quest.setScript( 1714, "OnStation", function(args)
if args.currentStation == 0 then
setWoobState {
woid = 1014498874,
state = "WOOB_THINGY_OFF",
}
end
end)
quest.setScript( 980, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
changeCreature {
tcid = 878,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
dont_turn = 1,
}
end
end)
quest.setScript( 980, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 878 then
changeCreature {
tcid = 878,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
dont_turn = 1,
}
end
end)
quest.setScript( 980, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 878,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
dont_turn = 1,
}
end)
quest.setScript( 982, "OnWon", function(args)
changeCreature {
tcid = 878,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM23",
loopCount = -1,
dont_turn = 1,
role = "ROLE_INVALID",
}
end)
quest.setScript( 984, "OnWon", function(args)
changeCreature {
tcid = 878,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_LAYGROUND-UP",
loopCount = 1,
}
changeCreature {
tcid = 878,
behaviour = "walkAround",
delay = 3,
}
end)
quest.setScript( 257, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
changeCreature {
tcid = 878,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
dont_turn = 1,
}
end
end)
quest.setScript( 257, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 878 then
changeCreature {
tcid = 878,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
dont_turn = 1,
}
end
end)
quest.setScript( 257, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 878,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
dont_turn = 1,
}
end)
quest.setScript( 795, "OnWon", function(args)
changeCreature {
tcid = 878,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM23",
loopCount = -1,
dont_turn = 1,
role = "ROLE_INVALID",
}
end)
quest.setScript( 797, "OnWon", function(args)
changeCreature {
tcid = 878,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_LAYGROUND-UP",
loopCount = 1,
}
changeCreature {
tcid = 878,
behaviour = "walkAround",
delay = 3,
}
end)
quest.setScript( 2088, "OnSetup", function(args)
addGold (-100)
end)
quest.setScript( 2089, "OnTaskAwaiting", function(args)
local pos = {sx=41, sy=37, sz=0, px=369.609375, py=609.328125, pz=650.593872, orientation=110.142853}
creatureTeleportPos (2993,0,pos)
changeCreature {
tcid=3008,
role= "ROLE_ATTACKER",
mortality = "MORTAL",
}
changeCreature {
tcid=3009,
role= "ROLE_ATTACKER",
mortality = "MORTAL",
}
end)
quest.setScript( 2089, "OnWon", function(args)
creatureTeleportPos(2993,1,{41,37,0,400,700,0})
CM_CreatureAway(6281)
CM_CreatureAway(6282)
end)
quest.setScript( 2094, "OnWon", function(args)
creatureTeleportPos (6270,0,{sx=39, sy=37, sz=0, px=2150.000000, py=100.000000, pz=0.000000})
changeCreature{
tcid = 6270,
clearAutoTeleporting = true,
}
end)
quest.setScript( 2096, "OnTaskAwaiting", function(args)
local enemies = {6276,6277,6278,6279,6280,6274,6275,6270}
for index,tcid in ipairs(enemies) do
changeCreature {
tcid = tcid,
behaviour = "Enemy_warrior_brave_ex",
faction = "FACTION_ENEMY_HERO",
}
end
end)
quest.setScript( 1316, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
changeCreature {
tcid = 3595,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
changeCreature {
tcid = 3575,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
end
end)
quest.setScript( 1316, "OnWon", function(args)
changeCreature {
tcid = 3575,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = { px = 2837.203125, py = 2002.250000, pz = 100.069916, sx = 27, sy = 23, sz = 0},
followUpBhv = "JOB_RICH_STATIST",
}
changeCreature {
tcid = 3595,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_KNEE-IDLE",
loopCount = 2,
delay = 2,
}
changeCreature {
tcid = 3595,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLE",
loopCount = 1,
delay = 4,
}
changeCreature {
tcid = 3595,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = { px = 2187.648438, py = 1828.101563, pz = -481.899689, sx = 28, sy = 22, sz = 0},
followUpBhv = "JOB_QUESTSTAGING",
delay = 5,
}
changeCreature {
tcid = 3595,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-DOWN",
loopCount = 1,
delay = 13,
}
changeCreature {
tcid = 3595,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = 1,
delay = 15,
}
end)
quest.setScript( 2100, "OnTalk", function(args)
if args.tcid==3596 and args.state=="TASK_AWAITING" then
changeCreature {
tcid = args.tcid,
behaviour = "Enemy_warrior_dumbattacker",
faction = "FACTION_ENEMY_HERO",
mortality = "MORTAL",
role = "ROLE_ATTACKER"
}
return "QUEST_1316_STATION04"
end
if args.tcid==3597 and args.state=="TASK_AWAITING" then
changeCreature {
tcid = args.tcid,
behaviour = "Enemy_warrior_dumbattacker",
faction = "FACTION_ENEMY_HERO",
mortality = "MORTAL",
role = "ROLE_ATTACKER"
}
return "QUEST_1316_STATION04"
end
if args.tcid==3576 and args.state=="TASK_AWAITING" then
changeCreature {
tcid = args.tcid,
behaviour = "Enemy_warrior_dumbattacker",
faction = "FACTION_ENEMY_HERO",
mortality = "MORTAL",
role = "ROLE_ATTACKER"
}
return "QUEST_1316_STATION04"
end
end)
quest.setScript( 2100, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 3596,
behaviour = "questCreatures",
mortality = "IMMORTAL",
role = "ROLE_DIALOG"
}
changeCreature {
tcid = 3597,
behaviour = "questCreatures",
mortality = "IMMORTAL",
role = "ROLE_DIALOG"
}
changeCreature {
tcid = 3576,
behaviour = "questCreatures",
mortality = "IMMORTAL",
role = "ROLE_DIALOG"
}
end)
quest.setScript( 2129, "OnWon", function(args)
changeCreature {
tcid = 6404,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM27",
loopCount = 1,
}
end)
quest.setScript( 2135, "OnWon", function(args)
changeCreature {
tcid = 6454,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
end)
quest.setScript( 364, "OnTaskAwaiting", function(args)
tcids = {1432, 1161, 1429, 1433,1430,1175, 1171, 1164, 1172, 1431}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "deer",
}
creatureTeleportsAway (tcid, 30)
end
end)
quest.setScript( 365, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 1156,
mortality = "MORTAL",
}
end)
quest.setScript( 365, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 1156,
role = "ROLE_ATTACKER",
}
end)
quest.setScript( 311, "OnWon", function(args)
local droppers = {1161,1164,1171,1172,1175,1429,1430,1431,1432,1433}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 1547, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 4207,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = { sx=42,sy=41,sz=0,px=1516,py=731,pz=932 },
followUpBhv = "questCreatures",
}
end)
quest.setScript( 1550, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 4207,
behaviour = "Enemy_warrior_simple",
faction = "FACTION_ENEMY_HERO",
mortality = "MORTAL",
role = "ROLE_ATTACKER",
}
end)
quest.setScript( 1555, "OnWon", function(args)
creatureGotoPos (4185,{sx=42, sy=37, sz=0, px=151.031250, py=182.781250, pz=958.263000, orientation=72.815460})
end)
quest.setScript( 1497, "OnStateChange", function(args)
local tcids = {4081,4083}
if args.state == "PREFIGHT" then
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
mortality = "MORTAL",
role = "ROLE_ATTACKER",
}
end
end
end)
quest.setScript( 1497, "OnTaskFulfilled", function(args)
killCreature {
tcid = 4081,
delay = 60,
}
killCreature {
tcid = 4083,
delay = 60,
}
end)
quest.setScript( 1500, "OnSetup", function(args)
local tcids = { 4041,4042,4043,4044,4045,4047,4048 }
for index, tcid in ipairs(tcids) do
teleport {
tcid=tcid,
position={px=0,py=0,pz=0,sx=0,sy=0,sz=0},
delay=1
}
end
end)
quest.setScript( 1500, "OnTaskAwaiting", function(args)
teleport {
tcid = 4046,
position = {sx=41,sy=47,sz=0,px=448,py=870,pz=134},
}
changeCreature {
tcid = 4046,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = -1,
}
end)
quest.setScript( 1500, "OnTaskFulfilled", function(args)
local slaves = {
{tcid=4095,pos={ sx=41,sy=47,sz=0, px=250,py=940,pz=135, orientation=0 }},
{tcid=4097,pos={ sx=41,sy=47,sz=0, px=300,py=940,pz=135, orientation=0 }},
{tcid=4099,pos={ sx=41,sy=47,sz=0, px=350,py=940,pz=135, orientation=0 }},
{tcid=4752,pos={ sx=41,sy=47,sz=0, px=400,py=940,pz=135, orientation=0 }},
{tcid=4753,pos={ sx=41,sy=47,sz=0, px=450,py=940,pz=135, orientation=0 }},
{tcid=4754,pos={ sx=41,sy=47,sz=0, px=500,py=940,pz=135, orientation=0 }}
}
for i,slave in ipairs(slaves) do
creatureGotoPos (slave.tcid, slave.pos, slave.pos.orientation, 2, "questCreatures", 0.2 * i)
end
end)
quest.setScript( 1502, "OnSetup", function(args)
changeCreature{
tcid = 4049,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM25",
loopCount = -1
}
changeCreature{
tcid = 4050,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLE",
loopCount = -1
}
changeCreature{
tcid = 4051,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITTALK",
loopCount = -1
}
changeCreature{
tcid = 4052,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITEAT",
loopCount = -1
}
end)
quest.setScript( 1502, "OnTaskAwaiting", function(args)
local tcids = {4049,4050,4051,4052}
for i, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
role = "ROLE_ATTACKER",
mortality = "MORTAL"
}
end
end)
quest.setScript( 1503, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
local slaves = {
{tcid=4041,pos={px=950,py=1000,pz=100 , sx=42,sy=48,sz=0}},
{tcid=4042,pos={px=900,py=1000,pz=100 , sx=42,sy=48,sz=0}},
{tcid=4043,pos={px=1000,py=1000,pz=100 , sx=42,sy=48,sz=0}},
{tcid=4044,pos={px=900,py=950,pz=100 , sx=42,sy=48,sz=0}},
{tcid=4045,pos={px=950,py=950,pz=100 , sx=42,sy=48,sz=0}},
{tcid=4047,pos={px=1000,py=950,pz=100 , sx=42,sy=48,sz=0}},
{tcid=4048,pos={px=950,py=900,pz=100 , sx=42,sy=48,sz=0}}
}
for index,slave in ipairs(slaves) do
changeCreature{
tcid = slave.tcid,
behaviour = "JOB_QUESTSTAGING",
loopCount = -1
}
teleport {
tcid=slave.tcid,
position=slave.pos,
}
end
end
end)
quest.setScript( 1506, "OnTaskFulfilled", function(args)
local slaves = {
{tcid=4041, pos={sx=41,sy=47,sz=0,px=350+math.random(30),py=500+math.random(30),pz=50,orientation = 0}},
{tcid=4042, pos={sx=41,sy=47,sz=0,px=400+math.random(30),py=500+math.random(30),pz=50,orientation = 0}},
{tcid=4043, pos={sx=41,sy=47,sz=0,px=450+math.random(30),py=500+math.random(30),pz=50,orientation = 0}},
{tcid=4044, pos={sx=41,sy=47,sz=0,px=400+math.random(30),py=450+math.random(30),pz=50,orientation = 0}},
{tcid=4045, pos={sx=41,sy=47,sz=0,px=400+math.random(30),py=550+math.random(30),pz=50,orientation = 0}},
{tcid=4047, pos={sx=41,sy=47,sz=0,px=450+math.random(30),py=450+math.random(30),pz=50,orientation = 0}},
{tcid=4048, pos={sx=41,sy=47,sz=0,px=350+math.random(30),py=550+math.random(30),pz=50,orientation = 0}},
}
for index,slave in ipairs(slaves) do
creatureGotoPos (slave.tcid, slave.pos, slave.pos.orientation, 2, "questCreatures", 0.2 * index)
end
end)
quest.setScript( 1506, "OnWon", function(args)
local slaves = {
{tcid=4095,bhv="JOB_POOR_STATIST"},
{tcid=4097,bhv="JOB_POOR_STATIST"},
{tcid=4099,bhv="JOB_POOR_STATIST"},
{tcid=4752,bhv="JOB_POOR_STATIST"},
{tcid=4753,bhv="JOB_POOR_STATIST"},
{tcid=4754,bhv="JOB_POOR_STATIST"},
{tcid=4041,bhv="JOB_POOR_STATIST"},
{tcid=4042,bhv="JOB_POOR_STATIST"},
{tcid=4043,bhv="JOB_POOR_STATIST"},
{tcid=4044,bhv="JOB_KID"},
{tcid=4045,bhv="JOB_KID"},
{tcid=4046,bhv="JOB_KID"},
{tcid=4047,bhv="JOB_KID"},
{tcid=4048,bhv="JOB_KID"},
{tcid=4035,bhv="JOB_RICH_STATIST"}
}
for index,slave in ipairs(slaves) do
changeCreature {
tcid = slave.tcid,
behaviour = slave.bhv,
delay = math.random() + 0.2 * ( math.random(15) + index ),
}
end
end)
quest.setScript( 1485, "OnWon", function(args)
local droppers = {4026,4027,4028,4029,4030,4031,4025}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 1486, "OnSetup", function(args)
tcids = {4036,4037,4038,4049,4050,4051,4052}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
livesRemaining = 255,
useUnconscious = true,
unconsciousTime = 2
}
end
end)
quest.setScript( 1486, "OnUnconscious", function(args)
if (args.tcid == 4036 or args.tcid == 4037 or args.tcid == 4038) then
changeCreature {
tcid = args.tcid,
behaviour = "QUESTJOB_KILL_POOR",
faction = "FACTION_HUMAN",
role = "ROLE_DIALOG",
}
end
end)
quest.setScript( 1486, "OnWon", function(args)
local droppers = {4036,4037,4038}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 1488, "OnSetup", function(args)
local slaves = {
{tcid=4041,pos={px=950,py=1000,pz=100,sx=42,sy=48,sz=0}},
{tcid=4042,pos={px=900,py=1000,pz=100,sx=42,sy=48,sz=0}},
{tcid=4043,pos={px=1000,py=1000,pz=100,sx=42,sy=48,sz=0}},
{tcid=4044,pos={px=900,py=950,pz=100,sx=42,sy=48,sz=0}},
{tcid=4045,pos={px=950,py=950,pz=100,sx=42,sy=48,sz=0}},
{tcid=4046,pos={px=900,py=900,pz=100,sx=42,sy=48,sz=0}},
{tcid=4047,pos={px=1000,py=950,pz=100,sx=42,sy=48,sz=0}},
{tcid=4048,pos={px=950,py=900,pz=100,sx=42,sy=48,sz=0}},
}
for index,slave in ipairs(slaves) do
changeCreature{
tcid = slave.tcid,
behaviour = "questCreatures",
}
teleport {
tcid=slave.tcid,
position=slave.pos,
}
end
teleport {
tcid=4051,
position={px=850,py=850,pz=100,sx=42,sy=48,sz=0},
delay=1
}
teleport {
tcid=4052,
position={px=950,py=850,pz=100,sx=42,sy=48,sz=0},
delay=1
}
end)
quest.setScript( 1488, "OnWon", function(args)
local tcids = { 4041,4042,4043,4044,4045,4046,4047,4048,4101,4102,4103 }
changeCreature {
tcid=4101,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_RAISE-HANDS",
delay=5,
}
for index, tcid in ipairs(tcids) do
changeCreature {
tcid=tcid,
effect="FXTYPE_GEN_TELEPORT",
delay=6,
}
teleport {
tcid=tcid,
position={px=0,py=0,pz=0,sx=0,sy=0,sz=0},
delay=10
}
end
end)
quest.setScript( 1496, "OnTaskAwaiting", function(args)
local tcids = {4051,4052}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
clearUnconscious = true,
livesRemaining = 0,
mortality = "MORTAL",
behaviour = "Enemy_warrior_brave_ex",
faction = "FACTION_ENEMY_HERO",
}
end
end)
quest.setScript( 1921, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 5433,
role = "ROLE_VICTIM"
}
end)
quest.setScript( 1924, "OnTaskAwaiting", function(args)
changeCreature{
tcid=5437,
useUnconscious = true,
unconsciousTime = 4,
livesRemaining = 1,
clearAutoTeleporting = true,
}
end)
quest.setScript( 1924, "OnUnconscious", function(args)
if args.tcid == 5437 then
changeCreature{
tcid = 5437,
clearUnconscious = true,
role = "ROLE_DIALOG",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
mortality="IMMORTAL"
}
end
end)
quest.setScript( 2313, "OnTalk", function(args)
if args.tcid == 5437 then
changeCreature{
tcid = 5437,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1
}
end
end)
quest.setScript( 2313, "OnWon", function(args)
changeCreature{
tcid = 5437,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM22",
mortality = "MORTAL",
role = "ROLE_INVALID"
}
killCreature{
tcid = 5437,
deinitragdoll = false,
delay = 0.5,
}
end)
quest.setScript( 1927, "OnTaskFulfilled", function(args)
solveQuest(1921)
end)
quest.setScript( 1936, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 5433,
role = "ROLE_VICTIM"
}
end)
quest.setScript( 1937, "OnTaskFulfilled", function(args)
solveQuest(1936)
end)
quest.setScript( 1937, "OnWon", function(args)
creatureGotoPos (5433, "16;45;0;485.188;2965.450;906.972;90.000", 90, 1, "questCreatures", 5)
end)
quest.setScript( 1653, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 5382,
role = "ROLE_VICTIM"
}
end)
quest.setScript( 1915, "OnTaskAwaiting", function(args)
changeCreature{
tcid=5424,
useUnconscious = true,
unconsciousTime = 4,
livesRemaining = 1,
clearAutoTeleporting = true,
}
end)
quest.setScript( 1915, "OnUnconscious", function(args)
if args.tcid == 5424 then
changeCreature{
tcid = 5424,
clearUnconscious = true,
role = "ROLE_DIALOG",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
mortality = "IMMORTAL"
}
end
end)
quest.setScript( 2310, "OnTalk", function(args)
if args.tcid == 5424 then
changeCreature{
tcid = 5424,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1
}
end
end)
quest.setScript( 2310, "OnWon", function(args)
changeCreature{
tcid = 5424,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM22",
mortality = "MORTAL",
role = "ROLE_INVALID"
}
killCreature{
tcid = 5424,
deinitragdoll = false,
delay = 0.5,
}
end)
quest.setScript( 1916, "OnTaskFulfilled", function(args)
solveQuest(1653)
end)
quest.setScript( 1920, "OnStateChange", function(args)
if args.state == "PREFIGHT" then
changeCreature {
tcid = 5382,
mortality = "MORTAL",
}
end
end)
quest.setScript( 2020, "OnSetup", function(args)
setTimer {
id= 2020,
interval=1,
count=6,
}
end)
quest.setScript( 2020, "OnTaskAwaiting", function(args)
changeCreature{
tcid= 5832,
behaviour= "JOB_QUESTSTAGING",
emotion= "ANIM_TYPE_MAGICA",
loopCount= 3,
}
end)
quest.setScript( 2020, "OnTimer", function(args)
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 2024, "OnSetup", function(args)
setTimer {
id= 2024,
interval=1,
count=6,
}
end)
quest.setScript( 2024, "OnTaskAwaiting", function(args)
changeCreature{
tcid= 5868,
behaviour= "JOB_QUESTSTAGING",
emotion= "ANIM_TYPE_MAGICA",
loopCount= 3,
}
end)
quest.setScript( 2024, "OnTimer", function(args)
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 2195, "OnWon", function(args)
changeCreature {
tcid = 6728,
mortality = "MORTAL",
}
end)
quest.setScript( 2197, "OnLost", function(args)
local attackers = {6728,6733,6741}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 2197, "OnWon", function(args)
local attackers = {6728,6733,6741}
CM_AttackerAway (attackers,1)
end)
quest.setScript( 2199, "OnWon", function(args)
creatureGotoPos (6730, "55;29;0;789.156;904.703;-1735.243;90", false, 1, "questCreatures", 1)
creatureGotoPos (6727, "55;29;0;913.656;879.250;-1736.387;270", false, 1, "questCreatures", 2)
end)
quest.setScript( 2548, "OnTaskAwaiting", function(args)
tcids = {7479,7480,7481,7482,7483,7484,7485,7486}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "Enemy_warrior_kicknrush",
effect = "FXTYPE_SMOKEBIGBLACK",
delay = 2.1,
}
end
creatureTeleportPos (7479,0, {sx=57, sy=27, sz=0, px=1500.000000, py=2950.000000, pz=0.000000, orientation=40})
creatureTeleportPos (7480,0, {sx=57, sy=27, sz=0, px=1600.000000, py=2950.000000, pz=0.000000, orientation=80})
creatureTeleportPos (7481,0, {sx=57, sy=27, sz=0, px=1750.000000, py=2900.000000, pz=0.000000, orientation=120})
creatureTeleportPos (7482,0, {sx=57, sy=27, sz=0, px=1550.000000, py=2900.000000, pz=0.000000, orientation=160})
creatureTeleportPos (7483,0, {sx=57, sy=27, sz=0, px=1450.000000, py=2850.000000, pz=0.000000, orientation=200})
creatureTeleportPos (7484,0, {sx=57, sy=27, sz=0, px=1550.000000, py=2850.000000, pz=0.000000, orientation=240})
creatureTeleportPos (7485,0, {sx=57, sy=27, sz=0, px=1553.500000, py=2654.500000, pz=-1733.034180, orientation=348.228149})
creatureTeleportPos (7486,0, {sx=57, sy=27, sz=0, px=1600.000000, py=2800.000000, pz=0.000000, orientation=320})
end)
quest.setScript( 2548, "OnWon", function(args)
changeCreature{
tcid = 7495,
faction = "FACTION_ENEMY_ALL",
behaviour = "Enemy_warrior_kicknrush",
}
end)
quest.setScript( 2276, "OnStation", function(args)
changeCreature
{
tcid = 6916,
mortality = "MORTAL",
behaviour = "Enemy_warrior_kicknrush",
}
changeCreature
{
tcid = 6918,
mortality = "MORTAL",
behaviour = "Enemy_warrior_kicknrush",
}
changeCreature
{
tcid = 6919,
mortality = "MORTAL",
behaviour = "Enemy_warrior_kicknrush",
}
changeCreature
{
tcid = 6920,
mortality = "MORTAL",
behaviour = "Enemy_warrior_kicknrush",
}
changeCreature
{
tcid = 6921,
mortality = "MORTAL",
behaviour = "Enemy_warrior_kicknrush",
}
end)
quest.setScript( 2290, "OnStation", function(args)
changeCreature
{
tcid = 6938,
mortality = "MORTAL",
behaviour = "Enemy_warrior_kicknrush",
}
end)
quest.setScript( 2421, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 7182,
clearAutoTeleporting = true,
}
end)
quest.setScript( 2421, "OnWon", function(args)
solveQuest(2422)
end)
quest.setScript( 2422, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 7182,
role = "ROLE_VICTIM",
}
end)
quest.setScript( 3315, "OnSetup", function(args)
changeCreature{
tcid = 7182,
clearAutoTeleporting = true,
}
end)
quest.setScript( 2464, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
changeCreature{
tcid = 7253,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
creature = "Human_stat_citizen_m01",
dont_turn = true
}
end
end)
quest.setScript( 2464, "OnTalk", function(args)
if args.tcid == 7253 then
changeCreature{
tcid = 7253,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1
}
changeCreature{
tcid = 7253,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
delay = 3
}
end
end)
quest.setScript( 2465, "OnWon", function(args)
changeCreature{
tcid=7253,
creature="Monst_werewolf_elite",
delay = 2,
mortality = "MORTAL",
behaviour = "Enemy_werewolf",
faction = "FACTION_ENEMY_HERO"
}
end)
quest.setScript( 2231, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 6811,
clearAutoTeleporting = true,
}
end)
quest.setScript( 2233, "OnTalk", function(args)
if args.tcid == 6811 and args.state == "TASK_FULFILLED" then
changeCreature {
tcid = 6811,
behaviour = "questCreatures",
}
end
end)
quest.setScript( 2233, "OnWon", function(args)
changeCreature {
tcid = 6811,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=55,sy=28,sz=0,px=454.500,py=2781.500,pz=-1710.000},
followUpBhv= "questCreatures",
}
end)
quest.setScript( 2238, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 6811,
clearAutoTeleporting = true,
}
end)
quest.setScript( 2239, "OnTalk", function(args)
if args.tcid == 6811 and args.state == "TASK_FULFILLED" then
changeCreature {
tcid = 6811,
behaviour = "questCreatures",
}
end
end)
quest.setScript( 2239, "OnWon", function(args)
changeCreature {
tcid = 6811,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=55,sy=28,sz=0,px=454.500,py=2781.500,pz=-1710.000},
followUpBhv= "questCreatures",
}
end)
quest.setScript( 2531, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 7413,
clearAutoTeleporting = true,
}
end)
quest.setScript( 2532, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 7413,
behaviour = "CM_Begleiter_tapfer",
faction = "FACTION_QUEST_VICTIM"
}
end)
quest.setScript( 2532, "OnTaskFulfilled", function(args)
changeCreature{
tcid = 7413,
behaviour = "questCreatures",
faction = "FACTION_INVALID"
}
if getQuestState(2616) == "TASK_AWAITING" then
solveQuest(2616)
end
end)
quest.setScript( 2533, "OnWon", function(args)
creatureGotoPos (7413, {59,33,0,1250,450,0,90}, false, 2, "JOB_RICH_STATIST", 2)
changeCreature{
tcid = 7413,
delay = 2,
faction = "FACTION_INVALID",
role = "ROLE_INVALID",
}
changeCreature{
tcid = 7413,
mortality = "MORTAL",
delay=30,
}
end)
quest.setScript( 2616, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 7413,
role = "ROLE_VICTIM",
}
end)
quest.setScript( 2535, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 7413,
clearAutoTeleporting = true,
}
end)
quest.setScript( 2536, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 7413,
behaviour = "CM_Begleiter_tapfer",
faction = "FACTION_QUEST_VICTIM"
}
end)
quest.setScript( 2536, "OnTaskFulfilled", function(args)
changeCreature{
tcid = 7413,
behaviour = "questCreatures",
faction = "FACTION_INVALID"
}
if getQuestState(3157) == "TASK_AWAITING" then
solveQuest(3157)
end
end)
quest.setScript( 2537, "OnWon", function(args)
changeCreature{
tcid = 7413,
mortality = "MORTAL"
}
end)
quest.setScript( 3157, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 7413,
role = "ROLE_VICTIM",
}
end)
quest.setScript( 2336, "OnWon", function(args)
changeCreature {
tcid= 7065,
creature="lizard_deathcult_warrior",
effect="FXTYPE_GEN_TRANSFORM",
delay = 1,
behaviour = "questCreatures",
role = "ROLE_DIALOG",
}
end)
quest.setScript( 2539, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 7441,
livesRemaining = 1,
useUnconscious = true,
unconsciousTime = 3,
}
end)
quest.setScript( 2539, "OnUnconscious", function(args)
changeCreature {
tcid = 7441,
clearUnconscious = true,
role = "ROLE_INVALID",
behaviour = "CM_Begleiter_feige",
mortality = "IMMORTAL",
faction = "FACTION_FRIEND_HERO_ALL",
}
end)
quest.setScript( 2541, "OnSetup", function(args)
changeCreature {
tcid = 7441,
mortality = "IMMORTAL",
behaviour = "CM_Begleiter_feige",
}
end)
quest.setScript( 2541, "OnWon", function(args)
changeCreature {
tcid = 7441,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=56,sy=36,sz=0,px=234.250,py=2103.750,pz=-1576.628},
orientation = 180.000,
followUpBhv = "questCreatures",
followUpAngle = 180.000,
delay = 2,
}
end)
quest.setScript( 2892, "OnWon", function(args)
local droppers = {8296,8297,8298,8299,8300}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 2963, "OnWon", function(args)
changeCreature {
tcid = 8243,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM16",
loopCount = 1,
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
delay = 5,
}
changeCreature {
tcid = 8310,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM16",
loopCount = 1,
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
delay = 5,
}
changeCreature {
tcid = 8311,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM16",
loopCount = 1,
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
delay = 5,
}
end)
quest.setScript( 2988, "OnWon", function(args)
addGold (50)
end)
quest.setScript( 2992, "OnWon", function(args)
addGold (100)
end)
quest.setScript( 2994, "OnWon", function(args)
addGold (150)
end)
quest.setScript( 3000, "OnWon", function(args)
local tcids = {8243,8310,8311}
for i,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
mortality= "MORTAL",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM16",
loopCount = 1,
}
killCreature {
tcid = tcid,
splatter = true,
delay = 3,
}
end
end)
quest.setScript( 2777, "OnStateChange", function(args)
if args.state == "PRECONDS_AWAITING" then
setWoobEffect {
woid = 1022876453,
effect = "FXTYPE_SMOKESMALLWHITE",
}
end
if args.state == "PRECONDS_FULFILLED" then
setWoobEffect {
woid = 1022876453,
effect = "FXTYPE_INVALID",
}
changeCreature{
tcid = 7984,
effect = "FXTYPE_SMOKEBIGWHITE",
delay = 0.1,
}
changeCreature{
tcid = 7984,
effect = "FXTYPE_INVALID",
delay = 4,
}
local tcids = {8755,7986,7987}
for i,id in ipairs(tcids) do
changeCreature{
tcid=id,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=46,sy=12,sz=0,px=500,py=950,pz=2246},
followUpAngle = 0,
speed=2,
followUpBhv = "JOB_QUESTSTAGING",
clearAutoTeleporting = true,
}
changeCreature{
tcid=id,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM22",
loopCount = -1,
delay = math.random(6,8),
}
end
end
end)
quest.setScript( 2778, "OnTaskAwaiting", function(args)
local tcids = {8755,7986,7987}
for i,id in ipairs(tcids) do
changeCreature{
tcid=id,
faction="FACTION_HERO_GOOD"
}
end
end)
quest.setScript( 2778, "OnTaskFulfilled", function(args)
local tcids = {8755,7986,7987}
for i,id in ipairs(tcids) do
changeCreature{
tcid=id,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM10",
loopCount = 5,
delay = math.random(0,1),
}
end
end)
quest.setScript( 2778, "OnWon", function(args)
changeCreature {
tcid = 8755,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM02"
}
changeCreature {
tcid = 8755,
behaviour = "questCreatures",
delay = 4,
}
end)
quest.setScript( 2784, "OnStateChange", function(args)
if args.state == "PRECONDS_AWAITING" then
setWoobEffect {
woid = 1022876453,
effect = "FXTYPE_SMOKESMALLWHITE",
}
end
if args.state == "PRECONDS_FULFILLED" then
setWoobEffect {
woid = 1022876453,
effect = "FXTYPE_INVALID",
}
changeCreature{
tcid = 7984,
effect = "FXTYPE_SMOKEBIGWHITE",
delay = 0.1,
mortality = "MORTAL",
}
changeCreature{
tcid = 7984,
effect = "FXTYPE_INVALID",
delay = 4,
mortality = "MORTAL",
}
local tcids = {8755,7986,7987}
for i,id in ipairs(tcids) do
changeCreature{
tcid=id,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=46,sy=12,sz=0,px=500,py=950,pz=2246},
followUpAngle = 0,
speed=2,
followUpBhv = "JOB_QUESTSTAGING",
clearAutoTeleporting = true,
mortality = "MORTAL",
}
changeCreature{
tcid=id,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM22",
loopCount = -1,
delay = math.random(6,8),
}
end
end
end)
quest.setScript( 2784, "OnWon", function(args)
creatureTeleportsAway (7984, 60)
end)
quest.setScript( 2839, "OnWon", function(args)
changeCreature {
tcid = 8115,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08"
}
changeCreature {
tcid = 8115,
behaviour = "JOB_RICH_STATIST",
delay = 4,
}
local horses = {
{tcid=8110,pos={ 29,13,0 , 245,2685,275, 200 }},
{tcid=8111,pos={ 29,13,0 , 265,2785,275, 200 }},
{tcid=8112,pos={ 29,13,0 , 285,2885,275, 200 }}
}
for i,horse in ipairs(horses) do
creatureGotoPos (horse.tcid, horse.pos, horse.pos[7], 1, "questCreatures", i)
CM_CreatureAway (horse.tcid, 60 + i*math.random(1,10))
end
end)
quest.setScript( 2873, "OnWon", function(args)
changeCreature {
tcid = 8115,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08"
}
changeCreature {
tcid = 8115,
behaviour = "JOB_RICH_STATIST",
delay = 4,
}
local horses = {
{tcid=8110,pos={ 29,13,0 , 245,2685,275, 200 }},
{tcid=8111,pos={ 29,13,0 , 265,2785,275, 200 }},
{tcid=8112,pos={ 29,13,0 , 285,2885,275, 200 }}
}
for i,horse in ipairs(horses) do
creatureGotoPos (horse.tcid, horse.pos, horse.pos[7], 1, "questCreatures", i)
CM_CreatureAway (horse.tcid, 60 + i*math.random(1,10))
end
end)
quest.setScript( 2820, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8041,
role = "ROLE_ATTACKER",
}
end)
quest.setScript( 2820, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 8041,
delay = 1,
role = "ROLE_DIALOG",
behaviour = "questCreatures",
}
end)
quest.setScript( 2827, "OnWon", function(args)
creatureTeleportsAway(8047,2)
end)
quest.setScript( 2836, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8041,
role = "ROLE_ATTACKER",
}
end)
quest.setScript( 2836, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 8041,
delay = 1,
role = "ROLE_DIALOG",
behaviour = "questCreatures",
}
end)
quest.setScript( 2248, "OnDeath", function(args)
changeCreature {
tcid = 6416,
behaviour = "JOB_QUESTSTAGING",
livesRemaining = 1,
}
end)
quest.setScript( 2248, "OnTaskAwaiting", function(args)
creatureTeleportPos(6366,1,{sx=37, sy=59, sz=0, px=252.804688, py=903.703125, pz=148.078827, orientation=289.835938})
end)
quest.setScript( 2249, "OnWon", function(args)
changeCreature {
tcid = 6366,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICB",
followUpBhv = "questCreatures",
}
changeCreature {
tcid = 6416,
behaviour = "JOB_QUESTSTAGING",
effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
emotion = "ANIM_TYPE_SM22",
delay = 1,
}
killCreature {
tcid = 6416,
splatter = true,
delay = 3,
}
end)
quest.setScript( 2278, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 6366,
behaviour = "JOB_QUESTSTAGING",
mortality = "IMMORTAL",
}
local tcids = { 6899,6900,6901,6902,6903,6904,6905,6906,6907,6908 }
for i, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 2279, "OnTaskAwaiting", function(args)
local tcids = { 6898,6808,6809 }
for i, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 2279, "OnWon", function(args)
local tcids = {6808,6809,6898,6899,6900,6901,6902,6903,6904,6905,6906,6907,6908}
CM_AttackerAway(tcids, 300)
end)
quest.setScript( 3152, "OnDeath", function(args)
if args.tcid == 6416 then
changeCreature {
tcid = 6416,
behaviour = "questCreatures",
clearAutoTeleporting = true,
delay = 1,
}
end
end)
quest.setScript( 3152, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 6416,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
}
end)
quest.setScript( 2132, "OnSetup", function(args)
changeCreature {
tcid = 6366,
mortality = "IMMORTAL",
}
end)
quest.setScript( 2219, "OnTaskAwaiting", function(args)
creatureTeleportPos(6366,1,{sx=37, sy=59, sz=0, px=6.852000, py=680.796997, pz=176.481003, orientation=90.000000})
end)
quest.setScript( 2220, "OnDeath", function(args)
if args.tcid == 6416 then
changeCreature {
tcid = 6416,
behaviour = "questCreatures",
clearAutoTeleporting = true,
delay = 1,
}
end
end)
quest.setScript( 2220, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 6416,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
}
end)
quest.setScript( 2226, "OnTaskAwaiting", function(args)
local tcids = { 6799,6804,6800,6801,6802, 6803, 6798 }
for i, tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 2228, "OnTaskAwaiting", function(args)
creatureTeleportPos(6366,1,{sx=37, sy=59, sz=0, px=6.852000, py=680.796997, pz=176.481003, orientation=90.000000})
end)
quest.setScript( 2228, "OnWon", function(args)
changeCreature {
tcid = 6366,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICB",
followUpBhv = "questCreatures",
}
changeCreature {
tcid = 6416,
behaviour = "JOB_QUESTSTAGING",
effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
emotion = "ANIM_TYPE_SM22",
delay = 1,
}
killCreature {
tcid = 6416,
splatter = true,
delay = 3,
}
end)
quest.setScript( 2230, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 6366,
mortality = "IMMORTAL",
}
end)
quest.setScript( 1048, "OnSetup", function(args)
changeCreature {
tcid=2961,
livesRemaining=1,
useUnconscious=true,
unconsciousTime=4,
}
end)
quest.setScript( 1049, "OnLost", function(args)
changeCreature {
tcid = 2973,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM15",
loopCount = 1,
bubble = 9,
}
creatureGotoPos (2973, {27,25,0 , 1810,1520,250 , 0} , 0, 1, "JOB_QUESTSTAGING", 4)
changeCreature {
tcid = 2973,
behaviour = "JOB_RICH_STATIST",
faction = "FACTION_HIGHELVE",
delay = 14,
}
end)
quest.setScript( 1049, "OnSetup", function(args)
changeCreature {
tcid=2961,
livesRemaining=0,
clearUnconscious=true,
mortality = "IMMORTAL",
}
end)
quest.setScript( 1049, "OnTalk", function(args)
if args.tcid==2973 and args.state=="TASK_NOT_FULFILLED" then
changeCreature {
tcid = 2973,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = 1,
}
end
end)
quest.setScript( 1049, "OnWon", function(args)
changeCreature {
tcid = 2973,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = 1,
}
creatureGotoPos (2973, {27,25,0 , 1810,1520,250 , 0} , 0, 1, "JOB_QUESTSTAGING", 4)
changeCreature {
tcid = 2973,
behaviour = "JOB_RICH_STATIST",
faction = "FACTION_HIGHELVE",
delay = 14,
}
creatureGotoPos (2961, {27,25,0 , 1800,1510,250 , 0} , 0, 1, "JOB_QUESTSTAGING", 1)
changeCreature {
tcid = 2961,
behaviour = "JOB_RICH_STATIST",
faction = "FACTION_HIGHELVE",
delay = 11,
}
end)
quest.setScript( 1056, "OnLost", function(args)
changeCreature {
tcid = 2973,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM15",
loopCount = 1,
bubble = 9,
}
creatureGotoPos (2973, {27,25,0 , 1810,1520,250 , 0} , 0, 1, "JOB_QUESTSTAGING", 4)
changeCreature {
tcid = 2973,
behaviour = "JOB_RICH_STATIST",
faction = "FACTION_HIGHELVE",
delay = 4,
}
end)
quest.setScript( 1056, "OnSetup", function(args)
changeCreature {
tcid=2961,
livesRemaining=0,
clearUnconscious=true,
mortality = "IMMORTAL",
}
end)
quest.setScript( 1056, "OnTalk", function(args)
if args.tcid==2973 and args.state=="TASK_NOT_FULFILLED" then
changeCreature {
tcid = 2973,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = 1,
}
end
end)
quest.setScript( 1056, "OnWon", function(args)
changeCreature {
tcid = 2973,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = 1,
}
creatureGotoPos (2973, {27,25,0 , 1810,1520,250 , 0} , 0, 1, "JOB_QUESTSTAGING", 4)
changeCreature {
tcid = 2973,
behaviour = "JOB_RICH_STATIST",
faction = "FACTION_HIGHELVE",
delay = 14,
}
creatureGotoPos (2961, {27,25,0 , 1800,1510,250 , 0} , 0, 1, "JOB_QUESTSTAGING", 1)
changeCreature {
tcid = 2961,
behaviour = "JOB_RICH_STATIST",
faction = "FACTION_HIGHELVE",
delay = 11,
}
end)
quest.setScript( 2793, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8004,
livesRemaining = 1,
useUnconscious = true,
unconsciousTime = 4,
}
end)
quest.setScript( 2793, "OnUnconscious", function(args)
changeCreature {
tcid = 8004,
behaviour = "JOB_QUESTSTAGING",
bubble = 1,
action = "ACTION_KNEE",
emotion = "ANIM_TYPE_KNEE-IDLE",
role = "ROLE_DIALOG",
livesRemaining = 0,
faction = "FACTION_FRIEND_HERO_ALL",
clearUnconscious = true,
delay = 0.01,
behaviour = "questCreatures",
}
end)
quest.setScript( 2795, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8002,
livesRemaining = 1,
useUnconscious = true,
unconsciousTime = 2,
}
end)
quest.setScript( 2795, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 8002,
role = "ROLE_DIALOG",
behaviour = "questCreatures",
livesRemaining = 0,
clearUnconscious = true,
}
end)
quest.setScript( 2799, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8002,
livesRemaining = 1,
useUnconscious = true,
unconsciousTime = 2,
}
end)
quest.setScript( 2799, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 8002,
role = "ROLE_DIALOG",
behaviour = "questCreatures",
livesRemaining = 0,
clearUnconscious = true,
}
end)
quest.setScript( 2800, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8002,
mortality = "MORTAL",
}
end)
quest.setScript( 3055, "OnTaskAwaiting", function(args)
local tcids = {8527,8528,8529,8530,8531,8532,8533,8534}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_SPPL_RISE",
}
end
end)
quest.setScript( 3058, "OnSetup", function(args)
changeCreature {
tcid = 8535,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 3,
}
end)
quest.setScript( 3058, "OnTaskAwaiting", function(args)
local tcids = {8535}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_SPPL_RISE",
}
end
end)
quest.setScript( 3058, "OnUnconscious", function(args)
changeCreature {
tcid = 8535,
clearUnconscious = true,
livesRemaining = 0,
clearAutoTeleporting = true,
}
end)
quest.setScript( 3062, "OnTaskAwaiting", function(args)
local tcids = {8539,8540,8541,8542,9345,9346,9347,9348}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_SPPL_RISE",
}
end
end)
quest.setScript( 2934, "OnSetup", function(args)
changeCreature{
tcid = 8289,
dont_turn = true,
delay = 0,
clearAutoTeleporting = true,
}
end)
quest.setScript( 2935, "OnTaskAwaiting", function(args)
addToGroup (8289,0)
changeCreature{
tcid = 8289,
behaviour = "CM_Begleiter_feige",
faction = "FACTION_DESERTHU_GUARDS",
mortal = "MORTAL",
}
end)
quest.setScript( 2935, "OnTaskNotFulfilled", function(args)
addBookEntry(2981,"QUEST_LOST")
end)
quest.setScript( 2935, "OnWon", function(args)
solveQuest(2981)
removeFromGroup (8289,0)
changeCreature {
tcid = 8289,
faction = "FACTION_INVALID",
behaviour = "questCreatures",
role = "ROLE_DIALOG",
}
end)
quest.setScript( 2981, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 8289,
role = "ROLE_VICTIM"
}
end)
quest.setScript( 2984, "OnTaskAwaiting", function(args)
creatureGotoPos (8289,"29;13;0;850.000000;1400.000000;0.000000;-30.000000",false,false,"questCreatures",0)
CM_CreatureAway(8289, 5)
end)
quest.setScript( 2984, "OnWon", function(args)
changeCreature {
tcid = 8288,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM28",
loopCount = 1,
}
changeCreature {
tcid = 8288,
behaviour = "questCreatures",
delay = 3,
}
end)
quest.setScript( 2983, "OnWon", function(args)
changeCreature {
tcid = 8288,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM27",
loopCount = 1,
}
changeCreature {
tcid = 8288,
behaviour = "questCreatures",
delay = 3,
}
end)
quest.setScript( 1580, "OnStateChange", function(args)
if args.state == "WON" then
teleport {
tcid = 4240,
position = {sx=35,sy=36,sz=0,px=1650,py=150,pz=1306}
}
end
end)
quest.setScript( 3239, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 9155,
clearAutoTeleporting = true,
role = "ROLE_DIALOG",
}
end)
quest.setScript( 3239, "OnWon", function(args)
creatureGotoPos (9155, {14,11,-1,2500.000,1050.000,0.000,270.000}, 270, 1, "defaultBehaviour", 5)
end)
quest.setScript( 3221, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 9111,
mortality = "IMMORTAL",
clearAutoTeleporting = true,
}
end)
quest.setScript( 3221, "OnWon", function(args)
creatureGotoPos (9111, {sx=13, sy=5, sz=0, px=1892.871094, py=1259.041016, pz=42.565796, orientation=177.027298},false,1)
doEmote(9111, "ANIM_TYPE_EM10" , -1 , 3)
end)
quest.setScript( 3442, "OnDeath", function(args)
if args.tcid == 9092 then
tc_9092_dead = true
removeFromGroup {
tcid = 9092,
delay = 0,
}
destroyCreature {
tcid = 9092,
delay = 5,
}
end
if args.tcid == 9093 then
tc_9093_dead = true
removeFromGroup {
tcid = 9093,
delay = 0,
}
destroyCreature {
tcid = 9093,
delay = 5,
}
end
if args.tcid == 9095 then
tc_9095_dead = true
removeFromGroup {
tcid = 9095,
delay = 0,
}
destroyCreature {
tcid = 9095,
delay = 5,
}
end
if args.tcid == 9096 then
tc_9096_dead = true
removeFromGroup {
tcid = 9096,
delay = 0,
}
destroyCreature {
tcid = 9096,
delay = 5,
}
end
end)
quest.setScript( 3442, "OnTaskAwaiting", function(args)
tc_9092_dead = false
changeCreature{
tcid = 9092,
role = "ROLE_VICTIM",
mortality = "IMMORTAL",
clearAutoTeleporting = true,
}
tc_9093_dead = false
changeCreature{
tcid = 9093,
role = "ROLE_VICTIM",
mortality = "IMMORTAL",
}
tc_9095_dead = false
changeCreature{
tcid = 9095,
role = "ROLE_VICTIM",
mortality = "MORTAL",
}
tc_9096_dead = false
changeCreature{
tcid = 9096,
role = "ROLE_VICTIM",
mortality = "MORTAL",
}
end)
quest.setScript( 3216, "OnStation", function(args)
local pos = {
{sx=16, sy=10, sz=0, px=529.199219, py=1974.101563, pz=48.062920, orientation=56.209106},
{sx=15, sy=11, sz=0, px=1076.351563, py=983.050781, pz=7.456699, orientation=191.114014},
{sx=15, sy=12, sz=0, px=1.699219, py=1143.250000, pz=20.369135, orientation=73.560760},
{sx=15, sy=13, sz=0, px=562.551025, py=1508.400024, pz=-4.396520, orientation=97.00000},
}
if args.state == "TASK_AWAITING" then
creatureGotoPos(9092, pos[args.currentStation+1],false,2,"questCreatures")
doEmote(9092, "ANIM_TYPE_EM20", 1, 3)
if args.currentStation ~= 3 then
changeCreature{
tcid = 9092,
behaviour = "CM_Begleiter_feige",
delay = 5,
}
end
end
end)
quest.setScript( 3219, "OnTaskFulfilled", function(args)
solveQuest(3442)
if tc_9092_dead == false then
removeFromGroup {
tcid = 9092,
delay = 0,
}
changeCreature {
tcid = 9092,
behaviour = "questCreatures",
}
creatureGotoPos(9092, { 12,14,0 , 2650.000,2050.000,0.000 , -120.000 }, -120, 1, "questCreatures", 1)
end
if tc_9093_dead == false then
removeFromGroup {
tcid = 9093,
delay = 0,
}
changeCreature {
tcid = 9093,
behaviour = "questCreatures",
}
creatureGotoPos(9093, { 12,14,0 , 2500.000,2000.000,0.000 , 160.000 }, 160, 1, "questCreatures", 1)
end
if tc_9095_dead == false then
removeFromGroup {
tcid = 9095,
delay = 0,
}
changeCreature {
tcid = 9095,
behaviour = "questCreatures",
}
creatureGotoPos(9095, { 12,14,0 , 2650.000,2150.000,0.000 , -30.000 }, -30, 1, "questCreatures", 1)
end
if tc_9096_dead == false then
removeFromGroup {
tcid = 9096,
delay = 0,
}
changeCreature {
tcid = 9096,
behaviour = "questCreatures",
}
creatureGotoPos(9096, { 12,14,0 , 2550.000,2150.000,0.000 , 0.000 }, 0, 1, "questCreatures", 1)
end
tc_9092_dead = nil
tc_9093_dead = nil
tc_9095_dead = nil
tc_9096_dead = nil
end)
quest.setScript( 1463, "OnWon", function(args)
changeCreature {
tcid = 3881,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM32",
loopCount = 1,
}
changeCreature {
tcid = 3881,
behaviour = "questCreatures",
delay = 4
}
end)
quest.setScript( 263, "OnTaskFulfilled", function(args)
solveQuest(3386)
end)
quest.setScript( 263, "OnWon", function(args)
changeCreature {
tcid = 944,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=26,sy=33,sz=0,px=2912.100,py=2387.450,pz=321.650},
followUpBhv = "JOB_MERCENARY",
mortality = "IMMORTAL",
}
changeCreature {
tcid = 946,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=26,sy=33,sz=0,px=2767.650,py=2397.400,pz=331.350},
followUpBhv = "JOB_MERCENARY",
mortality = "IMMORTAL",
}
changeCreature {
tcid = 947,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=26,sy=33,sz=0,px=2888.200,py=2446.950,pz=332.450},
followUpBhv = "JOB_MERCENARY",
mortality = "IMMORTAL",
}
end)
quest.setScript( 3386, "OnTaskAwaiting", function(args)
local tcids = {944,946,947}
for index,id in ipairs(tcids) do
changeCreature {
tcid = id,
role = "ROLE_VICTIM"
}
end
end)
quest.setScript( 271, "OnTaskAwaiting", function(args)
local tcids = {966,967,968}
for index,id in ipairs(tcids) do
changeCreature {
tcid = id,
role = "ROLE_VICTIM"
}
end
end)
quest.setScript( 271, "OnWon", function(args)
changeCreature {
tcid = 966,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=26,sy=33,sz=0,px=2839.875,py=2392.425,pz=326.500},
followUpBhv = "JOB_MERCENARY",
mortality = "IMMORTAL",
}
changeCreature {
tcid = 967,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=26,sy=33,sz=0,px=2827.925,py=2422.175,pz=331.900},
followUpBhv = "JOB_MERCENARY",
mortality = "IMMORTAL",
}
changeCreature {
tcid = 968,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=26,sy=33,sz=0,px=2900.150,py=2417.200,pz=327.050},
followUpBhv = "JOB_MERCENARY",
mortality = "IMMORTAL",
}
end)
quest.setScript( 3329, "OnWon", function(args)
solveQuest(271)
end)
quest.setScript( 260, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
changeCreature {
tcid = 885,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
dont_turn = true,
faction = "FACTION_FRIEND_HERO_ALL",
}
end
end)
quest.setScript( 260, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.id == 885 then
changeCreature {
tcid = 885,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
dont_turn = true,
faction = "FACTION_FRIEND_HERO_ALL",
}
end
end)
quest.setScript( 260, "OnWon", function(args)
changeCreature {
tcid = 885,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM22",
loopCount = -1,
dont_turn = true,
role = "ROLE_INVALID",
mortality = "MORTAL",
}
killCreature {
tcid = 885,
delay = 2,
}
end)
quest.setScript( 266, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
changeCreature {
tcid = 945,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
dont_turn = true,
faction = "FACTION_FRIEND_HERO_ALL",
}
end
end)
quest.setScript( 266, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" then
changeCreature {
tcid = 945,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
dont_turn = true,
faction = "FACTION_FRIEND_HERO_ALL",
}
end
end)
quest.setScript( 3047, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 8508,
mortality="IMMORTAL"
}
changeCreature{
tcid = 8507,
mortality="MORTAL",
clearAutoTeleporting = true,
}
end)
quest.setScript( 3047, "OnWon", function(args)
creatureGotoPos (8507, {33,16,0,2000.000,1900.000,0.000,0.000}, false, 1, "questCreatures", 1)
creatureGotoPos (8508, {33,16,0,2050.000,1900.000,0.000,0.000}, 180, 1, "questCreatures", 1)
end)
quest.setScript( 3049, "OnWon", function(args)
changeCreature {
tcid = 8507,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
changeCreature {
tcid = 8507,
behaviour = "questCreatures",
delay = 4,
}
end)
quest.setScript( 3051, "OnWon", function(args)
changeCreature {
tcid = 8510,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM01",
loopCount = 2,
}
changeCreature {
tcid = 8510,
behaviour = "questCreatures",
delay = 3,
}
end)
quest.setScript( 2635, "OnWon", function(args)
changeCreature {
tcid = 7576,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM11",
loopCount = 1,
}
changeCreature {
tcid = 7576,
behaviour = "questCreatures",
delay = 2
}
creatureTeleportsAway (7576,30)
end)
quest.setScript( 3122, "OnWon", function(args)
local droppers = {8764,8765,8766,8768,8769,8770,8771,8772,8773}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 3056, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8512,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
}
end)
quest.setScript( 3056, "OnTaskFulfilled", function(args)
creatureGotoPos (8512,{sx=38, sy=21, sz=0, px=1894.949951, py=816.351990, pz=-106.716003})
end)
quest.setScript( 3056, "OnUnconscious", function(args)
if args.tcid == 8512 then
changeCreature {
tcid = 8512,
clearUnconscious = true,
clearAutoTeleporting = true,
mortality = "IMMORTAL",
role = "ROLE_DIALOG",
}
end
end)
quest.setScript( 3061, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8515,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
}
end)
quest.setScript( 3061, "OnTaskFulfilled", function(args)
creatureGotoPos (8515,{sx=38, sy=21, sz=0, px=1894.949951, py=816.351990, pz=-106.716003})
end)
quest.setScript( 3061, "OnUnconscious", function(args)
if args.tcid == 8515 then
changeCreature {
tcid = 8515,
clearUnconscious = true,
clearAutoTeleporting = true,
mortality = "IMMORTAL",
delay = 1,
role = "ROLE_DIALOG",
}
end
end)
quest.setScript( 3100, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8518,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
}
end)
quest.setScript( 3100, "OnTaskFulfilled", function(args)
creatureGotoPos (8518,{sx=38, sy=21, sz=0, px=2086.889893, py=1109.819946, pz=-104.789001, orientation=43.000000})
end)
quest.setScript( 3100, "OnUnconscious", function(args)
if args.tcid == 8518 then
changeCreature {
tcid = 8518,
clearUnconscious = true,
clearAutoTeleporting = true,
mortality = "IMMORTAL",
delay = 1,
role = "ROLE_DIALOG",
}
end
end)
quest.setScript( 3220, "OnWon", function(args)
changeCreature {
tcid = 8075,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM01",
loopCount = 2,
}
changeCreature {
tcid = 8075,
behaviour = "questCreatures",
delay = 3,
}
end)
quest.setScript( 2844, "OnTalk", function(args)
if args.tcid == 8129 then
changeCreature{
tcid = 8133,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=38, sy=23, sz=0, px=850.000000, py=800.000000, pz=74.000000},
speed = 2,
delay = 0.1,
followUpBhv = "questCreatures",
}
end
end)
quest.setScript( 2870, "OnLost", function(args)
local attackers = {8236}
CM_AttackerAway (attackers,60)
changeCreature{
tcid = 8122,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
faction = "FACTION_FRIEND_HERO_ALL",
clearAutoTeleporting = true,
dont_turn = true,
clearUnconscious = true,
livesRemaining = 0,
delay = 1,
mortality = "IMMORTAL",
role = "ROLE_INVALID",
}
end)
quest.setScript( 2870, "OnSetup", function(args)
changeCreature {
tcid = 8122,
useUnconscious = true,
clearAutoTeleporting = true,
livesRemaining = 1,
unconsciousTime = 1,
role = "ROLE_VICTIM",
}
end)
quest.setScript( 2870, "OnWon", function(args)
local attackers = {8236}
CM_AttackerAway (attackers,1)
end)
quest.setScript( 2871, "OnWon", function(args)
killCreature {
tcid = 8236,
delay = 0,
deinitragdoll = false,
}
end)
quest.setScript( 2874, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 8122 then
changeCreature {
tcid = 8122,
role = "ROLE_VICTIM",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
clearAutoTeleporting = true,
dont_turn = true,
}
end
end)
quest.setScript( 2874, "OnWon", function(args)
changeCreature {
tcid = 8122,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM22",
role = "ROLE_INVALID",
mortality = "MORTAL",
}
killCreature {
tcid = 8122,
deinitragdoll = false,
delay = 2,
}
end)
quest.setScript( 3067, "OnDeath", function(args)
if args.tcid == 8065 then
looseQuest(3067)
end
end)
quest.setScript( 3067, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8065,
mortality = "IMMORTAL",
role = "ROLE_VICTIM",
}
end)
quest.setScript( 3069, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "QUEST_3065_GIVER_DECLINE","QUEST_3065_GIVER_ACCEPT"
end
end)
quest.setScript( 3070, "OnTaskAwaiting", function(args)
local robber = {
{
tcid = 8554,
fub = "Enemy_warrior_brave_ex",
pos = {sx=39, sy=23, sz=0, px=2715.750000, py=2300.648438, pz=39.713699, orientation=225.629593},
},
{
tcid = 8555,
fub = "Enemy_warrior_brave_ex",
pos = {sx=39, sy=23, sz=0, px=2727.320313, py=2643.593750, pz=50.103172, orientation=302.228760},
},
{
tcid = 8556,
fub = "Enemy_hunter",
pos = {sx=39, sy=23, sz=0, px=2471.640625, py=2695.320313, pz=39.881748, orientation=23.666138},
},
{
tcid = 8557,
fub = "Enemy_warrior_brave_ex",
pos = {sx=39, sy=23, sz=0, px=2297.453125, py=2419.250000, pz=39.881630, orientation=101.179199},
}
}
for id,object in ipairs(robber) do
changeCreature {
tcid = object.tcid,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = object.pos,
speed = 2,
followUpBhv = object.fub,
faction = "FACTION_ENEMY_HERO",
role = "ROLE_ATTACKER",
}
end
changeCreature {
tcid = 8554,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
}
changeCreature {
tcid = 8065,
mortality = "MORTAL",
}
end)
quest.setScript( 3070, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 8065,
mortality = "IMMORTAL",
}
changeCreature {
tcid = 8554,
mortality = "IMMORTAL",
faction = "FACTION_FRIEND_HERO_ALL",
role = "ROLE_DIALOG",
behaviour = "questCreatures",
delay = 1,
}
end)
quest.setScript( 3070, "OnUnconscious", function(args)
if args.tcid == 8554 then
changeCreature {
tcid = 8554,
clearAutoTeleporting = true,
clearUnconscious = true,
mortality = "IMMORTAL",
faction = "FACTION_FRIEND_HERO_ALL",
role = "ROLE_DIALOG",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
dont_turn = true,
}
end
end)
quest.setScript( 3070, "OnWon", function(args)
CM_CreatureAway(8554,0)
end)
quest.setScript( 3072, "OnPrecondsFulfilled", function(args)
solveQuest(3067)
end)
quest.setScript( 3072, "OnTaskAwaiting", function(args)
creatureGotoPos (8065, "39;23;0;2477.400;2456.750;40;180", false, 1, "JOB_QUESTSTAGING", 5)
creatureGotoPos (8065, "38;23;0;1044.400;1555;40;0", false, 2, "JOB_QUESTSTAGING", 15)
creatureGotoPos (8065, "37;23;0;1692.352;1812.398;26.144;45", false, 2, "JOB_QUESTSTAGING", 60)
creatureGotoPos (8065, "37;23;0;1017.648438;2829.453125;7.313374;101.808502", false, 1, "JOB_RICH_STATIST", 90)
end)
quest.setScript( 3007, "OnSetup", function(args)
changeCreature {
tcid = 9005,
mortality = "IMMORTAL",
clearAutoTeleporting = true,
}
destroyCreature {
tcid = 8024,
splatter = false,
delay = 1,
}
end)
quest.setScript( 3165, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8094,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
}
end)
quest.setScript( 3165, "OnTaskFulfilled", function(args)
creatureGotoPos (8094,{sx=38, sy=21, sz=0, px=1889.010010, py=737.656006, pz=-105.801003})
end)
quest.setScript( 3165, "OnUnconscious", function(args)
if args.tcid == 8094 then
changeCreature {
tcid = 8094,
clearUnconscious = true,
clearAutoTeleporting = true,
mortality = "IMMORTAL",
role = "ROLE_DIALOG",
}
end
end)
quest.setScript( 3166, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8512,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
}
end)
quest.setScript( 3166, "OnTaskFulfilled", function(args)
creatureGotoPos (8512,{sx=38, sy=21, sz=0, px=1894.949951, py=816.351990, pz=-106.716003})
end)
quest.setScript( 3166, "OnUnconscious", function(args)
if args.tcid == 8512 then
changeCreature {
tcid = 8512,
clearUnconscious = true,
clearAutoTeleporting = true,
mortality = "IMMORTAL",
role = "ROLE_DIALOG",
}
end
end)
quest.setScript( 3167, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8513,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
}
end)
quest.setScript( 3167, "OnTaskFulfilled", function(args)
creatureGotoPos (8513,{sx=38, sy=21, sz=0, px=1929.949951, py=895.546997, pz=-106.709000})
end)
quest.setScript( 3167, "OnUnconscious", function(args)
if args.tcid == 8513 then
changeCreature {
tcid = 8513,
clearUnconscious = true,
clearAutoTeleporting = true,
mortality = "IMMORTAL",
role = "ROLE_DIALOG",
}
end
end)
quest.setScript( 3168, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8514,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
}
end)
quest.setScript( 3168, "OnTaskFulfilled", function(args)
creatureGotoPos (8514,{sx=38, sy=21, sz=0, px=1947.099976, py=971.203003, pz=-106.709000})
end)
quest.setScript( 3168, "OnUnconscious", function(args)
if args.tcid == 8514 then
changeCreature {
tcid = 8514,
clearUnconscious = true,
clearAutoTeleporting = true,
mortality = "IMMORTAL",
role = "ROLE_DIALOG",
}
end
end)
quest.setScript( 3169, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8515,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
}
end)
quest.setScript( 3169, "OnTaskFulfilled", function(args)
creatureGotoPos (8515,{sx=38, sy=21, sz=0, px=1991.349976, py=1022.200012, pz=-106.709000})
end)
quest.setScript( 3169, "OnUnconscious", function(args)
if args.tcid == 8515 then
changeCreature {
tcid = 8515,
clearUnconscious = true,
clearAutoTeleporting = true,
mortality = "IMMORTAL",
role = "ROLE_DIALOG",
}
end
end)
quest.setScript( 3170, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8517,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
}
end)
quest.setScript( 3170, "OnTaskFulfilled", function(args)
creatureGotoPos (8517,{sx=38, sy=21, sz=0, px=2030.000000, py=1080.300049, pz=-106.707001})
end)
quest.setScript( 3170, "OnUnconscious", function(args)
if args.tcid == 8517 then
changeCreature {
tcid = 8517,
clearUnconscious = true,
clearAutoTeleporting = true,
mortality = "IMMORTAL",
role = "ROLE_DIALOG",
}
end
end)
quest.setScript( 3171, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8518,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
}
end)
quest.setScript( 3171, "OnTaskFulfilled", function(args)
creatureGotoPos (8518,{sx=38, sy=21, sz=0, px=2086.889893, py=1109.819946, pz=-104.789001})
end)
quest.setScript( 3171, "OnUnconscious", function(args)
if args.tcid == 8518 then
changeCreature {
tcid = 8518,
clearUnconscious = true,
clearAutoTeleporting = true,
mortality = "IMMORTAL",
role = "ROLE_DIALOG",
}
end
end)
quest.setScript( 3172, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9005,
mortality = "IMMORTAL",
}
end)
quest.setScript( 3172, "OnWon", function(args)
creatureTeleportsAway (8075,1)
end)
quest.setScript( 3185, "OnWon", function(args)
changeCreature {
tcid = 8003,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICA",
loopCount = 2,
delay = 0.01,
}
end)
quest.setScript( 3188, "OnWon", function(args)
changeCreature {
tcid = 8949,
mortality = "IMMORTAL",
}
end)
quest.setScript( 3204, "OnWon", function(args)
local guards = {8940,8941,9001,9002}
for index,id in ipairs(guards) do
removeFromGroup {
tcid = id,
}
end
local verhaftung = {8940,8941,9001,9002,8949,9005}
for index,id in ipairs(verhaftung) do
creatureGotoPos (id,{sx=38, sy=22, sz=0, px=2300, py=2800, pz=0.000000})
CM_CreatureAway (id,25,nil)
end
end)
quest.setScript( 3004, "OnLost", function(args)
changeCreature {
tcid = 8366,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM25",
loopCount = 1,
}
changeCreature {
tcid = 8366,
behaviour = "questCreatures",
delay = 5,
}
end)
quest.setScript( 3004, "OnWon", function(args)
changeCreature {
tcid = 8366,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM01",
loopCount = 1,
}
changeCreature {
tcid = 8366,
behaviour = "questCreatures",
delay = 3,
}
end)
quest.setScript( 3005, "OnWon", function(args)
changeCreature {
tcid = 8365,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM28",
loopCount = 1,
}
changeCreature {
tcid = 8365,
behaviour = "questCreatures",
delay = 3,
}
end)
quest.setScript( 3012, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 8364,
mortality = "IMMORTAL",
}
end)
quest.setScript( 3012, "OnWon", function(args)
changeCreature {
tcid = 8435,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM26",
loopCount = 1,
}
changeCreature {
tcid = 8364,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM08",
loopCount = 1,
}
changeCreature {
tcid = 8364,
behaviour = "questCreatures",
delay = 4,
}
changeCreature {
tcid = 8435,
behaviour = "questCreatures",
delay = 5,
}
CM_CreatureAway (8364,60)
CM_CreatureAway (8435,60)
end)
quest.setScript( 1007, "OnWon", function(args)
creatureGotoPos (2879, { 34,39,0 , 1070,700,0 , 30 }, false, 2, "questCreatures",1)
end)
quest.setScript( 3234, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 2881,
role = "ROLE_ATTACKER",
}
creatureGotoPos (2882, { 34,38,0 , 2330.000,2780.000,266.000, 180.000 }, false, 2, "questCreatures",1)
end)
quest.setScript( 3234, "OnWon", function(args)
creatureGotoPos (2882, { 35,38,0 , 315.852,1990.898,294.206, 8.000 }, false, 2, "questCreatures",1)
creatureGotoPos (2882, { 34,37,0 , 2059.450,3136.400,202.868, 8.000 }, false, 1, "questCreatures",16)
end)
quest.setScript( 3640, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 2879,
role = "ROLE_ATTACKER",
}
end)
quest.setScript( 1009, "OnTaskAwaiting", function(args)
creatureGotoPos (2879, { 34,38,0 , 2070.000,170.000,230.000,45.000 }, false, 1, "questCreatures",1)
end)
quest.setScript( 3835, "OnWon", function(args)
addGold(-150)
questMessage {
lokaid = "QUEST_3835_GOLD",
color = "#ffff11",
line = 2,
duration = 4.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end)
quest.setScript( 3836, "OnWon", function(args)
local pos = getPos{heroRef = args.heroRef}
createEffect {
effect = "FXTYPE_GEN_SPAWN1",
position = pos,
}
end)
quest.setScript( 3571, "OnSetup", function(args)
if nil then
local woids = {1053132824,1053132871}
for index,woid in ipairs(woids) do
setWoobState {
woid = woid,
state = "WOOB_INVISIBLE",
}
end
end
end)
quest.setScript( 3571, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9837,
role = "ROLE_VICTIM",
mortality = "IMMORTAL",
}
end)
quest.setScript( 3571, "OnWon", function(args)
changeCreature {
tcid = 10176,
behaviour = "JOB_QUESTSTAGING",
faction = "FACTIO_FRIEND_HERO_ALL",
emotion = "ANIM_TYPE_SM23",
loopCount = -1,
}
end)
quest.setScript( 3573, "OnTalk", function(args)
if args.state == "TASK_AWAITING" then
changeCreature {
tcid = 9838,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 3573, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9838,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
delay = 1,
}
end)
quest.setScript( 3573, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 9838,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM23",
loopCount = -1,
role = "ROLE_INVALID",
}
end)
quest.setScript( 3575, "OnWon", function(args)
creatureTeleportsAway(9837,90)
end)
quest.setScript( 3576, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 9842 then
local tcids = {9842,9843,9844,9845}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "questCreatures",
}
end
end
end)
quest.setScript( 3576, "OnTaskAwaiting", function(args)
local delay = 0.4
local tcids = {9843,9844,9845}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_PUT-HERBS",
delay = delay+0.7,
extraMode = 2,
extra = {
"ANIM_TYPE_PUT-HERBS",
"ANIM_TYPE_PICK-IN-POCKET",
"ANIM_TYPE_PICK-UP-ITEM",
},
}
end
end)
quest.setScript( 3579, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "QUEST_3579_GIVER_ACCEPT","QUEST_3579_GIVER_DECLINE"
end
end)
quest.setScript( 3581, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9842,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=57, sy=3, sz=0, px=2784.406250, py=296.000000, pz=528.275330, orientation=284.120453},
followUpBhv = "questCreatures",
speed = 2,
}
creatureTeleportsAway(9842,15)
end)
quest.setScript( 3584, "OnTaskAwaiting", function(args)
setTimer {
id = 3584,
interval = 1,
count = 5,
}
end)
quest.setScript( 3584, "OnTimer", function(args)
if args.count == 5 then
local tcids = {9847,9848,9849}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_ATTACKA",
effect = "FXTYPE_HE_ENERGIEBLITZ",
effectParam = {
paramtype = "position",
position = {sx=57, sy=4, sz=0, px=1053.420044, py=2462.659912, pz=792.382996, orientation=151.000000},
duration = 1.8,
},
loopCount = 1,
}
end
end
if args.count == 3 then
changeCreature {
tcid = 9850,
mortality = "MORTAL",
}
killCreature {
tcid = 9850,
}
end
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 3587, "OnTaskAwaiting", function(args)
local enemies = {9847,9848,9849,9853,9854,9856,9857,9858,9859,9863}
for index,tcid in ipairs(enemies) do
changeCreature {
tcid = tcid,
behaviour = "Enemy_mage",
faction = "FACTION_ENEMY_HERO",
mortality = "MORTAL",
}
end
end)
quest.setScript( 3594, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "QUEST_3594_GIVER_ACCEPT"
end
end)
quest.setScript( 3594, "OnPrecondsFulfilled", function(args)
teleport {
tcid = 9903,
position = {sx=55, sy=6, sz=0, px=1548.800049, py=320.350006, pz=720.171997, orientation=0.000000},
}
end)
quest.setScript( 3594, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 9903,
mortality = "IMMORTAL",
}
end)
quest.setScript( 3600, "OnTaskAwaiting", function(args)
local tcids = {9919,10320,10323,10325}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_SPAWN1",
delay = 0.2,
}
end
end)
quest.setScript( 3602, "OnTaskAwaiting", function(args)
local tcids = {9920,10327,10328,10329,10331,10332}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_SPAWN1",
delay = 0.2,
}
end
end)
quest.setScript( 3604, "OnTaskAwaiting", function(args)
local tcids = {9921,10334,10335,10337,10338,10340,10341}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_SPAWN1",
delay = 0.2,
}
end
end)
quest.setScript( 3604, "OnWon", function(args)
if getQuestState(3601) ~= "LOST" then
solveQuest(3601)
end
end)
quest.setScript( 3605, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 9903 then
changeCreature {
tcid = 9903,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_LAYGROUND-UP",
loopCount = 1,
}
changeCreature {
tcid = 9903,
behaviour = "questCreatures",
delay = 4,
}
end
end)
quest.setScript( 3601, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9903,
role = "ROLE_VICTIM",
mortality = "MORTAL",
useUnconscious = true,
unconsciousTime = 1,
livesRemaining = -1,
behaviour = "CM_Begleiter_tapfer",
faction = "FACTION_HIGHELVE_GUARD"
}
end)
quest.setScript( 3601, "OnUnconscious", function(args)
if args.tcid == 9903 then
teleport {
tcid = 9903,
position = {sx=47, sy=4, sz=0, px=1850.000000, py=1150.000000, pz=50.000000, orientation=0.000000},
orientation = 0,
}
changeCreature {
tcid = 9903,
role = "ROLE_INVALID",
mortality = "IMMORTAL",
clearUnconscious = true,
livesRemaining = 0,
behaviour = "JOB_QUESTSTAGING",
faction = "FACTION_FRIEND_HERO_ALL",
emotion = "ANIM_TYPE_SM23",
loopCount = -1,
clearAutoTeleporting = true,
delay = 1,
}
end
end)
quest.setScript( 3607, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "QUEST_3607_GIVER_OK"
end
end)
quest.setScript( 3607, "OnWon", function(args)
changeCreature {
tcid = 9903,
behaviour = "JOB_QUESTSTAGING",
mortality = "IMMORTAL",
gotoPosition = {sx=55, sy=9, sz=0, px=1236.890625, py=2901.683594, pz=719.263184, orientation=121.624313},
followUpBhv = "questCreatures",
speed = 2,
}
changeCreature {
tcid = 9903,
visible = false,
delay = 45,
}
end)
quest.setScript( 3609, "OnTaskAwaiting", function(args)
setWoobEffect { effect = "FTYPE_MAGICLIGHT", woid = 1050703067 }
setWoobEffect { effect = "FTYPE_MAGICLIGHT", woid = 1050703089 }
setWoobEffect { effect = "FTYPE_MAGICLIGHT", woid = 1050703098 }
setWoobEffect { effect = "FTYPE_MAGICLIGHT", woid = 1050703107 }
end)
quest.setScript( 3610, "OnTaskAwaiting", function(args)
if getQuestState(3579) == "LOST" then
teleport {
tcid = 9842,
position = {sx=54, sy=12, sz=0, px=785.171997, py=1231.739990, pz=463.266998, orientation=126.000000},
}
changeCreature {
tcid = 9842,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
destroyCreature {
tcid = 9929,
splatter = false,
delay = 1,
}
end
if getQuestState(3579) == "WON" then
teleport {
tcid = 9929,
position = {sx=54, sy=12, sz=0, px=785.171997, py=1231.739990, pz=463.266998, orientation=126.000000},
}
changeCreature {
tcid = 9929,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end
end)
quest.setScript( 3611, "OnWon", function(args)
changeCreature {
tcid = 9842,
mortality = "MORTAL",
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM22",
loopCount = 1,
}
killCreature {
tcid = 9842,
delay = 2,
}
end)
quest.setScript( 3612, "OnWon", function(args)
changeCreature {
tcid = 9929,
mortality = "MORTAL",
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM22",
loopCount = 1,
}
killCreature {
tcid = 9929,
delay = 2,
}
end)
quest.setScript( 3613, "OnTaskFulfilled", function(args)
setWoobEffect {
woid = 1050703089,
effect = "FXTYPE_INVALID",
}
end)
quest.setScript( 3616, "OnTaskFulfilled", function(args)
setWoobEffect {
woid = 1050703107,
effect = "FXTYPE_INVALID",
}
end)
quest.setScript( 3617, "OnTaskFulfilled", function(args)
setWoobEffect {
woid = 1050703067,
effect = "FXTYPE_INVALID",
}
end)
quest.setScript( 3618, "OnTaskFulfilled", function(args)
setWoobEffect {
woid = 1050703098,
effect = "FXTYPE_INVALID",
}
local woids = {1052258793,1052258804,1052258816}
for index,woid in ipairs(woids) do
setWoobState {
woid = woid,
state = "WOOB_DOOR_UNLOCKED",
}
end
end)
quest.setScript( 3620, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 9903,
visible = true,
}
end)
quest.setScript( 3622, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 9949,
visible = false,
}
end)
quest.setScript( 3623, "OnWon", function(args)
changeCreature {
tcid = 9946,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_RAISE-HANDS",
loopCount = 1,
}
changeCreature {
tcid = 9949,
visible = true,
effect = "FXTYPE_SUMMON",
}
changeCreature {
tcid = 9946,
behaviour = "questCreatures",
delay = 3,
}
end)
quest.setScript( 3625, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9949,
behaviour = "Enemy_warrior_brave_ex",
faction = "FACTION_ENEMY_HERO",
}
end)
quest.setScript( 3626, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9903,
clearUnconscious = true,
livesRemaining = 0,
}
end)
quest.setScript( 3626, "OnWon", function(args)
creatureTeleportsAway(9946,0)
end)
quest.setScript( 3638, "OnTaskAwaiting", function(args)
solveQuest(3638)
end)
quest.setScript( 3639, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9968,
behaviour = "JOB_TRADER",
faction = "FACTION_FRIEND_HERO_ALL",
merchantType = "MERCHANT_COMBOMASTER",
role = "ROLE_INVALID",
}
end)
quest.setScript( 3639, "OnWon", function(args)
changeCreature {
tcid = 9969,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
gotoPosition = {sx=57, sy=11, sz=0, px=1883.156250, py=3135.851563, pz=547.215637, orientation=150.325943},
followUpBhv = "questCreatures",
}
end)
quest.setScript( 3647, "OnTaskAwaiting", function(args)
local tcids = {9973,10406,10407,10408,10409,10410,10411,10412}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_SPAWN1",
delay = 0.2,
}
end
end)
quest.setScript( 3648, "OnTaskAwaiting", function(args)
local tcids = {9974,10413,10414,10415,10416,10417,10418,10419,10420}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_SPAWN1",
delay = 0.2,
}
end
end)
quest.setScript( 3649, "OnTaskAwaiting", function(args)
local tcids = {9975,10421,10422,10423,10424,10425,10426,10427,10428,10429,10430}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_SPAWN1",
delay = 0.2,
}
end
end)
quest.setScript( 3649, "OnTaskFulfilled", function(args)
questMessage {
lokaid = "QUEST_3649_TF_RITUAL",
color = "#F0F8FF",
line = 1,
duration = 4.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
setWaterType {
sx = 62,
sy = 14,
sz = -1,
waterType = 29,
}
end)
quest.setScript( 3650, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9971,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_RAISE-HANDS",
loopCount = 1,
}
changeCreature {
tcid = 9971,
behaviour = "questCreatures",
delay = 3,
}
end)
quest.setScript( 3651, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9969,
visible = false,
}
end)
quest.setScript( 3652, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 9969,
visible = true,
}
createEffect {
effect = "FXTYPE_SPPL_RISE",
position = {sx=56, sy=14, sz=0, px=3100.000000, py=450.000000, pz=876.321228, orientation=0.000000},
duration = 1.5,
delay = 0.1,
}
end)
quest.setScript( 3652, "OnTaskAwaiting", function(args)
creatureTeleportsAway(9969,0)
end)
quest.setScript( 3652, "OnTaskFulfilled", function(args)
local tcids = {9980,9981}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
visible = false,
}
end
end)
quest.setScript( 3655, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "QUEST_3655_GIVER_OK"
end
end)
quest.setScript( 3815, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 9980,
effect = "FXTYPE_SUMMON",
visible = true,
delay = 0.2,
}
changeCreature {
tcid = 9981,
effect = "FXTYPE_SUMMON",
visible = true,
delay = 0.2,
}
changeCreature {
tcid = 10237,
behaviour = "JOB_TRADER",
merchantType = "MERCHANT_CAPTAIN",
}
end)
quest.setScript( 3847, "OnTaskAwaiting", function(args)
local pos = getPos{tcid=9978}
destroyCreature {
tcid = 9978,
splatter = false,
}
teleport {
tcid = 10505,
position = pos,
orientation = pos.orientation,
}
end)
quest.setScript( 3847, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 9980,
effect = "FXTYPE_SUMMON",
visible = true,
delay = 0.2,
}
changeCreature {
tcid = 9981,
effect = "FXTYPE_SUMMON",
visible = true,
delay = 0.2,
}
changeCreature {
tcid = 10237,
behaviour = "JOB_TRADER",
merchantType = "MERCHANT_CAPTAIN",
}
end)
quest.setScript( 3656, "OnWon", function(args)
changeCreature {
tcid = 10237,
behaviour = "JOB_CAPTAIN",
merchantType = "MERCHANT_CAPTAIN",
}
local tcids = {9980,9981}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
mortality = "MORTAL",
}
destroyCreature {
tcid = tcid,
splatter = true,
}
end
local woids = {1053132824,1053132871}
for index,woid in ipairs(woids) do
setWoobState {
woid = woid,
state = "WOOB_GRAVE_CLOSE",
}
end
end)
quest.setScript( 3701, "OnPrecondsFulfilled", function(args)
local tcids = {10502,10503,10507}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM01",
loopCount = 1,
extraMode = 2,
extra = {
"ANIM_TYPE_IDLE",
"ANIM_TYPE_IDLE",
"ANIM_TYPE_IDLE",
"ANIM_TYPE_IDLE",
"ANIM_TYPE_IDLEA",
"ANIM_TYPE_IDLEB",
"ANIM_TYPE_SM01",
"ANIM_TYPE_SM02",
{sx=57, sy=12, sz=0, px=2387.250000, py=357.050781, pz=554.095703, orientation=153.434937},
{sx=57, sy=12, sz=0, px=2533.250000, py=223.648438, pz=554.049072, orientation=47.652100},
{sx=57, sy=12, sz=0, px=2667.156250, py=97.199219, pz=548.290833, orientation=46.496674},
{sx=57, sy=11, sz=0, px=2577.593750, py=3120.550781, pz=547.216064, orientation=34.592285},
{sx=57, sy=11, sz=0, px=2457.250000, py=3050.250000, pz=547.216125, orientation=299.820068},
{sx=57, sy=12, sz=0, px=2156.406250, py=217.148438, pz=554.095703, orientation=147.002304},
}
}
end
end)
quest.setScript( 3701, "OnWon", function(args)
changeCreature {
tcid = 10501,
behaviour = "questCreatures",
merchantType = "MERCHANT_PRIEST",
delay = 2,
}
changeCreature {
tcid = 10550,
behaviour = "questCreatures",
merchantType = "MERCHANT_HORSETRADER",
delay = 2,
}
end)
quest.setScript( 3679, "OnWon", function(args)
changeCreature {
tcid = 10016,
mortality = "IMMORTAL",
role = "ROLE_VICTIM",
delay = 1,
}
end)
quest.setScript( 3680, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 10016,
role = "ROLE_VICTIM",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=57, sy=11, sz=0, px=1563.593750, py=2797.148438, pz=547.561157, orientation=309.999329},
delay = 1,
followUpBhv = "questCreatures",
speed = 2,
extraMode = 0,
extra = {
{sx=57, sy=12, sz=0, px=1226.625000, py=124.925781, pz=517.713196, orientation=210.374664},
{sx=57, sy=12, sz=0, px=882.000000, py=430.550781, pz=447.119904, orientation=264.212769},
{sx=57, sy=12, sz=0, px=594.593750, py=239.800781, pz=542.911926, orientation=306.674347},
{sx=57, sy=11, sz=0, px=441.343750, py=3128.648438, pz=524.939209, orientation=295.175110},
}
}
teleport {
tcid = 10016,
position = {sx=57, sy=11, sz=0, px=441.343750, py=3128.648438, pz=524.939209, orientation=295.175110},
orientation = 295.175110,
delay = 40,
}
end)
quest.setScript( 3682, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 10016,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=0, sy=0, sz=-1, px=0, py=0, pz=0, orientation=0},
followUpBhv = "questCreatures",
mortality = "MORTAL",
delay = 1,
role = "ROLE_INVALID",
}
creatureTeleportsAway(10016,0)
destroyCreature {
tcid = 10016,
delay = 2,
}
solveQuest(3680)
end)
quest.setScript( 3686, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 10235,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM23",
loopCount = -1,
}
end)
quest.setScript( 3702, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 10038,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
clearAutoTeleporting = true,
}
end)
quest.setScript( 3703, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 10038,
mortality = "IMMORTAL",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
role = "ROLE_INVALID",
faction = "FACTION_FRIEND_HERO_ALL",
clearUnconscious = true,
livesRemaining = 0,
}
changeCreature {
tcid = 10038,
mortality = "MORTAL",
behaviour = "Enemy_warrior_brave",
role = "ROLE_ATTACKER",
faction = "FACTION_ENEMY_HERO",
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
delay = 3,
}
end)
quest.setScript( 3703, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 10038,
mortality = "IMMORTAL",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
role = "ROLE_INVALID",
faction = "FACTION_FRIEND_HERO_ALL",
clearUnconscious = true,
livesRemaining = 0,
}
changeCreature {
tcid = 10038,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=57, sy=11, sz=0, px=3066.796875, py=1626.617188, pz=515.528625, orientation=47.038025},
speed = 2,
followUpBhv = "questCreatures",
delay = 3,
}
creatureTeleportsAway(10038,12)
end)
quest.setScript( 3705, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" then
changeCreature {
tcid = 10039,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 3705, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 10039,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
clearAutoTeleporting = true,
}
end)
quest.setScript( 3705, "OnUnconscious", function(args)
if args.tcid == 10039 then
changeCreature {
tcid = 10039,
mortality = "IMMORTAL",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
role = "ROLE_INVALID",
faction = "FACTION_FRIEND_HERO_ALL",
}
end
end)
quest.setScript( 3705, "OnWon", function(args)
changeCreature {
tcid = 10039,
mortality = "MORTAL",
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM22",
loopCount = 1,
}
killCreature {
tcid = 10039,
delay = 3,
}
destroyCreature {
tcid = 10039,
splatter = false,
delay = 6,
}
end)
quest.setScript( 3707, "OnTaskAwaiting", function(args)
setTimer {
id = 3707,
interval = 1,
count = 32,
}
end)
quest.setScript( 3707, "OnTimer", function(args)
if args.count == 32 then
changeCreature {
tcid = 10002,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=57, sy=12, sz=0, px=529.906250, py=1096.199219, pz=454.611908, orientation=355.456238},
followUpBhv = "JOB_QUESTSTAGING",
followUpAngle = 355.456238,
speed = 2,
}
end
if args.count == 12 then
changeCreature {
tcid = 10002,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=0, sy=0, sz=-1, px=0, py=0, pz=0, orientation=0},
followUpBhv = "JOB_QUESTSTAGING",
followUpAngle = 355.456238,
}
teleport {
tcid = 10002,
position = {sx=57, sy=12, sz=0, px=529.906250, py=1096.199219, pz=454.611908, orientation=355.456238},
orientation = 355.456238,
}
end
if args.count == 11 then
changeCreature {
tcid = 10002,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_KE07",
extraMode = 0,
extra = {
"ANIM_TYPE_KE01",
"ANIM_TYPE_KE01",
"ANIM_TYPE_KE09",
"ANIM_TYPE_KE08",
}
}
end
if args.count == 2 then
local tcids = {10299,10300,10301,10302,10303,10304,10305}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_KE08",
loopCount = 1,
}
end
end
if args.count < 2 then
local tcids = {10299,10300,10301,10302,10303,10304,10305,10002}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_RICH_STATIST",
}
creatureTeleportsAway(tcid,120)
end
solveQuest(args.id)
end
end)
quest.setScript( 3713, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 10433,
effect = "FXTYPE_HOLOGRAM",
delay = 0.5
}
end)
quest.setScript( 3713, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 10433,
effect = "FXTYPE_HOLOGRAM"
}
changeCreature {
tcid = 10433,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=62, sy=12, sz=-1, px=2643.656250, py=131.750000, pz=-300.075470, orientation=125.649643},
speed = 2
}
destroyCreature {
tcid = 10433,
splatter = false,
delay = 12
}
end)
quest.setScript( 3714, "OnTaskAwaiting", function(args)
setWoobEffect {effect="FXTYPE_INVALID", woid=1052616164}
end)
quest.setScript( 3714, "OnWon", function(args)
changeCreature {
tcid = 10074,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=62, sy=11, sz=0, px=1694.937500, py=1823.980469, pz=595.546875, orientation=55.782837}
}
creatureTeleportPos(10074,12,{sx=60, sy=11, sz=0, px=1750, py=2100, pz=734.589294, orientation=282.008179})
setWoobEffect {effect="FXTYPE_PORTAL2", woid=1052616164}
end)
quest.setScript( 3528, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 9792,
effect = "FXTYPE_GEN_SPAWN1_I"
}
end)
quest.setScript( 3528, "OnWon", function(args)
creatureTeleportsAway( 9792 , 3 )
end)
quest.setScript( 3529, "OnTaskAwaiting", function(args)
setTimer {
id = 3529,
interval = 1,
count = 9
}
local tcid = 9790
local position = {sx=55, sy=9, sz=0, px=3105.590088, py=452.199005, pz=939.927979, orientation=335.000000}
createEffect {
position = position,
effect = "FXTYPE_SK_KOHORTE_I",
delay = 2,
duration = 7
}
createEffect {
position = position,
effect = "FXTYPE_GEN_FRAG_DUST",
delay = 4,
duration = 5
}
createEffect {
position = position,
effect = "FXTYPE_GEN_SPAWN1",
delay = 6,
duration = 3
}
changeCreature {
tcid = tcid,
effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
delay = 9
}
destroyCreature {
tcid = tcid,
splatter = true,
delay = 9
}
end)
quest.setScript( 3715, "OnTaskAwaiting", function(args)
local tcids = {10093,10094}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-IDLE",
loopCount = -1,
}
end
teleportTeam(3715,{sx=62, sy=9, sz=-1, px=449.703125, py=1486.099609, pz=110.404182, orientation=158.876602})
return {sx=62, sy=9, sz=-1, px=449, py=1486, pz=110, orientation=158}
end)
quest.setScript( 3715, "OnTaskFulfilled", function(args)
return {sx=62, sy=9, sz=-1, px=449, py=1486, pz=110, orientation=158}
end)
quest.setScript( 3715, "OnWon", function(args)
local tcids = {10093,10094}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SITGROUND-UP",
loopCount = 1,
}
end
changeCreature {
tcid = 10093,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
delay = 1.5,
}
changeCreature {
tcid = 10094,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
delay = 3,
}
for index,tcid in ipairs(tcids) do
creatureTeleportsAway(tcid,8)
end
return {}
end)
quest.setScript( 3787, "OnTaskAwaiting", function(args)
setTimer {
id = 3787,
count = 10,
interval = 1,
}
questMessage {
lokaid = "QUEST_2067_TCOUNT_MSG",
color = "#F0F8FF",
line = 1,
duration = 9.8,
fadeIn = 0.1,
fadeOut = 0.1,
}
end)
quest.setScript( 3787, "OnTaskFulfilled", function(args)
teleportTeam(3787,{sx=61, sy=9, sz=0, px=2679.656250, py=2792.449219, pz=1000.663696, orientation=193.111710})
end)
quest.setScript( 3787, "OnTimer", function(args)
if args.count == 10 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_01",
color = "#FF0000",
line = 0,
duration = 0.8,
fadeIn = 0,
fadeOut = 0,
}
end
if args.count == 9 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_02",
color = "#FF0000",
line = 0,
duration = 0.8,
fadeIn = 0,
fadeOut = 0,
}
end
if args.count == 8 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_03",
color = "#FF0000",
line = 0,
duration = 0.8,
fadeIn = 0,
fadeOut = 0,
}
end
if args.count == 7 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_04",
color = "#FF0000",
line = 0,
duration = 0.8,
fadeIn = 0,
fadeOut = 0,
}
end
if args.count == 6 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_05",
color = "#FF0000",
line = 0,
duration = 0.8,
fadeIn = 0,
fadeOut = 0,
}
end
if args.count == 5 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_06",
color = "#FF0000",
line = 0,
duration = 0.8,
fadeIn = 0,
fadeOut = 0,
}
end
if args.count == 4 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_07",
color = "#FF0000",
line = 0,
duration = 0.8,
fadeIn = 0,
fadeOut = 0,
}
end
if args.count == 3 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_08",
color = "#FF0000",
line = 0,
duration = 0.8,
fadeIn = 0,
fadeOut = 0,
}
end
if args.count == 2 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_09",
color = "#FF0000",
line = 0,
duration = 0.8,
fadeIn = 0,
fadeOut = 0,
}
end
if args.count == 1 then
questMessage {
lokaid = "QUEST_2067_TCOUNT_10",
color = "#FF0000",
line = 0,
duration = 0.8,
fadeIn = 0,
fadeOut = 0,
}
solveQuest(args.id)
end
end)
quest.setScript( 3761, "OnPrecondsFulfilled", function(args)
local tcids = {10157,10158}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
visible = false,
delay = 1,
}
end
end)
quest.setScript( 3761, "OnTaskAwaiting", function(args)
local tcids = {10307,10308,10309,10310,10311}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM23",
loopCount = -1,
delay = 1,
}
end
end)
quest.setScript( 3762, "OnTaskAwaiting", function(args)
setTimer{
id = 3762,
interval = 1,
count = 5,
}
end)
quest.setScript( 3762, "OnTimer", function(args)
if args.count == 5 then
changeCreature {
tcid = 10155,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_KE07",
loopCount = 1,
}
end
if args.count == 3 then
changeCreature {
tcid = 10157,
visible = true,
effect = "FXTYPE_GEN_SUMMON",
}
changeCreature {
tcid = 10158,
visible = true,
effect = "FXTYPE_GEN_SUMMON",
}
end
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 3766, "OnTaskAwaiting", function(args)
setTimer{
id = 3766,
interval = 1,
count = 5,
}
end)
quest.setScript( 3766, "OnTimer", function(args)
if args.count == 5 then
changeCreature {
tcid = 10155,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_KE07",
loopCount = 1,
}
end
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 3768, "OnTaskFulfilled", function(args)
setWoobState {
woid = 1051481207,
state = "WOOB_INVALID",
}
setWoobEffect {
woid = 1051481207,
effect = "FXTYPE_INVALID",
}
end)
quest.setScript( 3770, "OnStation", function(args)
if args.currentStation == 0 then
setWoobState {
woid = 1051587639,
state = "WOOB_THINGY_OFF",
}
end
if args.currentStation == 1 then
setWoobState {
woid = 1051576192,
state = "WOOB_THINGY_OFF",
}
end
end)
quest.setScript( 3771, "OnTaskFulfilled", function(args)
setWoobEffect {
woid = 1051583599,
effect = "FXTYPE_PORTAL1",
}
end)
quest.setScript( 3776, "OnStation", function(args)
if args.currentStation == 0 then
destroyCreature {
tcid = 10160,
splatter = true,
delay = 1,
}
end
if args.currentStation == 1 then
destroyCreature {
tcid = 10161,
splatter = true,
delay = 1,
}
end
if args.currentStation == 2 then
destroyCreature {
tcid = 10162,
splatter = true,
delay = 1,
}
end
if args.currentStation == 3 then
destroyCreature {
tcid = 10163,
splatter = true,
delay = 1,
}
end
if args.currentStation == 4 then
destroyCreature {
tcid = 10164,
splatter = true,
delay = 1,
}
end
if args.currentStation == 5 then
destroyCreature {
tcid = 10165,
splatter = true,
delay = 1,
}
end
if args.currentStation == 6 then
destroyCreature {
tcid = 10166,
splatter = true,
delay = 1,
}
end
end)
quest.setScript( 3776, "OnTalk", function(args)
if args.tcid == args.tcid then
changeCreature {
tcid = args.tcid,
behaviour = "questCreatures",
gotoPosition = {sx=0, sy=0, sz=-1, px=0, py=0, pz=0, orientation=0},
}
end
end)
quest.setScript( 3776, "OnTaskAwaiting", function(args)
local tcids = {10160,10161,10162,10163,10164,10165,10166,10167}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_SC_BURNINGDEAD",
delay = 0.1,
}
end
end)
quest.setScript( 3776, "OnTaskFulfilled", function(args)
destroyCreature {
tcid = 10167,
splatter = true,
delay = 1,
}
end)
quest.setScript( 3848, "OnPrecondsFulfilled", function(args)
setWoobState {
woid = 1052091316,
state = "WOOB_DOOR_UNLOCKED",
}
end)
quest.setScript( 3729, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 10119,
role = "ROLE_DROPPER",
}
end)
quest.setScript( 3732, "OnStation", function(args)
if args.currentStation == 0 then
setWoobState {
woid = 1050804897,
state = "WOOB_THINGY_OFF",
}
end
if args.currentStation == 1 then
setWoobState {
woid = 1050804903,
state = "WOOB_THINGY_OFF",
}
end
end)
quest.setScript( 3718, "OnWon", function(args)
local droppers = {10100,10101,10102,10103,10099}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 3727, "OnStation", function(args)
if args.currentStation == 0 then
setWoobState {
woid = 1052011472,
state = "WOOB_THINGY_OFF",
}
end
end)
quest.setScript( 3734, "OnWon", function(args)
creatureTeleportsAway(10121,0)
end)
quest.setScript( 3803, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 10358,
behaviour = "Enemy_warrior_brave_ex",
faction = "FACTION_ENEMY_HERO",
effect = "FXTYPE_SC_BURNINGDEAD",
role = "ROLE_ATTACKER"
}
end)
quest.setScript( 3747, "OnStation", function(args)
if args.currentStation == 0 then
setWoobState {
woid = 1050715474,
state = "WOOB_THINGY_OFF",
}
end
if args.currentStation == 1 then
setWoobState {
woid = 1050716053,
state = "WOOB_THINGY_OFF",
}
end
if args.currentStation == 2 then
setWoobState {
woid = 1050716348,
state = "WOOB_THINGY_OFF",
}
end
if args.currentStation == 3 then
setWoobState {
woid = 1050716789,
state = "WOOB_THINGY_OFF",
}
end
end)
quest.setScript( 3747, "OnTaskAwaiting", function(args)
local attackers = {10136,10137,10138,10139,10140}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 3747, "OnWon", function(args)
local attackers = {10136,10137,10138,10139,10140}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
end)
quest.setScript( 3533, "OnWon", function(args)
local droppers = {10486}
for id,member in ipairs(droppers) do
CM_CreatureAway(member,60+id*0.1)
end
end)
quest.setScript( 3534, "OnTaskAwaiting", function(args)
setTimer {
id = 3534,
interval = 1,
count = 9
}
local tcid = 9795
local position = {sx=55, sy=12, sz=0, px=1537.250000, py=1126.601563, pz=455.892975, orientation=11.309937}
createEffect {
position = position,
effect = "FXTYPE_SK_KOHORTE_I",
delay = 2,
duration = 7
}
createEffect {
position = position,
effect = "FXTYPE_GEN_FRAG_DUST",
delay = 4,
duration = 5
}
createEffect {
position = position,
effect = "FXTYPE_GEN_SPAWN1",
delay = 6,
duration = 3
}
changeCreature {
tcid = tcid,
effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
delay = 9
}
destroyCreature {
tcid = tcid,
splatter = true,
delay = 9
}
end)
quest.setScript( 3740, "OnTaskAwaiting", function(args)
setTimer {
id = 3740,
inverval = 1,
count = 5,
}
end)
quest.setScript( 3740, "OnTimer", function(args)
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 3741, "OnWon", function(args)
teleport {
tcid = 10128,
position = {sx=0, sy=0, sz=0, px=0, py=0, pz=0, orientation=0},
}
end)
quest.setScript( 3742, "OnWon", function(args)
teleport {
tcid = 10128,
position = {sx=0, sy=0, sz=0, px=0, py=0, pz=0, orientation=0},
}
end)
quest.setScript( 3756, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 10145,
behaviour = "JOB_TRADER",
faction = "FACTION_FRIEND_HERO_ALL",
merchantType = "MERCHANT_COMBOMASTER",
role = "ROLE_INVALID",
}
end)
quest.setScript( 3585, "OnTalk", function(args)
if args.tcid == 9851 then
changeCreature {
tcid = 9851,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_WORSHIP",
loopCount = 1,
delay = 2,
}
end
end)
quest.setScript( 3695, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 10029,
effect = "FXTYPE_HOLOGRAM",
}
end)
quest.setScript( 3695, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 10029,
effect = "FXTYPE_HOLOGRAM",
}
end)
quest.setScript( 3695, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 10029,
effect = "FXTYPE_HOLOGRAM",
}
end)
quest.setScript( 3695, "OnWon", function(args)
changeCreature {
tcid = 10029,
effect = "FXTYPE_HOLOGRAM",
}
end)
quest.setScript( 3696, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 10029,
effect = "FXTYPE_HOLOGRAM",
}
end)
quest.setScript( 3696, "OnTaskAwaiting", function(args)
createEffect {
position = {sx=2, sy=56, sz=0, px=450.000000, py=150.000000, pz=2945.738525, orientation=0.000000},
effect = "FXTYPE_SMOKEMEDIUMWHITE",
duration = 2,
}
destroyCreature {
tcid = 10029,
splatter = false,
delay = 1,
}
end)
quest.setScript( 3570, "OnWon", function(args)
changeCreature {
tcid = 9835,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=3, sy=61, sz=0, px=2656.084961, py=822.562500, pz=1498.971680, orientation=264.320251},
speed = 2,
extraMode = 0,
extra = {
{sx=3, sy=61, sz=0, px=1893.071289, py=1121.046875, pz=1500.472900, orientation=248.779358},
{sx=3, sy=61, sz=0, px=1326.549805, py=911.046875, pz=1629.201294, orientation=290.255463},
{sx=3, sy=61, sz=0, px=860.599609, py=1135.343750, pz=1662.526489, orientation=251.209412},
{sx=3, sy=61, sz=0, px=307.450195, py=1223.296875, pz=1773.944336, orientation=232.106049},
{sx=3, sy=61, sz=0, px=41.049805, py=1330.203125, pz=1806.079224, orientation=241.859390},
}
}
creatureTeleportsAway(9835,20)
end)
quest.setScript( 3661, "OnWon", function(args)
changeCreature {
tcid = 9982,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=4, sy=62, sz=0, px=1413.966797, py=426.781250, pz=1599.249390, orientation=355.163391}
}
changeCreature {
tcid = 9982,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTCREATURES",
emotion = "ANIM_TYPE_SCRATCH-BOTTOM",
delay = 8
}
changeCreature {
tcid = 9982,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=4, sy=61, sz=0, px=1676.493164, py=2751.359375, pz=1613.706665, orientation=54.381653},
delay = 10
}
changeCreature {
tcid = 9982,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTCREATURES",
emotion = "ANIM_TYPE_SCRATCH-BOTTOM",
delay = 16
}
changeCreature {
tcid = 9982,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=4, sy=61, sz=0, px=1498.908203, py=2475.140625, pz=1627.914307, orientation=327.268585},
delay = 18
}
changeCreature {
tcid = 9982,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTCREATURES",
emotion = "ANIM_TYPE_SCRATCH-BOTTOM",
delay = 24
}
changeCreature {
tcid = 9982,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=4, sy=61, sz=0, px=1799.700195, py=2324.500000, pz=1680.907593, orientation=90.000000},
delay = 26
}
changeCreature {
tcid = 9982,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTCREATURES",
emotion = "ANIM_TYPE_SCRATCH-BOTTOM",
delay = 32
}
changeCreature {
tcid = 9982,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=4, sy=61, sz=0, px=1942.033203, py=2029.671875, pz=1707.928711, orientation=39.929657},
delay = 34
}
changeCreature {
tcid = 9982,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTCREATURES",
emotion = "ANIM_TYPE_SCRATCH-BOTTOM",
delay = 40
}
changeCreature {
tcid = 9982,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=4, sy=61, sz=0, px=1903.693359, py=1662.093750, pz=1834.478149, orientation=315.653442},
delay = 42
}
changeCreature {
tcid = 9982,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTCREATURES",
emotion = "ANIM_TYPE_SCRATCH-BOTTOM",
delay = 48
}
changeCreature {
tcid = 9982,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=4, sy=61, sz=0, px=1632.750000, py=1257.656250, pz=1711.844116, orientation=344.845917},
delay = 50
}
changeCreature {
tcid = 9982,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTCREATURES",
emotion = "ANIM_TYPE_SCRATCH-BOTTOM",
delay = 56
}
changeCreature {
tcid = 9982,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=4, sy=61, sz=0, px=1620.324219, py=332.656250, pz=1686.743774, orientation=333.589355},
delay = 58
}
destroyCreature {
tcid = 9982,
splatter = false,
delay = 64
}
end)
quest.setScript( 3798, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 10105 then
changeCreature {
tcid = 10105,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 3798, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 10105,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end)
quest.setScript( 3798, "OnWon", function(args)
changeCreature {
tcid = 10105,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM23",
loopCount = -1,
mortality = "MORTAL",
}
killCreature {
tcid = 10105,
delay = 2,
}
end)
quest.setScript( 3785, "OnPrecondsFulfilled", function(args)
local tcids = { 10190,10191,10192,10193,10194,10195,10196,10197,10198,10199,
10200,10201,10202,10203,10204,10205,10206,10207,10208,10209 }
for i, tcid in ipairs(tcids) do
local random = math.random(1,2)
if random == 1 then
changeCreature{
tcid = tcid,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM01",
loopCount = -1
}
elseif random == 2 then
changeCreature{
tcid = tcid,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM02",
loopCount = -1
}
end
end
end)
quest.setScript( 3789, "OnTaskAwaiting", function(args)
local grp = {10227, 10442, 10443, 10444, 10445}
for index,tcid in ipairs(grp) do
changeCreature {
tcid = tcid,
addToGroup = 10227,
}
end
end)
quest.setScript( 3697, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 10345,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM01",
loopCount = -1
}
end)
quest.setScript( 3698, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 10345,
emotion = "ANIM_TYPE_IDLE"
}
end)
quest.setScript( 3698, "OnWon", function(args)
changeCreature {
tcid = 10509,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_ATTACKA",
loopCount = -1
}
end)
quest.setScript( 3596, "OnTaskAwaiting", function(args)
creatureTeleportPos(9905,0,{sx=5, sy=57, sz=0, px=1423.199219, py=585.312500, pz=2613.576416, orientation=213.690063})
end)
quest.setScript( 3598, "OnTaskAwaiting", function(args)
local tcids = {9910,9912,10511,10512,10513}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_SPAWN1",
delay = 0.2,
}
end
end)
quest.setScript( 3599, "OnTaskAwaiting", function(args)
local tcids = {9913,9914,9915,9916,9917,10514,10515}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_SPAWN1",
delay = 0.2,
}
end
end)
quest.setScript( 3614, "OnTaskAwaiting", function(args)
local tcids = {9932,9934,9935,10516,10517,10518}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_SPAWN1",
delay = 0.2,
}
end
end)
quest.setScript( 3615, "OnTaskAwaiting", function(args)
local tcids = {9936,9937,9938,9939,9940,9941,10519,10520}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_SPAWN1",
delay = 0.2,
}
end
end)
quest.setScript( 3624, "OnTaskAwaiting", function(args)
local tcids = {9947,9948,10524,10525,10526,10527,10528}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_SPAWN1",
delay = 0.2,
}
end
end)
quest.setScript( 3628, "OnTaskAwaiting", function(args)
local tcids = {9951,9952,9953,9954,10521,10522,10523,10529,10530}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_SPAWN1",
delay = 0.2,
}
end
end)
quest.setScript( 3629, "OnTaskAwaiting", function(args)
local tcids = {9955,10531,10532,10533,10534,10535}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_SPAWN1",
delay = 0.2,
}
end
end)
quest.setScript( 3630, "OnTaskAwaiting", function(args)
local tcids = {9956,9957,9958,10536,10537,10538,10539,10540}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_SPAWN1",
delay = 0.2,
}
end
end)
quest.setScript( 3630, "OnWon", function(args)
creatureTeleportPos(9905,0,{sx=5, sy=57, sz=0, px=150.000000, py=850.000000, pz=2663.256104, orientation=358.181244})
end)
quest.setScript( 3631, "OnTaskAwaiting", function(args)
local tcids = {9959,9960,9961,9962,9963,9964,10541,10542,10543,10544,10545,10546,10547,10548,10549}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_GEN_SPAWN1",
delay = 0.2,
}
end
end)
quest.setScript( 3667, "OnTalk", function(args)
if args.tcid == 9995 and args.state == "PRECONDS_FULFILLED" then
changeCreature {
tcid = 9995,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_RAISE-HANDS",
loopCount = 1,
delay = 4,
}
end
end)
quest.setScript( 3667, "OnWon", function(args)
changeCreature {
tcid = 9995,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=6, sy=61, sz=0, px=1849.410156, py=1513.093750, pz=2175.830078, orientation=113.409790},
followUpBhv = "questCreatures",
extraMode = 2,
extra = {
{sx=6, sy=61, sz=0, px=1740.019531, py=1259.578125, pz=2189.774414, orientation=67.031738},
{sx=6, sy=61, sz=0, px=1222.751953, py=1097.156250, pz=2183.093506, orientation=58.061554},
{sx=6, sy=61, sz=0, px=1576.505859, py=1673.781250, pz=2175.831299, orientation=122.101776},
"ANIM_TYPE_SHOUT",
"ANIM_TYPE_SEED",
"ANIM_TYPE_ATTACKA",
"ANIM_TYPE_EM23",
"ANIM_TYPE_EM07",
},
delay = 2,
}
end)
quest.setScript( 3670, "OnTaskAwaiting", function(args)
setTimer {
id = 3670,
interval = 1,
count = 30,
}
end)
quest.setScript( 3670, "OnTaskFulfilled", function(args)
teleport {
tcid = 9995,
position = {sx=6, sy=61, sz=0, px=1600.000000, py=1500.000000, pz=0.000000, orientation=0.000000},
orientation = 0,
}
changeCreature {
tcid = 9995,
merchantType = "MERCHANT_TRADER",
behaviour = "JOB_TRADER",
delay = 1,
}
end)
quest.setScript( 3670, "OnTimer", function(args)
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 3700, "OnTaskAwaiting", function(args)
local schalter = {1048876012,1048877280,1048642833,1048876801}
for index,woid in ipairs(schalter) do
setWoobEffect {
woid = woid,
effect = "FXTYPE_DEFEKTEMASCHINE1"
}
end
end)
quest.setScript( 3784, "OnStation", function(args)
if args.currentStation == 0 then
setWoobState {
woid = 1048876009,
state = "WOOB_INVISIBLE",
}
setWoobState {
woid = 1048876011,
state = "WOOB_INVALID",
}
setWoobState {
woid = 1048876008,
state = "WOOB_INVALID",
}
setWoobEffect {
woid = 1048876010,
effect = "FXTYPE_BLUEFIRE_LARGE",
}
setWoobState {
woid = 1048877280,
state = "WOOB_THINGY_OFF",
}
end
if args.currentStation == 1 then
setWoobState {
woid = 1048877277,
state = "WOOB_INVISIBLE",
}
setWoobState {
woid = 1048877279,
state = "WOOB_INVALID",
}
setWoobState {
woid = 1048877276,
state = "WOOB_INVALID",
}
setWoobEffect {
woid = 1048877278,
effect = "FXTYPE_BLUEFIRE_LARGE",
}
setWoobState {
woid = 1048642833,
state = "WOOB_THINGY_OFF",
}
end
if args.currentStation == 2 then
setWoobState {
woid = 1048613003,
state = "WOOB_INVISIBLE",
}
setWoobState {
woid = 1048612968,
state = "WOOB_INVALID",
}
setWoobState {
woid = 1048613314,
state = "WOOB_INVALID",
}
setWoobEffect {
woid = 1048614077,
effect = "FXTYPE_BLUEFIRE_LARGE",
}
setWoobState {
woid = 1048876801,
state = "WOOB_THINGY_OFF",
}
end
if args.currentStation == 3 then
setWoobState {
woid = 1048876798,
state = "WOOB_INVISIBLE",
}
setWoobState {
woid = 1048876800,
state = "WOOB_INVALID",
}
setWoobState {
woid = 1048876797,
state = "WOOB_INVALID",
}
setWoobEffect {
woid = 1048876799,
effect = "FXTYPE_BLUEFIRE_LARGE",
}
end
end)
quest.setScript( 3674, "OnTaskAwaiting", function(args)
changeCreature{
tcid=8030,
clearAutoTeleporting = true,
}
end)
quest.setScript( 3678, "OnWon", function(args)
changeCreature {
tcid = 10009,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=11, sy=62, sz=0, px=2711.351563, py=2587.750000, pz=929.939270, orientation=131.420120},
followUpBhv = "questCreatures",
extraMode = 0,
extra = {
{sx=11, sy=62, sz=0, px=3131.800781, py=1362.953125, pz=880.342834, orientation=23.334015},
{sx=12, sy=62, sz=0, px=940.648438, py=149.203125, pz=775.968628, orientation=31.097290},
{sx=12, sy=61, sz=0, px=1827.101563, py=2043.500000, pz=700.539246, orientation=19.202728},
{sx=12, sy=61, sz=0, px=2235.199219, py=216.906250, pz=766.695801, orientation=330.425079},
{sx=12, sy=60, sz=0, px=2628.601563, py=1907.546875, pz=583.386047, orientation=19.119720},
{sx=12, sy=60, sz=0, px=2241.500000, py=1692.296875, pz=628.920166, orientation=325.454102},
{sx=12, sy=60, sz=0, px=1461.917969, py=846.859375, pz=749.353699, orientation=343.739807},
{sx=12, sy=60, sz=0, px=1589.800781, py=28.000000, pz=615.209351, orientation=342.576447},
{sx=12, sy=59, sz=0, px=1795.449219, py=1606.250000, pz=214.263992, orientation=14.888947},
{sx=12, sy=59, sz=0, px=2328.089844, py=448.640625, pz=28.137184, orientation=30.043274},
},
}
creatureTeleportsAway(10009,3600)
end)
quest.setScript( 3808, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 10366,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=9, sy=61, sz=0, px=2838.550781, py=1721.203125, pz=1560.371094, orientation=236.659302},
followUpBhv = "questCreatures",
}
end)
quest.setScript( 3809, "OnTaskAwaiting", function(args)
setTimer {
id = 3809,
count = 12,
interval = 1,
}
end)
quest.setScript( 3809, "OnTimer", function(args)
if args.count == 10 then
changeCreature {
tcid = 10365,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM06",
loopCount = 1,
}
changeCreature {
tcid = 10366,
effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
}
end
if args.count == 8 then
changeCreature {
tcid = 10366,
behaviour = "JOB_QUESTSTAGING",
effect = "FXTYPE_SC_BURNINGDEAD",
mortality = "MORTAL",
gotoPosition = {sx=9, sy=61, sz=0, px=2785.599609, py=1634.406250, pz=1565.843384, orientation=327.994629},
speed = 2,
delay = 2,
extraMode = 2,
extra = {
{sx=9, sy=61, sz=0, px=2862.250000, py=1757.500000, pz=1554.153198, orientation=147.039093},
{sx=9, sy=61, sz=0, px=2898.400391, py=1702.750000, pz=1554.658936, orientation=20.031006},
{sx=9, sy=61, sz=0, px=2876.972656, py=1644.687500, pz=1562.750732, orientation=339.863708},
{sx=9, sy=61, sz=0, px=2950.753906, py=1698.640625, pz=1545.885986, orientation=74.485199},
{sx=9, sy=61, sz=0, px=2901.300781, py=1571.656250, pz=1567.249390, orientation=309.207214},
},
}
end
if args.count < 2 then
killCreature {
tcid = 10366,
delay = 9,
}
solveQuest(args.id)
end
end)
quest.setScript( 3653, "OnWon", function(args)
changeCreature {
tcid = 9976,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=5, sy=52, sz=0, px=3100.000000, py=750.000000, pz=0.000000, orientation=0.000000},
followUpBhv = "questCreatures",
delay = 2,
}
end)
quest.setScript( 3691, "OnTalk", function(args)
if args.tcid == 10023 then
changeCreature {
tcid = 10023,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_PICKUP",
loopCount = 1,
delay = 2,
}
end
end)
quest.setScript( 3849, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 10027,
merchantType = "MERCHANT_TRADER",
behaviour = "JOB_TRADER",
delay = 1,
}
end)
quest.setScript( 3811, "OnTaskAwaiting", function(args)
teleport {
tcid = 10369,
position = {sx=11, sy=62, sz=0, px=1301.089966, py=1912.770020, pz=1445.739990, orientation=132.000000},
orientation = 132,
}
end)
quest.setScript( 3811, "OnWon", function(args)
changeCreature {
tcid = 10369,
effect = "FXTYPE_SC_BURNINGDEAD",
mortality = "MORTAL",
behaviour = "Enemy_warrior_brave_ex",
faction = "FACTION_ENEMY_HERO",
}
end)
quest.setScript( 3812, "OnTaskAwaiting", function(args)
local tcids = {10369,10370,10371,10372,10373,10374,10375,10376,10377,10378,10379,10380,10381,10382,10383,10384,10385,10386,10387,10388,10389}
for index,tcid in ipairs(tcids) do
changeCreature {
tcid = tcid,
effect = "FXTYPE_SC_BURNINGDEAD",
delay = 0.1,
}
end
end)
quest.setScript( 2891, "OnDeath", function(args)
if args.tcid == 8252 then
changeCreature {
tcid = 8253,
visible = true,
faction = "FACTION_HIGHELVE",
delay = 0.1,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=23, sy=28, sz=0, px=402.437500, py=363.304688, pz=14.554901, orientation=267.552063},
speed = 1,
followUpAngle = 0,
followUpBhv = "questCreatures",
}
end
end)
quest.setScript( 2891, "OnLost", function(args)
local attackers = {8252}
CM_AttackerAway (attackers,60)
end)
quest.setScript( 2891, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8253,
mortality = "IMMORTAL",
faction = "QUEST_VICTIM",
visible = false,
delay = 0.1,
}
changeCreature {
tcid = 8252,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_KE01",
loopCount = -1,
delay = 0.1,
}
end)
quest.setScript( 2891, "OnWon", function(args)
local attackers = {8252}
CM_AttackerAway (attackers,1)
changeCreature {
tcid = 8242,
behaviour = "JOB_CASTER",
merchantType = "MERCHANT_COMBOMASTER",
}
changeCreature {
tcid = 8253,
mortality = "MORTAL",
behaviour = "JOB_KID",
gotoPosition = {sx=21,sy=27,sz=0,px=3040.852,py=954.797,pz=101.968},
}
end)
quest.setScript( 2780, "OnTaskAwaiting", function(args)
local tc = 7989
local pos = { 21,27,0 , 3188.850,442.648,119.974, 12.000 }
creatureGotoPos (tc, pos, pos[7], 2, "questCreatures", 1)
end)
quest.setScript( 2781, "OnWon", function(args)
changeCreature {
tcid = 8423,
merchantType = "MERCHANT_BLACKSMITH",
}
end)
quest.setScript( 2801, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 8013,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end)
quest.setScript( 2801, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 8013 then
changeCreature {
tcid = 8013,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 2801, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 8013,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end)
quest.setScript( 2805, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "QUEST_2805_BUTTON_CANCEL", "QUEST_2805_BUTTON_OK"
end
end)
quest.setScript( 2805, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8015,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=22, sy=26, sz=0, px=2.000000, py=2408.351563, pz=43.632912, orientation=85.049713},
bubble = 4,
followUpBhv = "CM_Begleiter_tapfer",
delay = 0.1,
}
changeCreature {
tcid = 8015,
behaviour = "CM_Begleiter_tapfer",
delay = 0.8,
}
end)
quest.setScript( 2812, "OnTaskFulfilled", function(args)
solveQuest(3368)
end)
quest.setScript( 2815, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8015,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=22, sy=26, sz=0, px=2.000000, py=2408.351563, pz=43.632912, orientation=85.049713},
bubble = 6,
followUpBhv = "Hireling_distance",
delay = 0.1,
}
changeCreature {
tcid = 8015,
behaviour = "Hireling_distance",
delay = 0.8,
}
end)
quest.setScript( 2825, "OnWon", function(args)
local tcids = {8015,8040,8038}
local delay = 0
solveQuest(3369)
for index,tcid in ipairs(tcids) do
removeFromGroup {
tcid = tcid,
}
CM_CreatureAway(tcid,delay)
delay = delay + 0.1
end
CM_CreatureAway (8013, 0.3)
CM_CreatureAway (8675, 0.4)
end)
quest.setScript( 3368, "OnTaskAwaiting", function(args)
changeCreature{
tcid = 8015,
role = "ROLE_VICTIM",
}
end)
quest.setScript( 3370, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 8013,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end)
quest.setScript( 3370, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 8013 then
changeCreature {
tcid = 8013,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 3370, "OnWon", function(args)
removeFromGroup {
tcid = 8015,
}
CM_CreatureAway (8015, 0)
CM_CreatureAway (8013, 0.1)
CM_CreatureAway (8040, 0.2)
CM_CreatureAway (8038, 0.3)
CM_CreatureAway (8675, 0.4)
end)
quest.setScript( 3369, "OnTaskAwaiting", function(args)
local ids = {8015, 8038, 8040}
for i,id in ipairs(ids) do
changeCreature{
tcid = id,
role = "ROLE_VICTIM",
}
end
end)
quest.setScript( 3371, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 8013,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end)
quest.setScript( 3371, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 8013 then
changeCreature {
tcid = 8013,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM21",
loopCount = -1,
}
end
end)
quest.setScript( 3371, "OnWon", function(args)
local tcids = {8015,8040,8038}
local delay = 0
for index,tcid in ipairs(tcids) do
removeFromGroup {
tcid = tcid,
}
CM_CreatureAway(tcid,delay)
delay = delay + 0.1
end
CM_CreatureAway (8013, 0.3)
CM_CreatureAway (8675, 0.4)
end)
quest.setScript( 2848, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8135,
mortality = "IMMORTAL",
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_KE11",
loopCount = -1,
}
end)
quest.setScript( 2852, "OnWon", function(args)
changeCreature {
tcid = 8135,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
emotion = "ANIM_TYPE_KE08",
loopCount = 1,
delay = 0.01
}
end)
quest.setScript( 2858, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "QUEST_2858_BUTTON_CANCEL", "QUEST_2858_BUTTON_OK"
end
end)
quest.setScript( 2858, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
changeCreature {
tcid = 8135,
mortality = "MORTAL",
}
end
end)
quest.setScript( 2877, "OnTalk", function(args)
changeCreature {
tcid = 8185,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM13",
loopCount = 1,
}
end)
quest.setScript( 3128, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8781,
mortality = "IMMORTAL",
}
looseQuest(3136)
end)
quest.setScript( 3128, "OnTaskFulfilled", function(args)
local OLD_BEAR = 8781
local NEW_BEAR = 8836
teleport {
tcid = NEW_BEAR,
position = getPos{ tcid=OLD_BEAR }
}
destroyCreature {
tcid=OLD_BEAR
}
changeCreature {
tcid = NEW_BEAR,
mortality = "IMMORTAL",
effect = "FXTYPE_GEN_TRANSFORM",
useUnconscious = true,
livesRemaining = 255,
unconsciousTime = 4,
}
looseQuest(3137)
end)
quest.setScript( 3131, "OnTalk", function(args)
if args.state == "WON" then
changeCreature {
tcid = 8185,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
emotion = "ANIM_TYPE_EM30",
loopCount = 1,
delay = 0.01,
}
elseif args.state == "TASK_FULFILLED" then
changeCreature {
tcid = 8185,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
delay = 0.01,
}
end
end)
quest.setScript( 3132, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" then
changeCreature {
tcid = 8185,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
delay = 0.01,
}
end
end)
quest.setScript( 3132, "OnWon", function(args)
changeCreature {
tcid = 8185,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=21, sy=27, sz=0, px=1655.453125, py=2842.000000, pz=304.705994, orientation=43.522095},
speed = 2,
followUpAngle = 270,
followUpBhv = "questCreatures",
}
changeCreature {
tcid = 8185,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM30",
loopCount = -1,
delay = 10,
}
changeCreature {
tcid = 8781,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=21, sy=27, sz=0, px=1630.500000, py=2788.453125, pz=304.641693, orientation=295.757263},
speed = 2,
followUpAngle = 90,
followUpBhv = "questCreatures",
}
changeCreature {
tcid = 8781,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_IDLEB",
loopCount = -1,
delay = 10,
}
end)
quest.setScript( 3135, "OnTalk", function(args)
if args.state == "WON" then
changeCreature {
tcid = 8185,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
emotion = "ANIM_TYPE_EM30",
loopCount = 1,
delay = 0.01,
}
elseif args.state == "TASK_FULFILLED" then
changeCreature {
tcid = 8185,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
emotion = "ANIM_TYPE_EM10",
loopCount = 1,
delay = 0.01,
}
end
end)
quest.setScript( 3135, "OnWon", function(args)
end)
quest.setScript( 3136, "OnWon", function(args)
looseQuest(3128)
looseQuest(3137)
destroyCreature {
tcid = 8781,
}
end)
quest.setScript( 3137, "OnWon", function(args)
looseQuest(3128)
creatureGotoPos (8781, { 21,27,0 , 745.008,2711.240,21.414, 290.000 }, false, 1, "questCreatures", 1)
end)
quest.setScript( 3138, "OnTaskFulfilled", function(args)
local OLD_BEAR = 8836
local NEW_BEAR = 8841
teleport {
tcid = NEW_BEAR,
position = getPos{ tcid=OLD_BEAR }
}
destroyCreature {
tcid=OLD_BEAR
}
changeCreature {
tcid = NEW_BEAR,
mortality = "IMMORTAL",
effect = "FXTYPE_GEN_TRANSFORM",
useUnconscious = true,
livesRemaining = 255,
unconsciousTime = 4,
}
end)
quest.setScript( 3140, "OnTaskFulfilled", function(args)
local OLD_BEAR = 8841
local NEW_BEAR = 8842
teleport {
tcid = NEW_BEAR,
position = getPos{ tcid=OLD_BEAR }
}
destroyCreature {
tcid=OLD_BEAR
}
changeCreature {
tcid = NEW_BEAR,
mortality = "MORTAL",
effect = "FXTYPE_GEN_TRANSFORM",
useUnconscious = false,
livesRemaining = 0,
}
end)
quest.setScript( 3496, "OnTaskAwaiting", function(args)
unlockShipPortal(3496,4,"NORTH",args.heroRef)
unlockShipPortal(3496,7,"NORTH",args.heroRef)
CM_XMASTrader()
end)
quest.setScript( 3497, "OnTaskFulfilled", function(args)
creatureTeleportPos( 9727,0,{57,54,0 , 650,1550,1542} )
creatureTeleportPos ( 9750, 0, {57,54,0,750,750,11545,200})
local creatures = {
{tcid=9742,pos={sx=57,sy=54,sz=0 , px=650,py=1450,pz=1545}},
{tcid=9743,pos={sx=57,sy=54,sz=0 , px=400,py=1350,pz=1543}},
{tcid=9744,pos={sx=57,sy=54,sz=0 , px=550,py=1300,pz=1545}},
{tcid=9745,pos={sx=57,sy=54,sz=0 , px=450,py=1250,pz=1543}},
{tcid=9746,pos={sx=57,sy=54,sz=0 , px=700,py=1050,pz=1545}},
{tcid=9747,pos={sx=57,sy=54,sz=0 , px=450,py=800,pz=1545}},
{tcid=9748,pos={sx=57,sy=54,sz=0 , px=550,py=700,pz=1545}},
{tcid=9749,pos={sx=57,sy=54,sz=0 , px=700,py=750,pz=1545}}
}
for i, member in ipairs(creatures) do
creatureTeleportPos ( member.tcid, 0, {57,54,0 , 550,1700,1508} )
changeCreature {
tcid = member.tcid,
gotoPosition = member.pos,
followUpBhv = "JOB_MERCENARY",
delay = 4
}
end
end)
quest.setScript( 3497, "OnWon", function(args)
changeCreature {
tcid = 9727,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
gotoPosition = {sx=57,sy=54,sz=0,px=180.656,py=879.156,pz=1503.44}
}
changeCreature {
tcid = 9727,
orientation = 214,
delay = 22
}
changeCreature {
tcid = 9727,
behaviour = "questCreatures",
delay = 25
}
end)
quest.setScript( 3498, "OnTaskFulfilled", function(args)
creatureTeleportPos (9750, 1, {57,54,0,74.25,933.953,1503.44,2640} )
end)
quest.setScript( 3499, "OnTalk", function(args)
if args.tcid == 9727 then
changeCreature {
tcid = 9727,
behaviour = "JOB_QUESTSTAGING",
orientation = 214,
followUpBhv = "questCreatures"
}
end
end)
quest.setScript( 3499, "OnWon", function(args)
changeCreature {
tcid = 9741,
role = "ROLE_INVALID",
gotoPosition = {sx=57,sy=54,sz=0,px=109.546,py=808.703,pz=1503.438,279}
}
creatureTeleportsAway(9741, 12)
destroyCreature {
tcid = 9741,
delay = 24,
}
end)
quest.setScript( 3500, "OnSetup", function(args)
if args.tcid == 9750 then
changeCreature {
tcid = 9750,
behaviour = "JOB_QUESTSTAGING",
orientation = 262,
emotion = "ANIM_TYPE_MAGICB"
}
end
end)
quest.setScript( 3500, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9750,
orientation = 87,
followUpBhv = "questCreatures"
}
end)
quest.setScript( 3501, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 9751,
effect = "FXTYPE_HOLOGRAM",
delay = 1
}
end)
quest.setScript( 3501, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 9751,
effect = "FXTYPE_HOLOGRAM"
}
end)
quest.setScript( 3503, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9660,
behaviour = "Enemy_warrior_brave_ex",
}
end)
quest.setScript( 3503, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 9751,
effect = "FXTYPE_HOLOGRAM"
}
end)
quest.setScript( 3503, "OnWon", function(args)
destroyCreature {
tcid = 9751,
delay = 2
}
end)
quest.setScript( 3461, "OnWon", function(args)
unlockShipPortal(3461,7,"NORTH",args.heroRef)
CM_XMASTrader()
end)
quest.setScript( 3448, "OnTaskFulfilled", function(args)
local snow = {1036879790,1036885849,1036885732,1036885721,1036885836,
1036885821,1036885774,1036885764,1036885745,1036885801,
1036886123,1036886147,1036891883,1036892146,1036891866,
1036891912,1036891925,1036891942,1036891982,1036892104,
1036892103,1036898690,1036898757,1036898741,1036898793,
1036898815,1036898839,1036898908,1036898946,1036898976,
1036899172,1036899171,1036899271,1036899272,1036899485}
for index,woid in ipairs(snow) do
setWoobEffect {
woid = woid,
effect = "FXTYPE_SNOWFALL",
}
end
end)
quest.setScript( 3453, "OnTaskAwaiting", function(args)
setTimer {
id = 3453,
interval = 13,
count = 1,
}
changeCreature {
tcid = 9622,
role = "ROLE_INVALID",
behaviour = "JOB_QUESTSTAGING",
gotoPosition =
{sx=55, sy=55, sz=0, px=1763.093750, py=1469.593750, pz=875.321594, orientation=182.436630},
}
changeCreature {
tcid = 9622,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_ATTACKA",
loopCount = 2,
delay = 5,
}
changeCreature {
tcid = 9622,
behaviour = "JOB_QUESTSTAGING",
gotoPosition =
{sx=55, sy=55, sz=0, px=1795.343750, py=1406.296875, pz=886.321899, orientation=4.537781},
delay = 11,
}
changeCreature {
tcid = 9622,
behaviour = "questCreatures",
role = "ROLE_DIALOG",
delay = 13,
}
end)
quest.setScript( 3453, "OnTimer", function(args)
solveQuest(args.id)
end)
quest.setScript( 3449, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9642,
behaviour = "JOB_QUESTSTAGING",
gotoPosition =
{sx=55, sy=55, sz=0, px=3110.203125, py=2152.203125, pz=752.353210, orientation=71.075348},
}
changeCreature {
tcid = 9642,
gotoPosition =
{sx=56, sy=55, sz=0, px=2468.890625, py=383.515625, pz=1161.289551, orientation=16.050293},
delay = 20
}
changeCreature {
tcid = 9642,
gotoPosition =
{sx=56, sy=54, sz=0, px=2600.000000, py=2900.000000, pz=0.000000, orientation=0.000000},
delay = 40
}
end)
quest.setScript( 3450, "OnWon", function(args)
changeCreature {
tcid = 9656,
mortality = "MORTAL",
role = "ROLE_ATTACKER"
}
end)
quest.setScript( 3455, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9661,
behaviour = "Enemy_warrior_brave_ex",
}
end)
quest.setScript( 3455, "OnWon", function(args)
changeCreature {
tcid = 9642,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
gotoPosition =
{sx=56, sy=54, sz=0, px=2114.656250, py=2603.796875, pz=1258.830200, orientation=311.742767},
}
creatureTeleportPos(9642,12,{0,0,0,0,0,0})
changeCreature {
tcid = 9642,
creature = "NPC_christmas_ogre",
delay = 15
}
creatureTeleportPos(9642,18,{56,54,0,2097.390,2570.593,1256.925,112})
changeCreature {
tcid = 9642,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
gotoPosition =
({sx=57, sy=54, sz=0, px=450, py=1150, pz=0, orientation=0}),
delay = 20,
followUpBhv = "questCreatures"
}
end)
quest.setScript( 3456, "OnStation", function(args)
if args.currentStation == 0 then
setWoobState {
woid = 1036206594,
state = "WOOB_THINGY_OFF",
}
end
end)
quest.setScript( 3456, "OnWon", function(args)
creatureTeleportPos(9642,0,{57,54,0,450,1150,0,0})
end)
quest.setScript( 3466, "OnWon", function(args)
setWoobState {
woid = 1036205678,
state = "WOOB_THINGY_ON",
}
end)
quest.setScript( 3469, "OnWon", function(args)
setWoobState {
woid = 1036205489,
state = "WOOB_THINGY_ON",
}
end)
quest.setScript( 3458, "OnCollect", function(args)
if nil then
if args.taskitem == 1463 then
setWoobState {
woid = 1034649866,
state = "WOOB_DOOR_CLOSED",
}
end
end
end)
quest.setScript( 3458, "OnWon", function(args)
destroyCreature{
tcid=9684,
splatter=false,
}
end)
quest.setScript( 3457, "OnStateChange", function(args)
if args.state == "PREFIGHT" then
changeCreature {
tcid = 9663,
behaviour = "Enemy_warrior_brave_ex",
}
end
end)
quest.setScript( 3457, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9663,
behaviour = "JOB_QUESTSTAGING",
gotoPosition =
{sx=57, sy=54, sz=0, px=472.343750, py=1781.859375, pz=1436.554443, orientation=27.672058},
followUpBhv = "questCreatures"
}
end)
quest.setScript( 3457, "OnTaskFulfilled", function(args)
local presents = {1036374230,1036374288,1036374324,1036374367,1036374444,1036374479,1036374508,1036374553, 1036300785 }
for i,woid in ipairs(presents) do
setWoobState {
woid = woid,
state = "WOOB_INVALID",
}
end
end)
quest.setScript( 3470, "OnTaskFulfilled", function(args)
CM_XmasCleanup()
solveQuest(3470)
end)
quest.setScript( 3473, "OnTaskFulfilled", function(args)
CM_XmasCleanup()
solveQuest(3473)
end)
quest.setScript( 3474, "OnTaskFulfilled", function(args)
CM_XmasCleanup()
solveQuest(3474)
end)
quest.setScript( 3475, "OnTaskFulfilled", function(args)
CM_XmasCleanup()
solveQuest(3475)
end)
quest.setScript( 3476, "OnTaskFulfilled", function(args)
CM_XmasCleanup()
solveQuest(3476)
end)
quest.setScript( 3477, "OnTaskFulfilled", function(args)
CM_XmasCleanup()
solveQuest(3477)
end)
quest.setScript( 3760, "OnTaskFulfilled", function(args)
CM_XmasCleanup()
solveQuest(3760)
end)
quest.setScript( 3493, "OnLost", function(args)
changeCreature {
tcid = 9725,
behaviour = "rabbit",
}
end)
quest.setScript( 3493, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9725,
behaviour = "rabbit",
}
end)
quest.setScript( 3486, "OnWon", function(args)
if getQuestState(3493) == "PRECONDS_FULFILLED" then
looseQuest(3493)
end
end)
quest.setScript( 3487, "OnDialog", function(args)
if args.state == "TASK_FULFILLED" then
return "QUEST_3487_TF_DLG"
end
end)
quest.setScript( 3490, "OnDialog", function(args)
if args.state == "TASK_FULFILLED" then
return "QUEST_3490_TF_DLG"
end
end)
quest.setScript( 3492, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9755,
visible = false,
delay = 1,
}
if nil then
changeCreature {
tcid = 9724,
useUnconscious = true,
unconsciousTime = 1,
livesRemaining = 1,
}
end
end)
quest.setScript( 3492, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 9755,
visible = true,
}
end)
quest.setScript( 3492, "OnUnconscious", function(args)
if nil then
if args.tcid == 9724 then
changeCreature {
tcid = 9724,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM01",
loopCount = 1,
faction = "FACTION_FRIEND_HERO_ALL",
role = "ROLE_INVALID",
}
end
end
end)
quest.setScript( 3495, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 9731,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx=21, sy=38, sz=0, px=804.250000, py=837.453003, pz=2968.520020, orientation=325.000000},
speed = 2,
followUpBhv = "Enemy_warrior_simple",
faction = "FACTION_ENEMY_HERO",
}
creatureTeleportsAway(9731,7)
end)
quest.setScript( 2257, "OnTalk", function(args)
if args.tcid==6848 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2259, "OnTalk", function(args)
if args.tcid==6893 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2261, "OnTalk", function(args)
if args.tcid==6891 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2263, "OnTalk", function(args)
if args.tcid==6854 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2265, "OnTalk", function(args)
if args.tcid==6892 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2267, "OnTalk", function(args)
if args.tcid==6858 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2269, "OnTalk", function(args)
if args.tcid==6871 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2272, "OnTalk", function(args)
if args.tcid==6876 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2273, "OnTalk", function(args)
if args.tcid==6887 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2275, "OnTalk", function(args)
if args.tcid==6886 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2392, "OnTalk", function(args)
if args.tcid==6861 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2394, "OnTalk", function(args)
if args.tcid==6874 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2396, "OnTalk", function(args)
if args.tcid==6850 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2398, "OnTalk", function(args)
if args.tcid==6855 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2400, "OnTalk", function(args)
if args.tcid==6890 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2402, "OnTalk", function(args)
if args.tcid==6852 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2409, "OnTalk", function(args)
if args.tcid==6866 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2413, "OnTalk", function(args)
if args.tcid==6894 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2415, "OnTalk", function(args)
if args.tcid==6881 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2417, "OnTalk", function(args)
if args.tcid==6867 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2427, "OnTalk", function(args)
if args.tcid==6851 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2429, "OnTalk", function(args)
if args.tcid==6853 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2431, "OnTalk", function(args)
if args.tcid==6909 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2433, "OnTalk", function(args)
if args.tcid==6963 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2437, "OnTalk", function(args)
if args.tcid==7168 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2439, "OnTalk", function(args)
if args.tcid==6873 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2441, "OnTalk", function(args)
if args.tcid==6865 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2443, "OnTalk", function(args)
if args.tcid==6841 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2445, "OnTalk", function(args)
if args.tcid==6839 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2447, "OnTalk", function(args)
if args.tcid==6884 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2449, "OnTalk", function(args)
if args.tcid==6895 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2451, "OnTalk", function(args)
if args.tcid==6845 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2453, "OnTalk", function(args)
if args.tcid==6846 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2455, "OnTalk", function(args)
if args.tcid==6856 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2457, "OnTalk", function(args)
if args.tcid==6842 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2459, "OnTalk", function(args)
if args.tcid==6857 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2553, "OnTalk", function(args)
if args.tcid==6863 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2555, "OnTalk", function(args)
if args.tcid==6879 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2557, "OnTalk", function(args)
if args.tcid==6889 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2559, "OnTalk", function(args)
if args.tcid==6885 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2561, "OnTalk", function(args)
if args.tcid==6872 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2563, "OnTalk", function(args)
if args.tcid==6860 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2565, "OnTalk", function(args)
if args.tcid==6849 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2567, "OnTalk", function(args)
if args.tcid==6843 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2569, "OnTalk", function(args)
if args.tcid==6844 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2572, "OnTalk", function(args)
if args.tcid==6896 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2573, "OnTalk", function(args)
if args.tcid==6864 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2575, "OnTalk", function(args)
if args.tcid==6888 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2577, "OnTalk", function(args)
if args.tcid==6862 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2579, "OnTalk", function(args)
if args.tcid==6910 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2583, "OnTalk", function(args)
if args.tcid==7154 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2585, "OnTalk", function(args)
if args.tcid==7227 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2587, "OnTalk", function(args)
if args.tcid==7228 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2913, "OnTalk", function(args)
if args.tcid==7854 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2914, "OnTalk", function(args)
if args.tcid==7855 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2915, "OnTalk", function(args)
if args.tcid==7856 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2916, "OnTalk", function(args)
if args.tcid==7857 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2917, "OnTalk", function(args)
if args.tcid==7858 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2918, "OnTalk", function(args)
if args.tcid==7859 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2919, "OnTalk", function(args)
if args.tcid==7860 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2920, "OnTalk", function(args)
if args.tcid==7861 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2921, "OnTalk", function(args)
if args.tcid==7862 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2922, "OnTalk", function(args)
if args.tcid==7863 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2964, "OnTalk", function(args)
if args.tcid==8268 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2965, "OnTalk", function(args)
if args.tcid==8269 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2966, "OnTalk", function(args)
if args.tcid==8270 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2967, "OnTalk", function(args)
if args.tcid==8272 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2968, "OnTalk", function(args)
if args.tcid==8271 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2969, "OnTalk", function(args)
if args.tcid==8273 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2970, "OnTalk", function(args)
if args.tcid==8274 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2971, "OnTalk", function(args)
if args.tcid==8275 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2972, "OnTalk", function(args)
if args.tcid==8276 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2973, "OnTalk", function(args)
if args.tcid==8277 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2974, "OnTalk", function(args)
if args.tcid==8278 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2975, "OnTalk", function(args)
if args.tcid==8279 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2976, "OnTalk", function(args)
if args.tcid==8280 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2977, "OnTalk", function(args)
if args.tcid==8282 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2978, "OnTalk", function(args)
if args.tcid==8283 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2979, "OnTalk", function(args)
if args.tcid==8284 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2980, "OnTalk", function(args)
if args.tcid==8285 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 3162, "OnTalk", function(args)
if args.tcid==8912 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 3302, "OnTalk", function(args)
if args.tcid==9020 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 3304, "OnTalk", function(args)
if args.tcid==9021 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 3306, "OnTalk", function(args)
if args.tcid==9022 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 3308, "OnTalk", function(args)
if args.tcid==9023 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 3310, "OnTalk", function(args)
if args.tcid==9024 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 3312, "OnTalk", function(args)
if args.tcid==9244 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 3314, "OnTalk", function(args)
if args.tcid==6837 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 3384, "OnTalk", function(args)
if args.tcid==9547 and args.state=="TASK_AWAITING" then
return bueroQuestTalk()
end
end)
quest.setScript( 2255, "OnTaskFulfilled", function(args)
local talkquests = {
2256,2258,2260,2262,2264,2266,2268,2270,2271,2274,
2391,2393,2395,2397,2399,2401,2408,2412,2414,2416,
2426,2428,2430,2432,2436,2438,2440,2442,2444,2446,
2448,2450,2452,2454,2456,2458,2552,2554,2556,2558,
2560,2562,2564,2566,2568,2570,2571,2574,2576,2578,
2582,2584,2586,2924,2925,2926,2927,2928,2929,2930,
2931,2942,2943,2944,2945,2946,2947,2948,2949,2950,
2951,2952,2953,2955,2956,2957,2958,2959,2960,2962,
3163,3301,3303,3305,3307,3309,3311,3313,3385,
}
for i,qid in ipairs(talkquests) do
solveQuest(qid)
end
end)
quest.setScript( 2652, "OnPrecondsFulfilled", function(args)
setWoobState { state = "WOOB_DOOR_CLOSE", woid = 1024204972 }
setWoobState { state = "WOOB_DOOR_CLOSE", woid = 1022995142 }
setWoobState { state = "WOOB_DOOR_CLOSE", woid = 1017520695 }
setWoobState { state = "WOOB_DOOR_CLOSE", woid = 1017465035 }
setWoobState { state = "WOOB_DOOR_CLOSE", woid = 1024277602 }
setWoobState { state = "WOOB_DOOR_CLOSE", woid = 1023948046 }
end)
quest.setScript( 2652, "OnStation", function(args)
if args.currentStation == 0 then
creatureTeleportPos(6895,0,{sx=47, sy=30, sz=-1, px=1794.953125, py=278.750000, pz=-0.012844, orientation=47.602539})
end
end)
quest.setScript( 2652, "OnTaskAwaiting", function(args)
creatureTeleportPos(7153,0,{sx=49, sy=30, sz=-1, px=1346.500000, py=203.500000, pz=-0.012509, orientation=-0.000014})
end)
quest.setScript( 2256, "OnTalk", function(args)
if args.tcid==6848 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2256, "OnTaskFulfilled", function(args)
creatureTeleportPos(6848,0,{sx=47, sy=30, sz=-2, px=1879.796875, py=1709.648438, pz=1.313227, orientation=314.692993})
end)
quest.setScript( 2258, "OnTalk", function(args)
if args.tcid==6893 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2258, "OnTaskFulfilled", function(args)
creatureTeleportPos(6893,0,{sx=47, sy=30, sz=-2, px=2593.453125, py=821.000000, pz=-0.002632, orientation=184.316010})
end)
quest.setScript( 2260, "OnTalk", function(args)
if args.tcid==6891 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2260, "OnTaskFulfilled", function(args)
creatureTeleportPos(6891,0,{sx=47, sy=30, sz=-1, px=2527.406250, py=2555.046875, pz=-0.018810, orientation=317.231171})
end)
quest.setScript( 2262, "OnTalk", function(args)
if args.tcid==6854 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2262, "OnTaskFulfilled", function(args)
creatureTeleportPos(6854,0,{sx=47, sy=30, sz=-1, px=2542.656250, py=2428.101563, pz=1.577443, orientation=267.349030})
end)
quest.setScript( 2264, "OnTalk", function(args)
if args.tcid==6892 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2264, "OnTaskFulfilled", function(args)
creatureTeleportPos(6892,0,{sx=47, sy=30, sz=-1, px=2666.406250, py=2288.601563, pz=-0.018810, orientation=247.870056})
end)
quest.setScript( 2266, "OnTalk", function(args)
if args.tcid==6858 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2266, "OnTaskFulfilled", function(args)
creatureTeleportPos(6858,0,{sx=47, sy=30, sz=-1, px=2664.000000, py=784.851563, pz=-0.016434, orientation=259.315094})
end)
quest.setScript( 2268, "OnTalk", function(args)
if args.tcid==6871 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2268, "OnTaskFulfilled", function(args)
creatureTeleportPos(6871,0,{sx=47, sy=30, sz=-1, px=2604.343750, py=2011.328125, pz=-0.018810, orientation=215.865189})
end)
quest.setScript( 2270, "OnTalk", function(args)
if args.tcid==6887 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2270, "OnTaskFulfilled", function(args)
creatureTeleportPos(6887,0,{sx=47, sy=30, sz=-1, px=1827.250000, py=1428.953125, pz=0.692247, orientation=36.747467})
end)
quest.setScript( 2271, "OnTalk", function(args)
if args.tcid==6876 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2271, "OnTaskFulfilled", function(args)
creatureTeleportPos(6876,0,{sx=47, sy=30, sz=-1, px=1704.750000, py=1424.250000, pz=-0.019512, orientation=52.244354})
end)
quest.setScript( 2274, "OnStation", function(args)
if args.currentStation == 0 then
bueroQuestReach()
end
end)
quest.setScript( 2274, "OnTalk", function(args)
if args.tcid==6886 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2274, "OnTaskFulfilled", function(args)
creatureTeleportPos(6886,0,{sx=47, sy=30, sz=-1, px=2538.093750, py=1167.796875, pz=-0.018810, orientation=222.768814})
end)
quest.setScript( 2391, "OnTalk", function(args)
if args.tcid==6861 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2391, "OnTaskFulfilled", function(args)
creatureTeleportPos(6861,0,{sx=47, sy=30, sz=-1, px=1762.437500, py=814.500000, pz=-0.017757, orientation=169.015060})
end)
quest.setScript( 2393, "OnTalk", function(args)
if args.tcid==6874 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2393, "OnTaskFulfilled", function(args)
creatureTeleportPos(6874,0,{sx=47, sy=30, sz=-1, px=1902.703125, py=1984.804688, pz=-0.017757, orientation=318.249115})
end)
quest.setScript( 2395, "OnTalk", function(args)
if args.tcid==6850 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2395, "OnTaskFulfilled", function(args)
creatureTeleportPos(6850,0,{sx=47, sy=30, sz=-1, px=1721.593750, py=2188.250000, pz=-0.017757, orientation=64.421539})
end)
quest.setScript( 2397, "OnTalk", function(args)
if args.tcid==6855 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2397, "OnTaskFulfilled", function(args)
creatureTeleportPos(6855,0,{sx=47, sy=30, sz=-1, px=2658.656250, py=1037.101563, pz=-0.018810, orientation=301.138977})
end)
quest.setScript( 2399, "OnTalk", function(args)
if args.tcid==6890 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2399, "OnTaskFulfilled", function(args)
creatureTeleportPos(6890,0,{sx=47, sy=30, sz=-1, px=1867.296875, py=872.953125, pz=-0.017757, orientation=306.430878})
end)
quest.setScript( 2401, "OnTalk", function(args)
if args.tcid==6852 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2401, "OnTaskFulfilled", function(args)
creatureTeleportPos(6852,0,{sx=47, sy=30, sz=-2, px=2668.484375, py=787.039063, pz=-0.002632, orientation=214.947739})
end)
quest.setScript( 2408, "OnTalk", function(args)
if args.tcid==6866 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2408, "OnTaskFulfilled", function(args)
creatureTeleportPos(6866,0,{sx=47, sy=30, sz=-1, px=2673.296875, py=1439.851563, pz=-0.018810, orientation=341.146820})
end)
quest.setScript( 2412, "OnTalk", function(args)
if args.tcid==6894 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2412, "OnTaskFulfilled", function(args)
creatureTeleportPos(6894,0,{sx=47, sy=30, sz=-2, px=2578.390625, py=1389.921875, pz=-0.002632, orientation=66.037750})
end)
quest.setScript( 2414, "OnTalk", function(args)
if args.tcid==6881 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2414, "OnTaskFulfilled", function(args)
creatureTeleportPos(6881,0,{sx=47, sy=30, sz=-2, px=2633.843750, py=1634.000000, pz=-0.002632, orientation=217.885834})
end)
quest.setScript( 2416, "OnTalk", function(args)
if args.tcid==6867 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2416, "OnTaskFulfilled", function(args)
creatureTeleportPos(6867,0,{sx=47, sy=30, sz=-1, px=2679.750000, py=1188.250000, pz=-0.018810, orientation=204.775131})
end)
quest.setScript( 2426, "OnTalk", function(args)
if args.tcid==6851 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2426, "OnTaskFulfilled", function(args)
creatureTeleportPos(6851,0,{sx=47, sy=30, sz=-1, px=2301.843750, py=1172.296875, pz=-0.020454, orientation=160.506927})
end)
quest.setScript( 2428, "OnTalk", function(args)
if args.tcid==6853 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2428, "OnTaskFulfilled", function(args)
creatureTeleportPos(6853,0,{sx=47, sy=30, sz=-1, px=1859.703125, py=1744.007813, pz=-0.017757, orientation=332.462433})
end)
quest.setScript( 2430, "OnTalk", function(args)
if args.tcid==6909 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2430, "OnTaskFulfilled", function(args)
creatureTeleportPos(6909,0,{sx=47, sy=30, sz=-2, px=2349.000000, py=1739.585938, pz=-0.004692, orientation=256.184998})
end)
quest.setScript( 2432, "OnTalk", function(args)
if args.tcid==6963 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2432, "OnTaskFulfilled", function(args)
creatureTeleportPos(6963,0,{sx=47, sy=30, sz=-2, px=1737.609375, py=1556.445313, pz=-0.002632, orientation=144.271225})
end)
quest.setScript( 2436, "OnTalk", function(args)
if args.tcid==7168 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2436, "OnTaskFulfilled", function(args)
creatureTeleportPos(7168,0,{sx=49, sy=30, sz=-1, px=2120.906250, py=2123.703125, pz=-0.008171, orientation=300.618591})
end)
quest.setScript( 2438, "OnTalk", function(args)
if args.tcid==6873 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2438, "OnTaskFulfilled", function(args)
creatureTeleportPos(6873,0,{sx=47, sy=30, sz=-1, px=2363.703125, py=2536.898438, pz=-0.019512, orientation=301.914948})
end)
quest.setScript( 2440, "OnTalk", function(args)
if args.tcid==6865 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2440, "OnTaskFulfilled", function(args)
creatureTeleportPos(6865,0,{sx=47, sy=30, sz=-1, px=2414.093750, py=800.648438, pz=-0.018810, orientation=177.972672})
end)
quest.setScript( 2442, "OnTalk", function(args)
if args.tcid==6841 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2442, "OnTaskFulfilled", function(args)
creatureTeleportPos(6841,0,{sx=47, sy=30, sz=-2, px=2674.843750, py=997.500000, pz=-0.002632, orientation=326.048889})
end)
quest.setScript( 2444, "OnTalk", function(args)
if args.tcid==6839 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2444, "OnTaskFulfilled", function(args)
creatureTeleportPos(6839,0,{sx=47, sy=30, sz=-2, px=2525.796875, py=1022.898438, pz=0.798752, orientation=349.904938})
end)
quest.setScript( 2446, "OnTalk", function(args)
if args.tcid==6884 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2446, "OnTaskFulfilled", function(args)
creatureTeleportPos(6884,0,{sx=47, sy=30, sz=-1, px=1754.796875, py=2319.398438, pz=-0.017757, orientation=104.945618})
end)
quest.setScript( 2448, "OnTalk", function(args)
if args.tcid==6895 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2448, "OnTaskFulfilled", function(args)
creatureTeleportPos(6895,0,{sx=47, sy=30, sz=-1, px=1794.953125, py=278.750000, pz=-0.012844, orientation=47.602539})
end)
quest.setScript( 2450, "OnTalk", function(args)
if args.tcid==6845 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2450, "OnTaskFulfilled", function(args)
creatureTeleportPos(6845,0,{sx=47, sy=30, sz=-1, px=2574.593750, py=797.398438, pz=-0.016434, orientation=202.351364})
end)
quest.setScript( 2452, "OnTalk", function(args)
if args.tcid==6846 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2452, "OnTaskFulfilled", function(args)
creatureTeleportPos(6846,0,{sx=47, sy=30, sz=-1, px=1849.703125, py=2123.453125, pz=-0.017757, orientation=321.766174})
end)
quest.setScript( 2454, "OnTalk", function(args)
if args.tcid==6856 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2454, "OnTaskFulfilled", function(args)
creatureTeleportPos(6856,0,{sx=47, sy=30, sz=-1, px=1712.093750, py=1606.101563, pz=-0.017757, orientation=137.069992})
end)
quest.setScript( 2456, "OnTalk", function(args)
if args.tcid==6842 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2456, "OnTaskFulfilled", function(args)
creatureTeleportPos(6842,0,{sx=47, sy=30, sz=-2, px=2570.796875, py=1911.500000, pz=-0.002632, orientation=9.235535})
end)
quest.setScript( 2458, "OnTalk", function(args)
if args.tcid==6857 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2458, "OnTaskFulfilled", function(args)
creatureTeleportPos(6857,0,{sx=47, sy=30, sz=-1, px=2328.250000, py=1598.351563, pz=-0.020454, orientation=205.624146})
end)
quest.setScript( 2552, "OnTaskFulfilled", function(args)
creatureTeleportPos(6863,0,{sx=47, sy=30, sz=-1, px=2558.250000, py=1042.148438, pz=-0.018810, orientation=303.690063})
end)
quest.setScript( 2554, "OnTalk", function(args)
if args.tcid==6879 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2554, "OnTaskFulfilled", function(args)
creatureTeleportPos(6879,0,{sx=47, sy=30, sz=-1, px=1735.671875, py=2554.804688, pz=-0.018810, orientation=75.393890})
end)
quest.setScript( 2556, "OnTalk", function(args)
if args.tcid==6889 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2556, "OnTaskFulfilled", function(args)
creatureTeleportPos(6889,0,{sx=47, sy=30, sz=-1, px=1723.500000, py=1051.203125, pz=-0.017757, orientation=59.247986})
end)
quest.setScript( 2558, "OnTalk", function(args)
if args.tcid==6885 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2558, "OnTaskFulfilled", function(args)
creatureTeleportPos(6885,0,{sx=47, sy=30, sz=-1, px=2670.453125, py=1611.500000, pz=-0.018810, orientation=258.005737})
end)
quest.setScript( 2560, "OnTalk", function(args)
if args.tcid==6872 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2560, "OnTaskFulfilled", function(args)
creatureTeleportPos(6872,0,{sx=47, sy=30, sz=-1, px=2671.578125, py=2170.460938, pz=-0.018810, orientation=293.918121})
end)
quest.setScript( 2562, "OnTalk", function(args)
if args.tcid==6860 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2562, "OnTaskFulfilled", function(args)
creatureTeleportPos(6860,0,{sx=47, sy=30, sz=-1, px=2427.656250, py=1027.000000, pz=-0.018810, orientation=348.643250})
end)
quest.setScript( 2564, "OnTalk", function(args)
if args.tcid==6849 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2564, "OnTaskFulfilled", function(args)
creatureTeleportPos(6849,0,{sx=47, sy=30, sz=-1, px=1711.000000, py=1975.703125, pz=-0.017757, orientation=152.152405})
end)
quest.setScript( 2566, "OnTalk", function(args)
if args.tcid==6843 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2566, "OnTaskFulfilled", function(args)
creatureTeleportPos(6843,0,{sx=47, sy=30, sz=-1, px=2534.046875, py=1584.453125, pz=-0.018810, orientation=162.264816})
end)
quest.setScript( 2568, "OnTalk", function(args)
if args.tcid==6844 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2568, "OnTaskFulfilled", function(args)
creatureTeleportPos(6844,0,{sx=47, sy=30, sz=-1, px=2674.546875, py=1860.203125, pz=-0.018810, orientation=279.849030})
end)
quest.setScript( 2570, "OnTalk", function(args)
if args.tcid==6896 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2570, "OnTaskFulfilled", function(args)
creatureTeleportPos(6896,0,{sx=47, sy=30, sz=-1, px=2676.203125, py=2592.351563, pz=-0.018810, orientation=345.154541})
end)
quest.setScript( 2571, "OnTalk", function(args)
if args.tcid==6864 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2571, "OnTaskFulfilled", function(args)
creatureTeleportPos(6864,0,{sx=47, sy=30, sz=-1, px=1724.406250, py=1816.953125, pz=-0.017757, orientation=66.203308})
end)
quest.setScript( 2574, "OnTalk", function(args)
if args.tcid==6888 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2574, "OnTaskFulfilled", function(args)
creatureTeleportPos(6888,0,{sx=47, sy=30, sz=-1, px=1846.296875, py=2495.789063, pz=1.122268, orientation=100.549286})
end)
quest.setScript( 2576, "OnTalk", function(args)
if args.tcid==6862 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2576, "OnTaskFulfilled", function(args)
creatureTeleportPos(6862,0,{sx=47, sy=30, sz=-1, px=1710.250000, py=1196.851563, pz=-0.017757, orientation=136.896988})
end)
quest.setScript( 2578, "OnTalk", function(args)
if args.tcid==6910 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2578, "OnTaskFulfilled", function(args)
creatureTeleportPos(6910,0,{sx=47, sy=30, sz=-2, px=2666.593750, py=1862.101563, pz=-0.002632, orientation=307.434998})
end)
quest.setScript( 2582, "OnTalk", function(args)
if args.tcid==7154 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2582, "OnTaskFulfilled", function(args)
creatureTeleportPos(7154,0,{sx=49, sy=30, sz=-1, px=1181.500000, py=829.796875, pz=0.797134, orientation=98.754974})
end)
quest.setScript( 2584, "OnTalk", function(args)
if args.tcid==7227 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2584, "OnTaskFulfilled", function(args)
creatureTeleportPos(7227,0,{sx=47, sy=30, sz=-2, px=1795.750000, py=1170.351563, pz=-0.002632, orientation=129.072510})
end)
quest.setScript( 2586, "OnTalk", function(args)
if args.tcid==7228 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2586, "OnTaskFulfilled", function(args)
creatureTeleportPos(7228,0,{sx=47, sy=30, sz=-2, px=1745.343750, py=1786.296875, pz=-0.002632, orientation=26.221863})
end)
quest.setScript( 2924, "OnTalk", function(args)
if args.tcid==7854 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2924, "OnTaskFulfilled", function(args)
creatureTeleportPos(7854,0,{sx=49, sy=30, sz=-1, px=1924.500000, py=1342.398438, pz=-0.012749, orientation=6.137239})
end)
quest.setScript( 2925, "OnTalk", function(args)
if args.tcid==7855 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2925, "OnTaskFulfilled", function(args)
creatureTeleportPos(7855,0,{sx=47, sy=30, sz=-2, px=2131.796875, py=98.273438, pz=-0.006371, orientation=7.525757})
end)
quest.setScript( 2926, "OnTalk", function(args)
if args.tcid==7856 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2926, "OnTaskFulfilled", function(args)
creatureTeleportPos(7856,0,{sx=49, sy=30, sz=-1, px=1968.343750, py=2109.101563, pz=-0.012749, orientation=211.246918})
end)
quest.setScript( 2927, "OnTalk", function(args)
if args.tcid==7857 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2927, "OnTaskFulfilled", function(args)
creatureTeleportPos(7857,0,{sx=49, sy=30, sz=-1, px=1927.953125, py=2379.101563, pz=-0.012749, orientation=210.661362})
end)
quest.setScript( 2928, "OnTalk", function(args)
if args.tcid==7858 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2928, "OnTaskFulfilled", function(args)
creatureTeleportPos(7858,0,{sx=49, sy=30, sz=-1, px=1155.687500, py=2308.671875, pz=-0.008171, orientation=84.881165})
end)
quest.setScript( 2929, "OnTalk", function(args)
if args.tcid==7859 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2929, "OnTaskFulfilled", function(args)
creatureTeleportPos(7859,0,{sx=49, sy=30, sz=-1, px=1175.406250, py=2493.648438, pz=-0.008171, orientation=73.764587})
end)
quest.setScript( 2930, "OnTalk", function(args)
if args.tcid==7860 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2930, "OnTaskFulfilled", function(args)
creatureTeleportPos(7860,0,{sx=47, sy=30, sz=-2, px=1732.703125, py=803.296875, pz=-0.002632, orientation=157.148712})
end)
quest.setScript( 2931, "OnTalk", function(args)
if args.tcid==7861 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 2931, "OnTaskFulfilled", function(args)
creatureTeleportPos(7861,0,{sx=47, sy=30, sz=-2, px=1776.203125, py=1022.046875, pz=-0.002632, orientation=53.478577})
end)
quest.setScript( 2942, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 7862 then
return bueroQuestReach()
end
end)
quest.setScript( 2942, "OnTaskFulfilled", function(args)
creatureTeleportPos(7862,0,{sx=49, sy=30, sz=-1, px=1205.250000, py=2555.750000, pz=-0.008900, orientation=100.477875})
end)
quest.setScript( 2943, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 7863 then
return bueroQuestReach()
end
end)
quest.setScript( 2943, "OnTaskFulfilled", function(args)
creatureTeleportPos(7863,0,{sx=49, sy=30, sz=-1, px=1907.250000, py=1024.507813, pz=-0.012749, orientation=342.571198})
end)
quest.setScript( 2944, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 8268 then
return bueroQuestReach()
end
end)
quest.setScript( 2944, "OnTaskFulfilled", function(args)
creatureTeleportPos(8268,0,{sx=49, sy=30, sz=-1, px=2066.281250, py=2552.554688, pz=-0.008171, orientation=84.326790})
end)
quest.setScript( 2945, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 8269 then
return bueroQuestReach()
end
end)
quest.setScript( 2945, "OnTaskFulfilled", function(args)
creatureTeleportPos(8269,0,{sx=49, sy=30, sz=-1, px=1876.593750, py=2517.203125, pz=-0.008898, orientation=354.042877})
end)
quest.setScript( 2946, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 8270 then
return bueroQuestReach()
end
end)
quest.setScript( 2946, "OnTaskFulfilled", function(args)
creatureTeleportPos(8270,0,{sx=49, sy=30, sz=-1, px=1882.296875, py=793.101563, pz=-0.008900, orientation=254.173843})
end)
quest.setScript( 2947, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 8271 then
return bueroQuestReach()
end
end)
quest.setScript( 2947, "OnTaskFulfilled", function(args)
creatureTeleportPos(8271,0,{sx=47, sy=30, sz=-2, px=1761.750000, py=57.500000, pz=-0.004158, orientation=140.007355})
end)
quest.setScript( 2948, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 8272 then
return bueroQuestReach()
end
end)
quest.setScript( 2948, "OnTaskFulfilled", function(args)
creatureTeleportPos(8272,0,{sx=49, sy=30, sz=-1, px=1882.000000, py=1710.953125, pz=-0.012749, orientation=204.362442})
end)
quest.setScript( 2949, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 8273 then
return bueroQuestReach()
end
end)
quest.setScript( 2949, "OnTaskFulfilled", function(args)
creatureTeleportPos(8273,0,{sx=49, sy=30, sz=-1, px=2001.750000, py=770.601563, pz=-0.008900, orientation=189.962296})
end)
quest.setScript( 2950, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 8274 then
return bueroQuestReach()
end
end)
quest.setScript( 2950, "OnTaskFulfilled", function(args)
creatureTeleportPos(8274,0,{sx=49, sy=30, sz=-1, px=2110.656250, py=1916.500000, pz=-0.008898, orientation=198.434952})
end)
quest.setScript( 2951, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 8275 then
return bueroQuestReach()
end
end)
quest.setScript( 2951, "OnTaskFulfilled", function(args)
creatureTeleportPos(8275,0,{sx=49, sy=30, sz=-1, px=1230.203125, py=163.500000, pz=-0.012508, orientation=58.134003})
end)
quest.setScript( 2952, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 8276 then
return bueroQuestReach()
end
end)
quest.setScript( 2952, "OnTaskFulfilled", function(args)
creatureTeleportPos(8276,0,{sx=49, sy=30, sz=-1, px=1437.796875, py=14.414063, pz=-0.010772, orientation=209.054596})
end)
quest.setScript( 2953, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 8277 then
return bueroQuestReach()
end
end)
quest.setScript( 2953, "OnTaskFulfilled", function(args)
creatureTeleportPos(8277,0,{sx=49, sy=30, sz=-1, px=2106.796875, py=2334.851563, pz=-0.008171, orientation=189.019318})
end)
quest.setScript( 2955, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 8278 then
return bueroQuestReach()
end
end)
quest.setScript( 2955, "OnTaskFulfilled", function(args)
creatureTeleportPos(8278,0,{sx=49, sy=30, sz=-1, px=2022.046875, py=1762.796875, pz=-0.008900, orientation=59.161621})
end)
quest.setScript( 2956, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 8279 then
return bueroQuestReach()
end
end)
quest.setScript( 2956, "OnTaskFulfilled", function(args)
creatureTeleportPos(8279,0,{sx=49, sy=30, sz=-1, px=1796.750000, py=1220.546875, pz=-0.012749, orientation=90.289368})
end)
quest.setScript( 2957, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 8280 then
return bueroQuestReach()
end
end)
quest.setScript( 2957, "OnTaskFulfilled", function(args)
creatureTeleportPos(8280,0,{sx=49, sy=30, sz=-1, px=1936.265625, py=1961.578125, pz=-0.012749, orientation=14.969547})
end)
quest.setScript( 2958, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 8282 then
return bueroQuestReach()
end
end)
quest.setScript( 2958, "OnTaskFulfilled", function(args)
creatureTeleportPos(8282,0,{sx=49, sy=30, sz=-1, px=1168.750000, py=1786.953125, pz=-0.008171, orientation=57.200439})
end)
quest.setScript( 2959, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 8283 then
return bueroQuestReach()
end
end)
quest.setScript( 2959, "OnTaskFulfilled", function(args)
creatureTeleportPos(8283,0,{sx=49, sy=30, sz=-1, px=1160.406250, py=1523.453125, pz=-0.008171, orientation=143.628784})
end)
quest.setScript( 2960, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 8284 then
return bueroQuestReach()
end
end)
quest.setScript( 2960, "OnTaskFulfilled", function(args)
creatureTeleportPos(8284,0,{sx=49, sy=30, sz=-1, px=1341.703125, py=2255.000000, pz=-0.012749, orientation=206.463882})
end)
quest.setScript( 2962, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 8285 then
return bueroQuestReach()
end
end)
quest.setScript( 2962, "OnTaskFulfilled", function(args)
creatureTeleportPos(8285,0,{sx=49, sy=30, sz=-1, px=1170.750000, py=2263.546875, pz=-0.008171, orientation=127.098389})
end)
quest.setScript( 3163, "OnTalk", function(args)
if args.tcid==8912 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 3163, "OnTaskFulfilled", function(args)
creatureTeleportPos(8912,0,{sx=47, sy=30, sz=-2, px=2078.671875, py=169.093750, pz=-0.006371, orientation=269.000763})
end)
quest.setScript( 3301, "OnTalk", function(args)
if args.tcid==9020 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 3301, "OnTaskFulfilled", function(args)
creatureTeleportPos(9020,0,{sx=47, sy=30, sz=-2, px=1870.453125, py=955.648438, pz=0.798508, orientation=14.595245})
end)
quest.setScript( 3303, "OnTalk", function(args)
if args.tcid==9021 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 3303, "OnTaskFulfilled", function(args)
creatureTeleportPos(9021,0,{sx=47, sy=29, sz=-2, px=1851.796875, py=3182.750000, pz=-0.008684, orientation=193.421829})
end)
quest.setScript( 3305, "OnTalk", function(args)
if args.tcid==9022 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 3305, "OnTaskFulfilled", function(args)
creatureTeleportPos(9022,0,{sx=47, sy=30, sz=-2, px=1947.953125, py=281.523438, pz=-0.004158, orientation=42.069794})
end)
quest.setScript( 3307, "OnTalk", function(args)
if args.tcid==9023 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 3307, "OnTaskFulfilled", function(args)
creatureTeleportPos(9023,0,{sx=47, sy=30, sz=-2, px=2356.906250, py=1883.351563, pz=-0.004692, orientation=276.047668})
end)
quest.setScript( 3309, "OnTalk", function(args)
if args.tcid==9024 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 3309, "OnTaskFulfilled", function(args)
creatureTeleportPos(9024,0,{sx=49, sy=30, sz=-1, px=1232.156250, py=1932.898438, pz=0.797134, orientation=148.226044})
end)
quest.setScript( 3311, "OnTalk", function(args)
if args.tcid==9244 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 3311, "OnTaskFulfilled", function(args)
creatureTeleportPos(9244,0,{sx=47, sy=30, sz=-2, px=2346.046875, py=1966.648438, pz=-0.004692, orientation=280.709869})
end)
quest.setScript( 3313, "OnTalk", function(args)
if args.tcid==6837 and args.state=="TASK_AWAITING" then
return bueroQuestReach()
end
end)
quest.setScript( 3313, "OnTaskFulfilled", function(args)
creatureTeleportPos(6837,0,{sx=47, sy=30, sz=-2, px=1790.453125, py=1381.398438, pz=-0.002632, orientation=66.864288})
end)
quest.setScript( 3385, "OnTalk", function(args)
if args.state=="TASK_AWAITING" and args.tcid == 9547 then
return bueroQuestReach()
end
end)
quest.setScript( 3385, "OnTaskFulfilled", function(args)
creatureTeleportPos(9547,0,{sx=47, sy=30, sz=-2, px=1931.984375, py=857.484375, pz=-0.002632, orientation=230.355820})
end)
quest.setScript( 2880, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
changeCreature {
tcid = 8188,
behaviour = "JOB_QUESTSTAGING",
bubble = 1,
emotion = "ANIM_TYPE_IDLE",
clearAutoTeleporting = true,
loopCount = 2,
delay = 1,
followUpBhv = "questCreatures"
}
end
end)
quest.setScript( 2880, "OnTalk", function(args)
if args.tcid == 8188 then
changeCreature {
tcid = 8188,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICA",
bubble = 2
}
end
end)
quest.setScript( 2880, "OnWon", function(args)
changeCreature {
tcid = 8188,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_MAGICA",
bubble = 1
}
end)
quest.setScript( 2902, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
local bgtcs = { 8261, 8262, 8263 }
for i, tcid in ipairs(bgtcs) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
bubble = 1,
emotion = "ANIM_TYPE_IDLE",
loopCount = 2,
delay = 0.1,
followUpBhv = "questCreatures"
}
end
end
end)
quest.setScript( 2902, "OnTaskAwaiting", function(args)
creatureTeleportPos ( 8188, 0, { 38, 26, 0, 1800, 1150, 11 } )
teleportTeam( 2902, { sx=38, sy=26, sz=0, px=1733, py=1180, pz=11, orientation=212 } )
end)
quest.setScript( 2907, "OnTaskAwaiting", function(args)
creatureTeleportPos ( 8188, 0, { 38, 26, 0, 1800, 1150, 11 } )
end)
quest.setScript( 2909, "OnSetup", function(args)
BlindGuardianStation = { 0, 0, 0 }
end)
quest.setScript( 2909, "OnStation", function(args)
if BlindGuardianStation[1] == 0 then
BlindGuardianStation[1] = 1
elseif BlindGuardianStation[2] == 0 then
BlindGuardianStation[2] = 1
elseif BlindGuardianStation[3] == 0 then
BlindGuardianStation[3] = 1
else
BlindGuardianStation = nil
end
end)
quest.setScript( 2909, "OnWon", function(args)
playMovie {
movie = MOVIE_CONCERT,
delay = 1
}
end)
quest.setScript( 2938, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
local bgtcs = { 8188, 8261, 8262, 8263 }
for i, tcid in ipairs(bgtcs) do
changeCreature {
tcid = tcid,
behaviour = "JOB_QUESTSTAGING",
bubble = 9,
emotion = "ANIM_TYPE_IDLE",
loopCount = 2,
delay = 0.1,
followUpBhv = "questCreatures"
}
end
end
end)
quest.setScript( 2938, "OnWon", function(args)
local bgtcs = { 8188, 8261, 8262, 8263 }
for i, tcid in ipairs(bgtcs) do
CM_CreatureAway( tcid, 2 )
end
end)
quest.setScript( 2961, "OnWon", function(args)
unlockShipPortal(2961,5,"NORTH",args.heroRef)
end)
quest.setScript( 3010, "OnSetup", function(args)
Quest_3010_TA = true
changeCreature {
tcid = 8425,
visible = false,
delay = 0.1,
}
changeCreature {
tcid = 8695,
visible = false,
delay = 0.1,
}
changeCreature {
tcid = 8696,
visible = false,
delay = 0.1,
}
changeCreature {
tcid = 8697,
visible = false,
delay = 0.1,
}
changeCreature {
tcid = 8698,
visible = false,
delay = 0.1,
}
changeCreature {
tcid = 8699,
visible = false,
delay = 0.1,
}
changeCreature {
tcid = 8700,
visible = false,
delay = 0.1,
}
end)
quest.setScript( 3010, "OnTaskFulfilled", function(args)
Quest_3010_TA = false
end)
quest.setScript( 3010, "OnWon", function(args)
changeCreature {
tcid = 8418,
merchantType = "MERCHANT_PRIEST",
}
Quest_3010_TA = nil
end)
quest.setScript( 3011, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 8425,
behaviour = "Enemy_warrior_brave_tenergy",
visible = true,
delay = 0.1,
}
end)
quest.setScript( 3086, "OnPrecondsFulfilled", function(args)
changeCreature {
tcid = 8621,
effect = "FXTYPE_CHEST1A",
}
end)
quest.setScript( 3086, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 8309,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_BEG",
loopCount = -1,
}
end)
quest.setScript( 3093, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 8695,
behaviour = "Enemy_warrior_brave_tenergy",
visible = true,
delay = 0.1,
}
end)
quest.setScript( 3094, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 8696,
behaviour = "Enemy_warrior_brave_tenergy",
visible = true,
delay = 0.1,
}
end)
quest.setScript( 3095, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 8697,
behaviour = "Enemy_warrior_brave_tenergy",
visible = true,
delay = 0.1,
}
end)
quest.setScript( 3096, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 8698,
behaviour = "Enemy_warrior_brave_tenergy",
visible = true,
delay = 0.1,
}
end)
quest.setScript( 3097, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 8699,
behaviour = "Enemy_warrior_brave_tenergy",
visible = true,
delay = 0.1,
}
end)
quest.setScript( 3098, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 8700,
behaviour = "Enemy_warrior_brave_tenergy",
visible = true,
delay = 0.1,
}
end)
quest.setScript( 3425, "OnTaskFulfilled", function(args)
creatureTeleportsAway (9696,0)
end)
quest.setScript( 3421, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 9698,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx= 43,sy=56,sz=0,px=2650.000000,py=750.000000,pz=0.000000}
}
end)
quest.setScript( 3434, "OnTaskAwaiting", function(args)
local group = {9607,9608,9609}
for index,tcid in ipairs(group) do
changeCreature {
tcid = tcid,
addToGroup = 9607,
}
end
end)
quest.setScript( 3434, "OnTaskFulfilled", function(args)
creatureTeleportsAway (9692, 1)
end)
quest.setScript( 3423, "OnTaskFulfilled", function(args)
creatureTeleportsAway (9705,0)
end)
quest.setScript( 3428, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 9711,
behaviour = "JOB_QUESTSTAGING",
gotoPosition = {sx= 46,sy=47,sz=0,px=2650.000000,py=750.000000,pz=0.000000},
speed = 2,
}
creatureTeleportsAway (9711,15)
end)
quest.setScript( 3429, "OnTaskFulfilled", function(args)
creatureTeleportsAway (9695,0)
end)
quest.setScript( 3376, "OnWon", function(args)
local grp = {9367,9366,9365,9364,9363}
for index,tcid in ipairs(grp) do
changeCreature {
tcid = tcid,
addToGroup = 9367,
}
end
end)
quest.setScript( 862, "OnTaskAwaiting", function(args)
local attackers = {1527,1528,1547,1548}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 863, "OnTaskAwaiting", function(args)
local attackers = {4543,8797,8798,6263,6264,6265,6266,6267}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 864, "OnTaskAwaiting", function(args)
local attackers = {406,431,432,435,437,438}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
role = "ROLE_ATTACKER",
}
end
end)
quest.setScript( 865, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" then
changeCreature {
tcid = args.tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
end
end)
quest.setScript( 939, "OnTaskAwaiting", function(args)
local OLD_TC = 10151
local NEW_TC = 2547
local TCpos
TCpos = getPos { tcid = OLD_TC }
createEffect {
position = TCpos,
effect = "FXTYPE_SMOKEBIGWHITE",
duration = 4,
}
CM_CreatureAway (OLD_TC, 1,"ANIM_TYPE_WORSHIP")
createEffect {
position = TCpos,
effect = "FXTYPE_GEN_NOVA1",
delay = 2,
}
createEffect {
position = TCpos,
effect = "FXTYPE_GEN_NOVA3",
delay = 3,
}
setTimer{
id = 939,
interval = 3,
count = 1
}
end)
quest.setScript( 939, "OnTimer", function(args)
solveQuest (args.id)
end)
quest.setScript( 939, "OnWon", function(args)
local attackers = {1527,1528,1547,1548 , 4543,8797,8798,6263,6264,6265,6266,6267 , 406,431,432,435,437,438}
for id,member in ipairs(attackers) do
changeCreature {
tcid = member,
behaviour = "JOB_QUESTSTAGING",
role = "ROLE_INVALID",
}
CM_CreatureAway(member,id*0.1)
end
end)
quest.setScript( 1655, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" then
changeCreature {
tcid = args.tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
end
end)
quest.setScript( 1650, "OnWon", function(args)
local tcs = { 10151, 10239, 2543, 2544, 2545, 2547 }
for i, tcid in ipairs(tcs) do
CM_CreatureAway( tcid, 2 )
end
end)
quest.setScript( 1652, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" then
changeCreature {
tcid = args.tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
end
end)
quest.setScript( 1659, "OnTaskAwaiting", function(args)
local OLD_TC = 10239
local NEW_TC = 2546
local dauer = 3
local intro = 1
local TCpos
TCpos = getPos { tcid = OLD_TC }
createEffect {
position = TCpos,
effect = "FXTYPE_SMOKEBIGWHITE",
duration = intro + dauer,
}
CM_CreatureAway (OLD_TC, intro)
createEffect {
position = TCpos,
effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
delay = dauer,
}
setTimer{
id = 1659,
interval = dauer,
count = 1
}
end)
quest.setScript( 1659, "OnTimer", function(args)
solveQuest (args.id)
end)
quest.setScript( 1662, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" then
changeCreature {
tcid = args.tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
end
end)
quest.setScript( 2700, "OnTaskAwaiting", function(args)
local OLD_TC = 10239
local NEW_TC = 2546
local dauer = 3
local intro = 1
local TCpos
TCpos = getPos { tcid = OLD_TC }
createEffect {
position = TCpos,
effect = "FXTYPE_SMOKEBIGWHITE",
duration = intro + dauer,
}
CM_CreatureAway (OLD_TC, intro,"ANIM_TYPE_WORSHIP")
createEffect {
position = TCpos,
effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
delay = dauer,
}
setTimer{
id = 2700,
interval = dauer,
count = 1
}
end)
quest.setScript( 2700, "OnTimer", function(args)
solveQuest (args.id)
end)
quest.setScript( 1647, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" then
changeCreature {
tcid = args.tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
end
end)
quest.setScript( 1647, "OnWon", function(args)
local tcs = { 10151, 10239, 2543, 2544, 2545, 2546, 2547 }
for i, tcid in ipairs(tcs) do
CM_CreatureAway( tcid, 2 )
end
end)
quest.setScript( 1649, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" then
changeCreature {
tcid = args.tcid,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_TALK",
loopCount = -1,
}
end
end)
quest.setScript( 1649, "OnWon", function(args)
local tcs = { 10151, 10239, 2543, 2544, 2545, 2546, 2547 }
for i, tcid in ipairs(tcs) do
CM_CreatureAway( tcid, 2 )
end
end)
quest.setScript( 3426, "OnTaskFulfilled", function(args)
creatureTeleportsAway (9713,0)
end)
quest.setScript( 3427, "OnTaskFulfilled", function(args)
creatureTeleportsAway (9709,0)
end)
quest.setScript( 1754, "OnTalk", function(args)
if args.tcid == 4664 and args.state == "TASK_FULFILLED" then
addGold(100)
end
end)
quest.setScript( 1754, "OnWon", function(args)
changeCreature {
tcid = 4664,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_EM27",
loopCount = 1,
}
changeCreature {
tcid = 4664,
behaviour = "questCreatures",
delay = 2
}
end)
quest.setScript( 1804, "OnCounter", function(args)
CM_Timed_OnCounter(args)
end)
quest.setScript( 1804, "OnPrecondsFulfilled", function(args)
CM_Timed_OnPrecondsFulfilled(args)
local Orks = {4958,4947,4935}
for i,qc in ipairs(Orks) do
changeCreature {
tcid = qc,
mortality = "IMMORTAL",
}
end
end)
quest.setScript( 1804, "OnSetup", function(args)
CM_AddToRespawn (args.id)
end)
quest.setScript( 1804, "OnTaskAwaiting", function(args)
CM_Timed_OnTaskAwaiting(args)
end)
quest.setScript( 1804, "OnTaskFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
end)
quest.setScript( 1804, "OnTaskNotFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
end)
quest.setScript( 1804, "OnTimer", function(args)
CM_Timed_OnTimer(args)
end)
quest.setScript( 1805, "OnTaskAwaiting", function(args)
solveQuest(1804)
end)
quest.setScript( 1803, "OnCounter", function(args)
CM_Timed_OnCounter(args)
end)
quest.setScript( 1803, "OnSetup", function(args)
CM_AddToRespawn (args.id)
end)
quest.setScript( 1803, "OnTaskAwaiting", function(args)
CM_Timed_OnTaskAwaiting(args)
end)
quest.setScript( 1803, "OnTaskFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
end)
quest.setScript( 1803, "OnTaskNotFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
end)
quest.setScript( 1803, "OnTimer", function(args)
CM_Timed_OnTimer(args)
end)
quest.setScript( 1806, "OnTaskAwaiting", function(args)
solveQuest(1803)
end)
quest.setScript( 1801, "OnCounter", function(args)
CM_Timed_OnCounter(args)
end)
quest.setScript( 1801, "OnSetup", function(args)
CM_AddToRespawn (args.id)
end)
quest.setScript( 1801, "OnTaskAwaiting", function(args)
CM_Timed_OnTaskAwaiting(args)
end)
quest.setScript( 1801, "OnTaskFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
end)
quest.setScript( 1801, "OnTaskNotFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
end)
quest.setScript( 1801, "OnTimer", function(args)
CM_Timed_OnTimer(args)
end)
quest.setScript( 1807, "OnTaskAwaiting", function(args)
solveQuest(1801)
end)
quest.setScript( 1831, "OnWon", function(args)
changeCreature {
tcid = 5053,
role = "ROLE_ATTACKER",
clearAutoTeleporting = true,
}
end)
quest.setScript( 1836, "OnSetup", function(args)
changeCreature {
tcid = 5053,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
role = "ROLE_ATTACKER",
clearAutoTeleporting = true;
}
end)
quest.setScript( 1836, "OnTalk", function(args)
if nil then
changeCreature {
tcid = 5053,
role = "ROLE_ATTACKER",
clearAutoTeleporting = true;
}
end
end)
quest.setScript( 1836, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 5053,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
role = "ROLE_ATTACKER",
clearAutoTeleporting = true;
}
end)
quest.setScript( 1836, "OnTaskFulfilled", function(args)
changeCreature {
tcid= 5053,
clearUnconscious = true,
livesRemaining = 0,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end)
quest.setScript( 1836, "OnUnconscious", function(args)
changeCreature{
tcid= 5053,
livesRemaining = 0,
clearUnconscious= true,
behaviour="questCreatures",
faction="FACTION_INVALID",
delay = 1,
}
end)
quest.setScript( 1836, "OnWon", function(args)
changeCreature {
tcid= 5053,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM22",
mortality = "MORTAL",
role = "ROLE_INVALID",
loopCount = -1,
}
killCreature {
tcid = 5053,
deinitragdoll = false,
delay = 2,
}
end)
quest.setScript( 1794, "OnCounter", function(args)
CM_Timed_OnCounter(args)
end)
quest.setScript( 1794, "OnPrecondsFulfilled", function(args)
CM_Timed_OnPrecondsFulfilled(args)
local Orks = {4869,4824,4776}
for i,qc in ipairs(Orks) do
changeCreature {
tcid = qc,
mortality = "IMMORTAL",
}
end
end)
quest.setScript( 1794, "OnSetup", function(args)
CM_AddToRespawn (args.id)
end)
quest.setScript( 1794, "OnTaskAwaiting", function(args)
CM_Timed_OnTaskAwaiting(args)
end)
quest.setScript( 1794, "OnTaskFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
end)
quest.setScript( 1794, "OnTaskNotFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
end)
quest.setScript( 1794, "OnTimer", function(args)
CM_Timed_OnTimer(args)
end)
quest.setScript( 1795, "OnTaskAwaiting", function(args)
solveQuest(1794)
end)
quest.setScript( 1791, "OnCounter", function(args)
CM_Timed_OnCounter(args)
end)
quest.setScript( 1791, "OnSetup", function(args)
CM_AddToRespawn (args.id)
end)
quest.setScript( 1791, "OnTaskAwaiting", function(args)
CM_Timed_OnTaskAwaiting(args)
end)
quest.setScript( 1791, "OnTaskFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
end)
quest.setScript( 1791, "OnTaskNotFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
end)
quest.setScript( 1791, "OnTimer", function(args)
CM_Timed_OnTimer(args)
end)
quest.setScript( 1793, "OnTaskAwaiting", function(args)
solveQuest(1791)
end)
quest.setScript( 1786, "OnCounter", function(args)
CM_Timed_OnCounter(args)
end)
quest.setScript( 1786, "OnSetup", function(args)
CM_AddToRespawn (args.id)
end)
quest.setScript( 1786, "OnTaskAwaiting", function(args)
CM_Timed_OnTaskAwaiting(args)
end)
quest.setScript( 1786, "OnTaskFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
end)
quest.setScript( 1786, "OnTaskNotFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
end)
quest.setScript( 1786, "OnTimer", function(args)
CM_Timed_OnTimer(args)
end)
quest.setScript( 1788, "OnTaskAwaiting", function(args)
solveQuest(1786)
end)
quest.setScript( 1799, "OnWon", function(args)
changeCreature {
tcid = 4912,
role = "ROLE_ATTACKER",
clearAutoTeleporting = true,
}
end)
quest.setScript( 1828, "OnSetup", function(args)
changeCreature {
tcid = 4912,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
role = "ROLE_ATTACKER",
clearAutoTeleporting = true;
}
end)
quest.setScript( 1828, "OnTalk", function(args)
if nil then
changeCreature {
tcid = 4912,
role = "ROLE_ATTACKER",
clearAutoTeleporting = true;
}
end
end)
quest.setScript( 1828, "OnTaskAwaiting", function(args)
changeCreature {
tcid = 4912,
useUnconscious = true,
livesRemaining = 1,
unconsciousTime = 1,
role = "ROLE_ATTACKER",
clearAutoTeleporting = true;
}
end)
quest.setScript( 1828, "OnTaskFulfilled", function(args)
changeCreature {
tcid= 4912,
clearUnconscious = true,
livesRemaining = 0,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM20",
loopCount = -1,
}
end)
quest.setScript( 1828, "OnUnconscious", function(args)
changeCreature{
tcid= 4912,
livesRemaining = 0,
clearUnconscious= true,
behaviour="questCreatures",
faction="FACTION_INVALID",
delay = 1,
}
end)
quest.setScript( 1828, "OnWon", function(args)
changeCreature {
tcid= 4912,
behaviour = "JOB_QUESTSTAGING",
emotion = "ANIM_TYPE_SM22",
mortality = "MORTAL",
role = "ROLE_INVALID",
loopCount = -1,
}
killCreature {
tcid = 4912,
deinitragdoll = false,
delay = 2,
}
end)
quest.setScript( 3636, "OnCounter", function(args)
CM_Timed_OnCounter(args)
end)
quest.setScript( 3636, "OnSetup", function(args)
CM_AddToRespawn (args.id)
end)
quest.setScript( 3636, "OnTaskAwaiting", function(args)
CM_Timed_OnTaskAwaiting(args)
end)
quest.setScript( 3636, "OnTaskFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
end)
quest.setScript( 3636, "OnTaskNotFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
end)
quest.setScript( 3636, "OnTimer", function(args)
CM_Timed_OnTimer(args)
end)
quest.setScript( 3531, "OnTaskAwaiting", function(args)
looseQuest(3636)
end)
quest.setScript( 3531, "OnTaskFulfilled", function(args)
looseQuest(3636)
end)
quest.setScript( 3531, "OnWon", function(args)
looseQuest(3636)
end)
quest.setScript( 3813, "OnTaskFulfilled", function(args)
solveQuest(3636)
end)
quest.setScript( 3641, "OnTaskAwaiting", function(args)
creatureTeleportPos(9801,1,{ 41, 35, 0, 2223.000, 2623.703, 1864.788, 90.000 })
end)
quest.setScript( 3541, "OnCounter", function(args)
CM_Timed_OnCounter(args)
end)
quest.setScript( 3541, "OnSetup", function(args)
CM_AddToRespawn (args.id)
end)
quest.setScript( 3541, "OnTaskAwaiting", function(args)
CM_Timed_OnTaskAwaiting(args)
creatureTeleportPos(9801,1,{14, 43, 0, 892.301, 1476.000, 4651.761, 330.000})
teleportTeam(args.id,{sx=43, sy=36, sz=0, px=735, py=2330, pz=1800, orientation=135})
end)
quest.setScript( 3541, "OnTaskFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
CM_Timed_OnTaskFulfilled(args)
changeCreature {
tcid = 9801,
behaviour = "questCreatures",
}
end)
quest.setScript( 3541, "OnTaskNotFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
end)
quest.setScript( 3541, "OnTimer", function(args)
CM_Timed_OnTimer(args)
end)
quest.setScript( 3542, "OnCounter", function(args)
CM_Timed_OnCounter(args)
end)
quest.setScript( 3542, "OnSetup", function(args)
CM_AddToRespawn (args.id)
end)
quest.setScript( 3542, "OnTaskAwaiting", function(args)
solveQuest(3541)
solveQuest(947)
CM_Timed_OnTaskAwaiting(args)
creatureTeleportPos(9801,1,{2, 56, 0, 3165.600, 2057.797, 2814.568, 270.000})
teleportTeam(args.id,{sx=10, sy=48, sz=0, px=1785, py=1845, pz=3630, orientation=45});
end)
quest.setScript( 3542, "OnTaskFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
CM_Timed_OnTaskFulfilled(args)
changeCreature {
tcid = 9801,
behaviour = "questCreatures",
}
end)
quest.setScript( 3542, "OnTaskNotFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
end)
quest.setScript( 3542, "OnTimer", function(args)
CM_Timed_OnTimer(args)
end)
quest.setScript( 3543, "OnTaskAwaiting", function(args)
solveQuest(3541)
solveQuest(947)
solveQuest(3542)
solveQuest(948)
creatureTeleportPos(9801,1,{12, 59, 0, 1075.270, 2395.203, 516.905, 120.000})
end)
quest.setScript( 3543, "OnTaskFulfilled", function(args)
changeCreature {
tcid = 9801,
behaviour = "questCreatures",
}
end)
quest.setScript( 3543, "OnWon", function(args)
changeCreature {
tcid = 9801,
gotoPosition = {sx=12, sy=59, sz=0, px=1704.730, py=1008.828, pz=214.261},
behaviour = "JOB_QUESTSTAGING",
followUpBhv = "questCreatures",
delay = 5,
}
end)
quest.setScript( 947, "OnTaskAwaiting", function(args)
solveQuest(3541)
end)
quest.setScript( 948, "OnTaskAwaiting", function(args)
solveQuest(3542)
end)
quest.setScript( 3673, "OnCounter", function(args)
CM_Timed_OnCounter(args)
end)
quest.setScript( 3673, "OnDeath", function(args)
CM_Timed_OnDeath(args)
if quest_3673_dcount == nil then
quest_3673_dcount = 0
end
quest_3673_dcount = quest_3673_dcount + 1
end)
quest.setScript( 3673, "OnPrecondsFulfilled", function(args)
CM_Timed_OnPrecondsFulfilled(args)
quest_3673_dcount = nil
end)
quest.setScript( 3673, "OnSetup", function(args)
CM_AddToRespawn (args.id)
end)
quest.setScript( 3673, "OnTaskAwaiting", function(args)
CM_Timed_OnTaskAwaiting(args)
end)
quest.setScript( 3673, "OnTaskFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
CM_Timed_OnTaskFulfilled(args)
if quest_3673_dcount then
if quest_3673_dcount < 16 then
solveQuest(3709)
else
looseQuest(3709)
end
if quest_3673_dcount >= 16 and quest_3673_dcount < 30 then
solveQuest(3710)
else
looseQuest(3710)
end
if quest_3673_dcount >= 30 then
solveQuest(3711)
else
looseQuest(3711)
end
quest_3673_dcount = nil
end
end)
quest.setScript( 3673, "OnTaskNotFulfilled", function(args)
CM_RemoveFromRespawn (args.id)
end)
quest.setScript( 3673, "OnTimer", function(args)
CM_Timed_OnTimer(args)
if args.count < 2 then
solveQuest(args.id)
end
end)
quest.setScript( 3709, "OnLost", function(args)
solveQuest(3673)
end)
quest.setScript( 3709, "OnWon", function(args)
solveQuest(3673)
end)
quest.setScript( 3710, "OnLost", function(args)
solveQuest(3673)
end)
quest.setScript( 3710, "OnWon", function(args)
solveQuest(3673)
end)
quest.setScript( 3711, "OnLost", function(args)
solveQuest(3673)
end)
quest.setScript( 3711, "OnWon", function(args)
solveQuest(3673)
end)
quest.setScript( 3578, "OnTaskFulfilled", function(args)
solveQuest(3709)
looseQuest(3710)
looseQuest(3711)
end)
quest.setScript( 3586, "OnTaskFulfilled", function(args)
looseQuest(3709)
solveQuest(3710)
looseQuest(3711)
end)
quest.setScript( 3672, "OnTaskFulfilled", function(args)
looseQuest(3709)
looseQuest(3710)
solveQuest(3711)
end)
quest.setScript( 1940, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
return "QUEST_1940_BUTTON_CANCEL", "QUEST_1940_BUTTON_OK"
end
end)
quest.setScript( 1940, "OnWon", function(args)
teleportTeam(1940,{sx=7, sy=14, sz=0, px=806, py=719, pz=258, orientation=120})
end)
quest.setScript( 2027, "OnTaskAwaiting", function(args)
return {sx=7, sy=14, sz=0, px=806, py=719, pz=258, orientation=120}
end)
quest.setScript( 2027, "OnWon", function(args)
return {}
end)
quest.setScript( 2490, "OnWon", function(args)
setWoobEffect {
woid = 1021159739,
effect = "FXTYPE_INVALID",
}
CM_PresetTaskcreatures()
end)
quest.setScript( 3327, "OnWon", function(args)
local teleporter = {1026765039,1026764495}
for id,woid in ipairs(teleporter) do
setWoobEffect {
woid = woid,
effect = "FXTYPE_PORTAL2",
}
end
end)
quest.setScript( 1681, "OnTaskAwaiting", function(args)
local guests = {4425,4426,4427,4428,4429,4430,4431,4432,4433}
for i,id in ipairs(guests) do
doEmote {
tcid = id,
emotion = "ANIM_TYPE_EM30",
loopCount = -1,
delay = math.random(0,4),
}
end
end)
quest.setScript( 3347, "OnWon", function(args)
setWoobEffect {
woid = 1021408183,
effect = "FXTYPE_PORTAL2",
}
setWoobEffect {
woid = 1023338300,
effect = "FXTYPE_PORTAL2",
}
end)
quest.setScript( 3322, "OnWon", function(args)
local doors = {
1013397761, 1013397746, 1013397754 ,1013397738,
1013891954,
1018326189,
1018380619,
1019420597,
}
for i,woid in ipairs(doors) do
setWoobState { state = "WOOB_DOOR_OPEN", woid = woid }
end
local gates = { 1023046854, 1023046905, 1023046923, 1023046947, 1023047062, 1023047090, 1023047109, 1023047127 }
for i,woid in ipairs(gates) do
setWoobState { state = "WOOB_DOOR_OPEN", woid = woid }
setWoobEffect { effect = "FXTYPE_INVALID", woid = woid }
end
setWoobState { state = "WOOB_ANIM_ON", woid = 1017176304 }
setWoobState { state = "WOOB_ANIM_ON", woid = 1018920584 }
setWoobState { state = "WOOB_INVALID", woid = 1021408807 }
setWoobEffect { effect = "FXTYPE_SMOKEBIGWHITE", woid = 1021408807 }
showWaterfall()
local captains = {8861,8864,8866}
for index,tcid in ipairs(captains) do
changeCreature {
tcid = tcid,
behaviour = "JOB_CAPTAIN",
merchantType = "MERCHANT_CAPTAIN",
}
end
unlockShipPortal(3322,3,"SOUTH",args.heroRef)
unlockShipPortal(3322,2,"NORTH",args.heroRef)
unlockShipPortal(3322,1,"SOUTH",args.heroRef)
unlockShipPortal(3322,8,"NORTH",args.heroRef)
unlockShipPortal(3322,7,"SOUTH",args.heroRef)
changeCreature {
tcid = 10447,
merchantType = "MERCHANT_COMBOMASTER",
delay = 1,
}
end)
quest.setScript( 3373, "OnWon", function(args)
local grp = {9356,9359,9357,9360,9358}
for index,tcid in ipairs(grp) do
changeCreature {
tcid = tcid,
addToGroup = 9356,
}
end
end)
quest.setScript( 1990, "OnSetup", function(args)
setWoobEffect {
effect = "FXTYPE_QFX_VERGIFTETER_BRUNNEN",
woid = 1014511916}
end)
quest.setScript( 1612, "OnLost", function(args)
local enemies = {2183,2184,2185,2186,2187}
CM_AttackerAway(enemies)
end)
quest.setScript( 1612, "OnWon", function(args)
local enemies = {2183,2184,2185,2186,2187}
CM_AttackerAway(enemies)
end)
quest.setScript( 1796, "OnLost", function(args)
local enemies = {4873,4874,4878,4880,4881,4886}
CM_AttackerAway(enemies)
end)
quest.setScript( 1796, "OnWon", function(args)
local enemies = {4873,4874,4878,4880,4881,4886}
CM_AttackerAway(enemies)
end)
